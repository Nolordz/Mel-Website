var Param={DateClientFormat:"MM/DD/YYYY",DateServerFormat:"MM/DD/YYYY",DropdownAutoCompStyle:true,FixBGScrollablePnl:"",TipsyDefaultFadeEffect:"true",TipsyDefaultHideDelay:"0",TipsyDefaultOrientation:"s",TipsyDefaultShowDelay:"300",TipsyDefaultUseHTML:""};function DOMChangesQueue(){this.maSetCssQueueNodes=new Array();this.maSetCssQueueProp=new Array();this.maSetCssQueueValues=new Array();this.maResetHeightQueueNodes=new Array()}DOMChangesQueue.moSingleton=null;DOMChangesQueue.GetInstance=function(){if(!DOMChangesQueue.moSingleton){DOMChangesQueue.moSingleton=new DOMChangesQueue()}return DOMChangesQueue.moSingleton};DOMChangesQueue.prototype={QueueSetCss:function(a,b,c){this.maSetCssQueueNodes.push(a);this.maSetCssQueueProp.push(b);this.maSetCssQueueValues.push(c)},QueueResetHeight:function(a){this.maResetHeightQueueNodes.push(a)},ApplyQueue:function(){for(var a=0,b=this.maSetCssQueueNodes.length;a<b;a++){$(this.maSetCssQueueNodes[a]).css(this.maSetCssQueueProp[a],this.maSetCssQueueValues[a])}for(var a=0,b=this.maResetHeightQueueNodes.length;a<b;a++){this.maResetHeightQueueNodes[a].style.height=null}this.maSetCssQueueNodes=new Array();this.maSetCssQueueProp=new Array();this.maSetCssQueueValues=new Array();this.maResetHeightQueueNodes=new Array()}};function FastArray(){this.moHash=new Object();this.moArray=new Array()}FastArray.prototype={Push:function(a){var b=false;if(a==null){}else{if(this.Exists(a)){this.Remove(this.moHash[a])}this.moArray.push(a);this.moHash[a]=this.moArray.length-1;b=true}return b},PushIfNotExists:function(a){var b=false;if(a==null){}else{if(!this.Exists(a)){this.moArray.push(a);this.moHash[a]=this.moArray.length-1;b=true}}return b},Remove:function(a){var b=false;if(!Utils.IsNumber(a)){a=this.moHash[a]}if(a!=null){if(a<this.moArray.length){var c=this.moArray[a];delete this.moHash[c];this.moArray.splice(a,1);this._RepopulateIndex();b=true}}else{}return b},GetSize:function(){return this.moArray.length},Exists:function(a){var b=false;if(a==null){}else{b=(a in this.moHash)}return b},Get:function(a){var b=null;if((!Utils.IsNumber(a))||(a>=this.moArray.length)){}else{b=this.moArray[a]}return b},GetArray:function(){return this.moArray},GetIndex:function(a){var b=false;var c=-1;if(a in this.moHash){c=this.moHash[a]}return c},_RepopulateIndex:function(){this.moHash={};for(var a=0,b=this.moArray.length;a<b;a++){this.moHash[this.moArray[a]]=a}},Sort:function(a){this.moArray.sort(a);this._RepopulateIndex()}};var M3IECompatMode=false;if(window.HTMLElement==null){M3IECompatMode=true;HTMLElement=function(a){this.moDOMNode=a;this.moParent=this.GetParentNode();this.nodeType=this.moDOMNode.nodeType;this.attributes=this.moDOMNode.attributes;this.nodeValue=this.moDOMNode.nodeValue;this.childNodes=this.moDOMNode.childNodes;if(typeof this.moDOMNode.id!="undefined"){this.id=this.moDOMNode.id}};HTMLElement.prototype.GetParentNode=function(){return this.moDOMNode.parentNode};HTMLElement.prototype.GetChildNodes=function(){return this.moDOMNode.childNodes};HTMLElement.prototype.GetNode=function(){return this.moDOMNode};HTMLElement.prototype.setAttribute=function(a,b){this.moDOMNode.setAttribute(a,b)};HTMLElement.prototype.appendChild=function(a){var c=a;var b=this.moDOMNode.innerHTML;this.moDOMNode.innerHTML=b+c};HTMLElement.prototype.HasProperty=function(a){var b=$PI(this.moDOMNode);return b.HasProperty(a)};HTMLElement.prototype.GetProperty=function(a){var b=$PI(this.moDOMNode);return b.GetProperty(a)};HTMLElement.prototype.SetProperty=function(a,b){var c=$PI(this.moDOMNode);return c.SetProperty(a,b)}}else{HTMLElement.prototype.GetParentNode=function(){return this.parentNode};HTMLElement.prototype.GetChildNodes=function(){return this.childNodes};HTMLElement.prototype.GetNode=function(){return this}}HTMLElement.prototype.SetupIFrame=function(){if(this.miOriginalWidth==-1||this.miOriginalHeight==-1){var b=this;var a=function(){b.PollFrameSize()};setInterval(a,100)}};HTMLElement.prototype.PollFrameSize=function(){try{var a=false;if(this.miOriginalWidth==-1){var d=GetWidthIFrame(this);if(d!=this.miWidth){PositionMgr.GetInstance().AddToDirtyXList(this);a=true}}if(this.miOriginalHeight==-1){var c=GetHeightIFrame(this);if(c!=this.miHeight){PositionMgr.GetInstance().AddToDirtyYList(this);a=true}}if(a&&!Matrix3.mbEvent){PositionMgr.GetInstance().CalculatePosition()}}catch(b){}};function $Elt(b,a){return CacheMgr.GetInstance().GetEl(b,a)}function $E(b,a){return $(document.getElementById(b))}function $PI(b,a){return ControlMgr.GetInstance().GetPositionItem(b,a)}function $S(b,c,a){return StyleMgr.GetInstance().GetStyle(b,c,a)}function $SetStyle(a,b,c){StyleMgr.GetInstance().SetStyle(a,b,c)}function $SetCss(a,b){if(typeof a==="string"){a=$E(a)}else{a=$(a)}a.css(b)}function $AddClass(b,a){StyleMgr.GetInstance().AddClass(b,a)}function $RemoveClass(b,a){StyleMgr.GetInstance().RemoveClass(b,a)}function $ReplaceClass(a,c,b){StyleMgr.GetInstance().ReplaceClass(a,c,b)}function $HasClass(b,a){return StyleMgr.GetInstance().HasClass(b,a)}function $SwitchClass(b,a){return StyleMgr.GetInstance().SwitchClass(b,a)}function $Control(a,b){return ControlMgr.GetInstance().GetControl(a,b)}function $AddEvent(a,f,c,d,b){CtrlEventMgr.GetInstance().AddEvent(a,f,c,d,b)}function $AddAction(a,f,c,d,b){CtrlEventMgr.GetInstance().AddAction(a,f,c,d,b)}function $LS(a){console.log("LS"+a)}function $LE(a){console.log("LE"+a)}function CacheMgr(){this.mbIsActive=true;this.Refresh()}CacheMgr.Const={MGR_NAME:"Cache"};CacheMgr.moSingleton=null;CacheMgr.GetInstance=function(){if(!CacheMgr.moSingleton){CacheMgr.moSingleton=new CacheMgr()}return CacheMgr.moSingleton};CacheMgr.prototype={GetEl:function(b,a){var c=null;if(b){if((b.nodeType||b==window)&&!a){c=b}else{if(a&&b.id){b=b.id}if(!(b in this.moCache)||!this.mbIsActive||!this.moCache[b].parentNode){c=document.getElementById(b);if(c){this.moCache[b]=c;Matrix3.RegisterInCache(b,CacheMgr)}}else{c=this.moCache[b]}}}return c},Refresh:function(){this.moCache=new Object()},RefreshNode:function(a){delete (this.moCache[a])},LoadCache:function(){var c=document.getElementsByTagName("div");for(var a=0,b=c.length;a<b;a++){if(c[a].id){this.moCache[c[a].id]=c[a];Matrix3.RegisterInCache(c[a].id,CacheMgr)}}}};function ConstProperties(){}ConstProperties.Const={LABEL_TEXT:"LT",DISABLED:"D",NAME:"N",EVENT:"E",POSTBACK_EVENT:"PostbackEvent",PLEASE_WAIT_MSG:"PleaseWaitMsg",VALUE:"V",TEXT:"Text",OPTION_LIST:"OptionList",FLASH_STYLE:"FS",FLASH_SCROLLABLE:"FlashScrollable",SCROLL_RESTRICTION:"ScrollRestriction",FLASH_ID:"FID",FLASH_PADDING:"FP",FLASH_PADDING_TOP:"FPT",FLASH_PADDING_RIGHT:"FPR",FLASH_PADDING_BOTTOM:"FPB",FLASH_PADDING_LEFT:"FPL",CMS_BLOCK_EDIT:"BCMS",CHILDREN_FLASH_STYLE:"CFS",SOURCE:"Source",TEMP_SOURCE:"TempSource",URL:"URL",IMAGE_HEIGHT:"ImageHeight",IMAGE_WIDTH:"ImageWidth",IMAGE_OVER:"ImageOver",IMAGE_OUT:"ImageOut",IMAGE_ERROR:"ImageError",LAYOUT:"Layout",CONTROL_EVENTS:"CE",CONTROL_ACTIONS:"CA",ETHEREAL:"Ethereal",ZINDEX:"ZIndex",PAGE_TRACKING:"PageTracking",EVENT_TRACKING:"EventTracking",SCROLL_TO_ME:"ScrollToMe",HANDLE:"Handle",FLASHVARS:"FlashVars",STAR:"Star",DESCRIPTION_TEXT:"DescriptionText",WARNING_TEXT:"WarningText",DATE_INTERVAL:"Interval",DATE_PERIOD_OPTIONS:"PeriodOptions",DATE_VALUE_TO:"ValueTo",DATE_USER_FORMAT:"UserFormat",DATE_SERVER_FORMAT:"ServerFormat",DATE_TIME:"DateTime",MAX_RESIZE_WIDTH:"MaxResizeWidth",MIN_RESIZE_WIDTH:"MinResizeWidth",MAX_RESIZE_HEIGHT:"MaxResizeHeight",MIN_RESIZE_HEIGHT:"MinResizeHeight",RESIZE_WIDTH:"ResizeWidth",RESIZE_HEIGHT:"ResizeHeight",AUTOLIMIT_RESIZE_HEIGHT:"AutoLimitResizeHeight",RESIZE_KEEP_RATIO:"ResizeKeepRatio",BLOCK_DRAG:"BlockDrag",DISABLE_MASK:"DisableMask",SCROLLBAR_SKIN:"ScrollBarSkin",IS_MENU:"IsMenu",CROP_WIDTH:"CropWidth",CROP_HEIGHT:"CropHeight",CROP_X:"CropX",CROP_Y:"CropY",CROP_DONT_KEEP_RATIO:"CropDontKeepRatio",CROP_SHOWCONTROLS:"CropShowControls",PROPERTY_FLOAT_SPACING:"FloatSpacing",PROPERTY_FLOAT_V_SPACING:"FloatVSpacing",PROPERTY_FLOAT_H_SPACING:"FloatHSpacing",PROPERTY_FLOAT_DIRECTION:"FloatDirection",PROPERTY_FLOAT_AUTO_SPACING:"FloatAutoSpacing",PROPERTY_VALUE_HORIZONTAL:"horizontal",PROPERTY_VALUE_VERTICAL:"vertical",IN_PLACE_EDIT:"InPlaceEdit",COLUMNS_WIDTH:"CW",COLUMNS_CAN_GROW:"CCG",NEED_SIZE:"SizeNeeded",PROPERTY_INSTANCE_NAME:"InstanceName",SEQUENCE_LOADING_PREV:"SLP",SEQUENCE_LOADING_NEXT:"SLN",SEQUENCE_LOADING_CONTEXTUAL_TABLE:"SLCT"};function ConstValues(){}ConstValues.Const={T_STAR:"*",SUPER_CONTAINER:"SuperContainer",SCREEN:"screen",DEFAULT_LABEL_INPUT_SPACING:5,DEFAULT_AUTOCOMP_LIST_HEIGHT:300,SESSION_ID:"ASPSESSID",STANDARD_INPUT_HEIGHT:40,DISABLED_CONTROL_OPACITY:0.5};function ControlHeap(){this.moArray=[];this.moPresenceHash={}}ControlHeap.prototype={GetSize:function(){return this.moArray.length},Add:function(a){var b=this.moArray.length;var c;var d;if(!this.moPresenceHash.hasOwnProperty(a.GetId())){this.moArray[b]=a;c=b-1;c>>=1;while(b>0&&((this.moArray[b]).miDeep>(this.moArray[c]).miDeep)){d=this.moArray[b];this.moArray[b]=this.moArray[c];this.moArray[c]=d;b=c;c=b-1;c>>=1}this.moPresenceHash[a.GetId()]=a}else{if(this.moPresenceHash[a.GetId()]!=a){this.Remove(this.moPresenceHash[a.GetId()]);this.Add(a)}}},IsControlDirty:function(a){return this.moPresenceHash.hasOwnProperty(a.GetId())},Peek:function(){return this.moArray[0]},Pop:function(){var a=this.moArray[0];if(this.moArray.length>1){this.moArray[0]=this.moArray.pop();this.BubbleUp(0);delete this.moPresenceHash[a.GetId()]}else{if(this.moArray.length==1){this.moArray=new Array();this.moPresenceHash=new Object()}}return a},BubbleUp:function(a){var g=a;var d;var h;var b=false;var j;while(!b){d=g;d<<=1;d++;h=d;h++;var c=(this.moArray[g]).miDeep;var f=0;var i=0;if(this.moArray[d]!=null){f=(this.moArray[d]).miDeep-c}if(this.moArray[h]!=null){i=(this.moArray[h]).miDeep-c}if(f>=i&&f>0){j=this.moArray[g];this.moArray[g]=this.moArray[d];this.moArray[d]=j;g=d}else{if(i>0){j=this.moArray[g];this.moArray[g]=this.moArray[h];this.moArray[h]=j;g=h}else{b=true}}}},Remove:function(a){if(this.moPresenceHash.hasOwnProperty(a.GetId())&&this.moPresenceHash[a.GetId()]==a){var b=0;while(this.moArray[b]!=a){b++}if(b<this.moArray.length-1){this.moArray[b]=this.moArray.pop();this.BubbleUp(b)}else{this.moArray.pop()}delete this.moPresenceHash[a.GetId()]}else{if(Utils.IndexOf(this.moArray,a)!=-1){var b=0;while(this.moArray[b]!=a){b++}if(b<this.moArray.length-1){this.moArray[b]=this.moArray.pop();this.BubbleUp(b)}else{this.moArray.pop()}delete this.moPresenceHash[a.GetId()]}for(var c in this.moPresenceHash){if(this.moPresenceHash[c]==a){delete this.moPresenceHash[c];break}}}}};function ControlMgr(){this.Refresh();this.moReferences=new Object();this.moNewReferences=new Object();this.moRootPositionItem;this.moPropertyQueue=new Array();this.moHash=new Object();this.moOldHash=new Object()}ControlMgr.moSingleton=null;ControlMgr.GetInstance=function(){if(!ControlMgr.moSingleton){ControlMgr.moSingleton=new ControlMgr()}return ControlMgr.moSingleton};ControlMgr.FindControlChildren=function(b,a){var d=b.GetNode().childNodes;var h=new Array();for(var g in d){h.push(d[g])}var i=new Array();while(h.length>0){var f=h[0];h.shift();var c=false;if(f.attributes&&f.attributes["class"]){j=f.attributes["class"].value;if((j.indexOf("ABS")>-1)||(j.indexOf("CT")>-1)||(j.indexOf("PanelLine")>-1)||(j.indexOf("PanelCol")>-1)||(j.indexOf("DefaultPopupClass")>-1)||(j.indexOf("PopupWrapper")>-1)){if(j.indexOf("DefaultPopupClass")!=-1&&f.id==""){f.id="ArtificialID_"+Math.floor(Math.random()*1000000000)}if(f.attributes["data-p"]==null){f.setAttribute("data-p","al,,0,b,,0,,,-1,,,-1,")}i.push(f);c=true}}if(!c){if(f.nodeType==3){if(b.maTextNodes==null){b.maTextNodes=new Array()}b.maTextNodes.push(f)}else{if(f.nodeType==1){var j=$(f).attr("class");if(j&&j=="BG"){b.moBgDiv=f}else{if(f.id==b.GetNode().id+"_img"){b.moLinkedImage=f}}}}var d=f.childNodes;if(d){for(var g in d){h.push(d[g])}}}}return i};ControlMgr.FindRootControl=function(){var a=$Elt("BodyContent").firstChild;while(a.id==""){a=a.firstChild}return a};ControlMgr.Const={MGR_NAME:"Control"};ControlMgr.prototype={GetControl:function(a,b){if(!(a in this.moObjects)){var c=null;switch(b){case AudioCtrl.Const.CONTROL_NAME:c=new AudioCtrl(a);break;case AutoCompletionCtrl.Const.CONTROL_NAME:case"ParameterEnum":c=new AutoCompletionCtrl(a);break;case ButtonCtrl.Const.CONTROL_NAME:c=new ButtonCtrl(a);break;case CheckBoxCtrl.Const.CONTROL_NAME:case"ParameterBool":c=new CheckBoxCtrl(a);break;case CropCtrl.Const.CONTROL_NAME:c=new CropCtrl(a);break;case DateCtrl.Const.CONTROL_NAME:c=new DateCtrl(a);break;case DropDownListCtrl.Const.CONTROL_NAME:c=new DropDownListCtrl(a);break;case FlashCtrl.Const.CONTROL_NAME:c=new FlashCtrl(a);break;case ImageCtrl.Const.CONTROL_NAME:c=new ImageCtrl(a);break;case LabelCtrl.Const.CONTROL_NAME:c=new LabelCtrl(a);break;case MenuCtrl.Const.CONTROL_NAME:c=new MenuCtrl(a);break;case PanelAdvancedCtrl.Const.CONTROL_NAME:case PanelAdvancedCtrl.Const.CONTROL_NAME_SIMPLE:c=new PanelAdvancedCtrl(a);break;case RadioButtonListCtrl.Const.CONTROL_NAME:c=new RadioButtonListCtrl(a);break;case TextAreaCtrl.Const.CONTROL_NAME:case"ParameterStr":c=new TextAreaCtrl(a);break;case TextBoxCtrl.Const.CONTROL_NAME:c=new TextBoxCtrl(a);break;case TextBoxPasswordCtrl.Const.CONTROL_NAME:c=new TextBoxPasswordCtrl(a);break;case HyperlinkCtrl.Const.CONTROL_NAME:c=new HyperlinkCtrl(a);break;case PanelTableCtrl.Const.CONTROL_NAME:c=new PanelTableCtrl(a);break;case UploadCtrl.Const.CONTROL_NAME:c=new UploadCtrl(a);break;case UploadFieldCtrl.Const.CONTROL_NAME:c=new UploadFieldCtrl(a);break;case Popup.Const.CONTROL_NAME:c=new Popup($Elt(a),true);break;case MapCtrl.Const.CONTROL_NAME:c=new MapCtrl(a);break;case MapMarkerCtrl.Const.CONTROL_NAME:c=new MapMarkerCtrl(a);break;case TimeCtrl.Const.CONTROL_NAME:c=new TimeCtrl(a);break;case HiddenCtrl.Const.CONTROL_NAME:c=new HiddenCtrl(a);break;case VideoCtrl.Const.CONTROL_NAME:c=new VideoCtrl(a);break;case PanelColCtrl.Const.CONTROL_NAME:c=new PanelColCtrl(a);break;case SlideshowCtrl.Const.CONTROL_NAME:c=new SlideshowCtrl(a);break;default:throw"Cannot find the control "+b+" ("+a+")"}this.moObjects[a]=c;Matrix3.RegisterInCache(a,ControlMgr)}return this.moObjects[a]},Refresh:function(){this.moObjects=new Object()},RefreshNode:function(a){if(this.moObjects[a]){var b=this.moObjects[a];if(b.moActiveEffect){b.moActiveEffect.stop(false)}delete (this.moObjects[a]);if(b.Event_ShowTimers){for(var d in b.Event_ShowTimers){clearTimeout(b.Event_ShowTimers[d])}}}var c=this.moHash[a];if(c){c.CleanDependencies();this.RemovePositionItem(a)}},CreateControl:function(b,c,a){var k;if(a==null){a=0}var r;var j=false;if(b==null){k=ControlMgr.FindRootControl();j=true}else{k=b}var m=$(k);var q;if(m.attr("data-r")){q=JSON.parse(m.attr("data-r"))}var i=new Array();var d=new Array();var t=",";var x=PositionItem.GetType($(k).attr("class"));var p="";if(m.hasClass("ABS")){var n=ControlMgr.GetInstance().GetPositionItem(k.id);if(n!=null){p=m.attr("data-p",$(n.GetNode()).attr("data-p"));if(!q){q=n.moProperties}else{for(var w in n.moProperties){if(!q.hasOwnProperty(w)){q[w]=n.moProperties[w]}}}}}if(!m.attr("data-p")){m.attr("data-p","al,,0,b,,0,,,-1,,,-1,")}else{p=m.attr("data-p")}var u=p.split(t);if(M3IECompatMode){k=new HTMLElement(k)}var f=ControlMgr.FindControlChildren(k,a);if(j){this.moRootPositionItem=k}k.Setup(k.GetNode(),x,u[0],u[2],u[3],u[5],u[8],u[11],u[1],u[4],u[6],u[9],u[7],u[10],q);this.moPropertyQueue.push(k);if(c!=null){k.SetDeep(c.miDeep+1);k.moParent=c}else{k.SetDeep(a)}if(f.length>0){i.push(k);d.push(f)}if(c!=null){c.GetContainerForChildren().push(k)}this.AddPositionItem(k);r=k;while(i.length>0){var o=i.shift();var h=d.shift();for(var g in h){g=h[g];q=null;var v=$(g).attr("class");var x=PositionItem.GetType(v);if(g!=null){var p="";var l=$(g);if(l.attr("data-p")){p=l.attr("data-p")}var u=p.split(t);if(l.attr("data-r")){q=JSON.parse(l.attr("data-r"))}if(M3IECompatMode){g=new HTMLElement(g)}f=ControlMgr.FindControlChildren(g,o.miDeep+1);g.Setup(g.GetNode(),x,u[0],u[2],u[3],u[5],u[8],u[11],u[1],u[4],u[6],u[9],u[7],u[10],q,o);if(v.indexOf("PopupContentClass")>-1){g.mbNoPaddingCache=true}this.moPropertyQueue.push(g);g.miDeep=o.miDeep+1;if(f.length>0){i.push(g);d.push(f)}o.GetContainerForChildren().push(g);this.AddPositionItem(g)}}}return r},ApplyPropertyQueue:function(){for(var a=0,b=this.moPropertyQueue.length;a<b;a++){this.moPropertyQueue[a].ApplyProperties()}this.moPropertyQueue=new Array()},AddReference:function(b,a){if(b!=null){if(!this.moNewReferences.hasOwnProperty(b)&&this.moReferences.hasOwnProperty(b)&&b!=ConstValues.Const.SUPER_CONTAINER){var c=this.moReferences[b]}this.moReferences[b]=a;this.moNewReferences[b]=a}},RemoveReference:function(a){if(!this.moNewReferences.hasOwnProperty(a)){delete this.moReferences[a]}},Get:function(a){return this.moObjects[a]},GetReference:function(a){return this.moReferences[a]},GetAllPositionItems:function(){return this.moHash},GetAllControls:function(){return this.moObjects},AddPositionItem:function(a){var c=a.GetId();if(this.moHash.hasOwnProperty(c)){this.moOldHash[c]=this.moHash[c]}this.moHash[c]=a;if(a.msCtrlType==PositionItem.Const.CONTROL_TYPE_PANEL){var b=a.GetAlternativeID();if(b!=null){if(this.moHash.hasOwnProperty(b)){this.moOldHash[b]=this.moHash[b]}this.moHash[b]=a}}},GetRootPositionItem:function(){return this.moRootPositionItem},GetPositionItem:function(b,a){var c=null;if(b!=null){if(a){c=this.moOldHash[b]}else{c=this.moHash[b]}}return c},RemovePositionItem:function(a){var d=a;if(a.GetId){d=a.GetId()}if(!(d in this.moOldHash)){delete this.moHash[d];if(a.GetProperty){var c=a.GetProperty(ConstProperties.Const.FLASH_ID);if(c!=null){this.RemoveReference(c)}}}if(a.msCtrlType==PositionItem.Const.CONTROL_TYPE_PANEL&&a.GetAlternativeID){var b=a.GetAlternativeID();if(b!=null){if(!(b in this.moOldHash)){delete this.moHash[b]}}}},ClearOldInstance:function(){this.moOldHash=new Object();this.moNewReferences=new Object()},ReInit:function(){ControlMgr.moSingleton=new ControlMgr()}};function ControlsUtils(){this.moKeywords=new RegExp("if|else|Math.min|Math.max|Math.floor|Math.round|return|[&|()+*/<>=,;{}-]","g")}ControlsUtils.moSingleton=null;ControlsUtils.GetInstance=function(){if(!ControlsUtils.moSingleton){ControlsUtils.moSingleton=new ControlsUtils()}return ControlsUtils.moSingleton};ControlsUtils.prototype={GetAdvencedPosKeywordsRegex:function(){return this.moKeywords}};function CtrlEventMgr(){this.moBroadcastToChannel=new Object();this.moChannelToBroadcast=new Object();this.moObjectReference=new Object();var a=this;$(window).bind("storage",function(b){if(b.originalEvent&&b.originalEvent.key=="SiteWideBroadcast"){a.Broadcast(b.originalEvent.newValue,"site-wide",true)}})}CtrlEventMgr.moSingleton=null;CtrlEventMgr.GetInstance=function(){if(!CtrlEventMgr.moSingleton){CtrlEventMgr.moSingleton=new CtrlEventMgr()}return CtrlEventMgr.moSingleton};CtrlEventMgr.Const={ALL:"*",SUFFIX_SETUP:"_Setup",MGR_NAME:"CtrlEvent"};CtrlEventMgr.prototype={AddEvent:function(a,f,c,d,b){if(a[f+CtrlEventMgr.Const.SUFFIX_SETUP]){a[f+CtrlEventMgr.Const.SUFFIX_SETUP].call(a,b)}if(a[f] instanceof CtrlEvent){a[f].Subscribe(function(){CtrlEventMgr.GetInstance().Broadcast(c,d)})}else{if(a[f] instanceof Array){a[f][a[f].length-1].Subscribe(function(){CtrlEventMgr.GetInstance().Broadcast(c,d)})}}},AddAction:function(a,f,c,d,b){var g=function(){if(a[f]){a[f](b)}};if(!(this.moObjectReference[a.msID] instanceof Array)){this.moObjectReference[a.msID]=new Array()}if(a[f+CtrlEventMgr.Const.SUFFIX_SETUP]){a[f+CtrlEventMgr.Const.SUFFIX_SETUP](b)}if(!this.moBroadcastToChannel[c]){this.moBroadcastToChannel[c]=new Object()}if(!this.moBroadcastToChannel[c][d]){this.moBroadcastToChannel[c][d]=new Array()}this.moBroadcastToChannel[c][d].push(g);this.moObjectReference[a.msID].push(new Array(c,d,this.moBroadcastToChannel[c][d].length-1));Matrix3.RegisterInCache(a.msID,CtrlEventMgr);if(!this.moChannelToBroadcast[d]){this.moChannelToBroadcast[d]=new Object()}if(!this.moChannelToBroadcast[d][c]){this.moChannelToBroadcast[d][c]=new Array()}this.moChannelToBroadcast[d][c].push(g)},Broadcast:function(b,c,a){if(!a&&c=="site-wide"){localStorage.setItem("SiteWideBroadcast",b);localStorage.setItem("SiteWideBroadcast","")}else{if(CtrlEventMgr.Const.ALL in this.moBroadcastToChannel){var h=this.moBroadcastToChannel[CtrlEventMgr.Const.ALL];for(var k in h){var g=this.moBroadcastToChannel[b][k];if(g instanceof Array){for(var d=0,f=g.length;d<f;d++){if(g[d]){g[d]()}}}}}if(CtrlEventMgr.Const.ALL in this.moChannelToBroadcast){var h=this.moChannelToBroadcast[CtrlEventMgr.Const.ALL];for(var j in h){var g=this.moChannelToBroadcast[c][j];if(g instanceof Array){for(var d=0,f=g.length;d<f;d++){if(g[d]){g[d]()}}}}}if(this.moBroadcastToChannel[b]&&this.moBroadcastToChannel[b][c]){var g=this.moBroadcastToChannel[b][c];if(g instanceof Array){for(var d=0,f=g.length;d<f;d++){if(g[d]){g[d]()}}}}}},RefreshNode:function(a){var d=this.moObjectReference[a];for(var b=0,c=d.length;b<c;b++){this.moChannelToBroadcast[d[b][1]][d[b][0]][d[b][2]]=null;this.moBroadcastToChannel[d[b][0]][d[b][1]][d[b][2]]=null}}};function CtrlEvent(b,a){this.moObject=b;this.moActivatedFunc=a;this.moFunc=new Array()}CtrlEvent.prototype={Subscribe:function(a){if(!this.mbActivatedEvt){if(this.moActivatedFunc){this.moActivatedFunc.call(this.moObject)}this.mbActivatedEvt=true}this.moFunc.push(a)},Fire:function(){for(var a=0,b=this.moFunc.length;a<b;a++){this.moFunc[a]()}}};function Dependency(f,d,c,b,g,a){this.moSource=f;this.moDest=d;this.miType=c;this.miSubType=b;this.miAlignment=Dependency.StringAlignmentToInt(g);this.miAxis=a;if(this.miAxis==Dependency.Const.AXIS_X){this.moSource.AddXDependent(this);this.moDest.AddXSource(this)}else{this.moSource.AddYDependent(this);this.moDest.AddYSource(this)}}Dependency.Const={TYPE_PARENT:0,TYPE_PREVIOUS:1,TYPE_REFERENCE:2,TYPE_SCREEN:3,SUBTYPE_NONE:-1,SUBTYPE_POS:0,SUBTYPE_SIZE:1,ALIGNMENT_NONE:-1,ALIGNMENT_TOP:0,ALIGNMENT_ALIGN_TOP:1,ALIGNMENT_CENTER:2,ALIGNMENT_ALIGN_BOTTOM:3,ALIGNMENT_BOTTOM:4,ALIGNMENT_LEFT:5,ALIGNMENT_ALIGN_LEFT:6,ALIGNMENT_ALIGN_RIGHT:7,ALIGNMENT_RIGHT:8,ALIGNMENT_INTERNAL:9,AXIS_X:0,AXIS_Y:1};Dependency.StringAlignmentToInt=function(a){var b=Dependency.ConstALIGNMENT_NONE;if(Utils.IsStringFilled(a)){switch(a){case PositionItem.Const.XTYPE_TO_LEFT:b=Dependency.Const.ALIGNMENT_LEFT;break;case PositionItem.Const.XTYPE_ALIGN_LEFT:b=Dependency.Const.ALIGNMENT_ALIGN_LEFT;break;case PositionItem.Const.XTYPE_CENTER:b=Dependency.Const.ALIGNMENT_CENTER;break;case PositionItem.Const.XTYPE_TO_RIGHT:b=Dependency.Const.ALIGNMENT_RIGHT;break;case PositionItem.Const.XTYPE_ALIGN_RIGHT:b=Dependency.Const.ALIGNMENT_ALIGN_RIGHT;break;case PositionItem.Const.YTYPE_TO_TOP:b=Dependency.Const.ALIGNMENT_TOP;break;case PositionItem.Const.YTYPE_ALIGN_TOP:b=Dependency.Const.ALIGNMENT_ALIGN_TOP;break;case PositionItem.Const.YTYPE_CENTER:b=Dependency.Const.ALIGNMENT_CENTER;break;case PositionItem.Const.YTYPE_TO_BOTTOM:b=Dependency.Const.ALIGNMENT_BOTTOM;break;case PositionItem.Const.YTYPE_ALIGN_BOTTOM:b=Dependency.Const.ALIGNMENT_ALIGN_BOTTOM;break;case PositionItem.Const.WIDTHTYPE_INTERNAL:b=Dependency.Const.ALIGNMENT_INTERNAL;break;case PositionItem.Const.HEIGHTTYPE_INTERNAL:b=Dependency.Const.ALIGNMENT_INTERNAL;break;default:b=Dependency.Const.ALIGNMENT_NONE;break}}return b};Dependency.prototype={ReplaceSource:function(b,a){if(a==null){a=true}if(this.miAxis==Dependency.Const.AXIS_X){if(a){this.moSource.RemoveXDependent(this)}this.moSource=b;this.moSource.AddXDependent(this)}else{if(a){this.moSource.RemoveYDependent(this)}this.moSource=b;this.moSource.AddYDependent(this)}},ReplaceDestination:function(b,a){if(a==null){a=true}if(this.miAxis==Dependency.Const.AXIS_X){if(a){this.moDest.RemoveXSource(this)}this.moDest=b;this.moDest.AddXSource(this)}else{if(a){this.moDest.RemoveYSource(this)}this.moDest=b;this.moDest.AddYSource(this)}},Delete:function(b,a){if(b==null){b=true}if(a==null){a=true}if(this.miAxis==Dependency.Const.AXIS_X){if(b){this.moSource.RemoveXDependent(this)}if(a){this.moDest.RemoveXSource(this)}}else{if(b){this.moSource.RemoveYDependent(this)}if(a){this.moDest.RemoveYSource(this)}}},GetSource:function(){return this.moSource},GetDestination:function(){return this.moDest},GetType:function(){return this.miType},GetSubType:function(){return this.miSubType},GetAlignment:function(){return this.miAlignment},GetAxis:function(){return this.miAxis},toString:function(){var a=new StringBuilder();a.append(this.moSource.GetId()+" to "+this.moDest.GetId()+"   type "+this.miType);return a.toString()}};function HistoryMgr(){}HistoryMgr.moInstance=null;HistoryMgr.GetInstance=function(){if(!HistoryMgr.moInstance){HistoryMgr.moInstance=new HistoryMgr()}return HistoryMgr.moInstance};HistoryMgr.prototype={Init:function(){this.msCurrentH=this.msOriginH=Matrix3.msURL;window.onhashchange=function(){HistoryMgr.GetInstance().HashChanged(window.location.hash)}},HashChanged:function(a){var b=false;if(!a||a=="#/"||a=="#/."){a=this.msOriginH;b=true}else{if(a.substring(0,8).toLowerCase()=="#anchor_"){var c=a.substring(1);$PI($('[name="'+c+'"]')[0].id).ScrollToMe(true)}else{a=a.substring(2);b=true}}if(a!=this.msCurrentH&&b==true){this.msCurrentH=a;Matrix3.LoadFullPage(HistoryMgr.GetURLFromH(a))}},UpdateHash:function(a){if(!a||a==this.msOriginH){a=""}this.msCurrentH=a;window.location.hash="#/"+a},GetCurrentURL:function(){if(this.msCurrentH){return HistoryMgr.GetURLFromH(this.msCurrentH)}else{return Matrix3.msURL}}};HistoryMgr.GetBaseURL=function(){if("baseURI" in document){return document.baseURI}else{var a=document.getElementsByTagName("base");if(a.length>0){return a[0].href}else{return window.location.href}}};HistoryMgr.GetURLFromH=function(a){var c;var b=a.substring(0,7);if(b!="http://"&&b!="https:/"){c=HistoryMgr.GetBaseURL();if(c.substring(0,7)=="http://"){c+="C.aspx?VP3="+a}else{c+="CS.aspx?VP3="+a}}else{c=a}return c};ImageMgr.ControlImageLoaded=function(b,a){delete ImageMgr.GetInstance().maLoadingQueue[a.GetId()];ImageMgr.GetInstance().miCpt--;var f=a.moLinkedImage;if(f!=null){var d=f.width;var c=f.height;if(f.miImgW!=d||f.miImgH!=c){f.miImgW=d;f.miImgH=c;if(a.GetOriginalWidth()==-1||a.GetOriginalHeight()==-1){PositionMgr.GetInstance().AddToDirtyXList(a);PositionMgr.GetInstance().AddToDirtyYList(a);a.ForceHasChanged();if(!ImageMgr.GetInstance().miTimeout){if(ImageMgr.GetInstance().miCpt>0){ImageMgr.GetInstance().miTimeout=setTimeout(function(){ImageMgr.LaunchRepositioning()},500)}else{ImageMgr.GetInstance().miTimeout=setTimeout(function(){ImageMgr.LaunchRepositioning()},10)}}else{if(ImageMgr.GetInstance().miCpt==0){clearTimeout(ImageMgr.GetInstance().miTimeout);ImageMgr.GetInstance().miTimeout=setTimeout(function(){ImageMgr.LaunchRepositioning()},10)}}}else{if(a.moProperties&&a.moProperties.hasOwnProperty(AutoScaleProperties.Const.PROPERTY_POLICY)){AutoScaleProperties.Apply(a);if(!Matrix3.mbEvent){DOMChangesQueue.GetInstance().ApplyQueue()}}}}}};ImageMgr.LaunchRepositioning=function(){ImageMgr.GetInstance().miTimeout=null;if(!Matrix3.mbEvent){PositionMgr.GetInstance().CalculatePosition()}};function ImageMgr(){this.maLoadingQueue=new Object();this.miCpt=0;this.miTimeout}ImageMgr.Const={MGR_NAME:"Image"};ImageMgr.moSingleton=null;ImageMgr.GetInstance=function(){if(!ImageMgr.moSingleton){ImageMgr.moSingleton=new ImageMgr()}return ImageMgr.moSingleton};ImageMgr.prototype={Push:function(a,b){var c=b.HasProperty(AutoScaleProperties.Const.PROPERTY_POLICY);var f=b.HasProperty("DocumentWidth");var d=(b.GetOriginalWidth()!=-1&&b.GetOriginalHeight()!=-1);if(((c&&!f)||!d)&&!this.maLoadingQueue.hasOwnProperty(b.GetId())){this.maLoadingQueue[b.GetId()]=true;this.miCpt++;Utils.AddEvent(a,"load",ImageMgr.ControlImageLoaded,this,b)}}};function PositionItem(){this.msId;this.msAdvancedX;this.masXTypes;this.miXOff;this.miOriginalXOff;this.msReferenceX;this.msAdvancedY;this.masYTypes;this.miYOff;this.miOriginalYOff;this.msReferenceY;this.msAdvancedWidth;this.msWidthType;this.miWidth;this.msWidthReference;this.miOriginalWidth;this.msAdvancedHeight;this.msHeightType;this.miHeight;this.msHeightReference;this.miOriginalHeight;this.mbEthereal;this.miPositionBroadcastMarker;this.moProperties;this.miDeep=0;this.masStyles;this.moXDependents;this.moXSources;this.moYDependents;this.moYSources;this.moQuickXSource;this.moQuickWSource;this.moQuickYSource;this.moQuickHSource;this.mbUpdateStyle;this.mbXMustBeCalculated;this.mbYMustBeCalculated;this.moActivatedProperties;this.moSuperContainer;this.msCtrlType;this.miPrePosX;this.miPrePosY;this.moBgDiv;this.maTextNodes;this.maiActualColWidth=new Array();this.maiColWidth=new Array();this.mabCanGrow=new Array();this.mbCMSBlockEdit=false}PositionItem.Const={PROPERTY_ADVANCED_X:"aFx",PROPERTY_ADVANCED_Y:"aFy",PROPERTY_ADVANCED_WIDTH:"aFw",PROPERTY_ADVANCED_HEIGHT:"aFh",KEY_PREVIOUS:"_PREVIOUS_",KEY_DEFAULT:"_DEFAULT_",XTYPE_TO_RIGHT:"r",XTYPE_TO_LEFT:"l",XTYPE_ALIGN_RIGHT:"ar",XTYPE_ALIGN_LEFT:"al",XTYPE_CENTER:"c",TYPE_WIDTH:"width",TYPE_HEIGHT:"height",YTYPE_TO_TOP:"t",YTYPE_TO_BOTTOM:"b",YTYPE_ALIGN_TOP:"at",YTYPE_ALIGN_BOTTOM:"ab",YTYPE_CENTER:"c",WIDTHTYPE_INTERNAL:"i",HEIGHTTYPE_INTERNAL:"i",L_FLOAT_LAYOUT:"float",REF_PARENT:"_parent",REF_SCREEN:"screen",REF_ANCESTOR_PREFIX:"_ancestor:",DEFAULT_SCROLLBAR_SKIN:"ScrollBar_Default",POSITIONING_LOOP_THRESHOLD:500,CONTROL_TYPE_AJAXBUTTON_BUY:"AjaxButtonBuy",CONTROL_TYPE_ANCHOR:"Anchor",CONTROL_TYPE_AUDIO:"Audio",CONTROL_TYPE_AUTOCOMPLETION:"AutoCompletion",CONTROL_TYPE_BUTTON:"Button",CONTROL_TYPE_CHECKBOX:"CheckBox",CONTROL_TYPE_CROP:"Crop",CONTROL_TYPE_DATE:"Date",CONTROL_TYPE_DATE_TIME:"DateTime",CONTROL_TYPE_DATE_INTERVAL:"DateInterval",CONTROL_TYPE_DATE_INTERVAL_TIME:"DateIntervalTime",CONTROL_TYPE_DROPDOWNLIST:"DropDownList",CONTROL_TYPE_FLASH:"Flash",CONTROL_TYPE_FLOAT_PANEL:"FloatPanel",CONTROL_TYPE_FREE_HTML:"FreeHTML",CONTROL_TYPE_HIDDEN:"Hidden",CONTROL_TYPE_HYPERLINK:"Hyperlink",CONTROL_TYPE_IFRAME:"IFrame",CONTROL_TYPE_IMAGE:"Image",CONTROL_TYPE_MEDIA:"Media",CONTROL_TYPE_LABEL:"Label",CONTROL_TYPE_LABELBO:"LabelBO",CONTROL_TYPE_PANEL:"Panel",CONTROL_TYPE_POPUP:"Popup",CONTROL_TYPE_PANEL_TABLE:"PanelTable",CONTROL_TYPE_PANEL_COL:"PanelCol",CONTROL_TYPE_PANEL_LINE:"PanelLine",CONTROL_TYPE_PARAMETER_BOOL:"ParameterBool",CONTROL_TYPE_PARAMETER_ENUM:"ParameterEnum",CONTROL_TYPE_PARAMETER_NUM:"ParameterNum",CONTROL_TYPE_PARAMETER_STR:"ParameterStr",CONTROL_TYPE_PROGRESS_BAR:"ProgressBar",CONTROL_TYPE_RADIOBUTTON_LIST:"RadioButtonList",CONTROL_TYPE_SLIDESHOW:"Slideshow",CONTROL_TYPE_SECTION_HEADER:"SectionHeader",CONTROL_TYPE_TEXTAREA:"TextArea",CONTROL_TYPE_TEXTBOX:"TextBox",CONTROL_TYPE_TEXTBOXPASSWORD:"TextBoxPassword",CONTROL_TYPE_TIMER:"Timer",CONTROL_TYPE_TIME:"Time",CONTROL_TYPE_MENU:"Menu",CONTROL_TYPE_MENU_ITEM:"MenuItem",CONTROL_TYPE_UPLOAD:"Upload",CONTROL_TYPE_UPLOAD_FIELD:"UploadField",CONTROL_TYPE_VIDEO:"Video",CONTROL_TYPE_YOUTUBE:"Youtube"};PositionItem.GetType=function(a,b){var d;var c=a=="CT"||a.substring(0,3)=="CT ";if(!c&&(a=="ABS"||a.substring(0,4)=="ABS ")){d=PositionItem.Const.CONTROL_TYPE_PANEL}else{if(c||(a.indexOf("PanelCol")>=0)||(a.indexOf("PanelLine")>=0)){if(c){a=a.substring(3).split(" ")[0]}else{a=a.split(" ")[0]}switch(a){case"Label":d=PositionItem.Const.CONTROL_TYPE_LABEL;break;case"Button":d=PositionItem.Const.CONTROL_TYPE_BUTTON;break;case"Panel":d=PositionItem.Const.CONTROL_TYPE_PANEL;break;case"TextBox":d=PositionItem.Const.CONTROL_TYPE_TEXTBOX;break;case"AutoComp":d=PositionItem.Const.CONTROL_TYPE_AUTOCOMPLETION;break;case"PanelFloat":d=PositionItem.Const.CONTROL_TYPE_FLOAT_PANEL;break;case"TextArea":d=PositionItem.Const.CONTROL_TYPE_TEXTAREA;break;case"Hyperlink":d=PositionItem.Const.CONTROL_TYPE_HYPERLINK;break;case"TextArea":d=PositionItem.Const.CONTROL_TYPE_TEXTAREA;break;case"TextBoxPassword":d=PositionItem.Const.CONTROL_TYPE_TEXTBOXPASSWORD;break;case"DropDownList":d=PositionItem.Const.CONTROL_TYPE_DROPDOWNLIST;break;case"Image":d=PositionItem.Const.CONTROL_TYPE_IMAGE;break;case"AutoComp":d=PositionItem.Const.CONTROL_TYPE_AUTOCOMPLETION;break;case"PanelCol":d=PositionItem.Const.CONTROL_TYPE_PANEL_COL;break;case"PanelLine":d=PositionItem.Const.CONTROL_TYPE_PANEL_LINE;break;case"RadioButtonList":d=PositionItem.Const.CONTROL_TYPE_RADIOBUTTON_LIST;break;case"Slideshow":d=PositionItem.Const.CONTROL_TYPE_SLIDESHOW;break;case"CheckBox":d=PositionItem.Const.CONTROL_TYPE_CHECKBOX;break;case"Date":d=PositionItem.Const.CONTROL_TYPE_DATE;break;case"Anchor":d=PositionItem.Const.CONTROL_TYPE_ANCHOR;break;case"IFrame":d=PositionItem.Const.CONTROL_TYPE_IFRAME;break;case"PanelTable":d=PositionItem.Const.CONTROL_TYPE_PANEL_TABLE;break;case"Upload":d=PositionItem.Const.CONTROL_TYPE_UPLOAD;break;default:d=a;break}}else{if(a.indexOf("DefaultPopupClass")>-1||a.indexOf("PopupContentClass")>-1){d=PositionItem.Const.CONTROL_TYPE_PANEL}else{if(a.indexOf("VForm_PopupWrapper")>-1){d=PositionItem.Const.CONTROL_TYPE_POPUP}}}}return d};PositionItem.TransformStringArrayToInt=function(a){for(var b=0,c=a.length;b<c;b++){a[b]=parseInt(a[b])}};PositionItem.TranslateAdvancedPosExpression=function(a){var b=a.replace(/return /g,"");b=b.replace(/min\(/g,"Math.min(");b=b.replace(/max\(/g,"Math.max(");b=b.replace(/floor\(/g,"Math.floor(");b=b.replace(/round\(/g,"Math.round(");return b};HTMLElement.prototype.Setup=function Setup(_oDiv,_sCtrlType,_sXType,_sXOff,_sYType,_sYOff,_sWidth,_sHeight,_sReferenceX,_sReferenceY,_sWidthType,_sHeightType,_sWidthReference,_sHeightReference,_oProperties,_oParent){this.moContainerForChildrens=new Array();this.x=0;this.y=0;this.miCachedPaddingLeft=null;this.miCachedPaddingRight=null;this.miCachedPaddingTop=null;this.miCachedPaddingBottom=null;this.msId=_oDiv.id;if(_oDiv.attributes!=null&&_oDiv.attributes["data-pid"]!=null){this.msId=_oDiv.attributes["data-pid"].value}this.msCtrlType=_sCtrlType;this.moProperties=_oProperties;this.moParent=_oParent;this.msAdvancedX=this.GetProperty(PositionItem.Const.PROPERTY_ADVANCED_X);this.msAdvancedY=this.GetProperty(PositionItem.Const.PROPERTY_ADVANCED_Y);this.msAdvancedWidth=this.GetProperty(PositionItem.Const.PROPERTY_ADVANCED_WIDTH);this.msAdvancedHeight=this.GetProperty(PositionItem.Const.PROPERTY_ADVANCED_HEIGHT);if(this.msAdvancedX!=null){this.msAdvancedX=PositionItem.TranslateAdvancedPosExpression(this.msAdvancedX)}if(this.msAdvancedY!=null){this.msAdvancedY=PositionItem.TranslateAdvancedPosExpression(this.msAdvancedY)}if(this.msAdvancedWidth!=null){this.msAdvancedWidth=PositionItem.TranslateAdvancedPosExpression(this.msAdvancedWidth)}if(this.msAdvancedHeight!=null){this.msAdvancedHeight=PositionItem.TranslateAdvancedPosExpression(this.msAdvancedHeight)}this.miXOff=parseInt(_sXOff);this.msReferenceX=new Array();this.masXTypes=new Array();if(Utils.IsStringFilled(_sReferenceX)&&!Utils.IsStringFilled(this.msAdvancedX)){this.msReferenceX.push(_sReferenceX)}if(Utils.IsStringFilled(_sXType)&&!Utils.IsStringFilled(this.msAdvancedX)){this.masXTypes.push(_sXType)}this.miYOff=parseInt(_sYOff);this.msReferenceY=new Array();this.masYTypes=new Array();if(Utils.IsStringFilled(_sReferenceY)&&!Utils.IsStringFilled(this.msAdvancedY)){this.msReferenceY.push(_sReferenceY)}if(Utils.IsStringFilled(_sYType)&&!Utils.IsStringFilled(this.msAdvancedY)){this.masYTypes.push(_sYType)}this.miWidth=parseInt(_sWidth);this.msWidthReference=new Array();this.msWidthType=new Array();if(Utils.IsStringFilled(_sWidthReference)&&!Utils.IsStringFilled(this.msAdvancedWidth)){this.msWidthReference.push(_sWidthReference)}if(Utils.IsStringFilled(_sWidthType)&&!Utils.IsStringFilled(this.msAdvancedWidth)){this.msWidthType.push(_sWidthType)}this.miHeight=parseInt(_sHeight);this.msHeightReference=new Array();this.msHeightType=new Array();if(Utils.IsStringFilled(_sHeightReference)&&!Utils.IsStringFilled(this.msAdvancedHeight)){this.msHeightReference.push(_sHeightReference)}if(Utils.IsStringFilled(_sHeightType)&&!Utils.IsStringFilled(this.msAdvancedHeight)){this.msHeightType.push(_sHeightType)}if(isNaN(this.miWidth)){this.miWidth=0}if(isNaN(this.miHeight)){this.miHeight=0}if(isNaN(this.miXOff)){this.miXOff=0}if(isNaN(this.miYOff)){this.miYOff=0}this.miOriginalWidth=this.miWidth;this.miOriginalHeight=this.miHeight;this.miOriginalXOff=this.miXOff;this.miOriginalYOff=this.miYOff;if(this.miWidth<0){this.miWidth=0}if(this.miHeight<0){this.miHeight=0}if(_oProperties!=null){if(_oProperties[ConstProperties.Const.COLUMNS_WIDTH]){this.maiColWidth=_oProperties[ConstProperties.Const.COLUMNS_WIDTH].split(",")}if(_oProperties[ConstProperties.Const.COLUMNS_CAN_GROW]){this.mabCanGrow=eval("(["+_oProperties[ConstProperties.Const.COLUMNS_CAN_GROW]+"])")}if(_oProperties.hasOwnProperty("SX")){this.mbSX=true}if(_oProperties.hasOwnProperty("SY")){this.mbSY=true}if(_oProperties.hasOwnProperty("SXY")){this.mbSX=true;this.mbSY=true}if(_oProperties.PPA){this.mbAbsolutePos=true;this.mbXMustBeCalculated=true;this.mbYMustBeCalculated=true;this.x=this.miXOff;this.y=this.miYOff}if(_oProperties.hasOwnProperty("GUH")){this.miGridUnitHeight=parseInt(_oProperties.GUH)}}if(this.maiColWidth==null){this.maiColWidth=new Array()}if(this.mabCanGrow==null){this.mabCanGrow=new Array()}PositionItem.TransformStringArrayToInt(this.maiColWidth);if(Utils.IsStringFilled(this.msAdvancedX)){var sTempX=this.msAdvancedX;sTempX=sTempX.replace(ControlsUtils.GetInstance().GetAdvencedPosKeywordsRegex()," ");var sLastX=sTempX;do{sLastX=sTempX;sTempX=sTempX.replace(/(^| )[0-9]+(\.[0-9]+)?( |$)/g," ")}while(sTempX!=sLastX);sTempX=sTempX.replace(/  +/g," ");sTempX=sTempX.replace(/(^ +)|( +$)/g,"");if(sTempX!=""){var oReferences=sTempX.split(" ");for(var i=0,len=oReferences.length;i<len;i++){var sRef=oReferences[i];var asType=sRef.split(".");if(asType.length==1){if(asType[0]==PositionItem.Const.XTYPE_ALIGN_LEFT||asType[0]==PositionItem.Const.XTYPE_ALIGN_RIGHT||asType[0]==PositionItem.Const.XTYPE_CENTER||asType[0]==PositionItem.Const.XTYPE_TO_LEFT||asType[0]==PositionItem.Const.XTYPE_TO_RIGHT){this.msReferenceX.push(PositionItem.Const.KEY_PREVIOUS);this.masXTypes.push(asType[0])}else{this.msReferenceX.push(asType[0]);this.masXTypes.push(PositionItem.Const.KEY_DEFAULT)}}else{this.msReferenceX.push(asType[0]);this.masXTypes.push(asType[1])}}}}if(Utils.IsStringFilled(this.msAdvancedY)){var sTempY=this.msAdvancedY;sTempY=sTempY.replace(ControlsUtils.GetInstance().GetAdvencedPosKeywordsRegex()," ");var sLastY=sTempY;do{sLastY=sTempY;sTempY=sTempY.replace(/(^| )[0-9]+(\.[0-9]+)?( |$)/g," ")}while(sTempY!=sLastY);sTempY=sTempY.replace(/  +/g," ");sTempY=sTempY.replace(/(^ +)|( +$)/g,"");if(sTempY!=""){var oReferences=sTempY.split(" ");for(var i=0,len=oReferences.length;i<len;i++){var sRef=oReferences[i];var asType=sRef.split(".");if(asType.length==1){if(asType[0]==PositionItem.Const.YTYPE_ALIGN_BOTTOM||asType[0]==PositionItem.Const.YTYPE_ALIGN_TOP||asType[0]==PositionItem.Const.YTYPE_CENTER||asType[0]==PositionItem.Const.YTYPE_TO_BOTTOM||asType[0]==PositionItem.Const.YTYPE_TO_TOP){this.msReferenceY.push(PositionItem.Const.KEY_PREVIOUS);this.masYTypes.push(asType[0])}else{this.msReferenceY.push(asType[0]);this.masYTypes.push(PositionItem.Const.KEY_DEFAULT)}}else{this.msReferenceY.push(asType[0]);this.masYTypes.push(asType[1])}}}}if(Utils.IsStringFilled(this.msAdvancedWidth)){var sTempWidth=this.msAdvancedWidth;sTempWidth=sTempWidth.replace(ControlsUtils.GetInstance().GetAdvencedPosKeywordsRegex()," ");var sLastWidth=sTempWidth;do{sLastWidth=sTempWidth;sTempWidth=sTempWidth.replace(/(^| )[0-9]+(\.[0-9]+)?( |$)/g," ")}while(sTempWidth!=sLastWidth);sTempWidth=sTempWidth.replace(/  +/g," ");sTempWidth=sTempWidth.replace(/(^ +)|( +$)/g,"");if(sTempWidth!=""){var oReferences=sTempWidth.split(" ");for(var i=0,len=oReferences.length;i<len;i++){var sRef=oReferences[i];var asType=sRef.split(".");if(asType.length==1){if(asType[0]==PositionItem.Const.WIDTHTYPE_INTERNAL){this.msWidthReference.push(PositionItem.Const.KEY_PREVIOUS);this.msWidthType.push(asType[0])}else{this.msWidthReference.push(asType[0]);this.msWidthType.push(PositionItem.Const.KEY_DEFAULT)}}else{this.msWidthReference.push(asType[0]);this.msWidthType.push(asType[1])}}}}if(Utils.IsStringFilled(this.msAdvancedHeight)){var sTempHeight=this.msAdvancedHeight;sTempHeight=sTempHeight.replace(ControlsUtils.GetInstance().GetAdvencedPosKeywordsRegex()," ");var sLastHeight=sTempHeight;do{sLastHeight=sTempHeight;sTempHeight=sTempHeight.replace(/(^| )[0-9]+(\.[0-9]+)?( |$)/g," ")}while(sTempHeight!=sLastHeight);sTempHeight=sTempHeight.replace(/  +/g," ");sTempHeight=sTempHeight.replace(/(^ +)|( +$)/g,"");if(sTempHeight!=""){var oReferences=sTempHeight.split(" ");for(var i=0,len=oReferences.length;i<len;i++){var sRef=oReferences[i];var asType=sRef.split(".");if(asType.length==1){if(asType[0]==PositionItem.Const.HEIGHTTYPE_INTERNAL){this.msHeightReference.push(PositionItem.Const.KEY_PREVIOUS);this.msHeightType.push(asType[0])}else{this.msHeightReference.push(asType[0]);this.msHeightType.push(PositionItem.Const.KEY_DEFAULT)}}else{this.msHeightReference.push(asType[0]);this.msHeightType.push(asType[1])}}}}this.miDeep=0;this.masStyles=new FastArray();this.mbUpdateStyle=true;this.mbXMustBeCalculated=true;this.mbYMustBeCalculated=true;this.moXDependents=new Array();this.moXSources=new Array();this.moYDependents=new Array();this.moYSources=new Array();this.moQuickXSource=null;this.moQuickWSource=null;this.moQuickYSource=null;this.moQuickHSource=null;this.moActivatedProperties=new Object();name=this.msId;this.moPlaceHolder=null;switch(this.msCtrlType){case PositionItem.Const.CONTROL_TYPE_FLOAT_PANEL:this.mbHorizontalFlow=this.GetProperty(ConstProperties.Const.PROPERTY_FLOAT_DIRECTION,ConstProperties.Const.PROPERTY_VALUE_HORIZONTAL)==ConstProperties.Const.PROPERTY_VALUE_HORIZONTAL;var iForcedSpacing=this.GetProperty(ConstProperties.Const.PROPERTY_FLOAT_SPACING,0);if(this.mbHorizontalFlow){this.miForcedFlowSpacing=parseInt(this.GetProperty(ConstProperties.Const.PROPERTY_FLOAT_H_SPACING,iForcedSpacing));this.miForcedOrthgonalSpacing=parseInt(this.GetProperty(ConstProperties.Const.PROPERTY_FLOAT_V_SPACING,iForcedSpacing))}else{this.miForcedFlowSpacing=parseInt(this.GetProperty(ConstProperties.Const.PROPERTY_FLOAT_V_SPACING,iForcedSpacing));this.miForcedOrthgonalSpacing=parseInt(this.GetProperty(ConstProperties.Const.PROPERTY_FLOAT_H_SPACING,iForcedSpacing))}break;case PositionItem.Const.CONTROL_TYPE_PANEL:if(this.GetProperty(ConstProperties.Const.IS_MENU)){var oSelf=this;Matrix3.maPrePositionCalls.push(function(){MenuGroupMgr.ConfigureMenuControl(oSelf)})}if(this.HasProperty(TooltipProperties.Const.PROPERTY_TOOLTIP_ID)){TooltipProperties.ConfigureControl(this)}this.mdFixedAspectRatio=this.GetFixedAspectRatio();this.mbFixedAspectRatio=(this.mdFixedAspectRatio!=-1);break;case PositionItem.Const.CONTROL_TYPE_HYPERLINK:case PositionItem.Const.CONTROL_TYPE_BUTTON:if(this.maTextNodes&&typeof this.maTextNodes[0]!="undefined"){var oCss={};var oTextNode=this.maTextNodes[0].parentNode;if(this.miOriginalWidth!=-1&&this.msWidthReference.length==0){oCss.width=this.miOriginalWidth+"px"}if(this.miOriginalHeight>0&&this.msHeightReference.length==0){oCss.height=this.miOriginalHeight+"px"}if(oCss&&oCss!={}){$SetCss(oTextNode,oCss)}}if(this.moProperties){if(this.moProperties.hasOwnProperty(MultipleSourcesProperties.Const.PROPERTY_MULTIPLE_SOURCE)){this.ActiveMultipleSources()}if(this.moProperties.hasOwnProperty(ScrollTargetProperties.Const.PROPERTY_TARGET)){new ScrollTargetProperties(this)}if(this.moProperties.hasOwnProperty(ConstProperties.Const.SEQUENCE_LOADING_PREV)||this.moProperties.hasOwnProperty(ConstProperties.Const.SEQUENCE_LOADING_NEXT)){SequenceLoadingMgr.GetInstance().RegisterButton(this)}if(this.moProperties.hasOwnProperty("PID")){PreloadMgr.Register(this)}}break;case PositionItem.Const.CONTROL_TYPE_IMAGE:if(this.moProperties&&this.moProperties.hasOwnProperty(MultipleSourcesProperties.Const.PROPERTY_MULTIPLE_SOURCE)){this.ActiveMultipleSources()}break;case PositionItem.Const.CONTROL_TYPE_SLIDESHOW:$Control(this.msId,SlideshowCtrl.Const.CONTROL_NAME).Configure(this);break;case PositionItem.Const.CONTROL_TYPE_IFRAME:this.SetupIFrame();break;case PositionItem.Const.CONTROL_TYPE_UPLOAD:break;case"ParameterStr":case"ParameterEnum":case"ParameterBool":if(this.msCtrlType=="ParameterStr"){this.moTextarea=this.getElementsByTagName("textarea")[0];this.moTextarea.focus();this.moTextarea.select()}break}if(this.moLinkedImage){ImageMgr.GetInstance().Push(this.moLinkedImage,this);if(this.moProperties){if(this.moProperties.hasOwnProperty(TooltipProperties.Const.PROPERTY_TEMP_IMG)&&this.msId==TooltipProperties.msTempImgId){$(this.moLinkedImage).attr("src",$(TooltipProperties.moLastTempImg.moLinkedImage).attr("src"));this.miWidth=TooltipProperties.moLastTempImg.miWidth;this.miHeight=TooltipProperties.moLastTempImg.miHeight}if(!this.moProperties.hasOwnProperty("DocumentWidth")&&this.moProperties.hasOwnProperty(AutoScaleProperties.Const.PROPERTY_POLICY)){$SetStyle(this.moLinkedImage,"visibility","hidden")}}}if(this.HasProperty(ConstProperties.Const.NEED_SIZE)){SizeLearningMgr.RegisterControl(this)}if(this.HasProperty(ConstProperties.Const.FLASH_ID)){var sFlashID=this.GetProperty(ConstProperties.Const.FLASH_ID);var asFlashIDs=sFlashID.split(" ");ControlMgr.GetInstance().AddReference(sFlashID,this)}if(this.HasProperty(SlideshowCtrl.Const.PROPERTY_SLIDESHOW_ID)){SlideshowMgr.GetInstance().RegisterNode(this)}this.mbEthereal=this.GetProperty(ConstProperties.Const.ETHEREAL);if(this.HasProperty(ConstProperties.Const.CMS_BLOCK_EDIT)){this.mbCMSBlockEdit=Utils.ParseBool(this.GetProperty(ConstProperties.Const.CMS_BLOCK_EDIT))}else{this.mbCMSBlockEdit=false}if(this.msCtrlType==PositionItem.Const.CONTROL_TYPE_PANEL||this.msCtrlType==PositionItem.Const.CONTROL_TYPE_PANEL_LINE){if(this.GetProperty("OverSkin")){var sSkin=this.GetProperty("OverSkin");Utils.AddEvent(this.GetNode(),"mouseover",function(){$AddClass(this.GetNode(),sSkin)},this);Utils.AddEvent(this.GetNode(),"mouseout",function(){$RemoveClass(this.GetNode(),sSkin)},this)}}};HTMLElement.prototype.ApplyProperties=function(){switch(this.msCtrlType){case PositionItem.Const.CONTROL_TYPE_HYPERLINK:case PositionItem.Const.CONTROL_TYPE_BUTTON:if(this.moProperties){if(this.moProperties.hasOwnProperty(ConstProperties.Const.SEQUENCE_LOADING_PREV)){var b=this.GetVFormId();var a=ControlMgr.GetInstance().GetReference(this.GetProperty(ConstProperties.Const.SEQUENCE_LOADING_PREV));if(a!=null){b=a.GetVFormId()}Utils.AddEvent(this.GetNode(),"click",function(){SequenceLoadingMgr.GetInstance().NavigateSequence(false,b)},this)}if(this.moProperties.hasOwnProperty(ConstProperties.Const.SEQUENCE_LOADING_NEXT)){var b=this.GetVFormId();var a=ControlMgr.GetInstance().GetReference(this.GetProperty(ConstProperties.Const.SEQUENCE_LOADING_NEXT));if(a!=null){b=a.GetVFormId()}Utils.AddEvent(this.GetNode(),"click",function(){SequenceLoadingMgr.GetInstance().NavigateSequence(true,b)},this)}ButtonCtrl.AutoConfigPulse(this)}break}if(this.msCtrlType==PositionItem.Const.CONTROL_TYPE_PANEL||this.msCtrlType==PositionItem.Const.CONTROL_TYPE_FLOAT_PANEL){if(this.moProperties&&(this.moProperties.hasOwnProperty(SequenceLoadingProperties.Const.PROPERTY_SEQUENCE_LOADING_INDEX)||this.moProperties.hasOwnProperty(SequenceLoadingProperties.Const.PROPERTY_SEQUENCE_LOADING))){SequenceLoadingProperties.ConfigureControl(this)}}};HTMLElement.prototype.ExtractDependences=function(a,b){var c=[true,true];switch(this.msCtrlType){case PositionItem.Const.CONTROL_TYPE_FLOAT_PANEL:c=[true,true];this.ExtractDependencesContainer(a,b);break;case PositionItem.Const.CONTROL_TYPE_PANEL:case PositionItem.Const.CONTROL_TYPE_POPUP:case PositionItem.Const.CONTROL_TYPE_PANEL_TABLE:case PositionItem.Const.CONTROL_TYPE_PANEL_LINE:case PositionItem.Const.CONTROL_TYPE_PANEL_COL:c=this.ExtractDependencesContainer(a,b);break;default:c=this.ExtractDependencesControl(a,b);break}return c};HTMLElement.prototype.ExtractDependencesContainer=function(a,b){var d=this.ExtractDependencesControl(a);var p=this.GetProperty(ConstProperties.Const.RESIZE_WIDTH,-1);var o=this.GetProperty(ConstProperties.Const.RESIZE_HEIGHT,-1);if(p!=-1){ResizeMgr.GetInstance().AddToResizeXList(this)}if(o!=-1){ResizeMgr.GetInstance().AddToResizeYList(this)}var h=this.GetProperty(ConstProperties.Const.AUTOLIMIT_RESIZE_HEIGHT);var q=this.moContainerForChildrens;var n=q.length;var f=(p==-1)&&(this.GetOriginalWidth()==-1||this.ForceXChildrenDependence());var g=(o==-1||h)&&(this.GetOriginalHeight()==-1||this.ForceYChildrenDependence());var k=this.XDependsOnlyFromLastControl();var l=this.YDependsOnlyFromLastControl();var t;if(this.GetProperty(ConstProperties.Const.FLASH_ID)==ConstValues.Const.SUPER_CONTAINER){b=this}for(var m=0;m<n;m++){var r=q[m];var j=(m==n-1);if(r!=null){var c=r.ExtractDependences(t,b);if(c[0]){PositionMgr.GetInstance().AddToDirtyXList(r)}if(c[1]){PositionMgr.GetInstance().AddToDirtyYList(r)}if(!r.IsEthereal()){if((f&&!k)||(f&&k&&j)){new Dependency(r,this,Dependency.Const.TYPE_PARENT,Dependency.Const.SUBTYPE_NONE,null,Dependency.Const.AXIS_X);d[0]=false}if((g&&!l)||(g&&l&&j)){new Dependency(r,this,Dependency.Const.TYPE_PARENT,Dependency.Const.SUBTYPE_NONE,null,Dependency.Const.AXIS_Y);d[1]=false}}t=r}}return d};HTMLElement.prototype.ExtractDependencesControl=function ExtractDependencesControl(a,b){var c=[true,true];var l;var o;var q;var m;var d;var n;var f;var g;if(a){n=a;f=true}if(b){this.moSuperContainer=b;g=true}if(!d){m=this.GetParentContainer();d=true}for(var j=0,k=this.masXTypes.length;j<k;j++){var r=this.msReferenceX[j];var h=false;if(Utils.IsStringFilled(r)&&r!=PositionItem.Const.KEY_PREVIOUS){if(r==PositionItem.Const.REF_PARENT){m=this.GetParentContainer();d=true;if(m){this.moQuickXSource=new Dependency(m,this,Dependency.Const.TYPE_REFERENCE,Dependency.Const.SUBTYPE_POS,this.masXTypes[j],Dependency.Const.AXIS_X);c[0]=false}}else{if(r==PositionItem.Const.REF_ANCESTOR_PREFIX+ConstValues.Const.SUPER_CONTAINER){if(!g){this.moSuperContainer=this.GetAncestorWithFlashID(ConstValues.Const.SUPER_CONTAINER);g=true}o=this.moSuperContainer}else{if(Utils.StartsWith(r,PositionItem.Const.REF_ANCESTOR_PREFIX)){o=this.GetAncestorWithFlashID(r.substring(PositionItem.Const.REF_ANCESTOR_PREFIX.length))}else{o=ControlMgr.GetInstance().GetPositionItem(this.GetBrotherId(r));if(o==null){o=ControlMgr.GetInstance().GetReference(r)}}}if(o!=null){if(r==PositionItem.Const.REF_SCREEN){this.moQuickXSource=new Dependency(o,this,Dependency.Const.TYPE_SCREEN,Dependency.Const.SUBTYPE_POS,this.masXTypes[j],Dependency.Const.AXIS_X)}else{this.moQuickXSource=new Dependency(o,this,Dependency.Const.TYPE_REFERENCE,Dependency.Const.SUBTYPE_POS,this.masXTypes[j],Dependency.Const.AXIS_X)}PositionMgr.GetInstance().AddToDirtyXList(this);c[0]=false}else{h=true}}}else{h=true}if(h){if(!f){n=this.GetLastControl();f=true}if(n!=null){this.moQuickXSource=new Dependency(n,this,Dependency.Const.TYPE_PREVIOUS,Dependency.Const.SUBTYPE_POS,this.masXTypes[j],Dependency.Const.AXIS_X);c[0]=false}}}for(var j=0,k=this.msWidthReference.length;j<k;j++){var u=this.msWidthReference[j];if(u==PositionItem.Const.REF_PARENT){if(!d){m=this.GetParentContainer();d=true}if(m!=null){this.moQuickWSource=new Dependency(m,this,Dependency.Const.TYPE_REFERENCE,Dependency.Const.SUBTYPE_SIZE,this.msWidthType[j],Dependency.Const.AXIS_X);c[0]=false}}else{if(u==PositionItem.Const.REF_ANCESTOR_PREFIX+ConstValues.Const.SUPER_CONTAINER){if(!g){this.moSuperContainer=this.GetAncestorWithFlashID(ConstValues.Const.SUPER_CONTAINER);g=true}o=this.moSuperContainer}else{if(Utils.StartsWith(u,PositionItem.Const.REF_ANCESTOR_PREFIX)){o=this.GetAncestorWithFlashID(u.substring(PositionItem.Const.REF_ANCESTOR_PREFIX.length))}else{o=ControlMgr.GetInstance().GetPositionItem(this.GetBrotherId(u));if(o==null){o=ControlMgr.GetInstance().GetReference(u)}}}if(o!=null){if(u==PositionItem.Const.REF_SCREEN){this.moQuickWSource=new Dependency(o,this,Dependency.Const.TYPE_SCREEN,Dependency.Const.SUBTYPE_SIZE,this.msWidthType[j],Dependency.Const.AXIS_X)}else{this.moQuickWSource=new Dependency(o,this,Dependency.Const.TYPE_REFERENCE,Dependency.Const.SUBTYPE_SIZE,this.msWidthType[j],Dependency.Const.AXIS_X)}PositionMgr.GetInstance().AddToDirtyXList(this);c[0]=false}}}for(var j=0,k=this.masYTypes.length;j<k;j++){var t=this.msReferenceY[j];h=false;if(Utils.IsStringFilled(t)&&t!=PositionItem.Const.KEY_PREVIOUS){if(t==PositionItem.Const.REF_PARENT){if(!d){m=this.GetParentContainer();d=true}if(m!=null){this.moQuickYSource=new Dependency(m,this,Dependency.Const.TYPE_REFERENCE,Dependency.Const.SUBTYPE_POS,this.masYTypes[j],Dependency.Const.AXIS_Y);c[1]=false}}else{if(t==PositionItem.Const.REF_ANCESTOR_PREFIX+ConstValues.Const.SUPER_CONTAINER){if(!g){this.moSuperContainer=this.GetAncestorWithFlashID(ConstValues.Const.SUPER_CONTAINER);g=true}o=this.moSuperContainer}else{if(Utils.StartsWith(t,PositionItem.Const.REF_ANCESTOR_PREFIX)){o=this.GetAncestorWithFlashID(t.substring(PositionItem.Const.REF_ANCESTOR_PREFIX.length))}else{o=ControlMgr.GetInstance().GetPositionItem(this.GetBrotherId(t));if(o==null){o=ControlMgr.GetInstance().GetReference(t)}}}if(o!=null){if(t==PositionItem.Const.REF_SCREEN){this.moQuickYSource=new Dependency(o,this,Dependency.Const.TYPE_SCREEN,Dependency.Const.SUBTYPE_POS,this.masYTypes[j],Dependency.Const.AXIS_Y)}else{this.moQuickYSource=new Dependency(o,this,Dependency.Const.TYPE_REFERENCE,Dependency.Const.SUBTYPE_POS,this.masYTypes[j],Dependency.Const.AXIS_Y)}PositionMgr.GetInstance().AddToDirtyYList(this);c[1]=false}else{h=true}}}else{h=true}if(h){if(!f){n=this.GetLastControl();f=true}if(n!=null){this.moQuickYSource=new Dependency(n,this,Dependency.Const.TYPE_PREVIOUS,Dependency.Const.SUBTYPE_POS,this.masYTypes[j],Dependency.Const.AXIS_Y);c[1]=false}}}for(var j=0,k=this.msHeightReference.length;j<k;j++){var p=this.msHeightReference[j];if(p==PositionItem.Const.REF_PARENT){if(!d){m=this.GetParentContainer();d=true}if(m!=null){this.moQuickHSource=new Dependency(m,this,Dependency.Const.TYPE_REFERENCE,Dependency.Const.SUBTYPE_POS,this.msHeightType[j],Dependency.Const.AXIS_Y);c[1]=false}}else{if(p==PositionItem.Const.REF_ANCESTOR_PREFIX+ConstValues.Const.SUPER_CONTAINER){if(!g){this.moSuperContainer=this.GetAncestorWithFlashID(ConstValues.Const.SUPER_CONTAINER);g=true}o=this.moSuperContainer}else{if(Utils.StartsWith(p,PositionItem.Const.REF_ANCESTOR_PREFIX)){o=this.GetAncestorWithFlashID(p.substring(PositionItem.Const.REF_ANCESTOR_PREFIX.length))}else{o=ControlMgr.GetInstance().GetPositionItem(this.GetBrotherId(p));if(o==null){o=ControlMgr.GetInstance().GetReference(p)}}}if(o!=null){if(p==PositionItem.Const.REF_SCREEN){this.moQuickHSource=new Dependency(o,this,Dependency.Const.TYPE_SCREEN,Dependency.Const.SUBTYPE_POS,this.msHeightType[j],Dependency.Const.AXIS_Y)}else{this.moQuickHSource=new Dependency(o,this,Dependency.Const.TYPE_REFERENCE,Dependency.Const.SUBTYPE_POS,this.msHeightType[j],Dependency.Const.AXIS_Y)}PositionMgr.GetInstance().AddToDirtyYList(this);c[1]=false}}}return c};HTMLElement.prototype.CalculateXPosition=function CalculateXPosition(){var a;if(this.mbAbsolutePos){a=this.mbXMustBeCalculated;this.mbXMustBeCalculated=false}else{switch(this.msCtrlType){case PositionItem.Const.CONTROL_TYPE_LABEL:case PositionItem.Const.CONTROL_TYPE_TEXTBOX:case PositionItem.Const.CONTROL_TYPE_DROPDOWNLIST:case PositionItem.Const.CONTROL_TYPE_TEXTBOXPASSWORD:case PositionItem.Const.CONTROL_TYPE_AUTOCOMPLETION:case PositionItem.Const.CONTROL_TYPE_RADIOBUTTON_LIST:case PositionItem.Const.CONTROL_TYPE_DATE:case PositionItem.Const.CONTROL_TYPE_TEXTAREA:case PositionItem.Const.CONTROL_TYPE_CHECKBOX:case PositionItem.Const.CONTROL_TYPE_UPLOAD:case"ParameterStr":case"ParameterEnum":case"ParameterBool":a=this.CalculateXPositionLabel();break;case PositionItem.Const.CONTROL_TYPE_HYPERLINK:case PositionItem.Const.CONTROL_TYPE_BUTTON:a=this.CalculateXPositionButton();break;case PositionItem.Const.CONTROL_TYPE_FLOAT_PANEL:a=this.CalculateXPositionFloatPnl();break;case PositionItem.Const.CONTROL_TYPE_IMAGE:a=this.CalculateXPositionImage();break;case PositionItem.Const.CONTROL_TYPE_IFRAME:a=this.CalculateXPositionIFrame();break;case PositionItem.Const.CONTROL_TYPE_PANEL:case PositionItem.Const.CONTROL_TYPE_POPUP:a=this.CalculateXPositionContainer();break;case PositionItem.Const.CONTROL_TYPE_PANEL_TABLE:a=this.CalculateXPositionPanelTable();break;case PositionItem.Const.CONTROL_TYPE_PANEL_COL:case PositionItem.Const.CONTROL_TYPE_PANEL_LINE:a=this.CalculateXPositionContainer();break;default:a=this.CalculateXPositionControl();break}}return a};HTMLElement.prototype.CalculateYPosition=function CalculateYPosition(){var a;if(this.mbAbsolutePos){a=this.mbYMustBeCalculated;this.mbYMustBeCalculated=false}else{switch(this.msCtrlType){case PositionItem.Const.CONTROL_TYPE_LABEL:case PositionItem.Const.CONTROL_TYPE_TEXTBOX:case PositionItem.Const.CONTROL_TYPE_DROPDOWNLIST:case PositionItem.Const.CONTROL_TYPE_TEXTBOXPASSWORD:case PositionItem.Const.CONTROL_TYPE_AUTOCOMPLETION:case PositionItem.Const.CONTROL_TYPE_RADIOBUTTON_LIST:case PositionItem.Const.CONTROL_TYPE_DATE:case PositionItem.Const.CONTROL_TYPE_TEXTAREA:case PositionItem.Const.CONTROL_TYPE_CHECKBOX:case PositionItem.Const.CONTROL_TYPE_UPLOAD:case"ParameterStr":case"ParameterEnum":case"ParameterBool":a=this.CalculateYPositionLabel();break;case PositionItem.Const.CONTROL_TYPE_BUTTON:case PositionItem.Const.CONTROL_TYPE_HYPERLINK:a=this.CalculateYPositionButton();break;case PositionItem.Const.CONTROL_TYPE_FLOAT_PANEL:a=this.CalculateYPositionFloatPnl();break;case PositionItem.Const.CONTROL_TYPE_IMAGE:a=this.CalculateYPositionImage();break;case PositionItem.Const.CONTROL_TYPE_IFRAME:a=this.CalculateYPositionIFrame();break;case PositionItem.Const.CONTROL_TYPE_PANEL:case PositionItem.Const.CONTROL_TYPE_POPUP:case PositionItem.Const.CONTROL_TYPE_PANEL_TABLE:a=this.CalculateYPositionContainer();break;case PositionItem.Const.CONTROL_TYPE_PANEL_COL:case PositionItem.Const.CONTROL_TYPE_PANEL_LINE:a=this.CalculateYPositionContainer();break;default:a=this.CalculateYPositionControl();break}}return a};HTMLElement.prototype.CalculateXPositionControl=function CalculateXPositionControl(){var bResult=false;var oSource=null;var iWidth=this.miWidth;var oParentRef;if(this.moPlaceHolder!=null){oParentRef=this.moPlaceHolder.moParent}else{oParentRef=this.moParent}if(this.msWidthReference.length!=0||Utils.IsStringFilled(this.msAdvancedWidth)){if(Utils.IsString(this.msAdvancedWidth)){var sWidthExpression=this.msAdvancedWidth;for(var i=0,len=this.msWidthReference.length;i<len;i++){var iValue=0;var sWidthReference=this.msWidthReference[i];if(sWidthReference==PositionItem.Const.REF_PARENT){var oTmpControl=this.GetParentContainer();if(oTmpControl!=null){iValue=oTmpControl.GetWidth()}}else{if(sWidthReference==PositionItem.Const.REF_ANCESTOR_PREFIX+ConstValues.Const.SUPER_CONTAINER){oSource=this.moSuperContainer}else{if(Utils.StartsWith(sWidthReference,PositionItem.Const.REF_ANCESTOR_PREFIX)){oSource=this.GetAncestorWithFlashID(sWidthReference.substring(PositionItem.Const.REF_ANCESTOR_PREFIX.length))}else{oSource=ControlMgr.GetInstance().GetPositionItem(this.GetBrotherId(sWidthReference));if(oSource==null){oSource=ControlMgr.GetInstance().GetReference(sWidthReference)}}}if(oSource!=null){var iDiff=0;var oContainer;if(this.msWidthType[i]==PositionItem.Const.TYPE_HEIGHT){iValue=oSource.GetHeight()}else{if(this.msWidthType[i]==PositionItem.Const.WIDTHTYPE_INTERNAL&&oSource.IsContainer()){oContainer=oSource;iDiff=-oContainer.GetPaddingLeft()-oContainer.GetPaddingRight()}iValue=oSource.GetWidth()+iDiff}}}var oRegexp=(this.msWidthType[i]==PositionItem.Const.KEY_DEFAULT)?new RegExp(sWidthReference,"g"):new RegExp(sWidthReference+"."+this.msWidthType[i],"g");sWidthExpression=sWidthExpression.replace(oRegexp,iValue.toString())}sWidthExpression=sWidthExpression.replace("--","");iWidth=eval(sWidthExpression)}else{oSource=null;if(this.moQuickWSource!=null){oSource=this.moQuickWSource.GetSource();if(this.moQuickWSource.GetType()==Dependency.Const.TYPE_REFERENCE){var iDiff=0;var oContainer;if(this.msWidthType.length!=0&&this.msWidthType[0]==PositionItem.Const.WIDTHTYPE_INTERNAL&&oSource.IsContainer()){oContainer=oSource;iDiff=-oContainer.GetPaddingLeft()-oContainer.GetPaddingRight()}iWidth=oSource.GetWidth()+this.miOriginalWidth+iDiff}else{if(this.moQuickWSource.GetType()==Dependency.Const.TYPE_SCREEN){iWidth=oSource.GetWidth()+this.miOriginalWidth}}}}}if(iWidth!=this.miWidth){this.SetWidth(iWidth);bResult=true}var iX=0;oSource=null;var iSourceX=0;var iSourceW=0;if(Utils.IsStringFilled(this.msAdvancedX)){var sXEquation=this.msAdvancedX;for(var i=0,len=this.msReferenceX.length;i<len;i++){var iValue=0;var sReferenceX=this.msReferenceX[i];if(sReferenceX==PositionItem.Const.REF_PARENT){oSource=this.GetParentContainer();if(oSource!=null){iSourceW=oSource.GetWidth()}}else{if(sReferenceX==PositionItem.Const.REF_ANCESTOR_PREFIX+ConstValues.Const.SUPER_CONTAINER){oSource=this.moSuperContainer}else{if(Utils.StartsWith(sReferenceX,PositionItem.Const.REF_ANCESTOR_PREFIX)){oSource=this.GetAncestorWithFlashID(sReferenceX.substring(PositionItem.Const.REF_ANCESTOR_PREFIX.length))}else{if(sReferenceX==PositionItem.Const.KEY_PREVIOUS&&this.GetLastControl()!=null){oSource=this.GetLastControl();iSourceX=oSource.x;iSourceW=oSource.GetWidth()}else{oSource=ControlMgr.GetInstance().GetPositionItem(this.GetBrotherId(sReferenceX));if(oSource==null){oSource=ControlMgr.GetInstance().GetReference(sReferenceX)}}}}if(oSource!=null){iSourceW=oSource.GetWidth();if(sReferenceX=="screen"){iSourceX=oParentRef.globalToLocal(new Point(0,0)).x}else{if(oSource.moParent==this.moParent){iSourceX=oSource.x}else{if(oSource==this.moParent){iSourceX=0}else{iSourceX=oParentRef.globalToLocal(oSource.localToGlobal(new Point(0,0))).x}}}}}var sSourceX=this.masXTypes[i];if(oSource!=null){switch(sSourceX){case PositionItem.Const.XTYPE_TO_RIGHT:iValue=iSourceX+iSourceW;break;case PositionItem.Const.XTYPE_TO_LEFT:iValue=iSourceX-this.miWidth;break;case PositionItem.Const.XTYPE_ALIGN_RIGHT:iValue=iSourceX+iSourceW-this.miWidth;break;case PositionItem.Const.XTYPE_ALIGN_LEFT:iValue=iSourceX;break;case PositionItem.Const.XTYPE_CENTER:iValue=Math.round(iSourceX+iSourceW/2-this.miWidth/2);break;case PositionItem.Const.TYPE_WIDTH:iValue=iSourceW;break;case PositionItem.Const.TYPE_HEIGHT:iValue=oSource.GetHeight();break;default:sXEquation=sXEquation.replace(new RegExp(sReferenceX+".","g"),iValue.toString())}}if(sReferenceX!=PositionItem.Const.KEY_PREVIOUS){sXEquation=sXEquation.replace(new RegExp(sReferenceX+"."+sSourceX,"g"),iValue.toString())}else{sXEquation=sXEquation.replace(new RegExp("([^.a-zA-Z]|^)"+sSourceX+"([^.a-zA-Z]|$)","g"),"$1"+iValue.toString()+"$2")}}sXEquation=sXEquation.replace("--","");iX=eval(sXEquation)}else{oSource=null;if(this.moQuickXSource!=null){oSource=this.moQuickXSource.GetSource();iSourceW=oSource.GetWidth();if(this.moQuickXSource.GetType()==Dependency.Const.TYPE_REFERENCE){if(oSource.moParent==this.moParent){iSourceX=oSource.x}else{if(oSource==this.moParent){iSourceX=0}else{iSourceX=oParentRef.globalToLocal(oSource.localToGlobal(new Point(0,0))).x}}}else{if(this.moQuickXSource.GetType()==Dependency.Const.TYPE_SCREEN){iSourceX=oParentRef.globalToLocal(ControlMgr.GetInstance().GetRootPositionItem().localToGlobal(new Point(0,0))).x}else{iSourceX=oSource.x}}}if(oSource!=null){switch(this.masXTypes[0]){case PositionItem.Const.XTYPE_TO_RIGHT:iX=iSourceX+iSourceW;break;case PositionItem.Const.XTYPE_TO_LEFT:iX=iSourceX-this.miWidth;break;case PositionItem.Const.XTYPE_ALIGN_RIGHT:iX=iSourceX+iSourceW-this.miWidth;break;case PositionItem.Const.XTYPE_ALIGN_LEFT:iX=iSourceX;break;case PositionItem.Const.XTYPE_CENTER:iX=Math.round(iSourceX+iSourceW/2-this.miWidth/2);break;default:}iX+=this.miXOff}else{var oParent=this.GetParentContainer();if(oParent!=null){iX=Math.max(parseInt(oParent.GetPaddingLeft()),parseInt(this.miXOff))}}}bResult=bResult||this.mbXMustBeCalculated||(this.x!=iX);if(bResult){this.mbXMustBeCalculated=false;this.mbUpdateStyle=true}if(this.moPlaceHolder==null){if(this.moPosDecider==null){this.x=iX}}else{this.moPlaceHolder.x=iX}return bResult};HTMLElement.prototype.CalculateXPositionContainer=function CalculateXPositionContainer(){var a=false;var j=this.GetProperty(ConstProperties.Const.RESIZE_WIDTH,-1);var l=this.GetOriginalWidth();var h=this.GetWidth();if(this.GetProperty("Fold")==FoldProperties.Const.CLOSE&&(this.GetProperty("FoldOrientation")==FoldProperties.Const.ORIENTATION_LEFT||this.GetProperty("FoldOrientation")==FoldProperties.Const.ORIENTATION_RIGHT)){l=this.GetProperty("FoldMinCloseSize",0)}else{if(j!=-1){l=Utils.GetViewportWidth()-ResizeMgr.GetInstance().GetScrollbarSize()-j}else{if(this.GetOriginalWidth()==-1){l=this.GetPaddingLeft();var n=this.GetContainerForChildren();var k;if(this.XDependsOnlyFromLastControl()){k=n.length-1}else{k=0}for(var c=k,m=n.length;c<m;c++){var o=n[c];if(o!=null&&!o.IsEthereal()){l=Math.max(l,o.x+Math.max(0,o.GetWidth()))}}l+=this.GetPaddingRight()}}}this.SetWidth(l);a=this.CalculateXPositionControl()||a;l=this.GetWidth();var g=this.GetProperty(ConstProperties.Const.MIN_RESIZE_WIDTH);if(g&&(g!=0)){l=Math.max(l,g)}var f=this.GetProperty(ConstProperties.Const.MAX_RESIZE_WIDTH);if(f&&(f!=0)){l=Math.min(l,f)}if(this.mbFixedAspectRatio){var d=Utils.GetViewportHeight()-this.GetProperty(ConstProperties.Const.RESIZE_HEIGHT);var b=l/d;if(b>this.mdFixedAspectRatio){l=this.mdFixedAspectRatio*d}}if(l!=h){this.SetUpdateStyle(true);a=true}this.SetWidth(l);if(this.mbFixedAspectRatio&&a){PositionMgr.GetInstance().AddToDirtyYList(this)}return a};HTMLElement.prototype.CalculateYPositionControl=function CalculateYPositionControl(){var bResult=false;var oSource=null;var iHeight=this.miHeight;var oParentRef;if(this.moPlaceHolder!=null){oParentRef=this.moPlaceHolder.moParent}else{oParentRef=this.moParent}if(this.msHeightReference.length!=0||Utils.IsStringFilled(this.msAdvancedHeight)){if(Utils.IsString(this.msAdvancedHeight)){var sHeightExpression=this.msAdvancedHeight;for(var i=0,len=this.msHeightReference.length;i<len;i++){var iValue=0;var sHeightReference=this.msHeightReference[i];if(sHeightReference==PositionItem.Const.REF_PARENT){var oTmpControl=this.GetParentContainer();if(oTmpControl!=null){iValue=oTmpControl.GetHeight()}}else{if(sHeightReference==PositionItem.Const.REF_ANCESTOR_PREFIX+ConstValues.Const.SUPER_CONTAINER){oSource=this.moSuperContainer}else{if(Utils.StartsWith(sHeightReference,PositionItem.Const.REF_ANCESTOR_PREFIX)){oSource=this.GetAncestorWithFlashID(sHeightReference.substring(PositionItem.Const.REF_ANCESTOR_PREFIX.length))}else{oSource=ControlMgr.GetInstance().GetPositionItem(this.GetBrotherId(sHeightReference));if(oSource==null){oSource=ControlMgr.GetInstance().GetReference(sHeightReference)}}}if(oSource!=null){var iDiff=0;var oContainer;if(this.msHeightType[i]==PositionItem.Const.TYPE_WIDTH){iValue=oSource.GetWidth()}else{if(this.msHeightType[i]==PositionItem.Const.WIDTHTYPE_INTERNAL&&oSource.IsContainer()){oContainer=oSource;iDiff=-oContainer.GetPaddingLeft()-oContainer.GetPaddingRight()}iValue=oSource.GetHeight()+iDiff}}}var oRegexp=(this.msHeightType[i]==PositionItem.Const.KEY_DEFAULT)?new RegExp(sHeightReference,"g"):new RegExp(sHeightReference+"."+this.msHeightType[i],"g");sHeightExpression=sHeightExpression.replace(oRegexp,iValue.toString())}sHeightExpression=sHeightExpression.replace("--","");iHeight=eval(sHeightExpression)}else{oSource=null;if(this.moQuickHSource!=null){oSource=this.moQuickHSource.GetSource();if(this.moQuickHSource.GetType()==Dependency.Const.TYPE_REFERENCE){var iDiff=0;var oContainer;if(this.msHeightType.length!=0&&this.msHeightType[0]==PositionItem.Const.WIDTHTYPE_INTERNAL&&oSource.IsContainer()){oContainer=oSource;iDiff=-oContainer.GetPaddingTop()-oContainer.GetPaddingBottom()}iHeight=oSource.GetHeight()+this.miOriginalHeight+iDiff}else{if(this.moQuickHSource.GetType()==Dependency.Const.TYPE_SCREEN){iHeight=oSource.GetHeight()+this.miOriginalHeight}}}}}if(iHeight!=this.miHeight){this.SetHeight(iHeight);bResult=true}var iY=0;oSource=null;var iSourceY=0;var iSourceH=0;if(Utils.IsStringFilled(this.msAdvancedY)){var sYEquation=this.msAdvancedY;for(var i=0,len=this.msReferenceY.length;i<len;i++){var iValue=0;var sReferenceY=this.msReferenceY[i];if(sReferenceY==PositionItem.Const.REF_PARENT){oSource=this.GetParentContainer();if(oSource!=null){iSourceH=oSource.GetHeight()}}else{if(sReferenceY==PositionItem.Const.REF_ANCESTOR_PREFIX+ConstValues.Const.SUPER_CONTAINER){oSource=this.moSuperContainer}else{if(Utils.StartsWith(sReferenceY,PositionItem.Const.REF_ANCESTOR_PREFIX)){oSource=this.GetAncestorWithFlashID(sReferenceY.substring(PositionItem.Const.REF_ANCESTOR_PREFIX.length))}else{if(sReferenceY==PositionItem.Const.KEY_PREVIOUS&&this.GetLastControl()!=null){oSource=this.GetLastControl();iSourceY=oSource.y;iSourceH=oSource.GetHeight()}else{oSource=ControlMgr.GetInstance().GetPositionItem(this.GetBrotherId(sReferenceY));if(oSource==null){oSource=ControlMgr.GetInstance().GetReference(sReferenceY)}}}}if(oSource!=null){iSourceH=oSource.GetHeight();if(sReferenceY=="screen"){iSourceY=oParentRef.globalToLocal(new Point(0,0)).y}else{if(oSource==this.moParent){iSourceY=0}else{if(oSource.moParent==this.moParent){iSourceY=oSource.y}else{iSourceY=oParentRef.globalToLocal(oSource.localToGlobal(new Point(0,0))).y}}}}}var sSourceY=this.masYTypes[i];if(oSource!=null){switch(sSourceY){case PositionItem.Const.YTYPE_TO_TOP:iValue=iSourceY-this.miHeight;break;case PositionItem.Const.YTYPE_TO_BOTTOM:iValue=iSourceY+iSourceH;break;case PositionItem.Const.YTYPE_ALIGN_TOP:iValue=iSourceY;break;case PositionItem.Const.YTYPE_ALIGN_BOTTOM:iValue=iSourceY+iSourceH-this.miHeight;break;case PositionItem.Const.YTYPE_CENTER:iValue=Math.round(iSourceY+iSourceH/2-this.miHeight/2);break;case PositionItem.Const.TYPE_HEIGHT:iValue=iSourceH;break;case PositionItem.Const.TYPE_WIDTH:iValue=oSource.GetWidth();break;default:sYEquation=sYEquation.replace(new RegExp(sReferenceY+".","g"),iValue.toString())}}if(sReferenceY!=PositionItem.Const.KEY_PREVIOUS){sYEquation=sYEquation.replace(new RegExp(sReferenceY+"."+sSourceY,"g"),iValue.toString())}else{sYEquation=sYEquation.replace(new RegExp("([^.a-zA-Z]|^)"+sSourceY+"([^.a-zA-Z]|$)","g"),"$1"+iValue.toString()+"$2")}}sYEquation=sYEquation.replace("--","");iY=eval(sYEquation)}else{oSource=null;if(this.moQuickYSource!=null){oSource=this.moQuickYSource.GetSource();iSourceH=oSource.GetHeight();if(this.moQuickYSource.GetType()==Dependency.Const.TYPE_REFERENCE){if(oSource.moParent==this.moParent){iSourceY=oSource.y}else{if(oSource==this.moParent){iSourceY=0}else{iSourceY=oParentRef.globalToLocal(oSource.localToGlobal(new Point(0,0))).y}}}else{if(this.moQuickYSource.GetType()==Dependency.Const.TYPE_SCREEN){iSourceY=oParentRef.globalToLocal(ControlMgr.GetInstance().GetRootPositionItem().localToGlobal(new Point(0,0))).y}else{iSourceY=oSource.y}}}if(oSource!=null){switch(this.masYTypes[0]){case PositionItem.Const.YTYPE_TO_TOP:iY=iSourceY-this.miHeight;break;case PositionItem.Const.YTYPE_TO_BOTTOM:iY=iSourceY+iSourceH;break;case PositionItem.Const.YTYPE_ALIGN_TOP:iY=iSourceY;break;case PositionItem.Const.YTYPE_ALIGN_BOTTOM:iY=iSourceY+iSourceH-this.miHeight;break;case PositionItem.Const.YTYPE_CENTER:iY=Math.round(iSourceY+iSourceH/2-this.miHeight/2);break;default:}iY+=this.miYOff}else{var oParent=this.GetParentContainer();if(oParent!=null){iY=Math.max(oParent.GetPaddingTop(),parseInt(this.miYOff))}}}bResult=bResult||this.mbYMustBeCalculated||(this.y!=iY);if(bResult){this.mbYMustBeCalculated=false;this.mbUpdateStyle=true}if(this.moPlaceHolder==null){if(this.moPosDecider==null){this.y=iY}}else{this.moPlaceHolder.y=iY}return bResult};HTMLElement.prototype.CalculateYPositionContainer=function CalculateYPositionContainer(){var b=false;var l=this.GetProperty(ConstProperties.Const.RESIZE_HEIGHT,-1);var f=this.GetOriginalHeight();var k=this.GetHeight();if(this.GetProperty("Fold")==FoldProperties.Const.CLOSE&&!(this.GetProperty("FoldOrientation")==FoldProperties.Const.ORIENTATION_TOP||this.GetProperty("FoldOrientation")==FoldProperties.Const.ORIENTATION_BOTTOM)){var g=FoldProperties.GetFoldHeight(this);f=this.GetProperty("FoldMinCloseSize",g)}else{if(l!=-1){f=Utils.GetViewportHeight()-l}else{if(this.GetOriginalHeight()==-1){f=this.GetPaddingTop();var p=this.GetContainerForChildren();var m;if(this.YDependsOnlyFromLastControl()){m=p.length-1}else{m=0}for(var d=m,o=p.length;d<o;d++){var q=p[d];if(q!=null&&!q.IsEthereal()){f=Math.max(f,q.y+Math.max(0,q.GetHeight()))}}f+=this.GetPaddingBottom();if(this.miGridUnitHeight){f=Math.ceil(f/this.miGridUnitHeight)*this.miGridUnitHeight}}}}this.SetHeight(f);b=this.CalculateYPositionControl()||b;f=parseInt(this.GetHeight());var j=parseInt(this.GetProperty(ConstProperties.Const.MIN_RESIZE_HEIGHT));if(j&&(j!=0)){f=Math.max(f,j)}var h=this.GetProperty(ConstProperties.Const.MAX_RESIZE_HEIGHT);var a=this.GetProperty(ConstProperties.Const.AUTOLIMIT_RESIZE_HEIGHT);if(a){h=0;var o;for(d=0,o=this.GetContainerForChildren().length;d<o;d++){q=(this.GetContainerForChildren())[d];if(q!=null){h=Math.max(h,q.y+Math.max(0,q.GetHeight()))}}}if(h&&(h!=0)){f=Math.min(f,h)}if(this.mbFixedAspectRatio){var n=Utils.GetViewportWidth()-ResizeMgr.GetInstance().GetScrollbarSize()-this.GetProperty(ConstProperties.Const.RESIZE_WIDTH);var c=n/f;if(c<this.mdFixedAspectRatio){f=n/this.mdFixedAspectRatio}}if(f!=k){this.SetUpdateStyle(true);b=true}this.SetHeight(f);if(Utils.IsIE8()==true){if(f<=0&&$HasClass(this.msId,StyleMgr.Const.CLASS_INVISIBLE)==false){$AddClass(this.msId,StyleMgr.Const.CLASS_INVISIBLE);this.mbIE8ForceHide=true}else{if(this.mbIE8ForceHide==true&&f>0){$RemoveClass(this.msId,StyleMgr.Const.CLASS_INVISIBLE);this.mbIE8ForceHide=false}}}return b};HTMLElement.prototype.GetId=function(){return this.msId};HTMLElement.prototype.GetIdWithoutVFormId=function(){var a=this.msId.split(Matrix3.Const.SEPARATOR_CONTROL);if(a.length==1){this.msId}else{return a[1]}};HTMLElement.prototype.GetInstanceName=function(){return this.GetIdWithoutVFormId()};HTMLElement.prototype.GetVFormId=function(){var a=this.msId.split(Matrix3.Const.SEPARATOR_CONTROL);if(a.length==1){return this.msId.substr(0,this.msId.lastIndexOf(Matrix3.Const.SEPARATOR_HIERARCHY))}else{return a[0]}};HTMLElement.prototype.IsVForm=function(){return this.msId.lastIndexOf(Matrix3.Const.SEPARATOR_CONTROL)==-1};HTMLElement.prototype.GetParentVFormId=function(){var a=this.GetVFormId();return a.substr(0,a.lastIndexOf(Matrix3.Const.SEPARATOR_HIERARCHY))};HTMLElement.prototype.GetProperty=function(b,a){var c;if(this.moProperties!=null){c=this.moProperties[b]}if(c==null){c=a}return c};HTMLElement.prototype.SetProperty=function(b,a){if(this.moProperties==null){this.moProperties=new Object()}this.moProperties[b]=a};HTMLElement.prototype.HasProperty=function HasProperty(a){if(this.moProperties!=null){return this.moProperties.hasOwnProperty(a)}else{return false}};HTMLElement.prototype.GetParentContainer=function GetParentContainer(){var b=null;var a=this;while(a!=null&&b==null){a=a.moParent;b=a}return b};HTMLElement.prototype.GetLastControl=function GetLastControl(){var d=null;var b;var c;if(this.moPlaceHolder!=null){b=moPlaceHolder;c=moPlaceHolder.moParent.moParent}else{b=this;c=this.GetParentContainer()}if(c!=null){var a=Utils.IndexOf(c.GetContainerForChildren(),b)-1;if(a>=0){d=c.GetContainerForChildren()[a]}}return d};HTMLElement.prototype.GetBrotherId=function GetBrotherId(a){var b=this.msId.split(Matrix3.Const.SEPARATOR_CONTROL);if(b.length==1){return this.msId.substr(0,this.msId.lastIndexOf(Matrix3.Const.SEPARATOR_HIERARCHY))+Matrix3.Const.SEPARATOR_CONTROL+a}else{return b[0]+Matrix3.Const.SEPARATOR_CONTROL+a}};HTMLElement.prototype.IsEthereal=function IsEthereal(){return this.mbEthereal};HTMLElement.prototype.IsUpdateStyle=function IsUpdateStyle(){return this.mbUpdateStyle};HTMLElement.prototype.ApplyStyle=function ApplyStyle(a){if(a==null){a=false}if(this.moProperties){if(this.moProperties.hasOwnProperty(AutoScaleProperties.Const.PROPERTY_POLICY)){AutoScaleProperties.Apply(this)}if(this.moProperties.hasOwnProperty(MultipleSourcesProperties.Const.PROPERTY_MULTIPLE_SOURCE)){this.ApplyMultipleSources()}}if(!Matrix3.mbEvent){this.mbUpdateStyle=false}};HTMLElement.prototype.TransferPositioningToDOM=function TransferPositioningToDOM(){if(!this.mbAbsolutePos){if(this.moFloatingParent){var a=this.moParent.offsetBetweenControls(this.moFloatingParent);var d=this.GetNode();if(this.mbPosFixed){$(d).css({left:this.miFixedX+"px",top:this.miFixedY+"px",width:this.miWidth+"px",height:this.miHeight+"px"})}else{var c=0;var b=0;if(this.moFloatingParent.GetNode){var f=this.moFloatingParent.GetNode();c=f.scrollTop;b=f.scrollLeft}else{c=this.moFloatingParent.scrollTop;b=this.moFloatingParent.scrollLeft}if(c){a.y-=c}if(b){a.x-=b}$(d).css({left:(this.x-a.x)+"px",top:(this.y-a.y)+"px",width:this.miWidth+"px",height:this.miHeight+"px"})}}else{if(this.msCtrlType!=PositionItem.Const.CONTROL_TYPE_POPUP){var d=this.GetNode();if(this.mbPosFixed){$(d).css({left:this.miFixedX+"px",top:this.miFixedY+"px",width:Math.max(this.miWidth,0)+"px",height:Math.max(this.miHeight,0)+"px"})}else{$(d).css({left:this.x+"px",top:this.y+"px",width:Math.max(this.miWidth,0)+"px",height:Math.max(this.miHeight,0)+"px"})}}}switch(this.msCtrlType){case PositionItem.Const.CONTROL_TYPE_PANEL_COL:$(d).css("height",Math.max(this.moParent.miHeight,0)+"px");break}}};HTMLElement.prototype.ApplyPostPositionProperties=function(){if(this.HasProperty(ConstProperties.Const.SCROLL_TO_ME)&&this.GetProperty(ConstProperties.Const.SCROLL_TO_ME)){this.ScrollToMe(false);delete this.moProperties[ConstProperties.Const.SCROLL_TO_ME]}};HTMLElement.prototype.ScrollToMe=function(a){var g=this.moParent;var b=1;while(g!=null&&b>0){if(g.msCtrlType==PositionItem.Const.CONTROL_TYPE_POPUP){b=0}if(g.IsScrollable()&&g.ScrollToMakeControlVisible(this,a)){b--}g=g.moParent}if(b>0){var c=new Point(this.GetWidth()/2,0);c=this.localToGlobal(c);var h=ControlMgr.GetInstance().GetRootPositionItem();var f=new Point(window.innerWidth/2,0);var d=new Point(c.x-f.x,c.y-f.y);if(window.scrollTo){if(a){$(Utils.Form1()).animate({scrollTop:d.y},350)}else{Utils.Form1().scrollTop=d.y}}else{if(a){$(document.body).animate({scrollLeft:d.x,scrollTop:d.y},350)}else{document.body.scrollLeft=d.x;document.body.scrollTop=d.y}}}};HTMLElement.prototype.IsScrollable=function(){return $(this.GetNode()).css("overflow")!="hidden"&&((this.GetNode().clientWidth&&this.GetNode().scrollWidth&&this.GetNode().clientWidth<this.GetNode().scrollWidth)||(this.GetNode().clientHeight&&this.GetNode().scrollHeight&&this.GetNode().clientHeight<this.GetNode().scrollHeight))};HTMLElement.prototype.ScrollToMakeControlVisible=function(b,a){var d=new Point(b.GetWidth()/2,0);d=this.globalToLocal(b.localToGlobal(d));var h=new Point(this.GetWidth()/2,0);var f=new Point(d.x-h.x,d.y-h.y);var c=this.GetNode().scrollTop;var g=this.GetNode().scrollLeft;if(a){$(this.GetNode()).animate({scrollTop:this.GetNode().scrollTop+f.y,scrollLeft:this.GetNode().scrollLeft+f.x},350)}else{this.GetNode().scrollTop+=f.y;this.GetNode().scrollLeft+=f.x}return(this.GetNode().scrollTop!=c)||(this.GetNode().scrollLeft!=g)};HTMLElement.prototype.SetDeep=function(a){this.miDeep=a};HTMLElement.prototype.GetDeep=function(){return this.miDeep};HTMLElement.prototype.GetOriginalHeight=function(){return this.miOriginalHeight};HTMLElement.prototype.GetOriginalWidth=function(){return this.miOriginalWidth};HTMLElement.prototype.ForceXChildrenDependence=function(){return(this.msCtrlType==PositionItem.Const.CONTROL_TYPE_FLOAT_PANEL)};HTMLElement.prototype.ForceYChildrenDependence=function(){return(this.msCtrlType==PositionItem.Const.CONTROL_TYPE_FLOAT_PANEL)};HTMLElement.prototype.XDependsOnlyFromLastControl=function XDependsOnlyFromLastControl(){return(this.msCtrlType==PositionItem.Const.CONTROL_TYPE_PANEL_LINE)};HTMLElement.prototype.YDependsOnlyFromLastControl=function(){return false};HTMLElement.prototype.GetContainerForChildren=function(){return this.moContainerForChildrens};HTMLElement.prototype.IsContainer=function(){var a=false;switch(this.msCtrlType){case PositionItem.Const.CONTROL_TYPE_PANEL:case PositionItem.Const.CONTROL_TYPE_POPUP:case PositionItem.Const.CONTROL_TYPE_PANEL_TABLE:case PositionItem.Const.CONTROL_TYPE_PANEL_COL:case PositionItem.Const.CONTROL_TYPE_PANEL_LINE:a=true;break}return a};HTMLElement.prototype.GetWidth=function(){return this.miWidth};HTMLElement.prototype.SetWidth=function(a){this.miWidth=parseInt(a)};HTMLElement.prototype.GetHeight=function(){return this.miHeight};HTMLElement.prototype.SetHeight=function(a){this.miHeight=parseInt(a)};HTMLElement.prototype.SetXType=function(a){this.masXTypes[0]=a};HTMLElement.prototype.SetYType=function(a){this.masYTypes[0]=a};HTMLElement.prototype.GetPaddingTop=function(){if(this.miCachedPaddingTop==null){var a=this.GetProperty(ConstProperties.Const.FLASH_PADDING,null);this.miCachedPaddingTop=this.GetProperty(ConstProperties.Const.FLASH_PADDING_TOP,a);if(this.miCachedPaddingTop==null){this.miCachedPaddingTop=parseInt(getStyle(this,"padding-top",this.GetNode().className,this.mbNoPaddingCache))}}return this.miCachedPaddingTop};HTMLElement.prototype.GetPaddingRight=function GetPaddingRight(){if(this.miCachedPaddingRight==null){var a=this.GetProperty(ConstProperties.Const.FLASH_PADDING,null);this.miCachedPaddingRight=this.GetProperty(ConstProperties.Const.FLASH_PADDING_RIGHT,a);if(this.miCachedPaddingRight==null){this.miCachedPaddingRight=parseInt(getStyle(this,"padding-right",this.GetNode().className,this.mbNoPaddingCache))}}return this.miCachedPaddingRight};HTMLElement.prototype.GetPaddingBottom=function GetPaddingBottom(){if(this.miCachedPaddingBottom==null){var a=this.GetProperty(ConstProperties.Const.FLASH_PADDING,null);this.miCachedPaddingBottom=this.GetProperty(ConstProperties.Const.FLASH_PADDING_BOTTOM,a);if(this.miCachedPaddingBottom==null){this.miCachedPaddingBottom=parseInt(getStyle(this,"padding-bottom",this.GetNode().className,this.mbNoPaddingCache))}}return this.miCachedPaddingBottom};HTMLElement.prototype.GetPaddingLeft=function GetPaddingLeft(){if(this.miCachedPaddingLeft==null){var a=this.GetProperty(ConstProperties.Const.FLASH_PADDING,null);this.miCachedPaddingLeft=this.GetProperty(ConstProperties.Const.FLASH_PADDING_LEFT,a);if(this.miCachedPaddingLeft==null){this.miCachedPaddingLeft=parseInt(getStyle(this,"padding-left",this.GetNode().className,this.mbNoPaddingCache))}}return this.miCachedPaddingLeft};HTMLElement.prototype.SetUpdateStyle=function SetUpdateStyle(a){this.mbUpdateStyle=a};HTMLElement.prototype.GetActivatedProperty=function GetActivatedProperty(a){return this.moActivatedProperties[a]};HTMLElement.prototype.AddXDependent=function AddXDependent(a){this.moXDependents.push(a)};HTMLElement.prototype.AddYDependent=function AddYDependent(a){this.moYDependents.push(a)};HTMLElement.prototype.RemoveXDependent=function RemoveXDependent(a){this.moXDependents.splice(Utils.IndexOf(this.moXDependents,a),1)};HTMLElement.prototype.RemoveYDependent=function RemoveYDependent(a){this.moYDependents.splice(Utils.IndexOf(this.moYDependents,a),1)};HTMLElement.prototype.AddXSource=function AddXSource(a){this.moXSources.push(a)};HTMLElement.prototype.AddYSource=function AddYSource(a){this.moYSources.push(a)};HTMLElement.prototype.RemoveXSource=function RemoveXSource(a){this.moXSources.splice(Utils.IndexOf(this.moXSources,a),1)};HTMLElement.prototype.RemoveYSource=function RemoveYSource(a){this.moYSources.splice(Utils.IndexOf(this.moYSources,a),1)};HTMLElement.prototype.GetXDependents=function GetXDependents(){return this.moXDependents};HTMLElement.prototype.GetXSources=function GetXSourcesfunction(){return this.moXSources};HTMLElement.prototype.GetYDependents=function GetYDependents(){return this.moYDependents};HTMLElement.prototype.GetYSources=function GetYSources(){return this.moYSources};HTMLElement.prototype.CleanDependencies=function(){var a;while(a=this.moXSources.pop()){if(a.GetType()!=Dependency.Const.TYPE_PARENT){a.Delete(true,false)}}while(a=this.moYSources.pop()){if(a.GetType()!=Dependency.Const.TYPE_PARENT){a.Delete(true,false)}}while(a=this.moXDependents.pop()){if(a.GetType()!=Dependency.Const.TYPE_PARENT){a.Delete(false,true)}}while(a=this.moYDependents.pop()){if(a.GetType()!=Dependency.Const.TYPE_PARENT){a.Delete(false,true)}}PositionMgr.GetInstance().RemoveFromBothDirtyLists(this)};HTMLElement.prototype.GetAncestorWithFlashID=function GetAncestorWithFlashID(a,b){if(b==null){b=true}var d=null;if(!b&&this.GetProperty(ConstProperties.Const.FLASH_ID)==a){d=this}else{var c=this.GetParentContainer();if(c!=null){d=c.GetAncestorWithFlashID(a,false)}else{if(a==ConstValues.Const.SUPER_CONTAINER){return ResizeMgr.GetInstance().GetScreenAnchor()}}}return d};HTMLElement.prototype.CalculateXPositionLabel=function CalculateXPositionLabel(){var a=this.CalculateXPositionControl();if(a){var d=this.GetWidth();if(this.GetOriginalWidth()==-1){d=0;for(var b=0,f=this.GetChildNodes().length;b<f;b++){var c=this.GetChildNodes()[b].offsetLeft+this.GetChildNodes()[b].offsetWidth;if(c!=undefined){d=Math.max(d,c+1)}}if(d!=this.GetWidth()){this.SetWidth(d);this.CalculateXPositionControl();a=true;this.mbUpdateStyle=true}}else{if(this.msCtrlType==PositionItem.Const.CONTROL_TYPE_LABEL){var g;var h;for(var b=0,f=this.GetChildNodes().length;b<f;b++){if($HasClass(this.GetChildNodes()[b],"Lbl")){g=this.GetChildNodes()[b]}else{if($HasClass(this.GetChildNodes()[b],"Value")){h=this.GetChildNodes()[b]}}}}}if(this.GetOriginalHeight()==-1){PositionMgr.GetInstance().AddToDirtyYList(this);if(this.miOriginalWidth!=-1&&!this.msWidthReference.length==0&&!Utils.IsStringFilled(this.msAdvancedWidth)){DOMChangesQueue.GetInstance().QueueSetCss(this.GetNode(),"width",this.miWidth+"px")}}}return a};HTMLElement.prototype.CalculateYPositionLabel=function CalculateYPositionLabel(){var a=false;if(this.GetOriginalHeight()==-1){var d=0;var b=false;if(this.msCtrlType=="ParameterStr"){this.moTextarea.style.height="auto";this.moTextarea.style.height=this.moTextarea.scrollHeight+"px"}for(var c=0,g=this.GetChildNodes().length;c<g;c++){var f=this.GetChildNodes()[c].offsetTop+this.GetChildNodes()[c].offsetHeight;if(f){d=Math.max(d,f)}}if(this.miGridUnitHeight){d=Math.ceil(d/this.miGridUnitHeight)*this.miGridUnitHeight}if(d!=this.GetHeight()){this.SetHeight(d);a=true;this.mbUpdateStyle=true}}a=this.CalculateYPositionControl()||a;return a};HTMLElement.prototype.CalculateXPositionButton=function CalculateXPositionButton(){var a=this.CalculateXPositionControl();if(this.GetOriginalWidth()==-1){if(this.moLinkedImage!=null){var b=this.moLinkedImage.offsetWidth;if(b!=undefined&&b!=this.miWidth){this.SetWidth(b);a=true;this.mbUpdateStyle=true}}}if(a){var b=this.GetWidth();if(this.GetOriginalWidth()==-1){b=0;if(this.moLinkedImage!=null){var b=this.moLinkedImage.offsetWidth;if(b!=undefined&&b!=this.miWidth){this.SetWidth(b);a=true;this.mbUpdateStyle=true}}else{if(!this.miTextWidth){if(this.GetChildNodes().length>1){var c=this.GetChildNodes().item(1);this.miTextWidth=c.offsetLeft+c.offsetWidth+1}else{this.miTextWidth=0}b=this.miTextWidth}else{b=this.miTextWidth}}if(b!=this.GetWidth()){this.SetWidth(b);this.CalculateXPositionControl();a=true;this.mbUpdateStyle=true}}if(a&&this.GetOriginalHeight()==-1){PositionMgr.GetInstance().AddToDirtyYList(this);this.miTextHeight=null;DOMChangesQueue.GetInstance().QueueResetHeight(this.GetNode());if(this.moLinkedImage==null&&this.GetChildNodes().length){if(this.miOriginalWidth!=-1&&!this.msWidthReference.length==0&&!Utils.IsStringFilled(this.msAdvancedWidth)){DOMChangesQueue.GetInstance().QueueSetCss(this.GetNode(),"width",this.miWidth+"px")}}}}if(a&&this.moLinkedImage!=null){if(this.moProperties&&this.GetOriginalHeight()==-1&&this.GetOriginalWidth()!=-1&&this.moProperties.hasOwnProperty(AutoScaleProperties.Const.PROPERTY_POLICY)){AutoScaleProperties.Apply(this)}}return a};HTMLElement.prototype.CalculateYPositionButton=function CalculateYPositionButton(){var a=false;if(this.GetOriginalHeight()==-1){var b=0;if(this.moLinkedImage!=null){var b=this.moLinkedImage.offsetHeight;if(b!=undefined&&b!=this.miHeight){this.SetHeight(b);a=true;this.mbUpdateStyle=true}}else{if(this.miTextHeight==null){if(this.GetChildNodes().length>1){var c=this.GetChildNodes().item(1);this.miTextHeight=c.offsetTop+c.offsetHeight}else{this.miTextHeight=0}b=this.miTextHeight}else{b=this.miTextHeight}}if(this.miGridUnitHeight){b=Math.ceil(b/this.miGridUnitHeight)*this.miGridUnitHeight}if(b!=this.GetHeight()){this.SetHeight(b);a=true;this.mbUpdateStyle=true}}a=this.CalculateYPositionControl()||a;if(a&&this.moLinkedImage!=null){if(this.moProperties&&this.GetOriginalWidth()==-1&&this.GetOriginalHeight()!=-1&&this.moProperties.hasOwnProperty(AutoScaleProperties.Const.PROPERTY_POLICY)){AutoScaleProperties.Apply(this)}}return a};HTMLElement.prototype.RecursiveRemove=function(){var f=new Array();f.push(this);var d;var c=ControlMgr.GetInstance();while(f.length>0){d=f.pop();d.CleanDependencies();c.RemovePositionItem(d);if(d.moContainerForChildrens&&d.moContainerForChildrens.length>0){for(var a=0,b=d.moContainerForChildrens.length;a<b;a++){f.push(d.moContainerForChildrens[a])}}}};HTMLElement.prototype.CalculateXPositionImage=function CalculateXPositionImage(){var a=false;if(this.GetOriginalWidth()==-1){if(this.moLinkedImage!=null){var b=this.moLinkedImage.offsetWidth;if(b!=undefined&&b!=this.miWidth){this.SetWidth(b);a=true;this.mbUpdateStyle=true}}}a=this.CalculateXPositionControl()||a;if(a&&this.moLinkedImage!=null){if(this.moProperties&&this.GetOriginalHeight()==-1&&this.GetOriginalWidth()!=-1&&this.moProperties.hasOwnProperty(AutoScaleProperties.Const.PROPERTY_POLICY)){AutoScaleProperties.Apply(this)}}return a};HTMLElement.prototype.CalculateYPositionImage=function CalculateYPositionImage(){var a=false;if(this.GetOriginalHeight()==-1){if(this.moLinkedImage!=null){var b=this.moLinkedImage.offsetHeight;if(b!=undefined&&b!=this.miHeight){this.SetHeight(b);a=true;this.mbUpdateStyle=true}}}a=this.CalculateYPositionControl()||a;if(a&&this.moLinkedImage!=null){if(this.moProperties&&this.GetOriginalWidth()==-1&&this.GetOriginalHeight()!=-1&&this.moProperties.hasOwnProperty(AutoScaleProperties.Const.PROPERTY_POLICY)){AutoScaleProperties.Apply(this)}}return a};HTMLElement.prototype.CalculateXPositionIFrame=function(){var a=false;if(this.GetOriginalWidth()==-1){var c=0;try{c=GetWidthIFrame(this)}catch(b){}if(c!=undefined&&c!=this.miWidth){this.SetWidth(c);a=true;this.mbUpdateStyle=true}}a=this.CalculateXPositionControl()||a;return a};HTMLElement.prototype.CalculateYPositionIFrame=function(){var a=false;if(this.GetOriginalHeight()==-1){var c=0;try{c=GetHeightIFrame(this)}catch(b){}if(c!=undefined&&c!=this.miHeight){this.SetHeight(c);a=true;this.mbUpdateStyle=true}}a=this.CalculateYPositionControl()||a;return a};function GetHeightIFrame(a){var c=null;var b=a.GetChildNodes()[0];if(b.contentWindow){iFrameBody=b.contentWindow.document.getElementsByTagName("body")[0]}else{if(b.contentDocument){iFrameBody=b.contentDocument.getElementsByTagName("body")[0]}}if(iFrameBody){c=$(iFrameBody).height()}return c}function GetWidthIFrame(a){var c=null;var b=a.GetChildNodes()[0];if(b.contentWindow){iFrameBody=b.contentWindow.document.getElementsByTagName("body")[0]}else{if(b.contentDocument){iFrameBody=b.contentDocument.getElementsByTagName("body")[0]}}if(iFrameBody){c=$(iFrameBody).width()}return c}HTMLElement.prototype.CalculateXPositionPanelTable=function CalculateXPositionPanelTable(){var a=this.CalculateXPositionContainer();var d=0;if(this.GetContainerForChildren().length>0){d=(this.GetContainerForChildren()[0]).GetContainerForChildren().length}if(this.maiActualColWidth==null||a){var m=this.moContainerForChildrens;var f=this.GetWidth();var c=this.ComputeActualColWidth(d,m);if(c>f){f=c;this.SetWidth(f)}for(var b=0,k=m.length;b<k;b++){var p=m[b];p.OverrideOriginalWidth(f);p.ForceHasChanged();PositionMgr.GetInstance().AddToDirtyXList(p);var g=0;var o=p.moContainerForChildrens;if(o.length==1){var n=o[0];n.OverrideOriginalWidth(f);n.ForceHasChanged();PositionMgr.GetInstance().AddToDirtyXList(n)}else{for(var h=0,l=o.length;h<l;h++){n=o[h];if(n!=null){n.OverrideOriginalWidth(this.maiActualColWidth[h]);n.miXOff=g;g+=this.maiActualColWidth[h];n.ForceHasChanged();PositionMgr.GetInstance().AddToDirtyXList(n)}}}}}return true};HTMLElement.prototype.ComputeActualColWidth=function ComputeActualColWidth(a,b){var k=this.GetWidth();this.maiActualColWidth=new Array();var j=0;var c=0;for(var g=0;g<a;g++){if(this.maiColWidth[g]!=null){if(this.maiColWidth[g]==-1){var m;if(b.length==1){m=b[0]}else{m=b[Math.max(1,b.length-1)]}var l=m.moContainerForChildrens[g];l.OverrideOriginalWidth(-1);l.CalculateXPosition();this.maiActualColWidth[g]=l.GetWidth()}else{this.maiActualColWidth[g]=this.maiColWidth[g]}}else{this.maiActualColWidth[g]=30;this.mabCanGrow[g]=1}j+=this.maiActualColWidth[g];if(this.mabCanGrow[g]==null||(this.mabCanGrow[g]==1)){c+=this.maiActualColWidth[g]}}var f=k-j;var d=Math.max(1,(f+c)/c);var h=0;for(g=0;g<a;g++){if(this.mabCanGrow[g]==null||(this.mabCanGrow[g]==1)){this.maiActualColWidth[g]*=d}h+=this.maiActualColWidth[g]}return h};HTMLElement.prototype.GetFixedAspectRatio=function(){var b=-1;var a=this.GetProperty(ConstProperties.Const.RESIZE_KEEP_RATIO);if(a){var d=this.GetProperty(ConstProperties.Const.MAX_RESIZE_WIDTH);var c=this.GetProperty(ConstProperties.Const.MAX_RESIZE_HEIGHT);if(d!=0&&c!=0){b=parseFloat(d)/parseFloat(c)}}return b};PositionItem.getAbsoluteXY=function(b,a){var l=null;var m=[];m=[b.x,b.y];if(m[0]==null){m[0]=0}if(m[1]==null){m[1]=0}l=b.moParent;var c=$("#Form1");var i=$(window);var f=c.scrollTop();var d=c.scrollLeft();var k=i.scrollTop();var j=i.scrollLeft();if(l!=b){while(l){if(l.mbPosFixed){m[0]+=l.miFixedX;m[1]+=l.miFixedY;m[0]+=j+d;m[1]+=k+f;l=null}else{var g=l.GetNode();if(l.x){m[0]+=l.x}if(l.mbSX){m[0]-=g.scrollLeft}if(l.y){m[1]+=l.y;if(a&&l.moParent.msCtrlType==PositionItem.Const.CONTROL_TYPE_POPUP&&g.offsetTop){var h=l.moParent.GetNode();m[0]+=h.offsetLeft;m[1]+=h.offsetTop}}else{if(l.moParent!=undefined&&l.moParent.msCtrlType==PositionItem.Const.CONTROL_TYPE_POPUP&&g.offsetTop!=undefined){m[0]+=g.offsetLeft;m[1]+=g.offsetTop;if(a){var h=l.moParent.GetNode();m[0]+=h.offsetLeft;m[1]+=h.offsetTop}}}if(l.mbSY){m[1]-=g.scrollTop}l=l.moParent}}}if(m[0]==null){m[0]=0}if(m[1]==null){m[1]=0}return m};HTMLElement.prototype.localToGlobal=function(a){var b=PositionItem.getAbsoluteXY(this);return new Point(b[0]+a.x,b[1]+a.y)};HTMLElement.prototype.globalToLocal=function(a){var b=PositionItem.getAbsoluteXY(this);return new Point(a.x-b[0],a.y-b[1])};HTMLElement.prototype.offsetBetweenControls=function(b){var c=PositionItem.getAbsoluteXY(b);var a=PositionItem.getAbsoluteXY(this);return new Point(c[0]-a[0],c[1]-a[1])};HTMLElement.prototype.ForceHasChanged=function(){this.mbXMustBeCalculated=true;this.mbYMustBeCalculated=true};HTMLElement.prototype.CopyDependenciesTo=function(a){var c;for(var b=0;b<this.moXDependents.length;b++){c=this.moXDependents[b];c.ReplaceSource(a,false)}this.moXDependents=new Array();for(var b=0;b<this.moYDependents.length;b++){c=this.moYDependents[b];c.ReplaceSource(a,false)}this.moYDependents=new Array()};HTMLElement.prototype.FixAddDependency=function(a){if(this.GetOriginalWidth()==-1||this.ForceXChildrenDependence()){new Dependency(a,this,Dependency.Const.TYPE_PARENT,Dependency.Const.SUBTYPE_NONE,null,Dependency.Const.AXIS_X)}if(this.GetOriginalHeight()==-1||this.ForceYChildrenDependence()){new Dependency(a,this,Dependency.Const.TYPE_PARENT,Dependency.Const.SUBTYPE_NONE,null,Dependency.Const.AXIS_Y)}};HTMLElement.prototype.AddControl=function(a,c,b){a.moParent=this;if(this.moContainerForChildrens==null){return}if(c!=null){if(c==a){this.moContainerForChildrens.splice(Utils.IndexOf(this.moContainerForChildrens,c),1);if(b!=null){this.moContainerForChildrens.splice(Utils.IndexOf(this.moContainerForChildrens,b),0,a)}else{this.moContainerForChildrens.push(a)}}else{var d=Utils.IndexOf(this.moContainerForChildrens,c);if(d!=-1){this.moContainerForChildrens.splice(d,1,a)}else{this.moContainerForChildrens.push(a)}}}else{if(b!=null){this.moContainerForChildrens.splice(Utils.IndexOf(this.moContainerForChildrens,b),0,a)}else{this.moContainerForChildrens.push(a)}}};HTMLElement.prototype.OverrideOriginalWidth=function(a){this.miOriginalWidth=a};HTMLElement.prototype.OverrideOriginalHeight=function(a){this.miOriginalHeight=a};HTMLElement.prototype._Debug=function _Debug(g){var c=document.createElement("CONTROL");g.appendChild(c);c.setAttribute("name",this.msId);for(var a=0,b=this.moContainerForChildrens.length;a<b;a++){this.moContainerForChildrens[a]._Debug(c)}if(this.moXDependents.length>0){var f=document.createElement("DEPENDENCIES_X");c.appendChild(f);for(var a=0,b=this.moXDependents.length;a<b;a++){var d=document.createElement("dep_X");f.appendChild(d);d.innerHTML=this.moXDependents[a].toString()}}if(this.moYDependents.length>0){var f=document.createElement("DEPENDENCIES_Y");c.appendChild(f);for(var a=0,b=this.moYDependents.length;a<b;a++){var d=document.createElement("dep_Y");f.appendChild(d);d.innerHTML=this.moYDependents[a].toString()}}};HTMLElement.prototype.IsUnderMouse=function(d,a){d=$.event.fix(d);var f=[d.pageX,d.pageY];var c=PositionItem.getAbsoluteXY(this,true);if(PositionItem.IsInPopup(this)==false){f[0]+=Utils.Form1().scrollLeft;f[1]+=Utils.Form1().scrollTop}var b=false;if(a){b=(f[0]>=c[0]&&f[0]<=(c[0]+this.GetWidth())&&f[1]>=c[1]&&f[1]<=(c[1]+this.GetHeight()))}else{b=(f[0]>c[0]&&f[0]<(c[0]+this.GetWidth())&&f[1]>c[1]&&f[1]<(c[1]+this.GetHeight()))}return b};PositionItem.IsInPopup=function(a){var b=false;if(a){var c=a.parentNode;while(c){if(c!=undefined&&c.msCtrlType==PositionItem.Const.CONTROL_TYPE_POPUP){b=true;break}c=c.moParent}}return b};HTMLElement.prototype.GetAlternativeID=function(){var c=null;var b=this.GetProperty(ConstProperties.Const.PROPERTY_INSTANCE_NAME);if(b!=null){var a=this.GetId();c=a.substr(0,a.lastIndexOf(Matrix3.Const.SEPARATOR_HIERARCHY))+Matrix3.Const.SEPARATOR_CONTROL+b}return c};HTMLElement.prototype.GetName=function(){var b=null;if(this.HasProperty(ConstProperties.Const.NAME)){b=this.GetProperty(ConstProperties.Const.NAME)}else{var a=this.msId.split(Matrix3.Const.SEPARATOR_CONTROL);if(a.length<=1){b=this.GetAlternativeID()}else{b=a[1]}}return b};HTMLElement.prototype.GetVFormName=function(){var b=this.GetName();if(typeof b==="string"){var a=b.split(Matrix3.Const.SEPARATOR_CONTROL);if(a.length<=1){return b}else{return a[1]}}else{return this.msId}};moStyleCache=new Object();function getStyle(d,h,b,a){if(!b){b="[EMPTY]"}if(b=="ABS VF PopupContentClass"){a=true}if(!a&&moStyleCache.hasOwnProperty(b)&&moStyleCache[b].hasOwnProperty(h)){return moStyleCache[b][h]}else{var g=false;if(window.getComputedStyle){g=window.getComputedStyle(d.GetNode(),null).getPropertyValue(h)}else{if(d.GetNode().currentStyle){function c(l){var l=l.split("-"),k=l[0],j;for(j=1;parT=l[j];j++){k+=parT.charAt(0).toUpperCase()+parT.substr(1)}return k}g=d.GetNode().currentStyle[c(h)]}}if(b&&!a){var f;if(moStyleCache.hasOwnProperty(b)){f=moStyleCache[b]}else{f=new Object();moStyleCache[b]=f}f[h]=g}return g}}function PositionMgr(){this.moXDirtyHeap=new ControlHeap();this.moYDirtyHeap=new ControlHeap()}PositionMgr.Const={MGR_NAME:"Position",MAX_POSITIONING_DURATION:4000,RELEVENT_LOOP_IDENTIFICATION_ITERATIONS:2000,MAX_ITER_ON_SAME_CONTROL:500};DebugTooltip={FLASH_EDIT_BTN_ID:"Debug_VForm_LaunchFlashEditBtn"};PositionMgr.moSingleton=null;PositionMgr.GetInstance=function(){if(!PositionMgr.moSingleton){PositionMgr.moSingleton=new PositionMgr()}return PositionMgr.moSingleton};PositionMgr.prototype={CalculatePosition:function(b,a){if(Matrix3.mbInhibitPositioning){return}if(a==null){a=true}this.SetButtonStyleBlock(false);var f=this.mdTweenDuration>0;var l=new Date().getTime();this.miLastReposDate=new Date().getTime();if(a){SequenceLoadingMgr.GetInstance().PrePositioning();if(f||this.mbLastPosHadTweening){var c=ControlMgr.GetInstance().GetAllPositionItems();for(var w in c){var o=c[w];o.SavePrePositionState()}}}if(!b){ResizeMgr.GetInstance().AssumeLateralScrollbarVisible()}var h=this.moXDirtyHeap.Peek()!=null;var j=this.moYDirtyHeap.Peek()!=null;var q;var m=0;this.mbTrackControlPositioning=false;DOMChangesQueue.GetInstance().ApplyQueue();while(h||j){while(h){var t;t=this.moXDirtyHeap.Pop();if(this.mbTrackControlPositioning){var v=t.GetId();if(!this.moControlFrequencyTable.hasOwnProperty(v)){this.moControlFrequencyTable[v]=0}this.moControlFrequencyTable[v]=parseInt(this.moControlFrequencyTable[v])+1;this.miIterationsTracked++}if(t.CalculateXPosition()){for(var q in t.GetXDependents()){var p=t.GetXDependents()[q].GetDestination();this.moXDirtyHeap.Add(p);if(p.msCtrlType==PositionItem.Const.CONTROL_TYPE_FLOAT_PANEL){this.moYDirtyHeap.Add(p)}}}m++;h=this.moXDirtyHeap.Peek()!=null;if(m%1000==0&&(new Date().getTime()-this.miLastReposDate>PositionMgr.Const.MAX_POSITIONING_DURATION)){if(this.mbTrackControlPositioning===false){this.mbTrackControlPositioning=true;this.miIterationsTracked=0;this.moControlFrequencyTable=new Object()}else{if(this.miIterationsTracked>=PositionMgr.Const.RELEVENT_LOOP_IDENTIFICATION_ITERATIONS){var g=false;for(var v in this.moControlFrequencyTable){if(this.moControlFrequencyTable[v]>=PositionMgr.Const.MAX_ITER_ON_SAME_CONTROL){g=true;break}}if(g){this.moXDirtyHeap=new ControlHeap();this.moYDirtyHeap=new ControlHeap();if(ControlMgr.GetInstance().GetReference(DebugTooltip.FLASH_EDIT_BTN_ID)==null){return false}else{var x="\n------------------------------------------------------\nPositioning loop detected on X axis\n------------------------------------------------------\n";x+="Involved controls :\nIterations | Control ID\n";for(var v in this.moControlFrequencyTable){x+=this.moControlFrequencyTable[v]+" | "+v+"\n"}alert(x);return false}}}}}}DOMChangesQueue.GetInstance().ApplyQueue();j=this.moYDirtyHeap.Peek()!=null;while(j){var u;u=this.moYDirtyHeap.Pop();if(this.mbTrackControlPositioning){var v=u.GetId();if(!this.moControlFrequencyTable.hasOwnProperty(v)){this.moControlFrequencyTable[v]=0}this.moControlFrequencyTable[v]=parseInt(this.moControlFrequencyTable[v])+1;this.miIterationsTracked++}if(u.CalculateYPosition()){for(var q in u.GetYDependents()){var p=u.GetYDependents()[q].GetDestination();this.moYDirtyHeap.Add(p);if(p.msCtrlType==PositionItem.Const.CONTROL_TYPE_FLOAT_PANEL){this.moXDirtyHeap.Add(p)}}}m++;j=this.moYDirtyHeap.Peek()!=null;if(m%1000==0&&(new Date().getTime()-this.miLastReposDate>PositionMgr.Const.MAX_POSITIONING_DURATION)){if(this.mbTrackControlPositioning===false){this.mbTrackControlPositioning=true;this.miIterationsTracked=0;this.moControlFrequencyTable=new Object()}else{if(this.miIterationsTracked>=PositionMgr.Const.RELEVENT_LOOP_IDENTIFICATION_ITERATIONS){var g=false;for(var v in this.moControlFrequencyTable){if(this.moControlFrequencyTable[v]>=PositionMgr.Const.MAX_ITER_ON_SAME_CONTROL){g=true;break}}if(g){this.moXDirtyHeap=new ControlHeap();this.moYDirtyHeap=new ControlHeap();if(ControlMgr.GetInstance().GetReference(DebugTooltip.FLASH_EDIT_BTN_ID)==null){return false}else{var x="\n------------------------------------------------------\nPositioning loop detected on Y axis\n------------------------------------------------------\n";x+="Involved controls :\nIterations | Control ID\n";for(var v in this.moControlFrequencyTable){x+=this.moControlFrequencyTable[v]+" | "+v+"\n"}alert(x);return false}}}}}}DOMChangesQueue.GetInstance().ApplyQueue();h=this.moXDirtyHeap.Peek()!=null}var n=new Date().getTime();var c=ControlMgr.GetInstance().GetAllPositionItems();var d=[];for(var w in c){var o=c[w];if(o.IsUpdateStyle()){o.ApplyStyle();o.TransferPositioningToDOM()}if(o.moFloatingParent!=null){d.push(o)}o.ApplyPostPositionProperties()}for(var k in d){var r=d[k];if(r.moPosDecider!=null){r.moPosDecider.CalculateFloatingPosition()}else{r.CalculateXPosition();r.CalculateYPosition()}}for(var k in d){d[k].TransferPositioningToDOM()}this.SetButtonStyleBlock(true);if(f){for(var w in c){var o=c[w];o.ApplyTweening(this.mdTweenDuration)}}this.mbLastPosHadTweening=f;this.mdTweenDuration=0;if(a){SizeLearningMgr.PositioningFinished();SequenceLoadingMgr.GetInstance().PostPositioning();ScrollTargetMgr.RefreshAllVisibility()}for(oPopup in Matrix3.moPopupTable){if(Matrix3.moPopupTable[oPopup]&&Matrix3.moPopupTable[oPopup].RefreshPositionOnScreen){Matrix3.moPopupTable[oPopup].RefreshPositionOnScreen()}}},AddToDirtyXList:function(a){this.moXDirtyHeap.Add(a)},AddToDirtyYList:function(a){this.moYDirtyHeap.Add(a)},RemoveFromBothDirtyLists:function(a){this.moXDirtyHeap.Remove(a);this.moYDirtyHeap.Remove(a)},ReInit:function(){PositionMgr.moSingleton=new PositionMgr()},SetButtonStyleBlock:function(a){}};function PostRenderMgr(){this.maoFunctions=new Array()}PostRenderMgr.moSingleton=null;PostRenderMgr.GetInstance=function(){if(!PostRenderMgr.moSingleton){PostRenderMgr.moSingleton=new PostRenderMgr()}return PostRenderMgr.moSingleton};PostRenderMgr.prototype={AddFunction:function(b,a){if((a||!Matrix3.mbContentIsLoaded)&&!Matrix3.mbIsInit){this.maoFunctions.push(b)}},ExecuteFunctions:function(){var a=new Date().getTime();this.miTimeoutId=null;while(this.maoFunctions.length>0){try{this.maoFunctions.shift()()}catch(b){}if(this.maoFunctions.length>0&&(new Date().getTime()-a)>100){this.miTimeoutId=setTimeout("PostRenderMgr.GetInstance().ExecuteFunctions()",100);break}}if(this.maoFunctions.length==0){DOMChangesQueue.GetInstance().ApplyQueue()}},GetFunctions:function(){return this.maoFunctions},Clear:function(){this.maoFunctions=new Array();if(this.miTimeoutId){clearTimeout(this.miTimeoutId);this.miTimeoutId=null}}};function Point(a,b){this.x=parseInt(a);this.y=parseInt(b)}function ResizeMgr(){var a=this.GetScreenSize();this.miMinScreenWidth=700;this.moAnchorScreen=document.createElement("div");this.moAnchorScreen.setAttribute("id","AnchorFlashMatrix3Screen:"+ConstValues.Const.SCREEN);if(M3IECompatMode){this.moAnchorScreen=new HTMLElement(this.moAnchorScreen)}this.moAnchorScreen.Setup(this.moAnchorScreen.GetNode(),"Anchor",null,"0",null,"0",new String(Math.max(this.miMinScreenWidth,a.x-this.miScollbarSize)),new String(a.y),null,null,null,null,null,null,null);this.moAnchorScreen.SetDeep(ResizeMgr.Const.INT_MAX_VALUE);this.moAnchorPopupBase=document.createElement("div");this.moAnchorPopupBase.setAttribute("id","AnchorFlashMatrix3Screen:"+ConstValues.Const.SCREEN);if(M3IECompatMode){this.moAnchorPopupBase=new HTMLElement(this.moAnchorPopupBase)}this.moAnchorPopupBase.Setup(this.moAnchorPopupBase.GetNode(),"Anchor",null,"0",null,"0",new String(Math.max(this.miMinScreenWidth,a.x-this.miScollbarSize)-ResizeMgr.Const.POPUP_MARGIN),new String(a.y-ResizeMgr.Const.POPUP_MARGIN),null,null,null,null,null,null,null);this.moAnchorPopupBase.SetDeep(ResizeMgr.Const.INT_MAX_VALUE);ControlMgr.GetInstance().AddPositionItem(this.moAnchorPopupBase);this.moAnchorScreen;this.moAnchorPopupBase;this.miScollbarSize;this.mbHasHorizontalScrollbar=false}ResizeMgr.Const={SCROLLBARS_SIZE:0,POPUP_MARGIN:16,INT_MAX_VALUE:999999};ResizeMgr.moSingleton=null;ResizeMgr.GetInstance=function(){if(!ResizeMgr.moSingleton){ResizeMgr.moSingleton=new ResizeMgr()}return ResizeMgr.moSingleton};ResizeMgr.prototype={Clean:function(){this.moSingleton=new ResizeMgr()},GetScrollbarSize:function(){return this.miScollbarSize},ExportScreenToLists:function(){ControlMgr.GetInstance().AddReference(ConstValues.Const.SCREEN,this.moAnchorScreen);PositionMgr.GetInstance().AddToDirtyXList(this.moAnchorScreen);PositionMgr.GetInstance().AddToDirtyYList(this.moAnchorScreen);this.moAnchorScreen.ForceHasChanged()},Resize:function(){var b=this.GetScreenSize();this.moAnchorScreen.SetWidth(Math.max(this.miMinScreenWidth,b.x-this.miScollbarSize));this.moAnchorPopupBase.SetWidth(Math.max(this.miMinScreenWidth,b.x-this.miScollbarSize)-ResizeMgr.Const.POPUP_MARGIN);this.moAnchorScreen.SetHeight(b.y);this.moAnchorPopupBase.SetHeight(b.y-ResizeMgr.Const.POPUP_MARGIN);this.moAnchorScreen.ForceHasChanged();PositionMgr.GetInstance().AddToDirtyXList(ResizeMgr.GetInstance().moAnchorScreen);PositionMgr.GetInstance().AddToDirtyYList(ResizeMgr.GetInstance().moAnchorScreen);if(ControlMgr.GetInstance().GetRootPositionItem()!=null&&!Matrix3.mbEvent){PositionMgr.GetInstance().CalculatePosition();DOMChangesQueue.GetInstance().ApplyQueue()}if(Matrix3.maPopupStack.length>0&&Matrix3.moPopupTable!=null){for(var a in Matrix3.moPopupTable){Matrix3.moPopupTable[a].Center()}}this.AddOrRemoveHorizontalScrollbar()},AssumeLateralScrollbarVisible:function(){this.miScollbarSize=ResizeMgr.Const.SCROLLBARS_SIZE;var a=this.GetScreenSize();this.moAnchorScreen.SetWidth(Math.max(this.miMinScreenWidth,a.x-this.miScollbarSize));this.moAnchorPopupBase.SetWidth(Math.max(this.miMinScreenWidth,a.x-this.miScollbarSize)-ResizeMgr.Const.POPUP_MARGIN);PositionMgr.GetInstance().AddToDirtyXList(this.moAnchorScreen);PositionMgr.GetInstance().AddToDirtyYList(this.moAnchorScreen);this.moAnchorScreen.ForceHasChanged()},AssumeLateralScrollbarHidden:function(){this.miScollbarSize=0;var a=this.GetScreenSize();this.moAnchorScreen.SetWidth(Math.max(this.miMinScreenWidth,a.x-this.miScollbarSize));this.moAnchorPopupBase.SetWidth(Math.max(this.miMinScreenWidth,a.x-this.miScollbarSize)-ResizeMgr.Const.POPUP_MARGIN);PositionMgr.GetInstance().AddToDirtyXList(this.moAnchorScreen);PositionMgr.GetInstance().AddToDirtyYList(this.moAnchorScreen);this.moAnchorScreen.ForceHasChanged()},AddToResizeXList:function(a){new Dependency(this.moAnchorScreen,a,Dependency.Const.TYPE_REFERENCE,Dependency.Const.SUBTYPE_SIZE,null,Dependency.Const.AXIS_X)},AddToResizeYList:function(a){new Dependency(this.moAnchorScreen,a,Dependency.Const.TYPE_REFERENCE,Dependency.Const.SUBTYPE_SIZE,null,Dependency.Const.AXIS_Y)},GetScreenAnchor:function(){return this.moAnchorScreen},GetPopupBaseAnchor:function(){return this.moAnchorPopupBase},GetScreenSize:function(){var c;var b=Utils.GetViewportWidth();var a=Utils.GetViewportHeight();if((b!=null)&&(a!=null)){c=new Point(b,a)}else{c=new Point(1280,1024)}return c},SetMinScreenWidth:function(a){this.miMinScreenWidth=parseInt(a);this.AddOrRemoveHorizontalScrollbar()},AddOrRemoveHorizontalScrollbar:function(){if(Utils.GetViewportWidth()<this.miMinScreenWidth){var a=$(Utils.Form1());a.css("overflow-x","auto");this.mbHasHorizontalScrollbar=true}else{if(this.mbHasHorizontalScrollbar==true){var a=$(Utils.Form1());a.css("overflow-x","hidden");this.mbHasHorizontalScrollbar=false}}},ReInit:function(){ResizeMgr.moSingleton=new ResizeMgr()}};ResizeMgr.SendResToServer=function(){$.ajax({method:"GET",url:"htm/Resolution.aspx?W="+Utils.GetViewportWidth()+"&H="+Utils.GetViewportHeight()})};var Utils={Const:{GROUP_SEPARATOR:",",SUFFIX_LABEL:"_Lbl",TAG_RESOLUTION_WIDTH:"\\[RESOLUTION_WIDTH\\]",TAG_RESOLUTION_HEIGHT:"\\[RESOLUTION_HEIGHT\\]",OPTION_SEPARATOR:";",OPTION_VALUE_SEPARATOR:":",SEPARATOR_VALUE:"|"},moForm1Cache:null,moWindow:null,Form1:function(){if(this.moForm1Cache==null){this.moForm1Cache=document.getElementById("Form1")}return this.moForm1Cache},GetDocument:function(){return Utils.Form1()},Window:function(){if(this.moWindow==null){this.moWindow=$(window)}return this.moWindow[0]},HashToParameters:function(a){var c="";if(a instanceof Object){for(var b in a){c+="&"+b+"="+encodeURIComponent(a[b])}if(c.length!=0){c=c.substr(1)}}return c},IsMouseLeaveOrEnter:function(a,b){if(a.type!="mouseout"&&a.type!="mouseover"&&a.type!="mouseup"){return false}var c;if(a.relatedTarget){c=a.relatedTarget}else{if(a.type=="mouseout"){c=a.toElement}else{if(a.type=="mouseover"){c=a.fromElement}else{if(a.type=="mouseup"){c=(a.target)?a.target:a.srcElement}}}}while(c&&c!=b){c=c.parentNode}return(c!=b)},GetHeight:function(c,a){var c=$Elt(c);var d=$S(c,"height");if(d=="auto"){$SetStyle(c,"zoom","1");d=c.clientHeight+"px"}if(a){try{d=parseInt(d)}catch(b){d=parseInt(d.substring(0,d.length-2))}}return d},GetWidth:function(c,a){var c=$Elt(c);var d=$S(c,"width");if(d=="auto"){$SetStyle(c,"zoom","1");d=c.clientWidth+"px"}if(a){try{d=parseInt(d)}catch(b){d=parseInt(d.substring(0,d.length-2))}}return d},GetAbsoluteWidth:function(a){a=$Elt(a);var g=Utils.GetWidth(a,true);var d=parseInt($S(a,"marginLeft"));var f=parseInt($S(a,"marginRight"));var b=parseInt($S(a,"borderLeft"));var c=parseInt($S(a,"borderRight"));if(isNaN(g)){g=0}if(isNaN(d)){d=0}if(isNaN(f)){f=0}if(isNaN(b)){b=0}if(isNaN(c)){c=0}var h=g+d+f+b+c;return h},GetAbsoluteHeight:function(a){a=$Elt(a);var d=Utils.GetHeight(a,true);var g=parseInt($S(a,"marginTop"));var f=parseInt($S(a,"marginBottom"));var c=parseInt($S(a,"borderTop"));var b=parseInt($S(a,"borderBottom"));if(isNaN(d)){d=0}if(isNaN(g)){g=0}if(isNaN(f)){f=0}if(isNaN(c)){c=0}if(isNaN(b)){b=0}var h=d+g+f+c+b;return h},GetX:function(a){if(Utils.IsString(a)){if(Utils.StartsWith(a,"#")){var b=$(a).offset().left}else{var b=$E(a).offset().left}}else{var b=a.offset().left}return b},GetY:function(a){if(Utils.IsString(a)){if(Utils.StartsWith(a,"#")){var b=$(a).offset().top}else{var b=$E(a).offset().top}}else{var b=a.offset().top}return b},IsFirefox:function(){var b=navigator.userAgent.toLowerCase();var a=(b.indexOf("firefox")!=-1)?true:false;return a},IsIE:function(){var a=$.browser.msie;if(!a){return false}else{return a}},IsIE6:function(){var a=$.browser.msie&&$.browser.version<7;if(!a){return false}else{return a}},IsIE7:function(){var a=$.browser.msie&&$.browser.version<8;if(!a){return false}else{return a}},IsIE8:function(){var a=$.browser.msie&&$.browser.version<9;if(!a){return false}else{return a}},IsIE9:function(){var a=$.browser.msie&&$.browser.version<10;if(!a){return false}else{return a}},IsSafari:function(){var a=$.browser.webkit;if(!a){return false}else{return a}},IsOpera:function(){var a=$.browser.opera;if(!a){return false}else{return a}},IsWebKit:function(){var a=$.browser.webkit;if(!a){return false}else{return a}},IsIPad:function(){return((navigator.platform.toLowerCase().indexOf("iphone")!=-1)||(navigator.platform.toLowerCase().indexOf("ipad")!=-1)||(navigator.platform.toLowerCase().indexOf("ipod")!=-1))},IsAndroid:function(){return((navigator.platform.toLowerCase().indexOf("android")!=-1))},AddEvent:function(c,f,b,d,a){if(M3IECompatMode&&c.GetNode){c=c.GetNode()}c=$Elt(c);if(c){if(!d){d=c}var g=function(h){return b.call(d,h,a)};if(window.addEventListener){c.addEventListener(f,g,false)}else{if(window.attachEvent){c.attachEvent("on"+f,g)}}}c=null;f=null},DetachEvent:function(b,c,a){if(M3IECompatMode&&b.GetNode){b=b.GetNode()}if(window.addEventListener){b.removeEventListener(c,a,false)}else{if(window.attachEvent){b.detachEvent("on"+c,a)}}b=null;c=null;a=null},GetPageWidth:function(){var a=$(document).width();return a},GetPageHeight:function(){var a=$(document).height();return a},GetViewportWidth:function(){if(!Utils.miCachedVPWidth){Utils.miCachedVPWidth=$(window).width()}return Utils.miCachedVPWidth},GetViewportHeight:function(){if(!Utils.miCachedVPHeight){Utils.miCachedVPHeight=$(window).height()}return Utils.miCachedVPHeight},ClearViewPortCache:function(){Utils.miCachedVPWidth=null;Utils.miCachedVPHeight=null},GetScrollTop:function(){return Utils.GetDocument().scrollTop},GetScrollLeft:function(){return Utils.GetDocument().scrollLeft},GetMainParentContainerScrollTop:function(a){var b=0;var c=Utils.GetPopupContainer(a);if(c&&c!=null){b=c.scrollTop}else{b=Utils.GetScrollTop()}return b},GetMainParentContainerScrollLeft:function(a){var b=0;var c=Utils.GetPopupContainer(a);if(c&&c!=null){b=c.scrollLeft}else{b=Utils.GetScrollLeft()}return b},GetPopupContainer:function(a){var d=null;var f=$E(a);if(f&&f.length>0){var g=f.parents();for(var b=0,c=g.length;b<c;b++){if($(g[b]).hasClass(Popup.Const.SCROLLABLE_CONTAINER_CLASS)){d=g[b];break}}}return d},Augment:function(a,b){var c;for(c in b.prototype){if(!(c in a.prototype)){a.prototype[c]=b.prototype[c]}}},OpenHelp:function(b,d){var a="width=440, height=600,alwaysRaised=yes,toolbar=0,directories=0,menubar=0,status=1,resizable=yes,location=0,scrollbars=1,copyhistory=0,";var c="left="+(screen.width-440)+",top=0,screenX="+(screen.width-440)+",screenY=0";a=a+c;window.open(b,d,a)},GetTextContent:function(a){var b="";if(a){if(a.innerText){b=a.innerText}else{b=a.textContent}}return b},SetTextContent:function(b,c,a){if(b){if(!a){if(b.innerText){b.innerText=c}else{b.textContent=c}}else{b.innerHTML=c}}},BuildMask:function(c,b,a){var d=document.createElement("div");d.id=c;d.msIndex=StackMgr.GetInstance().GetIndex();if(typeof a=="undefined"){a=Utils.Form1()}$AddClass(d,b);$SetCss(d,{display:"none","z-index":""+d.msIndex,position:"fixed",left:"0px",bottom:"0px",right:"0px",top:"0px"});d.ResizeMask=function(){};d.Show=function(){this.mbIsVisible=true;$SetCss(this.id,{display:"block"});this.ResizeMask()};d.Hide=function(){this.mbIsVisible=false;$SetCss(this.id,{display:"none"})};d.IsVisible=function(){return this.mbIsVisible};d.GetIndex=function(){return this.msIndex};d.Destroy=function(){$(this).remove()};a.appendChild(d);return d},TransformVirtualID:function(a){if(Utils.IsString(a)){var b=new RegExp(Utils.Const.TAG_RESOLUTION_WIDTH,"g");a=a.replace(b,Utils.GetViewportWidth());b=new RegExp(Utils.Const.TAG_RESOLUTION_HEIGHT,"g");a=a.replace(b,Utils.GetViewportHeight())}return a},CloneNode:function(a){var b=a.cloneNode(false);var c='<span style="display:none;"><br /></span>'+a.innerHTML;b.innerHTML=c;return b},GetMousePosition:function(a){a=$.event.fix(a);this.miMouseX=a.pageX;this.miMouseY=a.pageY;return new Array(this.miMouseX,this.miMouseY)},GetMousePositionX:function(a){var b;if(a){b=a.pageX}else{b=this.miMouseX}return b},GetMousePositionY:function(a){var b;if(a){a=$.event.fix(a);b=a.pageY}else{b=this.miMouseY}return b},GetOptions:function(a){var d=new Object();if(a){var c=a.split(Utils.Const.OPTION_SEPARATOR);for(var b=0;b<c.length;b++){var f=c[b].split(Utils.Const.OPTION_VALUE_SEPARATOR);d[f[0].toLowerCase()]=f[1]}}return d},StopPropagation:function(a){a=a?a:window.event;if(a.stopPropagation){a.stopPropagation()}if(a.preventDefault){a.preventDefault()}a.cancelBubble=true;a.cancel=true;a.returnValue=false;return false},CreateReference:function(a){var b=a.split(Matrix3.Const.SEPARATOR_CONTROL)[0];if(!(b in Matrix3.moReferences)){Matrix3.moReferences[b]=new Object()}Matrix3.moReferences[b][a]=true},LoadScript:function(d,c,b,a){if(!Utils.IsBoolean(a)){a=false}a=false;if(Utils.IsUndefined(b)||!Utils.IsFunction(b)){b=function(){}}$.ajax({url:d,dataType:"script",success:c,error:b,cache:a})},IsFunction:function(a){return typeof a==="function"},IsString:function(a){return a!=null&&typeof(a)==="string"},IsStringFilled:function(a){return Utils.IsString(a)&&a!=""},IsObject:function(a){return(a&&(typeof a==="object"||Utils.IsFunction(a)))||false},IsUndefined:function(a){return typeof a==="undefined"},IsNull:function(a){return a===null},IsNumber:function(a){return typeof a==="number"&&isFinite(a)},IsBoolean:function(a){return typeof a==="boolean"},IsArray:function(a){return $.isArray(a)},ParseBool:function(a){if(Utils.IsString(a)){a=a.toLowerCase()}if(a=="1"||a=="true"||a=="yes"||a=="on"||a==1||a==true){return true}else{return false}},Trim:function(a){var b=Utils.LeftTrim(Utils.RightTrim(a));return b},LeftTrim:function(a){if(Utils.IsString(a)&&a){var b=/^ +/g;var c=a.replace(b,"")}else{c=""}return c},RightTrim:function(a){if(Utils.IsString(a)&&a){var b=/ +$/g;var c=a.replace(b,"")}else{c=""}return c},StartsWith:function(b,a){var c=false;if(Utils.IsString(b)&&Utils.IsString(a)){c=(b.indexOf(a)==0)}return c},IndexOf:function(a,b){if(!Array.indexOf){for(var c=0,d=a.length;c<d;c++){if(a[c]==b){return c}}return -1}else{return a.indexOf(b)}},GetNaturalWidth:function(a){if(typeof a.naturalWidth=="undefined"){var b=new Image();b.src=a.src;return b.width}else{return a.naturalWidth}},GetNaturalHeight:function(a){if(typeof a.naturalHeight=="undefined"){var b=new Image();b.src=a.src;return b.height}else{return a.naturalHeight}},ImgChangeSrc:function(c,b,d,a){if(typeof b!="undefined"&&typeof d=="string"){var f=$PI(b);if(typeof f!="undefined"){if(typeof f.moLinkedImage!="undefined"&&f.moLinkedImage!=null){if(typeof a=="boolean"){if(a){f.moLinkedImage.onload="AutoScaleProperties.Apply($PI('"+b+"'));"}}}}}if(c){c.src=d;c.onerror="return false;"}},PreloadImage:function(a){var b=new Image();b.src=a},RestoreEncodingEventArgsIE:function(a){if(a.match("=")||a.match("&")){return encodeURIComponent(a)}else{return a}},RequestFullscreen:function(){var a=document.body;if(a.requestFullscreen){a.requestFullscreen()}else{if(a.mozRequestFullScreen){a.mozRequestFullScreen()}else{if(a.webkitRequestFullScreen){a.webkitRequestFullScreen()}}}},GetJavaVersion:function(){var c="";try{var b=deployJava().getJREs();if(b&&b.length>0){c=escape(b[b.length-1])}}catch(a){}return c},InsertCSS:function(a){a=Utils.Trim(a);var b=true;var g=$("head").children();for(var d=0,f=g.length;d<f;d++){var c=$(g[d]);if(typeof c[0]!=="undefined"&&typeof c[0].tagName==="string"&&c[0].tagName.toLowerCase()=="link"&&Utils.Trim(c.attr("href"))==a){b=false;break}}if(b==true){var h=$('<link href="'+a+'" rel="stylesheet" type="text/css" />');$("head").append(h)}},SetPageTitle:function(a){if(document&&document.title){document.title=a}},miScrollbarWidthCached:null,miScrollbarHeightCached:null,GetScrollBarSize:function(){if(Utils.miScrollbarWidthCached==null){var d=document.createElement("p");d.style.width="100%";d.style.height="100%";var g=document.createElement("div");g.style.position="absolute";g.style.top="0px";g.style.left="0px";g.style.width="100px";g.style.height="100px";g.style.overflow="hidden";if(Utils.IsIE8()==true){g.style.visibility="hidden"}else{g.style.opacity="0"}g.appendChild(d);document.body.appendChild(g);var h=d.offsetWidth;var a=d.offsetHeight;g.style.overflow="scroll";var i=d.offsetWidth;var b=d.offsetHeight;if(h==i){i=g.clientWidth}if(a==b){b=g.clientHeight}document.body.removeChild(g);var f=(h-i);if(typeof f!=="number"||isNaN(f)===true){f=0}var c=(a-b);if(typeof f!=="number"||isNaN(f)===true){c=0}Utils.miScrollbarWidthCached=f;Utils.miScrollbarHeightCached=c}return{width:Utils.miScrollbarWidthCached,height:Utils.miScrollbarHeightCached}},htmlDecode:function(a){return String(a).replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">")}};
/*
 * jQuery JavaScript Library v1.8.3
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: Tue Nov 13 2012 08:20:33 GMT-0500 (Eastern Standard Time)
 */
(function(bU,bS){var bh,aO,R=bU.document,ar=bU.location,at=bU.navigator,b=bU.jQuery,a=bU.$,x=Array.prototype.push,A=Array.prototype.slice,v=Array.prototype.indexOf,B=Object.prototype.toString,u=Object.prototype.hasOwnProperty,C=String.prototype.trim,aq=function(b1,b0){return new aq.fn.init(b1,b0,bh)},w=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,y=/\S/,z=/\s+/,bz=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,bo=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,bw=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,bG=/^[\],:{}\s]*$/,bF=/(?:^|:|,)(?:\s*\[)+/g,bH=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,bI=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,a8=/^-ms-/,aM=/-([\da-z])/gi,W=function(b0,b1){return(b1+"").toUpperCase()},S=function(){if(R.addEventListener){R.removeEventListener("DOMContentLoaded",S,false);aq.ready()}else{if(R.readyState==="complete"){R.detachEvent("onreadystatechange",S);aq.ready()}}},q={};aq.fn=aq.prototype={constructor:aq,init:function(b6,b0,b5){var b3,b2,b4,b1;if(!b6){return this}if(b6.nodeType){this.context=this[0]=b6;this.length=1;return this}if(typeof b6==="string"){if(b6.charAt(0)==="<"&&b6.charAt(b6.length-1)===">"&&b6.length>=3){b3=[null,b6,null]}else{b3=bo.exec(b6)}if(b3&&(b3[1]||!b0)){if(b3[1]){b0=b0 instanceof aq?b0[0]:b0;b1=(b0&&b0.nodeType?b0.ownerDocument||b0:R);b6=aq.parseHTML(b3[1],b1,true);if(bw.test(b3[1])&&aq.isPlainObject(b0)){this.attr.call(b6,b0,true)}return aq.merge(this,b6)}else{b2=R.getElementById(b3[2]);if(b2&&b2.parentNode){if(b2.id!==b3[2]){return b5.find(b6)}this.length=1;this[0]=b2}this.context=R;this.selector=b6;return this}}else{if(!b0||b0.jquery){return(b0||b5).find(b6)}else{return this.constructor(b0).find(b6)}}}else{if(aq.isFunction(b6)){return b5.ready(b6)}}if(b6.selector!==bS){this.selector=b6.selector;this.context=b6.context}return aq.makeArray(b6,this)},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return A.call(this)},get:function(b0){return b0==null?this.toArray():(b0<0?this[this.length+b0]:this[b0])},pushStack:function(b0,b1,b3){var b2=aq.merge(this.constructor(),b0);b2.prevObject=this;b2.context=this.context;if(b1==="find"){b2.selector=this.selector+(this.selector?" ":"")+b3}else{if(b1){b2.selector=this.selector+"."+b1+"("+b3+")"}}return b2},each:function(b1,b0){return aq.each(this,b1,b0)},ready:function(b0){aq.ready.promise().done(b0);return this},eq:function(b0){b0=+b0;return b0===-1?this.slice(b0):this.slice(b0,b0+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(A.apply(this,arguments),"slice",A.call(arguments).join(","))},map:function(b0){return this.pushStack(aq.map(this,function(b1,b2){return b0.call(b1,b2,b1)}))},end:function(){return this.prevObject||this.constructor(null)},push:x,sort:[].sort,splice:[].splice};aq.fn.init.prototype=aq.fn;aq.extend=aq.fn.extend=function(){var b7,b6,b8,b1,b2,b0,b9=arguments[0]||{},b4=1,b5=arguments.length,b3=false;if(typeof b9==="boolean"){b3=b9;b9=arguments[1]||{};b4=2}if(typeof b9!=="object"&&!aq.isFunction(b9)){b9={}}if(b5===b4){b9=this;--b4}for(;b4<b5;b4++){if((b7=arguments[b4])!=null){for(b6 in b7){b8=b9[b6];b1=b7[b6];if(b9===b1){continue}if(b3&&b1&&(aq.isPlainObject(b1)||(b2=aq.isArray(b1)))){if(b2){b2=false;b0=b8&&aq.isArray(b8)?b8:[]}else{b0=b8&&aq.isPlainObject(b8)?b8:{}}b9[b6]=aq.extend(b3,b0,b1)}else{if(b1!==bS){b9[b6]=b1}}}}}return b9};aq.extend({noConflict:function(b0){if(bU.$===aq){bU.$=a}if(b0&&bU.jQuery===aq){bU.jQuery=b}return aq},isReady:false,readyWait:1,holdReady:function(b0){if(b0){aq.readyWait++}else{aq.ready(true)}},ready:function(b0){if(b0===true?--aq.readyWait:aq.isReady){return}if(!R.body){return setTimeout(aq.ready,1)}aq.isReady=true;if(b0!==true&&--aq.readyWait>0){return}aO.resolveWith(R,[aq]);if(aq.fn.trigger){aq(R).trigger("ready").off("ready")}},isFunction:function(b0){return aq.type(b0)==="function"},isArray:Array.isArray||function(b0){return aq.type(b0)==="array"},isWindow:function(b0){return b0!=null&&b0==b0.window},isNumeric:function(b0){return !isNaN(parseFloat(b0))&&isFinite(b0)},type:function(b0){return b0==null?String(b0):q[B.call(b0)]||"object"},isPlainObject:function(b2){if(!b2||aq.type(b2)!=="object"||b2.nodeType||aq.isWindow(b2)){return false}try{if(b2.constructor&&!u.call(b2,"constructor")&&!u.call(b2.constructor.prototype,"isPrototypeOf")){return false}}catch(b0){return false}var b1;for(b1 in b2){}return b1===bS||u.call(b2,b1)},isEmptyObject:function(b1){var b0;for(b0 in b1){return false}return true},error:function(b0){throw new Error(b0)},parseHTML:function(b1,b0,b3){var b2;if(!b1||typeof b1!=="string"){return null}if(typeof b0==="boolean"){b3=b0;b0=0}b0=b0||R;if((b2=bw.exec(b1))){return[b0.createElement(b2[1])]}b2=aq.buildFragment([b1],b0,b3?null:[]);return aq.merge([],(b2.cacheable?aq.clone(b2.fragment):b2.fragment).childNodes)},parseJSON:function(b0){if(!b0||typeof b0!=="string"){return null}b0=aq.trim(b0);if(bU.JSON&&bU.JSON.parse){return bU.JSON.parse(b0)}if(bG.test(b0.replace(bH,"@").replace(bI,"]").replace(bF,""))){return(new Function("return "+b0))()}aq.error("Invalid JSON: "+b0)},parseXML:function(b0){var b3,b2;if(!b0||typeof b0!=="string"){return null}try{if(bU.DOMParser){b2=new DOMParser();b3=b2.parseFromString(b0,"text/xml")}else{b3=new ActiveXObject("Microsoft.XMLDOM");b3.async="false";b3.loadXML(b0)}}catch(b1){b3=bS}if(!b3||!b3.documentElement||b3.getElementsByTagName("parsererror").length){aq.error("Invalid XML: "+b0)}return b3},noop:function(){},globalEval:function(b0){if(b0&&y.test(b0)){(bU.execScript||function(b1){bU["eval"].call(bU,b1)})(b0)}},camelCase:function(b0){return b0.replace(a8,"ms-").replace(aM,W)},nodeName:function(b0,b1){return b0.nodeName&&b0.nodeName.toLowerCase()===b1.toLowerCase()},each:function(b6,b1,b0){var b5,b2=0,b4=b6.length,b3=b4===bS||aq.isFunction(b6);if(b0){if(b3){for(b5 in b6){if(b1.apply(b6[b5],b0)===false){break}}}else{for(;b2<b4;){if(b1.apply(b6[b2++],b0)===false){break}}}}else{if(b3){for(b5 in b6){if(b1.call(b6[b5],b5,b6[b5])===false){break}}}else{for(;b2<b4;){if(b1.call(b6[b2],b2,b6[b2++])===false){break}}}}return b6},trim:C&&!C.call("\uFEFF\xA0")?function(b0){return b0==null?"":C.call(b0)}:function(b0){return b0==null?"":(b0+"").replace(bz,"")},makeArray:function(b0,b1){var b3,b2=b1||[];if(b0!=null){b3=aq.type(b0);if(b0.length==null||b3==="string"||b3==="function"||b3==="regexp"||aq.isWindow(b0)){x.call(b2,b0)}else{aq.merge(b2,b0)}}return b2},inArray:function(b1,b0,b2){var b3;if(b0){if(v){return v.call(b0,b1,b2)}b3=b0.length;b2=b2?b2<0?Math.max(0,b3+b2):b2:0;for(;b2<b3;b2++){if(b2 in b0&&b0[b2]===b1){return b2}}}return -1},merge:function(b0,b4){var b3=b4.length,b1=b0.length,b2=0;if(typeof b3==="number"){for(;b2<b3;b2++){b0[b1++]=b4[b2]}}else{while(b4[b2]!==bS){b0[b1++]=b4[b2++]}}b0.length=b1;return b0},grep:function(b1,b0,b3){var b6,b5=[],b2=0,b4=b1.length;b3=!!b3;for(;b2<b4;b2++){b6=!!b0(b1[b2],b2);if(b3!==b6){b5.push(b1[b2])}}return b5},map:function(b2,b1,b0){var b8,b5,b7=[],b3=0,b6=b2.length,b4=b2 instanceof aq||b6!==bS&&typeof b6==="number"&&((b6>0&&b2[0]&&b2[b6-1])||b6===0||aq.isArray(b2));if(b4){for(;b3<b6;b3++){b8=b1(b2[b3],b3,b0);if(b8!=null){b7[b7.length]=b8}}}else{for(b5 in b2){b8=b1(b2[b5],b5,b0);if(b8!=null){b7[b7.length]=b8}}}return b7.concat.apply([],b7)},guid:1,proxy:function(b2,b1){var b4,b0,b3;if(typeof b1==="string"){b4=b2[b1];b1=b2;b2=b4}if(!aq.isFunction(b2)){return bS}b0=A.call(arguments,2);b3=function(){return b2.apply(b1,b0.concat(A.call(arguments)))};b3.guid=b2.guid=b2.guid||aq.guid++;return b3},access:function(b2,b5,b7,ca,b1,b3,b9){var b4,b0=b7==null,b6=0,b8=b2.length;if(b7&&typeof b7==="object"){for(b6 in b7){aq.access(b2,b5,b6,b7[b6],1,b3,ca)}b1=1}else{if(ca!==bS){b4=b9===bS&&aq.isFunction(ca);if(b0){if(b4){b4=b5;b5=function(cb,cc,cd){return b4.call(aq(cb),cd)}}else{b5.call(b2,ca);b5=null}}if(b5){for(;b6<b8;b6++){b5(b2[b6],b7,b4?ca.call(b2[b6],b6,b5(b2[b6],b7)):ca,b9)}}b1=1}}return b1?b2:b0?b5.call(b2):b8?b5(b2[0],b7):b3},now:function(){return(new Date()).getTime()}});aq.ready.promise=function(b2){if(!aO){aO=aq.Deferred();if(R.readyState==="complete"){setTimeout(aq.ready,1)}else{if(R.addEventListener){R.addEventListener("DOMContentLoaded",S,false);bU.addEventListener("load",aq.ready,false)}else{R.attachEvent("onreadystatechange",S);bU.attachEvent("onload",aq.ready);var b3=false;try{b3=bU.frameElement==null&&R.documentElement}catch(b1){}if(b3&&b3.doScroll){(function b0(){if(!aq.isReady){try{b3.doScroll("left")}catch(b4){return setTimeout(b0,50)}aq.ready()}})()}}}}return aO.promise(b2)};aq.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(b0,b1){q["[object "+b1+"]"]=b1.toLowerCase()});bh=aq(R);var ay={};function F(b1){var b0=ay[b1]={};aq.each(b1.split(z),function(b2,b3){b0[b3]=true});return b0}aq.Callbacks=function(b8){b8=typeof b8==="string"?(ay[b8]||F(b8)):aq.extend({},b8);var b7,b1,b2,b5,b4,b3,b6=[],ca=!b8.once&&[],b0=function(cb){b7=b8.memory&&cb;b1=true;b3=b5||0;b5=0;b4=b6.length;b2=true;for(;b6&&b3<b4;b3++){if(b6[b3].apply(cb[0],cb[1])===false&&b8.stopOnFalse){b7=false;break}}b2=false;if(b6){if(ca){if(ca.length){b0(ca.shift())}}else{if(b7){b6=[]}else{b9.disable()}}}},b9={add:function(){if(b6){var cc=b6.length;(function cb(cd){aq.each(cd,function(ce,cf){var cg=aq.type(cf);if(cg==="function"){if(!b8.unique||!b9.has(cf)){b6.push(cf)}}else{if(cf&&cf.length&&cg!=="string"){cb(cf)}}})})(arguments);if(b2){b4=b6.length}else{if(b7){b5=cc;b0(b7)}}}return this},remove:function(){if(b6){aq.each(arguments,function(cb,cc){var cd;while((cd=aq.inArray(cc,b6,cd))>-1){b6.splice(cd,1);if(b2){if(cd<=b4){b4--}if(cd<=b3){b3--}}}})}return this},has:function(cb){return aq.inArray(cb,b6)>-1},empty:function(){b6=[];return this},disable:function(){b6=ca=b7=bS;return this},disabled:function(){return !b6},lock:function(){ca=bS;if(!b7){b9.disable()}return this},locked:function(){return !ca},fireWith:function(cc,cb){cb=cb||[];cb=[cc,cb.slice?cb.slice():cb];if(b6&&(!b1||ca)){if(b2){ca.push(cb)}else{b0(cb)}}return this},fire:function(){b9.fireWith(this,arguments);return this},fired:function(){return !!b1}};return b9};aq.extend({Deferred:function(b1){var b4=[["resolve","done",aq.Callbacks("once memory"),"resolved"],["reject","fail",aq.Callbacks("once memory"),"rejected"],["notify","progress",aq.Callbacks("memory")]],b3="pending",b2={state:function(){return b3},always:function(){b0.done(arguments).fail(arguments);return this},then:function(){var b5=arguments;return aq.Deferred(function(b6){aq.each(b4,function(b9,ca){var b7=ca[0],b8=b5[b9];b0[ca[1]](aq.isFunction(b8)?function(){var cb=b8.apply(this,arguments);if(cb&&aq.isFunction(cb.promise)){cb.promise().done(b6.resolve).fail(b6.reject).progress(b6.notify)}else{b6[b7+"With"](this===b0?b6:this,[cb])}}:b6[b7])});b5=null}).promise()},promise:function(b5){return b5!=null?aq.extend(b5,b2):b2}},b0={};b2.pipe=b2.then;aq.each(b4,function(b5,b8){var b6=b8[2],b7=b8[3];b2[b8[1]]=b6.add;if(b7){b6.add(function(){b3=b7},b4[b5^1][2].disable,b4[2][2].lock)}b0[b8[0]]=b6.fire;b0[b8[0]+"With"]=b6.fireWith});b2.promise(b0);if(b1){b1.call(b0,b0)}return b0},when:function(b8){var b1=0,b7=A.call(arguments),b2=b7.length,b5=b2!==1||(b8&&aq.isFunction(b8.promise))?b2:0,b0=b5===1?b8:aq.Deferred(),b9=function(cb,ca,cc){return function(cd){ca[cb]=this;cc[cb]=arguments.length>1?A.call(arguments):cd;if(cc===b4){b0.notifyWith(ca,cc)}else{if(!(--b5)){b0.resolveWith(ca,cc)}}}},b4,b3,b6;if(b2>1){b4=new Array(b2);b3=new Array(b2);b6=new Array(b2);for(;b1<b2;b1++){if(b7[b1]&&aq.isFunction(b7[b1].promise)){b7[b1].promise().done(b9(b1,b6,b7)).fail(b0.reject).progress(b9(b1,b3,b4))}else{--b5}}}if(!b5){b0.resolveWith(b6,b7)}return b0.promise()}});aq.support=(function(){var cc,b1,b0,cb,ca,b8,b6,b5,b7,b9,b2,b3=R.createElement("div");b3.setAttribute("className","t");b3.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";b1=b3.getElementsByTagName("*");b0=b3.getElementsByTagName("a")[0];if(!b1||!b0||!b1.length){return{}}cb=R.createElement("select");ca=cb.appendChild(R.createElement("option"));b8=b3.getElementsByTagName("input")[0];b0.style.cssText="top:1px;float:left;opacity:.5";cc={leadingWhitespace:(b3.firstChild.nodeType===3),tbody:!b3.getElementsByTagName("tbody").length,htmlSerialize:!!b3.getElementsByTagName("link").length,style:/top/.test(b0.getAttribute("style")),hrefNormalized:(b0.getAttribute("href")==="/a"),opacity:/^0.5/.test(b0.style.opacity),cssFloat:!!b0.style.cssFloat,checkOn:(b8.value==="on"),optSelected:ca.selected,getSetAttribute:b3.className!=="t",enctype:!!R.createElement("form").enctype,html5Clone:R.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>",boxModel:(R.compatMode==="CSS1Compat"),submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true,boxSizingReliable:true,pixelPosition:false};b8.checked=true;cc.noCloneChecked=b8.cloneNode(true).checked;cb.disabled=true;cc.optDisabled=!ca.disabled;try{delete b3.test}catch(b4){cc.deleteExpando=false}if(!b3.addEventListener&&b3.attachEvent&&b3.fireEvent){b3.attachEvent("onclick",b2=function(){cc.noCloneEvent=false});b3.cloneNode(true).fireEvent("onclick");b3.detachEvent("onclick",b2)}b8=R.createElement("input");b8.value="t";b8.setAttribute("type","radio");cc.radioValue=b8.value==="t";b8.setAttribute("checked","checked");b8.setAttribute("name","t");b3.appendChild(b8);b6=R.createDocumentFragment();b6.appendChild(b3.lastChild);cc.checkClone=b6.cloneNode(true).cloneNode(true).lastChild.checked;cc.appendChecked=b8.checked;b6.removeChild(b8);b6.appendChild(b3);if(b3.attachEvent){for(b7 in {submit:true,change:true,focusin:true}){b5="on"+b7;b9=(b5 in b3);if(!b9){b3.setAttribute(b5,"return;");b9=(typeof b3[b5]==="function")}cc[b7+"Bubbles"]=b9}}aq(function(){var ce,cf,ci,ch,cg="padding:0;margin:0;border:0;display:block;overflow:hidden;",cd=R.getElementsByTagName("body")[0];if(!cd){return}ce=R.createElement("div");ce.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px";cd.insertBefore(ce,cd.firstChild);cf=R.createElement("div");ce.appendChild(cf);cf.innerHTML="<table><tr><td></td><td>t</td></tr></table>";ci=cf.getElementsByTagName("td");ci[0].style.cssText="padding:0;margin:0;border:0;display:none";b9=(ci[0].offsetHeight===0);ci[0].style.display="";ci[1].style.display="none";cc.reliableHiddenOffsets=b9&&(ci[0].offsetHeight===0);cf.innerHTML="";cf.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";cc.boxSizing=(cf.offsetWidth===4);cc.doesNotIncludeMarginInBodyOffset=(cd.offsetTop!==1);if(bU.getComputedStyle){cc.pixelPosition=(bU.getComputedStyle(cf,null)||{}).top!=="1%";cc.boxSizingReliable=(bU.getComputedStyle(cf,null)||{width:"4px"}).width==="4px";ch=R.createElement("div");ch.style.cssText=cf.style.cssText=cg;ch.style.marginRight=ch.style.width="0";cf.style.width="1px";cf.appendChild(ch);cc.reliableMarginRight=!parseFloat((bU.getComputedStyle(ch,null)||{}).marginRight)}if(typeof cf.style.zoom!=="undefined"){cf.innerHTML="";cf.style.cssText=cg+"width:1px;padding:1px;display:inline;zoom:1";cc.inlineBlockNeedsLayout=(cf.offsetWidth===3);cf.style.display="block";cf.style.overflow="visible";cf.innerHTML="<div></div>";cf.firstChild.style.width="5px";cc.shrinkWrapBlocks=(cf.offsetWidth!==3);ce.style.zoom=1}cd.removeChild(ce);ce=cf=ci=ch=null});b6.removeChild(b3);b1=b0=cb=ca=b8=b6=b3=null;return cc})();var aE=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,a9=/([A-Z])/g;aq.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(aq.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(b0){b0=b0.nodeType?aq.cache[b0[aq.expando]]:b0[aq.expando];return !!b0&&!an(b0)},data:function(b2,b7,b1,b8){if(!aq.acceptData(b2)){return}var ca,b9,b5=aq.expando,b3=typeof b7==="string",b6=b2.nodeType,b0=b6?aq.cache:b2,b4=b6?b2[b5]:b2[b5]&&b5;if((!b4||!b0[b4]||(!b8&&!b0[b4].data))&&b3&&b1===bS){return}if(!b4){if(b6){b2[b5]=b4=aq.deletedIds.pop()||aq.guid++}else{b4=b5}}if(!b0[b4]){b0[b4]={};if(!b6){b0[b4].toJSON=aq.noop}}if(typeof b7==="object"||typeof b7==="function"){if(b8){b0[b4]=aq.extend(b0[b4],b7)}else{b0[b4].data=aq.extend(b0[b4].data,b7)}}ca=b0[b4];if(!b8){if(!ca.data){ca.data={}}ca=ca.data}if(b1!==bS){ca[aq.camelCase(b7)]=b1}if(b3){b9=ca[b7];if(b9==null){b9=ca[aq.camelCase(b7)]}}else{b9=ca}return b9},removeData:function(b1,b6,b7){if(!aq.acceptData(b1)){return}var b8,b2,b5,b4=b1.nodeType,b0=b4?aq.cache:b1,b3=b4?b1[aq.expando]:aq.expando;if(!b0[b3]){return}if(b6){b8=b7?b0[b3]:b0[b3].data;if(b8){if(!aq.isArray(b6)){if(b6 in b8){b6=[b6]}else{b6=aq.camelCase(b6);if(b6 in b8){b6=[b6]}else{b6=b6.split(" ")}}}for(b2=0,b5=b6.length;b2<b5;b2++){delete b8[b6[b2]]}if(!(b7?an:aq.isEmptyObject)(b8)){return}}}if(!b7){delete b0[b3].data;if(!an(b0[b3])){return}}if(b4){aq.cleanData([b1],true)}else{if(aq.support.deleteExpando||b0!=b0.window){delete b0[b3]}else{b0[b3]=null}}},_data:function(b1,b2,b0){return aq.data(b1,b2,b0,true)},acceptData:function(b0){var b1=b0.nodeName&&aq.noData[b0.nodeName.toLowerCase()];return !b1||b1!==true&&b0.getAttribute("classid")===b1}});aq.fn.extend({data:function(b4,b9){var b8,b7,b0,b6,b5,b2=this[0],b3=0,b1=null;if(b4===bS){if(this.length){b1=aq.data(b2);if(b2.nodeType===1&&!aq._data(b2,"parsedAttrs")){b0=b2.attributes;for(b5=b0.length;b3<b5;b3++){b6=b0[b3].name;if(!b6.indexOf("data-")){b6=aq.camelCase(b6.substring(5));P(b2,b6,b1[b6])}}aq._data(b2,"parsedAttrs",true)}}return b1}if(typeof b4==="object"){return this.each(function(){aq.data(this,b4)})}b8=b4.split(".",2);b8[1]=b8[1]?"."+b8[1]:"";b7=b8[1]+"!";return aq.access(this,function(ca){if(ca===bS){b1=this.triggerHandler("getData"+b7,[b8[0]]);if(b1===bS&&b2){b1=aq.data(b2,b4);b1=P(b2,b4,b1)}return b1===bS&&b8[1]?this.data(b8[0]):b1}b8[1]=ca;this.each(function(){var cb=aq(this);cb.triggerHandler("setData"+b7,b8);aq.data(this,b4,ca);cb.triggerHandler("changeData"+b7,b8)})},null,b9,arguments.length>1,null,false)},removeData:function(b0){return this.each(function(){aq.removeData(this,b0)})}});function P(b2,b3,b0){if(b0===bS&&b2.nodeType===1){var b4="data-"+b3.replace(a9,"-$1").toLowerCase();b0=b2.getAttribute(b4);if(typeof b0==="string"){try{b0=b0==="true"?true:b0==="false"?false:b0==="null"?null:+b0+""===b0?+b0:aE.test(b0)?aq.parseJSON(b0):b0}catch(b1){}aq.data(b2,b3,b0)}else{b0=bS}}return b0}function an(b1){var b0;for(b0 in b1){if(b0==="data"&&aq.isEmptyObject(b1[b0])){continue}if(b0!=="toJSON"){return false}}return true}aq.extend({queue:function(b1,b3,b0){var b2;if(b1){b3=(b3||"fx")+"queue";b2=aq._data(b1,b3);if(b0){if(!b2||aq.isArray(b0)){b2=aq._data(b1,b3,aq.makeArray(b0))}else{b2.push(b0)}}return b2||[]}},dequeue:function(b0,b6){b6=b6||"fx";var b4=aq.queue(b0,b6),b5=b4.length,b1=b4.shift(),b2=aq._queueHooks(b0,b6),b3=function(){aq.dequeue(b0,b6)};if(b1==="inprogress"){b1=b4.shift();b5--}if(b1){if(b6==="fx"){b4.unshift("inprogress")}delete b2.stop;b1.call(b0,b3,b2)}if(!b5&&b2){b2.empty.fire()}},_queueHooks:function(b0,b2){var b1=b2+"queueHooks";return aq._data(b0,b1)||aq._data(b0,b1,{empty:aq.Callbacks("once memory").add(function(){aq.removeData(b0,b2+"queue",true);aq.removeData(b0,b1,true)})})}});aq.fn.extend({queue:function(b2,b0){var b1=2;if(typeof b2!=="string"){b0=b2;b2="fx";b1--}if(arguments.length<b1){return aq.queue(this[0],b2)}return b0===bS?this:this.each(function(){var b3=aq.queue(this,b2,b0);aq._queueHooks(this,b2);if(b2==="fx"&&b3[0]!=="inprogress"){aq.dequeue(this,b2)}})},dequeue:function(b0){return this.each(function(){aq.dequeue(this,b0)})},delay:function(b0,b1){b0=aq.fx?aq.fx.speeds[b0]||b0:b0;b1=b1||"fx";return this.queue(b1,function(b3,b2){var b4=setTimeout(b3,b0);b2.stop=function(){clearTimeout(b4)}})},clearQueue:function(b0){return this.queue(b0||"fx",[])},promise:function(b7,b4){var b6,b0=1,b1=aq.Deferred(),b2=this,b3=this.length,b5=function(){if(!(--b0)){b1.resolveWith(b2,[b2])}};if(typeof b7!=="string"){b4=b7;b7=bS}b7=b7||"fx";while(b3--){b6=aq._data(b2[b3],b7+"queueHooks");if(b6&&b6.empty){b0++;b6.empty.add(b5)}}b5();return b1.promise(b4)}});var au,o,Z,aI=/[\t\r\n]/g,bq=/\r/g,bB=/^(?:button|input)$/i,aR=/^(?:button|input|object|select|textarea)$/i,aK=/^a(?:rea|)$/i,aD=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,ae=aq.support.getSetAttribute;aq.fn.extend({attr:function(b0,b1){return aq.access(this,aq.attr,b0,b1,arguments.length>1)},removeAttr:function(b0){return this.each(function(){aq.removeAttr(this,b0)})},prop:function(b0,b1){return aq.access(this,aq.prop,b0,b1,arguments.length>1)},removeProp:function(b0){b0=aq.propFix[b0]||b0;return this.each(function(){try{this[b0]=bS;delete this[b0]}catch(b1){}})},addClass:function(b7){var b2,b4,b5,b3,b6,b0,b1;if(aq.isFunction(b7)){return this.each(function(b8){aq(this).addClass(b7.call(this,b8,this.className))})}if(b7&&typeof b7==="string"){b2=b7.split(z);for(b4=0,b5=this.length;b4<b5;b4++){b3=this[b4];if(b3.nodeType===1){if(!b3.className&&b2.length===1){b3.className=b7}else{b6=" "+b3.className+" ";for(b0=0,b1=b2.length;b0<b1;b0++){if(b6.indexOf(" "+b2[b0]+" ")<0){b6+=b2[b0]+" "}}b3.className=aq.trim(b6)}}}}return this},removeClass:function(b7){var b6,b2,b3,b0,b1,b4,b5;if(aq.isFunction(b7)){return this.each(function(b8){aq(this).removeClass(b7.call(this,b8,this.className))})}if((b7&&typeof b7==="string")||b7===bS){b6=(b7||"").split(z);for(b4=0,b5=this.length;b4<b5;b4++){b3=this[b4];if(b3.nodeType===1&&b3.className){b2=(" "+b3.className+" ").replace(aI," ");for(b0=0,b1=b6.length;b0<b1;b0++){while(b2.indexOf(" "+b6[b0]+" ")>=0){b2=b2.replace(" "+b6[b0]+" "," ")}}b3.className=b7?aq.trim(b2):""}}}return this},toggleClass:function(b3,b1){var b2=typeof b3,b0=typeof b1==="boolean";if(aq.isFunction(b3)){return this.each(function(b4){aq(this).toggleClass(b3.call(this,b4,this.className,b1),b1)})}return this.each(function(){if(b2==="string"){var b4,b6=0,b7=aq(this),b8=b1,b5=b3.split(z);while((b4=b5[b6++])){b8=b0?b8:!b7.hasClass(b4);b7[b8?"addClass":"removeClass"](b4)}}else{if(b2==="undefined"||b2==="boolean"){if(this.className){aq._data(this,"__className__",this.className)}this.className=this.className||b3===false?"":aq._data(this,"__className__")||""}}})},hasClass:function(b3){var b0=" "+b3+" ",b1=0,b2=this.length;for(;b1<b2;b1++){if(this[b1].nodeType===1&&(" "+this[b1].className+" ").replace(aI," ").indexOf(b0)>=0){return true}}return false},val:function(b4){var b1,b3,b2,b0=this[0];if(!arguments.length){if(b0){b1=aq.valHooks[b0.type]||aq.valHooks[b0.nodeName.toLowerCase()];if(b1&&"get" in b1&&(b3=b1.get(b0,"value"))!==bS){return b3}b3=b0.value;return typeof b3==="string"?b3.replace(bq,""):b3==null?"":b3}return}b2=aq.isFunction(b4);return this.each(function(b5){var b7,b6=aq(this);if(this.nodeType!==1){return}if(b2){b7=b4.call(this,b5,b6.val())}else{b7=b4}if(b7==null){b7=""}else{if(typeof b7==="number"){b7+=""}else{if(aq.isArray(b7)){b7=aq.map(b7,function(b8){return b8==null?"":b8+""})}}}b1=aq.valHooks[this.type]||aq.valHooks[this.nodeName.toLowerCase()];if(!b1||!("set" in b1)||b1.set(this,b7,"value")===bS){this.value=b7}})}});aq.extend({valHooks:{option:{get:function(b0){var b1=b0.attributes.value;return !b1||b1.specified?b0.value:b0.text}},select:{get:function(b0){var b7,b5,b6=b0.options,b2=b0.selectedIndex,b4=b0.type==="select-one"||b2<0,b8=b4?null:[],b3=b4?b2+1:b6.length,b1=b2<0?b3:b4?b2:0;for(;b1<b3;b1++){b5=b6[b1];if((b5.selected||b1===b2)&&(aq.support.optDisabled?!b5.disabled:b5.getAttribute("disabled")===null)&&(!b5.parentNode.disabled||!aq.nodeName(b5.parentNode,"optgroup"))){b7=aq(b5).val();if(b4){return b7}b8.push(b7)}}return b8},set:function(b0,b1){var b2=aq.makeArray(b1);aq(b0).find("option").each(function(){this.selected=aq.inArray(aq(this).val(),b2)>=0});if(!b2.length){b0.selectedIndex=-1}return b2}}},attrFn:{},attr:function(b0,b2,b7,b5){var b6,b1,b3,b4=b0.nodeType;if(!b0||b4===3||b4===8||b4===2){return}if(b5&&aq.isFunction(aq.fn[b2])){return aq(b0)[b2](b7)}if(typeof b0.getAttribute==="undefined"){return aq.prop(b0,b2,b7)}b3=b4!==1||!aq.isXMLDoc(b0);if(b3){b2=b2.toLowerCase();b1=aq.attrHooks[b2]||(aD.test(b2)?o:au)}if(b7!==bS){if(b7===null){aq.removeAttr(b0,b2);return}else{if(b1&&"set" in b1&&b3&&(b6=b1.set(b0,b7,b2))!==bS){return b6}else{b0.setAttribute(b2,b7+"");return b7}}}else{if(b1&&"get" in b1&&b3&&(b6=b1.get(b0,b2))!==null){return b6}else{b6=b0.getAttribute(b2);return b6===null?bS:b6}}},removeAttr:function(b1,b6){var b5,b0,b4,b3,b2=0;if(b6&&b1.nodeType===1){b0=b6.split(z);for(;b2<b0.length;b2++){b4=b0[b2];if(b4){b5=aq.propFix[b4]||b4;b3=aD.test(b4);if(!b3){aq.attr(b1,b4,"")}b1.removeAttribute(ae?b4:b5);if(b3&&b5 in b1){b1[b5]=false}}}}},attrHooks:{type:{set:function(b0,b2){if(bB.test(b0.nodeName)&&b0.parentNode){aq.error("type property can't be changed")}else{if(!aq.support.radioValue&&b2==="radio"&&aq.nodeName(b0,"input")){var b1=b0.value;b0.setAttribute("type",b2);if(b1){b0.value=b1}return b2}}}},value:{get:function(b0,b1){if(au&&aq.nodeName(b0,"button")){return au.get(b0,b1)}return b1 in b0?b0.value:null},set:function(b0,b2,b1){if(au&&aq.nodeName(b0,"button")){return au.set(b0,b2,b1)}b0.value=b2}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(b0,b2,b6){var b5,b1,b3,b4=b0.nodeType;if(!b0||b4===3||b4===8||b4===2){return}b3=b4!==1||!aq.isXMLDoc(b0);if(b3){b2=aq.propFix[b2]||b2;b1=aq.propHooks[b2]}if(b6!==bS){if(b1&&"set" in b1&&(b5=b1.set(b0,b6,b2))!==bS){return b5}else{return(b0[b2]=b6)}}else{if(b1&&"get" in b1&&(b5=b1.get(b0,b2))!==null){return b5}else{return b0[b2]}}},propHooks:{tabIndex:{get:function(b1){var b0=b1.getAttributeNode("tabindex");return b0&&b0.specified?parseInt(b0.value,10):aR.test(b1.nodeName)||aK.test(b1.nodeName)&&b1.href?0:bS}}}});o={get:function(b1,b2){var b0,b3=aq.prop(b1,b2);return b3===true||typeof b3!=="boolean"&&(b0=b1.getAttributeNode(b2))&&b0.nodeValue!==false?b2.toLowerCase():bS},set:function(b0,b3,b1){var b2;if(b3===false){aq.removeAttr(b0,b1)}else{b2=aq.propFix[b1]||b1;if(b2 in b0){b0[b2]=true}b0.setAttribute(b1,b1.toLowerCase())}return b1}};if(!ae){Z={name:true,id:true,coords:true};au=aq.valHooks.button={get:function(b0,b1){var b2;b2=b0.getAttributeNode(b1);return b2&&(Z[b1]?b2.value!=="":b2.specified)?b2.value:bS},set:function(b0,b3,b1){var b2=b0.getAttributeNode(b1);if(!b2){b2=R.createAttribute(b1);b0.setAttributeNode(b2)}return(b2.value=b3+"")}};aq.each(["width","height"],function(b0,b1){aq.attrHooks[b1]=aq.extend(aq.attrHooks[b1],{set:function(b2,b3){if(b3===""){b2.setAttribute(b1,"auto");return b3}}})});aq.attrHooks.contenteditable={get:au.get,set:function(b0,b2,b1){if(b2===""){b2="false"}au.set(b0,b2,b1)}}}if(!aq.support.hrefNormalized){aq.each(["href","src","width","height"],function(b0,b1){aq.attrHooks[b1]=aq.extend(aq.attrHooks[b1],{get:function(b2){var b3=b2.getAttribute(b1,2);return b3===null?bS:b3}})})}if(!aq.support.style){aq.attrHooks.style={get:function(b0){return b0.style.cssText.toLowerCase()||bS},set:function(b0,b1){return(b0.style.cssText=b1+"")}}}if(!aq.support.optSelected){aq.propHooks.selected=aq.extend(aq.propHooks.selected,{get:function(b0){var b1=b0.parentNode;if(b1){b1.selectedIndex;if(b1.parentNode){b1.parentNode.selectedIndex}}return null}})}if(!aq.support.enctype){aq.propFix.enctype="encoding"}if(!aq.support.checkOn){aq.each(["radio","checkbox"],function(){aq.valHooks[this]={get:function(b0){return b0.getAttribute("value")===null?"on":b0.value}}})}aq.each(["radio","checkbox"],function(){aq.valHooks[this]=aq.extend(aq.valHooks[this],{set:function(b0,b1){if(aq.isArray(b1)){return(b0.checked=aq.inArray(aq(b0).val(),b1)>=0)}}})});var aT=/^(?:textarea|input|select)$/i,bC=/^([^\.]*|)(?:\.(.+)|)$/,aY=/(?:^|\s)hover(\.\S+|)\b/,a3=/^key/,a7=/^(?:mouse|contextmenu)|click/,aS=/^(?:focusinfocus|focusoutblur)$/,ai=function(b0){return aq.event.special.hover?b0:b0.replace(aY,"mouseenter$1 mouseleave$1")};aq.event={add:function(b1,cf,b7,b0,ca){var b2,b3,b4,cc,cd,ce,b9,b5,b6,b8,cb;if(b1.nodeType===3||b1.nodeType===8||!cf||!b7||!(b2=aq._data(b1))){return}if(b7.handler){b6=b7;b7=b6.handler;ca=b6.selector}if(!b7.guid){b7.guid=aq.guid++}b4=b2.events;if(!b4){b2.events=b4={}}b3=b2.handle;if(!b3){b2.handle=b3=function(cg){return typeof aq!=="undefined"&&(!cg||aq.event.triggered!==cg.type)?aq.event.dispatch.apply(b3.elem,arguments):bS};b3.elem=b1}cf=aq.trim(ai(cf)).split(" ");for(cc=0;cc<cf.length;cc++){cd=bC.exec(cf[cc])||[];ce=cd[1];b9=(cd[2]||"").split(".").sort();cb=aq.event.special[ce]||{};ce=(ca?cb.delegateType:cb.bindType)||ce;cb=aq.event.special[ce]||{};b5=aq.extend({type:ce,origType:cd[1],data:b0,handler:b7,guid:b7.guid,selector:ca,needsContext:ca&&aq.expr.match.needsContext.test(ca),namespace:b9.join(".")},b6);b8=b4[ce];if(!b8){b8=b4[ce]=[];b8.delegateCount=0;if(!cb.setup||cb.setup.call(b1,b0,b9,b3)===false){if(b1.addEventListener){b1.addEventListener(ce,b3,false)}else{if(b1.attachEvent){b1.attachEvent("on"+ce,b3)}}}}if(cb.add){cb.add.call(b1,b5);if(!b5.handler.guid){b5.handler.guid=b7.guid}}if(ca){b8.splice(b8.delegateCount++,0,b5)}else{b8.push(b5)}aq.event.global[ce]=true}b1=null},global:{},remove:function(b0,cg,b5,cb,b7){var cd,ce,cf,ca,b8,b9,b6,b2,cc,b3,b4,b1=aq.hasData(b0)&&aq._data(b0);if(!b1||!(b2=b1.events)){return}cg=aq.trim(ai(cg||"")).split(" ");for(cd=0;cd<cg.length;cd++){ce=bC.exec(cg[cd])||[];cf=ca=ce[1];b8=ce[2];if(!cf){for(cf in b2){aq.event.remove(b0,cf+cg[cd],b5,cb,true)}continue}cc=aq.event.special[cf]||{};cf=(cb?cc.delegateType:cc.bindType)||cf;b3=b2[cf]||[];b9=b3.length;b8=b8?new RegExp("(^|\\.)"+b8.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(b6=0;b6<b3.length;b6++){b4=b3[b6];if((b7||ca===b4.origType)&&(!b5||b5.guid===b4.guid)&&(!b8||b8.test(b4.namespace))&&(!cb||cb===b4.selector||cb==="**"&&b4.selector)){b3.splice(b6--,1);if(b4.selector){b3.delegateCount--}if(cc.remove){cc.remove.call(b0,b4)}}}if(b3.length===0&&b9!==b3.length){if(!cc.teardown||cc.teardown.call(b0,b8,b1.handle)===false){aq.removeEvent(b0,cf,b1.handle)}delete b2[cf]}}if(aq.isEmptyObject(b2)){delete b1.handle;aq.removeData(b0,"events",true)}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(b5,b3,b4,cc){if(b4&&(b4.nodeType===3||b4.nodeType===8)){return}var b1,b7,b9,b2,cb,cd,ce,b8,b6,b0,cf=b5.type||b5,ca=[];if(aS.test(cf+aq.event.triggered)){return}if(cf.indexOf("!")>=0){cf=cf.slice(0,-1);b7=true}if(cf.indexOf(".")>=0){ca=cf.split(".");cf=ca.shift();ca.sort()}if((!b4||aq.event.customEvent[cf])&&!aq.event.global[cf]){return}b5=typeof b5==="object"?b5[aq.expando]?b5:new aq.Event(cf,b5):new aq.Event(cf);b5.type=cf;b5.isTrigger=true;b5.exclusive=b7;b5.namespace=ca.join(".");b5.namespace_re=b5.namespace?new RegExp("(^|\\.)"+ca.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;cd=cf.indexOf(":")<0?"on"+cf:"";if(!b4){b1=aq.cache;for(b9 in b1){if(b1[b9].events&&b1[b9].events[cf]){aq.event.trigger(b5,b3,b1[b9].handle.elem,true)}}return}b5.result=bS;if(!b5.target){b5.target=b4}b3=b3!=null?aq.makeArray(b3):[];b3.unshift(b5);ce=aq.event.special[cf]||{};if(ce.trigger&&ce.trigger.apply(b4,b3)===false){return}b6=[[b4,ce.bindType||cf]];if(!cc&&!ce.noBubble&&!aq.isWindow(b4)){b0=ce.delegateType||cf;b2=aS.test(b0+cf)?b4:b4.parentNode;for(cb=b4;b2;b2=b2.parentNode){b6.push([b2,b0]);cb=b2}if(cb===(b4.ownerDocument||R)){b6.push([cb.defaultView||cb.parentWindow||bU,b0])}}for(b9=0;b9<b6.length&&!b5.isPropagationStopped();b9++){b2=b6[b9][0];b5.type=b6[b9][1];b8=(aq._data(b2,"events")||{})[b5.type]&&aq._data(b2,"handle");if(b8){b8.apply(b2,b3)}b8=cd&&b2[cd];if(b8&&aq.acceptData(b2)&&b8.apply&&b8.apply(b2,b3)===false){b5.preventDefault()}}b5.type=cf;if(!cc&&!b5.isDefaultPrevented()){if((!ce._default||ce._default.apply(b4.ownerDocument,b3)===false)&&!(cf==="click"&&aq.nodeName(b4,"a"))&&aq.acceptData(b4)){if(cd&&b4[cf]&&((cf!=="focus"&&cf!=="blur")||b5.target.offsetWidth!==0)&&!aq.isWindow(b4)){cb=b4[cd];if(cb){b4[cd]=null}aq.event.triggered=cf;b4[cf]();aq.event.triggered=bS;if(cb){b4[cd]=cb}}}}return b5.result},dispatch:function(b3){b3=aq.event.fix(b3||bU.event);var b7,b8,b1,cc,cf,b9,ca,b4,ce,cb,b6=((aq._data(this,"events")||{})[b3.type]||[]),b2=b6.delegateCount,b0=A.call(arguments),cd=!b3.exclusive&&!b3.namespace,cg=aq.event.special[b3.type]||{},b5=[];b0[0]=b3;b3.delegateTarget=this;if(cg.preDispatch&&cg.preDispatch.call(this,b3)===false){return}if(b2&&!(b3.button&&b3.type==="click")){for(b1=b3.target;b1!=this;b1=b1.parentNode||this){if(b1.disabled!==true||b3.type!=="click"){cf={};ca=[];for(b7=0;b7<b2;b7++){b4=b6[b7];ce=b4.selector;if(cf[ce]===bS){cf[ce]=b4.needsContext?aq(ce,this).index(b1)>=0:aq.find(ce,this,null,[b1]).length}if(cf[ce]){ca.push(b4)}}if(ca.length){b5.push({elem:b1,matches:ca})}}}}if(b6.length>b2){b5.push({elem:this,matches:b6.slice(b2)})}for(b7=0;b7<b5.length&&!b3.isPropagationStopped();b7++){b9=b5[b7];b3.currentTarget=b9.elem;for(b8=0;b8<b9.matches.length&&!b3.isImmediatePropagationStopped();b8++){b4=b9.matches[b8];if(cd||(!b3.namespace&&!b4.namespace)||b3.namespace_re&&b3.namespace_re.test(b4.namespace)){b3.data=b4.data;b3.handleObj=b4;cc=((aq.event.special[b4.origType]||{}).handle||b4.handler).apply(b9.elem,b0);if(cc!==bS){b3.result=cc;if(cc===false){b3.preventDefault();b3.stopPropagation()}}}}}if(cg.postDispatch){cg.postDispatch.call(this,b3)}return b3.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(b0,b1){if(b0.which==null){b0.which=b1.charCode!=null?b1.charCode:b1.keyCode}return b0}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(b3,b6){var b4,b2,b0,b1=b6.button,b5=b6.fromElement;if(b3.pageX==null&&b6.clientX!=null){b4=b3.target.ownerDocument||R;b2=b4.documentElement;b0=b4.body;b3.pageX=b6.clientX+(b2&&b2.scrollLeft||b0&&b0.scrollLeft||0)-(b2&&b2.clientLeft||b0&&b0.clientLeft||0);b3.pageY=b6.clientY+(b2&&b2.scrollTop||b0&&b0.scrollTop||0)-(b2&&b2.clientTop||b0&&b0.clientTop||0)}if(!b3.relatedTarget&&b5){b3.relatedTarget=b5===b3.target?b6.toElement:b5}if(!b3.which&&b1!==bS){b3.which=(b1&1?1:(b1&2?3:(b1&4?2:0)))}return b3}},fix:function(b1){if(b1[aq.expando]){return b1}var b3,b5,b4=b1,b2=aq.event.fixHooks[b1.type]||{},b0=b2.props?this.props.concat(b2.props):this.props;b1=aq.Event(b4);for(b3=b0.length;b3;){b5=b0[--b3];b1[b5]=b4[b5]}if(!b1.target){b1.target=b4.srcElement||R}if(b1.target.nodeType===3){b1.target=b1.target.parentNode}b1.metaKey=!!b1.metaKey;return b2.filter?b2.filter(b1,b4):b1},special:{load:{noBubble:true},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(b0,b2,b1){if(aq.isWindow(this)){this.onbeforeunload=b1}},teardown:function(b1,b0){if(this.onbeforeunload===b0){this.onbeforeunload=null}}}},simulate:function(b4,b2,b3,b0){var b1=aq.extend(new aq.Event(),b3,{type:b4,isSimulated:true,originalEvent:{}});if(b0){aq.event.trigger(b1,null,b2)}else{aq.event.dispatch.call(b2,b1)}if(b1.isDefaultPrevented()){b3.preventDefault()}}};aq.event.handle=aq.event.dispatch;aq.removeEvent=R.removeEventListener?function(b0,b2,b1){if(b0.removeEventListener){b0.removeEventListener(b2,b1,false)}}:function(b0,b3,b1){var b2="on"+b3;if(b0.detachEvent){if(typeof b0[b2]==="undefined"){b0[b2]=null}b0.detachEvent(b2,b1)}};aq.Event=function(b1,b0){if(!(this instanceof aq.Event)){return new aq.Event(b1,b0)}if(b1&&b1.type){this.originalEvent=b1;this.type=b1.type;this.isDefaultPrevented=(b1.defaultPrevented||b1.returnValue===false||b1.getPreventDefault&&b1.getPreventDefault())?aQ:aP}else{this.type=b1}if(b0){aq.extend(this,b0)}this.timeStamp=b1&&b1.timeStamp||aq.now();this[aq.expando]=true};function aP(){return false}function aQ(){return true}aq.Event.prototype={preventDefault:function(){this.isDefaultPrevented=aQ;var b0=this.originalEvent;if(!b0){return}if(b0.preventDefault){b0.preventDefault()}else{b0.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=aQ;var b0=this.originalEvent;if(!b0){return}if(b0.stopPropagation){b0.stopPropagation()}b0.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=aQ;this.stopPropagation()},isDefaultPrevented:aP,isPropagationStopped:aP,isImmediatePropagationStopped:aP};aq.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(b1,b0){aq.event.special[b1]={delegateType:b0,bindType:b0,handle:function(b2){var b5,b7=this,b4=b2.relatedTarget,b3=b2.handleObj,b6=b3.selector;if(!b4||(b4!==b7&&!aq.contains(b7,b4))){b2.type=b3.origType;b5=b3.handler.apply(this,arguments);b2.type=b0}return b5}}});if(!aq.support.submitBubbles){aq.event.special.submit={setup:function(){if(aq.nodeName(this,"form")){return false}aq.event.add(this,"click._submit keypress._submit",function(b0){var b1=b0.target,b2=aq.nodeName(b1,"input")||aq.nodeName(b1,"button")?b1.form:bS;if(b2&&!aq._data(b2,"_submit_attached")){aq.event.add(b2,"submit._submit",function(b3){b3._submit_bubble=true});aq._data(b2,"_submit_attached",true)}})},postDispatch:function(b0){if(b0._submit_bubble){delete b0._submit_bubble;if(this.parentNode&&!b0.isTrigger){aq.event.simulate("submit",this.parentNode,b0,true)}}},teardown:function(){if(aq.nodeName(this,"form")){return false}aq.event.remove(this,"._submit")}}}if(!aq.support.changeBubbles){aq.event.special.change={setup:function(){if(aT.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){aq.event.add(this,"propertychange._change",function(b0){if(b0.originalEvent.propertyName==="checked"){this._just_changed=true}});aq.event.add(this,"click._change",function(b0){if(this._just_changed&&!b0.isTrigger){this._just_changed=false}aq.event.simulate("change",this,b0,true)})}return false}aq.event.add(this,"beforeactivate._change",function(b0){var b1=b0.target;if(aT.test(b1.nodeName)&&!aq._data(b1,"_change_attached")){aq.event.add(b1,"change._change",function(b2){if(this.parentNode&&!b2.isSimulated&&!b2.isTrigger){aq.event.simulate("change",this.parentNode,b2,true)}});aq._data(b1,"_change_attached",true)}})},handle:function(b1){var b0=b1.target;if(this!==b0||b1.isSimulated||b1.isTrigger||(b0.type!=="radio"&&b0.type!=="checkbox")){return b1.handleObj.handler.apply(this,arguments)}},teardown:function(){aq.event.remove(this,"._change");return !aT.test(this.nodeName)}}}if(!aq.support.focusinBubbles){aq.each({focus:"focusin",blur:"focusout"},function(b3,b1){var b0=0,b2=function(b4){aq.event.simulate(b1,b4.target,aq.event.fix(b4),true)};aq.event.special[b1]={setup:function(){if(b0++===0){R.addEventListener(b3,b2,true)}},teardown:function(){if(--b0===0){R.removeEventListener(b3,b2,true)}}}})}aq.fn.extend({on:function(b6,b4,b0,b1,b2){var b3,b5;if(typeof b6==="object"){if(typeof b4!=="string"){b0=b0||b4;b4=bS}for(b5 in b6){this.on(b5,b4,b0,b6[b5],b2)}return this}if(b0==null&&b1==null){b1=b4;b0=b4=bS}else{if(b1==null){if(typeof b4==="string"){b1=b0;b0=bS}else{b1=b0;b0=b4;b4=bS}}}if(b1===false){b1=aP}else{if(!b1){return this}}if(b2===1){b3=b1;b1=function(b7){aq().off(b7);return b3.apply(this,arguments)};b1.guid=b3.guid||(b3.guid=aq.guid++)}return this.each(function(){aq.event.add(this,b6,b1,b0,b4)})},one:function(b3,b2,b0,b1){return this.on(b3,b2,b0,b1,1)},off:function(b4,b2,b0){var b1,b3;if(b4&&b4.preventDefault&&b4.handleObj){b1=b4.handleObj;aq(b4.delegateTarget).off(b1.namespace?b1.origType+"."+b1.namespace:b1.origType,b1.selector,b1.handler);return this}if(typeof b4==="object"){for(b3 in b4){this.off(b3,b2,b4[b3])}return this}if(b2===false||typeof b2==="function"){b0=b2;b2=bS}if(b0===false){b0=aP}return this.each(function(){aq.event.remove(this,b4,b0,b2)})},bind:function(b2,b0,b1){return this.on(b2,null,b0,b1)},unbind:function(b1,b0){return this.off(b1,null,b0)},live:function(b2,b0,b1){aq(this.context).on(b2,this.selector,b0,b1);return this},die:function(b1,b0){aq(this.context).off(b1,this.selector||"**",b0);return this},delegate:function(b2,b3,b0,b1){return this.on(b3,b2,b0,b1)},undelegate:function(b1,b2,b0){return arguments.length===1?this.off(b1,"**"):this.off(b2,b1||"**",b0)},trigger:function(b1,b0){return this.each(function(){aq.event.trigger(b1,b0,this)})},triggerHandler:function(b1,b0){if(this[0]){return aq.event.trigger(b1,b0,this[0],true)}},toggle:function(b1){var b0=arguments,b2=b1.guid||aq.guid++,b3=0,b4=function(b5){var b6=(aq._data(this,"lastToggle"+b1.guid)||0)%b3;aq._data(this,"lastToggle"+b1.guid,b6+1);b5.preventDefault();return b0[b6].apply(this,arguments)||false};b4.guid=b2;while(b3<b0.length){b0[b3++].guid=b2}return this.click(b4)},hover:function(b1,b0){return this.mouseenter(b1).mouseleave(b0||b1)}});aq.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu").split(" "),function(b0,b1){aq.fn[b1]=function(b2,b3){if(b3==null){b3=b2;b2=null}return arguments.length>0?this.on(b1,null,b2,b3):this.trigger(b1)};if(a3.test(b1)){aq.event.fixHooks[b1]=aq.event.keyHooks}if(a7.test(b1)){aq.event.fixHooks[b1]=aq.event.mouseHooks}});
/*
 * Sizzle CSS Selector Engine
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://sizzlejs.com/
 */
(function(c7,c5){var ca,b3,cs,ct,cx,cg,cd,c0,cu,cE,b9=true,c1="undefined",cr=("sizcache"+Math.random()).replace(".",""),c2=String,cn=c7.document,cm=cn.documentElement,cl=0,co=0,cF=[].pop,cI=[].push,cZ=[].slice,cw=[].indexOf||function(c8){var c9=0,da=this.length;for(;c9<da;c9++){if(this[c9]===c8){return c9}}return -1},cy=function(c8,c9){c8[cr]=c9==null||c9;return c8},ci=function(){var c8={},c9=[];return cy(function(da,db){if(c9.push(da)>cs.cacheLength){delete c8[c9.shift()]}return(c8[da+" "]=db)},c8)},cc=ci(),c3=ci(),ce=ci(),c6="[\\x20\\t\\r\\n\\f]",cb="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",cv=cb.replace("w","w#"),cD="([*^$|!~]?=)",b8="\\["+c6+"*("+cb+")"+c6+"*(?:"+cD+c6+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+cv+")|)|)"+c6+"*\\]",cH=":("+cb+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+b8+")|[^:]|\\\\.)*|.*))\\)|)",cG=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+c6+"*((?:-\\d)?\\d*)"+c6+"*\\)|)(?=[^-]|$)",cT=new RegExp("^"+c6+"+|((?:^|[^\\\\])(?:\\\\.)*)"+c6+"+$","g"),cL=new RegExp("^"+c6+"*,"+c6+"*"),cK=new RegExp("^"+c6+"*([\\x20\\t\\r\\n\\f>+~])"+c6+"*"),cQ=new RegExp(cH),cR=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,cP=/^:not/,cS=/[\x20\t\r\n\f]*[+~]/,cM=/:not\($/,cN=/h\d/i,cO=/input|select|textarea|button/i,cJ=/\\(?!\\)/g,cB={ID:new RegExp("^#("+cb+")"),CLASS:new RegExp("^\\.("+cb+")"),NAME:new RegExp("^\\[name=['\"]?("+cb+")['\"]?\\]"),TAG:new RegExp("^("+cb.replace("w","w*")+")"),ATTR:new RegExp("^"+b8),PSEUDO:new RegExp("^"+cH),POS:new RegExp(cG,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+c6+"*(even|odd|(([+-]|)(\\d*)n|)"+c6+"*(?:([+-]|)"+c6+"*(\\d+)|))"+c6+"*\\)|)","i"),needsContext:new RegExp("^"+c6+"*[>+~]|"+cG,"i")},b1=function(da){var c8=cn.createElement("div");try{return da(c8)}catch(c9){return false}finally{c8=null}},b5=b1(function(c8){c8.appendChild(cn.createComment(""));return !c8.getElementsByTagName("*").length}),b4=b1(function(c8){c8.innerHTML="<a href='#'></a>";return c8.firstChild&&typeof c8.firstChild.getAttribute!==c1&&c8.firstChild.getAttribute("href")==="#"}),b2=b1(function(c8){c8.innerHTML="<select></select>";var c9=typeof c8.lastChild.getAttribute("multiple");return c9!=="boolean"&&c9!=="string"}),b6=b1(function(c8){c8.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!c8.getElementsByClassName||!c8.getElementsByClassName("e").length){return false}c8.lastChild.className="e";return c8.getElementsByClassName("e").length===2}),b7=b1(function(c8){c8.id=cr+0;c8.innerHTML="<a name='"+cr+"'></a><div name='"+cr+"'></div>";cm.insertBefore(c8,cm.firstChild);var c9=cn.getElementsByName&&cn.getElementsByName(cr).length===2+cn.getElementsByName(cr+0).length;b3=!cn.getElementById(cr);cm.removeChild(c8);return c9});try{cZ.call(cm.childNodes,0)[0].nodeType}catch(cp){cZ=function(c9){var c8,da=[];for(;(c8=this[c9]);c9++){da.push(c8)}return da}}function cY(df,c8,dd,de){dd=dd||[];c8=c8||cn;var db,c9,dg,da,dc=c8.nodeType;if(!df||typeof df!=="string"){return dd}if(dc!==1&&dc!==9){return[]}dg=cx(c8);if(!dg&&!de){if((db=cR.exec(df))){if((da=db[1])){if(dc===9){c9=c8.getElementById(da);if(c9&&c9.parentNode){if(c9.id===da){dd.push(c9);return dd}}else{return dd}}else{if(c8.ownerDocument&&(c9=c8.ownerDocument.getElementById(da))&&cg(c8,c9)&&c9.id===da){dd.push(c9);return dd}}}else{if(db[2]){cI.apply(dd,cZ.call(c8.getElementsByTagName(df),0));return dd}else{if((da=db[3])&&b6&&c8.getElementsByClassName){cI.apply(dd,cZ.call(c8.getElementsByClassName(da),0));return dd}}}}}return cU(df.replace(cT,"$1"),c8,dd,de,dg)}cY.matches=function(c9,c8){return cY(c9,null,null,c8)};cY.matchesSelector=function(c8,c9){return cY(c9,null,null,[c8]).length>0};function cj(c8){return function(c9){var da=c9.nodeName.toLowerCase();return da==="input"&&c9.type===c8}}function ch(c8){return function(c9){var da=c9.nodeName.toLowerCase();return(da==="input"||da==="button")&&c9.type===c8}}function ck(c8){return cy(function(c9){c9=+c9;return cy(function(de,dc){var db,dd=c8([],de.length,c9),da=dd.length;while(da--){if(de[(db=dd[da])]){de[db]=!(dc[db]=de[db])}}})})}ct=cY.getText=function(c8){var da,dc="",c9=0,db=c8.nodeType;if(db){if(db===1||db===9||db===11){if(typeof c8.textContent==="string"){return c8.textContent}else{for(c8=c8.firstChild;c8;c8=c8.nextSibling){dc+=ct(c8)}}}else{if(db===3||db===4){return c8.nodeValue}}}else{for(;(da=c8[c9]);c9++){dc+=ct(da)}}return dc};cx=cY.isXML=function(c9){var c8=c9&&(c9.ownerDocument||c9).documentElement;return c8?c8.nodeName!=="HTML":false};cg=cY.contains=cm.contains?function(c8,da){var c9=c8.nodeType===9?c8.documentElement:c8,db=da&&da.parentNode;return c8===db||!!(db&&db.nodeType===1&&c9.contains&&c9.contains(db))}:cm.compareDocumentPosition?function(c8,c9){return c9&&!!(c8.compareDocumentPosition(c9)&16)}:function(c8,c9){while((c9=c9.parentNode)){if(c9===c8){return true}}return false};cY.attr=function(c8,c9){var da,db=cx(c8);if(!db){c9=c9.toLowerCase()}if((da=cs.attrHandle[c9])){return da(c8)}if(db||b2){return c8.getAttribute(c9)}da=c8.getAttributeNode(c9);return da?typeof c8[c9]==="boolean"?c8[c9]?c9:null:da.specified?da.value:null:null};cs=cY.selectors={cacheLength:50,createPseudo:cy,match:cB,attrHandle:b4?{}:{href:function(c8){return c8.getAttribute("href",2)},type:function(c8){return c8.getAttribute("type")}},find:{ID:b3?function(c9,c8,db){if(typeof c8.getElementById!==c1&&!db){var da=c8.getElementById(c9);return da&&da.parentNode?[da]:[]}}:function(c9,c8,db){if(typeof c8.getElementById!==c1&&!db){var da=c8.getElementById(c9);return da?da.id===c9||typeof da.getAttributeNode!==c1&&da.getAttributeNode("id").value===c9?[da]:c5:[]}},TAG:b5?function(c9,c8){if(typeof c8.getElementsByTagName!==c1){return c8.getElementsByTagName(c9)}}:function(dc,c8){var db=c8.getElementsByTagName(dc);if(dc==="*"){var c9,dd=[],da=0;for(;(c9=db[da]);da++){if(c9.nodeType===1){dd.push(c9)}}return dd}return db},NAME:b7&&function(c9,c8){if(typeof c8.getElementsByName!==c1){return c8.getElementsByName(name)}},CLASS:b6&&function(c8,c9,da){if(typeof c9.getElementsByClassName!==c1&&!da){return c9.getElementsByClassName(c8)}}},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(c8){c8[1]=c8[1].replace(cJ,"");c8[3]=(c8[4]||c8[5]||"").replace(cJ,"");if(c8[2]==="~="){c8[3]=" "+c8[3]+" "}return c8.slice(0,4)},CHILD:function(c8){c8[1]=c8[1].toLowerCase();if(c8[1]==="nth"){if(!c8[2]){cY.error(c8[0])}c8[3]=+(c8[3]?c8[4]+(c8[5]||1):2*(c8[2]==="even"||c8[2]==="odd"));c8[4]=+((c8[6]+c8[7])||c8[2]==="odd")}else{if(c8[2]){cY.error(c8[0])}}return c8},PSEUDO:function(c9){var da,c8;if(cB.CHILD.test(c9[0])){return null}if(c9[3]){c9[2]=c9[3]}else{if((da=c9[4])){if(cQ.test(da)&&(c8=c4(da,true))&&(c8=da.indexOf(")",da.length-c8)-da.length)){da=da.slice(0,c8);c9[0]=c9[0].slice(0,c8)}c9[2]=da}}return c9.slice(0,3)}},filter:{ID:b3?function(c8){c8=c8.replace(cJ,"");return function(c9){return c9.getAttribute("id")===c8}}:function(c8){c8=c8.replace(cJ,"");return function(c9){var da=typeof c9.getAttributeNode!==c1&&c9.getAttributeNode("id");return da&&da.value===c8}},TAG:function(c8){if(c8==="*"){return function(){return true}}c8=c8.replace(cJ,"").toLowerCase();return function(c9){return c9.nodeName&&c9.nodeName.toLowerCase()===c8}},CLASS:function(c8){var c9=cc[cr][c8+" "];return c9||(c9=new RegExp("(^|"+c6+")"+c8+"("+c6+"|$)"))&&cc(c8,function(da){return c9.test(da.className||(typeof da.getAttribute!==c1&&da.getAttribute("class"))||"")})},ATTR:function(c9,da,c8){return function(dc,db){var dd=cY.attr(dc,c9);if(dd==null){return da==="!="}if(!da){return true}dd+="";return da==="="?dd===c8:da==="!="?dd!==c8:da==="^="?c8&&dd.indexOf(c8)===0:da==="*="?c8&&dd.indexOf(c8)>-1:da==="$="?c8&&dd.substr(dd.length-c8.length)===c8:da==="~="?(" "+dd+" ").indexOf(c8)>-1:da==="|="?dd===c8||dd.substr(0,c8.length+1)===c8+"-":false}},CHILD:function(db,c8,c9,da){if(db==="nth"){return function(dd){var de,dc,df=dd.parentNode;if(c9===1&&da===0){return true}if(df){dc=0;for(de=df.firstChild;de;de=de.nextSibling){if(de.nodeType===1){dc++;if(dd===de){break}}}}dc-=da;return dc===c9||(dc%c9===0&&dc/c9>=0)}}return function(dc){var dd=dc;switch(db){case"only":case"first":while((dd=dd.previousSibling)){if(dd.nodeType===1){return false}}if(db==="first"){return true}dd=dc;case"last":while((dd=dd.nextSibling)){if(dd.nodeType===1){return false}}return true}}},PSEUDO:function(db,c9){var c8,da=cs.pseudos[db]||cs.setFilters[db.toLowerCase()]||cY.error("unsupported pseudo: "+db);if(da[cr]){return da(c9)}if(da.length>1){c8=[db,db,"",c9];return cs.setFilters.hasOwnProperty(db.toLowerCase())?cy(function(dg,df){var dd,de=da(dg,c9),dc=de.length;while(dc--){dd=cw.call(dg,de[dc]);dg[dd]=!(df[dd]=de[dc])}}):function(dc){return da(dc,0,c8)}}return da}},pseudos:{not:cy(function(db){var c8=[],da=[],c9=cd(db.replace(cT,"$1"));return c9[cr]?cy(function(dg,df,dc,di){var dd,dh=c9(dg,null,di,[]),de=dg.length;while(de--){if((dd=dh[de])){dg[de]=!(df[de]=dd)}}}):function(dd,dc,de){c8[0]=dd;c9(c8,null,de,da);return !da.pop()}}),has:cy(function(c8){return function(c9){return cY(c8,c9).length>0}}),contains:cy(function(c8){return function(c9){return(c9.textContent||c9.innerText||ct(c9)).indexOf(c8)>-1}}),enabled:function(c8){return c8.disabled===false},disabled:function(c8){return c8.disabled===true},checked:function(c8){var c9=c8.nodeName.toLowerCase();return(c9==="input"&&!!c8.checked)||(c9==="option"&&!!c8.selected)},selected:function(c8){if(c8.parentNode){c8.parentNode.selectedIndex}return c8.selected===true},parent:function(c8){return !cs.pseudos.empty(c8)},empty:function(c8){var c9;c8=c8.firstChild;while(c8){if(c8.nodeName>"@"||(c9=c8.nodeType)===3||c9===4){return false}c8=c8.nextSibling}return true},header:function(c8){return cN.test(c8.nodeName)},text:function(c9){var da,c8;return c9.nodeName.toLowerCase()==="input"&&(da=c9.type)==="text"&&((c8=c9.getAttribute("type"))==null||c8.toLowerCase()===da)},radio:cj("radio"),checkbox:cj("checkbox"),file:cj("file"),password:cj("password"),image:cj("image"),submit:ch("submit"),reset:ch("reset"),button:function(c8){var c9=c8.nodeName.toLowerCase();return c9==="input"&&c8.type==="button"||c9==="button"},input:function(c8){return cO.test(c8.nodeName)},focus:function(c9){var c8=c9.ownerDocument;return c9===c8.activeElement&&(!c8.hasFocus||c8.hasFocus())&&!!(c9.type||c9.href||~c9.tabIndex)},active:function(c8){return c8===c8.ownerDocument.activeElement},first:ck(function(){return[0]}),last:ck(function(c9,c8){return[c8-1]}),eq:ck(function(da,c9,c8){return[c8<0?c8+c9:c8]}),even:ck(function(da,c9){for(var c8=0;c8<c9;c8+=2){da.push(c8)}return da}),odd:ck(function(da,c9){for(var c8=1;c8<c9;c8+=2){da.push(c8)}return da}),lt:ck(function(db,da,c8){for(var c9=c8<0?c8+da:c8;--c9>=0;){db.push(c9)}return db}),gt:ck(function(db,da,c8){for(var c9=c8<0?c8+da:c8;++c9<da;){db.push(c9)}return db})}};function cX(c8,c9,db){if(c8===c9){return db}var da=c8.nextSibling;while(da){if(da===c9){return -1}da=da.nextSibling}return 1}c0=cm.compareDocumentPosition?function(c8,c9){if(c8===c9){cu=true;return 0}return(!c8.compareDocumentPosition||!c9.compareDocumentPosition?c8.compareDocumentPosition:c8.compareDocumentPosition(c9)&4)?-1:1}:function(c8,dc){if(c8===dc){cu=true;return 0}else{if(c8.sourceIndex&&dc.sourceIndex){return c8.sourceIndex-dc.sourceIndex}}var c9,dd,da=[],de=[],db=c8.parentNode,df=dc.parentNode,dg=db;if(db===df){return cX(c8,dc)}else{if(!db){return -1}else{if(!df){return 1}}}while(dg){da.unshift(dg);dg=dg.parentNode}dg=df;while(dg){de.unshift(dg);dg=dg.parentNode}c9=da.length;dd=de.length;for(var dh=0;dh<c9&&dh<dd;dh++){if(da[dh]!==de[dh]){return cX(da[dh],de[dh])}}return dh===c9?cX(c8,de[dh],-1):cX(da[dh],dc,1)};[0,0].sort(c0);b9=!cu;cY.uniqueSort=function(dc){var c9,c8=[],da=1,db=0;cu=b9;dc.sort(c0);if(cu){for(;(c9=dc[da]);da++){if(c9===dc[da-1]){db=c8.push(da)}}while(db--){dc.splice(c8[db],1)}}return dc};cY.error=function(c8){throw new Error("Syntax error, unrecognized expression: "+c8)};function c4(de,dc){var db,da,dg,dh,df,c9,dd,c8=c3[cr][de+" "];if(c8){return dc?0:c8.slice(0)}df=de;c9=[];dd=cs.preFilter;while(df){if(!db||(da=cL.exec(df))){if(da){df=df.slice(da[0].length)||df}c9.push(dg=[])}db=false;if((da=cK.exec(df))){dg.push(db=new c2(da.shift()));df=df.slice(db.length);db.type=da[0].replace(cT," ")}for(dh in cs.filter){if((da=cB[dh].exec(df))&&(!dd[dh]||(da=dd[dh](da)))){dg.push(db=new c2(da.shift()));df=df.slice(db.length);db.type=dh;db.matches=da}}if(!db){break}}return dc?df.length:df?cY.error(de):c3(de,c9).slice(0)}function b0(dd,da,c8){var db=da.dir,c9=c8&&da.dir==="parentNode",dc=co++;return da.first?function(df,de,dg){while((df=df[db])){if(c9||df.nodeType===1){return dd(df,de,dg)}}}:function(di,dg,dj){if(!dj){var de,dh=cl+" "+dc+" ",df=dh+ca;while((di=di[db])){if(c9||di.nodeType===1){if((de=di[cr])===df){return di.sizset}else{if(typeof de==="string"&&de.indexOf(dh)===0){if(di.sizset){return di}}else{di[cr]=df;if(dd(di,dg,dj)){di.sizset=true;return di}di.sizset=false}}}}}else{while((di=di[db])){if(c9||di.nodeType===1){if(dd(di,dg,dj)){return di}}}}}}function cq(c8){return c8.length>1?function(da,c9,dc){var db=c8.length;while(db--){if(!c8[db](da,c9,dc)){return false}}return true}:c8[0]}function cf(dg,dd,da,c8,dh){var c9,df=[],db=0,dc=dg.length,de=dd!=null;for(;db<dc;db++){if((c9=dg[db])){if(!da||da(c9,c8,dh)){df.push(c9);if(de){dd.push(db)}}}}return df}function cW(dc,dd,c8,c9,da,db){if(c9&&!c9[cr]){c9=cW(c9)}if(da&&!da[cr]){da=cW(da,db)}return cy(function(dp,dn,de,dr){var dq,dh,df,dm=[],dk=[],dl=dn.length,dg=dp||cC(dd||"*",de.nodeType?[de]:de,[]),di=dc&&(dp||!dd)?cf(dg,dm,dc,de,dr):dg,dj=c8?da||(dp?dc:dl||c9)?[]:dn:di;if(c8){c8(di,dj,de,dr)}if(c9){dq=cf(dj,dk);c9(dq,[],de,dr);dh=dq.length;while(dh--){if((df=dq[dh])){dj[dk[dh]]=!(di[dk[dh]]=df)}}}if(dp){if(da||dc){if(da){dq=[];dh=dj.length;while(dh--){if((df=dj[dh])){dq.push((di[dh]=df))}}da(null,(dj=[]),dq,dr)}dh=dj.length;while(dh--){if((df=dj[dh])&&(dq=da?cw.call(dp,df):dm[dh])>-1){dp[dq]=!(dn[dq]=df)}}}}else{dj=cf(dj===dn?dj.splice(dl,dj.length):dj);if(da){da(null,dn,dj,dr)}else{cI.apply(dn,dj)}}})}function cA(di){var c8,dg,db,dd=di.length,dc=cs.relative[di[0].type],da=dc||cs.relative[" "],c9=dc?1:0,df=b0(function(dj){return dj===c8},da,true),de=b0(function(dj){return cw.call(c8,dj)>-1},da,true),dh=[function(dk,dj,dl){return(!dc&&(dl||dj!==cE))||((c8=dj).nodeType?df(dk,dj,dl):de(dk,dj,dl))}];for(;c9<dd;c9++){if((dg=cs.relative[di[c9].type])){dh=[b0(cq(dh),dg)]}else{dg=cs.filter[di[c9].type].apply(null,di[c9].matches);if(dg[cr]){db=++c9;for(;db<dd;db++){if(cs.relative[di[db].type]){break}}return cW(c9>1&&cq(dh),c9>1&&di.slice(0,c9-1).join("").replace(cT,"$1"),dg,c9<db&&cA(di.slice(c9,db)),db<dd&&cA((di=di.slice(db))),db<dd&&di.join(""))}dh.push(dg)}}return cq(dh)}function cz(da,db){var c9=db.length>0,c8=da.length>0,dc=function(dq,dd,dt,dp,di){var dg,dk,dm,dr=[],dl=0,dj="0",ds=dq&&[],dn=di!=null,de=cE,dh=dq||c8&&cs.find.TAG("*",di&&dd.parentNode||dd),df=(cl+=de==null?1:Math.E);if(dn){cE=dd!==cn&&dd;ca=dc.el}for(;(dg=dh[dj])!=null;dj++){if(c8&&dg){for(dk=0;(dm=da[dk]);dk++){if(dm(dg,dd,dt)){dp.push(dg);break}}if(dn){cl=df;ca=++dc.el}}if(c9){if((dg=!dm&&dg)){dl--}if(dq){ds.push(dg)}}}dl+=dj;if(c9&&dj!==dl){for(dk=0;(dm=db[dk]);dk++){dm(ds,dr,dd,dt)}if(dq){if(dl>0){while(dj--){if(!(ds[dj]||dr[dj])){dr[dj]=cF.call(dp)}}}dr=cf(dr)}cI.apply(dp,dr);if(dn&&!dq&&dr.length>0&&(dl+db.length)>1){cY.uniqueSort(dp)}}if(dn){cl=df;cE=de}return ds};dc.el=0;return c9?cy(dc):dc}cd=cY.compile=function(dc,da){var db,dd=[],c9=[],c8=ce[cr][dc+" "];if(!c8){if(!da){da=c4(dc)}db=da.length;while(db--){c8=cA(da[db]);if(c8[cr]){dd.push(c8)}else{c9.push(c8)}}c8=ce(dc,cz(c9,dd))}return c8};function cC(dc,c8,db){var c9=0,da=c8.length;for(;c9<da;c9++){cY(dc,c8[c9],db)}return db}function cU(df,c8,dd,de,dj){var da,dh,dg,di,c9,dc=c4(df),db=dc.length;if(!de){if(dc.length===1){dh=dc[0]=dc[0].slice(0);if(dh.length>2&&(dg=dh[0]).type==="ID"&&c8.nodeType===9&&!dj&&cs.relative[dh[1].type]){c8=cs.find.ID(dg.matches[0].replace(cJ,""),c8,dj)[0];if(!c8){return dd}df=df.slice(dh.shift().length)}for(da=cB.POS.test(df)?-1:dh.length-1;da>=0;da--){dg=dh[da];if(cs.relative[(di=dg.type)]){break}if((c9=cs.find[di])){if((de=c9(dg.matches[0].replace(cJ,""),cS.test(dh[0].type)&&c8.parentNode||c8,dj))){dh.splice(da,1);df=de.length&&dh.join("");if(!df){cI.apply(dd,cZ.call(de,0));return dd}break}}}}}cd(df,dc)(de,c8,dj,dd,cS.test(df));return dd}if(cn.querySelectorAll){(function(){var c8,da=cU,de=/'|\\/g,db=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,dd=[":focus"],dc=[":active"],c9=cm.matchesSelector||cm.mozMatchesSelector||cm.webkitMatchesSelector||cm.oMatchesSelector||cm.msMatchesSelector;b1(function(df){df.innerHTML="<select><option selected=''></option></select>";if(!df.querySelectorAll("[selected]").length){dd.push("\\["+c6+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)")}if(!df.querySelectorAll(":checked").length){dd.push(":checked")}});b1(function(df){df.innerHTML="<p test=''></p>";if(df.querySelectorAll("[test^='']").length){dd.push("[*^$]="+c6+"*(?:\"\"|'')")}df.innerHTML="<input type='hidden'/>";if(!df.querySelectorAll(":enabled").length){dd.push(":enabled",":disabled")}});dd=new RegExp(dd.join("|"));cU=function(dq,df,dn,dp,dr){if(!dp&&!dr&&!dd.test(dq)){var dg,dh,dl=true,dk=cr,di=df,dj=df.nodeType===9&&dq;if(df.nodeType===1&&df.nodeName.toLowerCase()!=="object"){dg=c4(dq);if((dl=df.getAttribute("id"))){dk=dl.replace(de,"\\$&")}else{df.setAttribute("id",dk)}dk="[id='"+dk+"'] ";dh=dg.length;while(dh--){dg[dh]=dk+dg[dh].join("")}di=cS.test(dq)&&df.parentNode||df;dj=dg.join(",")}if(dj){try{cI.apply(dn,cZ.call(di.querySelectorAll(dj),0));return dn}catch(dm){}finally{if(!dl){df.removeAttribute("id")}}}}return da(dq,df,dn,dp,dr)};if(c9){b1(function(df){c8=c9.call(df,"div");try{c9.call(df,"[test!='']:sizzle");dc.push("!=",cH)}catch(dg){}});dc=new RegExp(dc.join("|"));cY.matchesSelector=function(dg,dh){dh=dh.replace(db,"='$1']");if(!cx(dg)&&!dc.test(dh)&&!dd.test(dh)){try{var di=c9.call(dg,dh);if(di||c8||dg.document&&dg.document.nodeType!==11){return di}}catch(df){}}return cY(dh,null,null,[dg]).length>0}}})()}cs.pseudos.nth=cs.pseudos.eq;function cV(){}cs.filters=cV.prototype=cs.pseudos;cs.setFilters=new cV();cY.attr=aq.attr;aq.find=cY;aq.expr=cY.selectors;aq.expr[":"]=aq.expr.pseudos;aq.unique=cY.uniqueSort;aq.text=cY.getText;aq.isXMLDoc=cY.isXML;aq.contains=cY.contains})(bU);var bD=/Until$/,bj=/^(?:parents|prev(?:Until|All))/,ap=/^.[^:#\[\.,]*$/,ba=aq.expr.match.needsContext,ah={children:true,contents:true,next:true,prev:true};aq.fn.extend({find:function(b6){var b0,b1,b2,b3,b4,b5,b7=this;if(typeof b6!=="string"){return aq(b6).filter(function(){for(b0=0,b1=b7.length;b0<b1;b0++){if(aq.contains(b7[b0],this)){return true}}})}b5=this.pushStack("","find",b6);for(b0=0,b1=this.length;b0<b1;b0++){b2=b5.length;aq.find(b6,this[b0],b5);if(b0>0){for(b3=b2;b3<b5.length;b3++){for(b4=0;b4<b2;b4++){if(b5[b4]===b5[b3]){b5.splice(b3--,1);break}}}}}return b5},has:function(b2){var b0,b3=aq(b2,this),b1=b3.length;return this.filter(function(){for(b0=0;b0<b1;b0++){if(aq.contains(this,b3[b0])){return true}}})},not:function(b0){return this.pushStack(bV(this,b0,false),"not",b0)},filter:function(b0){return this.pushStack(bV(this,b0,true),"filter",b0)},is:function(b0){return !!b0&&(typeof b0==="string"?ba.test(b0)?aq(b0,this.context).index(this[0])>=0:aq.filter(b0,this).length>0:this.filter(b0).length>0)},closest:function(b6,b0){var b1,b2=0,b3=this.length,b5=[],b4=ba.test(b6)||typeof b6!=="string"?aq(b6,b0||this.context):0;for(;b2<b3;b2++){b1=this[b2];while(b1&&b1.ownerDocument&&b1!==b0&&b1.nodeType!==11){if(b4?b4.index(b1)>-1:aq.find.matchesSelector(b1,b6)){b5.push(b1);break}b1=b1.parentNode}}b5=b5.length>1?aq.unique(b5):b5;return this.pushStack(b5,"closest",b6)},index:function(b0){if(!b0){return(this[0]&&this[0].parentNode)?this.prevAll().length:-1}if(typeof b0==="string"){return aq.inArray(this[0],aq(b0))}return aq.inArray(b0.jquery?b0[0]:b0,this)},add:function(b2,b1){var b3=typeof b2==="string"?aq(b2,b1):aq.makeArray(b2&&b2.nodeType?[b2]:b2),b0=aq.merge(this.get(),b3);return this.pushStack(am(b3[0])||am(b0[0])?b0:aq.unique(b0))},addBack:function(b0){return this.add(b0==null?this.prevObject:this.prevObject.filter(b0))}});aq.fn.andSelf=aq.fn.addBack;function am(b0){return !b0||!b0.parentNode||b0.parentNode.nodeType===11}function bN(b0,b1){do{b0=b0[b1]}while(b0&&b0.nodeType!==1);return b0}aq.each({parent:function(b0){var b1=b0.parentNode;return b1&&b1.nodeType!==11?b1:null},parents:function(b0){return aq.dir(b0,"parentNode")},parentsUntil:function(b0,b1,b2){return aq.dir(b0,"parentNode",b2)},next:function(b0){return bN(b0,"nextSibling")},prev:function(b0){return bN(b0,"previousSibling")},nextAll:function(b0){return aq.dir(b0,"nextSibling")},prevAll:function(b0){return aq.dir(b0,"previousSibling")},nextUntil:function(b0,b1,b2){return aq.dir(b0,"nextSibling",b2)},prevUntil:function(b0,b1,b2){return aq.dir(b0,"previousSibling",b2)},siblings:function(b0){return aq.sibling((b0.parentNode||{}).firstChild,b0)},children:function(b0){return aq.sibling(b0.firstChild)},contents:function(b0){return aq.nodeName(b0,"iframe")?b0.contentDocument||b0.contentWindow.document:aq.merge([],b0.childNodes)}},function(b1,b0){aq.fn[b1]=function(b4,b3){var b2=aq.map(this,b0,b4);if(!bD.test(b1)){b3=b4}if(b3&&typeof b3==="string"){b2=aq.filter(b3,b2)}b2=this.length>1&&!ah[b1]?aq.unique(b2):b2;if(this.length>1&&bj.test(b1)){b2=b2.reverse()}return this.pushStack(b2,b1,A.call(arguments).join(","))}});aq.extend({filter:function(b1,b0,b2){if(b2){b1=":not("+b1+")"}return b0.length===1?aq.find.matchesSelector(b0[0],b1)?[b0[0]]:[]:aq.find.matches(b1,b0)},dir:function(b2,b1,b4){var b3=[],b0=b2[b1];while(b0&&b0.nodeType!==9&&(b4===bS||b0.nodeType!==1||!aq(b0).is(b4))){if(b0.nodeType===1){b3.push(b0)}b0=b0[b1]}return b3},sibling:function(b1,b0){var b2=[];for(;b1;b1=b1.nextSibling){if(b1.nodeType===1&&b1!==b0){b2.push(b1)}}return b2}});function bV(b0,b3,b2){b3=b3||0;if(aq.isFunction(b3)){return aq.grep(b0,function(b4,b5){var b6=!!b3.call(b4,b5,b4);return b6===b2})}else{if(b3.nodeType){return aq.grep(b0,function(b4,b5){return(b4===b3)===b2})}else{if(typeof b3==="string"){var b1=aq.grep(b0,function(b4){return b4.nodeType===1});if(ap.test(b3)){return aq.filter(b3,b1,!b2)}else{b3=aq.filter(b3,b1)}}}}return aq.grep(b0,function(b4,b5){return(aq.inArray(b4,b3)>=0)===b2})}function G(b0){var b1=av.split("|"),b2=b0.createDocumentFragment();if(b2.createElement){while(b1.length){b2.createElement(b1.pop())}}return b2}var av="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",a0=/ jQuery\d+="(?:null|\d+)"/g,a4=/^\s+/,bJ=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bx=/<([\w:]+)/,by=/<tbody/i,aZ=/<|&#?\w+;/,bd=/<(?:script|style|link)/i,bb=/<(?:script|object|embed|option|style)/i,be=new RegExp("<(?:"+av+")[\\s/>]","i"),aG=/^(?:checkbox|radio)$/,aH=/checked\s*(?:[^=]|=\s*.checked.)/i,bu=/\/(java|ecma)script/i,aJ=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,bW={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bK=G(R),aa=bK.appendChild(R.createElement("div"));bW.optgroup=bW.option;bW.tbody=bW.tfoot=bW.colgroup=bW.caption=bW.thead;bW.th=bW.td;if(!aq.support.htmlSerialize){bW._default=[1,"X<div>","</div>"]}aq.fn.extend({text:function(b0){return aq.access(this,function(b1){return b1===bS?aq.text(this):this.empty().append((this[0]&&this[0].ownerDocument||R).createTextNode(b1))},null,b0,arguments.length)},wrapAll:function(b0){if(aq.isFunction(b0)){return this.each(function(b2){aq(this).wrapAll(b0.call(this,b2))})}if(this[0]){var b1=aq(b0,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){b1.insertBefore(this[0])}b1.map(function(){var b2=this;while(b2.firstChild&&b2.firstChild.nodeType===1){b2=b2.firstChild}return b2}).append(this)}return this},wrapInner:function(b0){if(aq.isFunction(b0)){return this.each(function(b1){aq(this).wrapInner(b0.call(this,b1))})}return this.each(function(){var b2=aq(this),b1=b2.contents();if(b1.length){b1.wrapAll(b0)}else{b2.append(b0)}})},wrap:function(b0){var b1=aq.isFunction(b0);return this.each(function(b2){aq(this).wrapAll(b1?b0.call(this,b2):b0)})},unwrap:function(){return this.parent().each(function(){if(!aq.nodeName(this,"body")){aq(this).replaceWith(this.childNodes)}}).end()},append:function(){return this.domManip(arguments,true,function(b0){if(this.nodeType===1||this.nodeType===11){this.appendChild(b0)}})},prepend:function(){return this.domManip(arguments,true,function(b0){if(this.nodeType===1||this.nodeType===11){this.insertBefore(b0,this.firstChild)}})},before:function(){if(!am(this[0])){return this.domManip(arguments,false,function(b1){this.parentNode.insertBefore(b1,this)})}if(arguments.length){var b0=aq.clean(arguments);return this.pushStack(aq.merge(b0,this),"before",this.selector)}},after:function(){if(!am(this[0])){return this.domManip(arguments,false,function(b1){this.parentNode.insertBefore(b1,this.nextSibling)})}if(arguments.length){var b0=aq.clean(arguments);return this.pushStack(aq.merge(this,b0),"after",this.selector)}},remove:function(b3,b2){var b0,b1=0;for(;(b0=this[b1])!=null;b1++){if(!b3||aq.filter(b3,[b0]).length){if(!b2&&b0.nodeType===1){aq.cleanData(b0.getElementsByTagName("*"));aq.cleanData([b0])}if(b0.parentNode){b0.parentNode.removeChild(b0)}}}return this},empty:function(){var b0,b1=0;for(;(b0=this[b1])!=null;b1++){if(b0.nodeType===1){aq.cleanData(b0.getElementsByTagName("*"))}while(b0.firstChild){b0.removeChild(b0.firstChild)}}return this},clone:function(b0,b1){b0=b0==null?false:b0;b1=b1==null?b0:b1;return this.map(function(){return aq.clone(this,b0,b1)})},html:function(b0){return aq.access(this,function(b5){var b2=this[0]||{},b3=0,b4=this.length;if(b5===bS){return b2.nodeType===1?b2.innerHTML.replace(a0,""):bS}if(typeof b5==="string"&&!bd.test(b5)&&(aq.support.htmlSerialize||!be.test(b5))&&(aq.support.leadingWhitespace||!a4.test(b5))&&!bW[(bx.exec(b5)||["",""])[1].toLowerCase()]){b5=b5.replace(bJ,"<$1></$2>");try{for(;b3<b4;b3++){b2=this[b3]||{};if(b2.nodeType===1){aq.cleanData(b2.getElementsByTagName("*"));b2.innerHTML=b5}}b2=0}catch(b1){}}if(b2){this.empty().append(b5)}},null,b0,arguments.length)},replaceWith:function(b0){if(!am(this[0])){if(aq.isFunction(b0)){return this.each(function(b1){var b3=aq(this),b2=b3.html();b3.replaceWith(b0.call(this,b1,b2))})}if(typeof b0!=="string"){b0=aq(b0).detach()}return this.each(function(){var b1=this.nextSibling,b2=this.parentNode;aq(this).remove();if(b1){aq(b1).before(b0)}else{aq(b2).append(b0)}})}return this.length?this.pushStack(aq(aq.isFunction(b0)?b0():b0),"replaceWith",b0):this},detach:function(b0){return this.remove(b0,true)},domManip:function(b0,b9,b1){b0=[].concat.apply([],b0);var b7,b2,b3,b5,b4=0,ca=b0[0],b8=[],b6=this.length;if(!aq.support.checkClone&&b6>1&&typeof ca==="string"&&aH.test(ca)){return this.each(function(){aq(this).domManip(b0,b9,b1)})}if(aq.isFunction(ca)){return this.each(function(cb){var cc=aq(this);b0[0]=ca.call(this,cb,b9?cc.html():bS);cc.domManip(b0,b9,b1)})}if(this[0]){b7=aq.buildFragment(b0,this,b8);b3=b7.fragment;b2=b3.firstChild;if(b3.childNodes.length===1){b3=b2}if(b2){b9=b9&&aq.nodeName(b2,"tr");for(b5=b7.cacheable||b6-1;b4<b6;b4++){b1.call(b9&&aq.nodeName(this[b4],"table")?X(this[b4],"tbody"):this[b4],b4===b5?b3:aq.clone(b3,true,true))}}b3=b2=null;if(b8.length){aq.each(b8,function(cc,cb){if(cb.src){if(aq.ajax){aq.ajax({url:cb.src,type:"GET",dataType:"script",async:false,global:false,"throws":true})}else{aq.error("no ajax")}}else{aq.globalEval((cb.text||cb.textContent||cb.innerHTML||"").replace(aJ,""))}if(cb.parentNode){cb.parentNode.removeChild(cb)}})}}return this}});function X(b0,b1){return b0.getElementsByTagName(b1)[0]||b0.appendChild(b0.ownerDocument.createElement(b1))}function r(b6,b1){if(b1.nodeType!==1||!aq.hasData(b6)){return}var b7,b3,b4,b5=aq._data(b6),b0=aq._data(b1,b5),b2=b5.events;if(b2){delete b0.handle;b0.events={};for(b7 in b2){for(b3=0,b4=b2[b7].length;b3<b4;b3++){aq.event.add(b1,b7,b2[b7][b3])}}}if(b0.data){b0.data=aq.extend({},b0.data)}}function t(b2,b0){var b1;if(b0.nodeType!==1){return}if(b0.clearAttributes){b0.clearAttributes()}if(b0.mergeAttributes){b0.mergeAttributes(b2)}b1=b0.nodeName.toLowerCase();if(b1==="object"){if(b0.parentNode){b0.outerHTML=b2.outerHTML}if(aq.support.html5Clone&&(b2.innerHTML&&!aq.trim(b0.innerHTML))){b0.innerHTML=b2.innerHTML}}else{if(b1==="input"&&aG.test(b2.type)){b0.defaultChecked=b0.checked=b2.checked;if(b0.value!==b2.value){b0.value=b2.value}}else{if(b1==="option"){b0.selected=b2.defaultSelected}else{if(b1==="input"||b1==="textarea"){b0.defaultValue=b2.defaultValue}else{if(b1==="script"&&b0.text!==b2.text){b0.text=b2.text}}}}}b0.removeAttribute(aq.expando)}aq.buildFragment=function(b0,b3,b6){var b5,b1,b2,b4=b0[0];b3=b3||R;b3=!b3.nodeType&&b3[0]||b3;b3=b3.ownerDocument||b3;if(b0.length===1&&typeof b4==="string"&&b4.length<512&&b3===R&&b4.charAt(0)==="<"&&!bb.test(b4)&&(aq.support.checkClone||!aH.test(b4))&&(aq.support.html5Clone||!be.test(b4))){b1=true;b5=aq.fragments[b4];b2=b5!==bS}if(!b5){b5=b3.createDocumentFragment();aq.clean(b0,b3,b5,b6);if(b1){aq.fragments[b4]=b2&&b5}}return{fragment:b5,cacheable:b1}};aq.fragments={};aq.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(b0,b1){aq.fn[b0]=function(b8){var b2,b3=0,b7=[],b4=aq(b8),b5=b4.length,b6=this.length===1&&this[0].parentNode;if((b6==null||b6&&b6.nodeType===11&&b6.childNodes.length===1)&&b5===1){b4[b1](this[0]);return this}else{for(;b3<b5;b3++){b2=(b3>0?this.clone(true):this).get();aq(b4[b3])[b1](b2);b7=b7.concat(b2)}return this.pushStack(b7,b0,b4.selector)}}});function ad(b0){if(typeof b0.getElementsByTagName!=="undefined"){return b0.getElementsByTagName("*")}else{if(typeof b0.querySelectorAll!=="undefined"){return b0.querySelectorAll("*")}else{return[]}}}function Y(b0){if(aG.test(b0.type)){b0.defaultChecked=b0.checked}}aq.extend({clone:function(b4,b1,b2){var b6,b3,b5,b0;if(aq.support.html5Clone||aq.isXMLDoc(b4)||!be.test("<"+b4.nodeName+">")){b0=b4.cloneNode(true)}else{aa.innerHTML=b4.outerHTML;aa.removeChild(b0=aa.firstChild)}if((!aq.support.noCloneEvent||!aq.support.noCloneChecked)&&(b4.nodeType===1||b4.nodeType===11)&&!aq.isXMLDoc(b4)){t(b4,b0);b6=ad(b4);b3=ad(b0);for(b5=0;b6[b5];++b5){if(b3[b5]){t(b6[b5],b3[b5])}}}if(b1){r(b4,b0);if(b2){b6=ad(b4);b3=ad(b0);for(b5=0;b6[b5];++b5){r(b6[b5],b3[b5])}}}b6=b3=null;return b0},clean:function(b4,b0,b5,ce){var b8,b9,b3,cf,ch,b1,b2,b7,cg,cb,b6,ca,cd=b0===R&&bK,cc=[];if(!b0||typeof b0.createDocumentFragment==="undefined"){b0=R}for(b8=0;(b3=b4[b8])!=null;b8++){if(typeof b3==="number"){b3+=""}if(!b3){continue}if(typeof b3==="string"){if(!aZ.test(b3)){b3=b0.createTextNode(b3)}else{cd=cd||G(b0);b2=b0.createElement("div");cd.appendChild(b2);b3=b3.replace(bJ,"<$1></$2>");cf=(bx.exec(b3)||["",""])[1].toLowerCase();ch=bW[cf]||bW._default;b1=ch[0];b2.innerHTML=ch[1]+b3+ch[2];while(b1--){b2=b2.lastChild}if(!aq.support.tbody){b7=by.test(b3);cg=cf==="table"&&!b7?b2.firstChild&&b2.firstChild.childNodes:ch[1]==="<table>"&&!b7?b2.childNodes:[];for(b9=cg.length-1;b9>=0;--b9){if(aq.nodeName(cg[b9],"tbody")&&!cg[b9].childNodes.length){cg[b9].parentNode.removeChild(cg[b9])}}}if(!aq.support.leadingWhitespace&&a4.test(b3)){b2.insertBefore(b0.createTextNode(a4.exec(b3)[0]),b2.firstChild)}b3=b2.childNodes;b2.parentNode.removeChild(b2)}}if(b3.nodeType){cc.push(b3)}else{aq.merge(cc,b3)}}if(b2){b3=b2=cd=null}if(!aq.support.appendChecked){for(b8=0;(b3=cc[b8])!=null;b8++){if(aq.nodeName(b3,"input")){Y(b3)}else{if(typeof b3.getElementsByTagName!=="undefined"){aq.grep(b3.getElementsByTagName("input"),Y)}}}}if(b5){b6=function(ci){if(!ci.type||bu.test(ci.type)){return ce?ce.push(ci.parentNode?ci.parentNode.removeChild(ci):ci):b5.appendChild(ci)}};for(b8=0;(b3=cc[b8])!=null;b8++){if(!(aq.nodeName(b3,"script")&&b6(b3))){b5.appendChild(b3);if(typeof b3.getElementsByTagName!=="undefined"){ca=aq.grep(aq.merge([],b3.getElementsByTagName("script")),b6);cc.splice.apply(cc,[b8+1,0].concat(ca));b8+=ca.length}}}}return cc},cleanData:function(b5,b0){var b2,b7,b4,ca,b6=0,b8=aq.expando,b1=aq.cache,b3=aq.support.deleteExpando,b9=aq.event.special;for(;(b4=b5[b6])!=null;b6++){if(b0||aq.acceptData(b4)){b7=b4[b8];b2=b7&&b1[b7];if(b2){if(b2.events){for(ca in b2.events){if(b9[ca]){aq.event.remove(b4,ca)}else{aq.removeEvent(b4,ca,b2.handle)}}}if(b1[b7]){delete b1[b7];if(b3){delete b4[b8]}else{if(b4.removeAttribute){b4.removeAttribute(b8)}else{b4[b8]=null}}aq.deletedIds.push(b7)}}}}}});(function(){var b1,b0;aq.uaMatch=function(b3){b3=b3.toLowerCase();var b2=/(chrome)[ \/]([\w.]+)/.exec(b3)||/(webkit)[ \/]([\w.]+)/.exec(b3)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(b3)||/(msie) ([\w.]+)/.exec(b3)||b3.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(b3)||[];return{browser:b2[1]||"",version:b2[2]||"0"}};b1=aq.uaMatch(at.userAgent);b0={};if(b1.browser){b0[b1.browser]=true;b0.version=b1.version}if(b0.chrome){b0.webkit=true}else{if(b0.webkit){b0.safari=true}}aq.browser=b0;aq.sub=function(){function b3(b6,b5){return new b3.fn.init(b6,b5)}aq.extend(true,b3,this);b3.superclass=this;b3.fn=b3.prototype=this();b3.fn.constructor=b3;b3.sub=this.sub;b3.fn.init=function b2(b6,b5){if(b5&&b5 instanceof aq&&!(b5 instanceof b3)){b5=b3(b5)}return aq.fn.init.call(this,b6,b5,b4)};b3.fn.init.prototype=b3.fn;var b4=b3(R);return b3}})();var O,aj,ak,aC=/alpha\([^)]*\)/i,bi=/opacity=([^)]*)/,bk=/^(top|right|bottom|left)$/,aN=/^(none|table(?!-c[ea]).+)/,a6=/^margin/,bg=new RegExp("^("+w+")(.*)$","i"),bf=new RegExp("^("+w+")(?!px)[a-z%]+$","i"),bp=new RegExp("^([-+])=("+w+")","i"),U={BODY:"block"},N={position:"absolute",visibility:"hidden",display:"block"},L={letterSpacing:0,fontWeight:400},K=["Top","Right","Bottom","Left"],M=["Webkit","O","Moz","ms"],V=aq.fn.toggle;function bT(b4,b2){if(b2 in b4){return b2}var b0=b2.charAt(0).toUpperCase()+b2.slice(1),b3=b2,b1=M.length;while(b1--){b2=M[b1]+b0;if(b2 in b4){return b2}}return b3}function ao(b1,b0){b1=b0||b1;return aq.css(b1,"display")==="none"||!aq.contains(b1.ownerDocument,b1)}function bM(b2,b5){var b1,b0,b6=[],b3=0,b4=b2.length;for(;b3<b4;b3++){b1=b2[b3];if(!b1.style){continue}b6[b3]=aq._data(b1,"olddisplay");if(b5){if(!b6[b3]&&b1.style.display==="none"){b1.style.display=""}if(b1.style.display===""&&ao(b1)){b6[b3]=aq._data(b1,"olddisplay",J(b1.nodeName))}}else{b0=O(b1,"display");if(!b6[b3]&&b0!=="none"){aq._data(b1,"olddisplay",b0)}}}for(b3=0;b3<b4;b3++){b1=b2[b3];if(!b1.style){continue}if(!b5||b1.style.display==="none"||b1.style.display===""){b1.style.display=b5?b6[b3]||"":"none"}}return b2}aq.fn.extend({css:function(b0,b1){return aq.access(this,function(b2,b3,b4){return b4!==bS?aq.style(b2,b3,b4):aq.css(b2,b3)},b0,b1,arguments.length>1)},show:function(){return bM(this,true)},hide:function(){return bM(this)},toggle:function(b2,b1){var b0=typeof b2==="boolean";if(aq.isFunction(b2)&&aq.isFunction(b1)){return V.apply(this,arguments)}return this.each(function(){if(b0?b2:ao(this)){aq(this).show()}else{aq(this).hide()}})}});aq.extend({cssHooks:{opacity:{get:function(b1,b0){if(b0){var b2=O(b1,"opacity");return b2===""?"1":b2}}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":aq.support.cssFloat?"cssFloat":"styleFloat"},style:function(b1,b4,b9,b2){if(!b1||b1.nodeType===3||b1.nodeType===8||!b1.style){return}var b6,b8,b3,b5=aq.camelCase(b4),b7=b1.style;b4=aq.cssProps[b5]||(aq.cssProps[b5]=bT(b7,b5));b3=aq.cssHooks[b4]||aq.cssHooks[b5];if(b9!==bS){b8=typeof b9;if(b8==="string"&&(b6=bp.exec(b9))){b9=(b6[1]+1)*b6[2]+parseFloat(aq.css(b1,b4));b8="number"}if(b9==null||b8==="number"&&isNaN(b9)){return}if(b8==="number"&&!aq.cssNumber[b5]){b9+="px"}if(!b3||!("set" in b3)||(b9=b3.set(b1,b9,b2))!==bS){try{b7[b4]=b9}catch(b0){}}}else{if(b3&&"get" in b3&&(b6=b3.get(b1,false,b2))!==bS){return b6}return b7[b4]}},css:function(b0,b3,b5,b1){var b7,b4,b2,b6=aq.camelCase(b3);b3=aq.cssProps[b6]||(aq.cssProps[b6]=bT(b0.style,b6));b2=aq.cssHooks[b3]||aq.cssHooks[b6];if(b2&&"get" in b2){b7=b2.get(b0,true,b1)}if(b7===bS){b7=O(b0,b3)}if(b7==="normal"&&b3 in L){b7=L[b3]}if(b5||b1!==bS){b4=parseFloat(b7);return b5||aq.isNumeric(b4)?b4||0:b7}return b7},swap:function(b1,b4,b0){var b5,b2,b3={};for(b2 in b4){b3[b2]=b1.style[b2];b1.style[b2]=b4[b2]}b5=b0.call(b1);for(b2 in b4){b1.style[b2]=b3[b2]}return b5}});if(bU.getComputedStyle){O=function(b1,b4){var b5,b7,b3,b2,b0=bU.getComputedStyle(b1,null),b6=b1.style;if(b0){b5=b0.getPropertyValue(b4)||b0[b4];if(b5===""&&!aq.contains(b1.ownerDocument,b1)){b5=aq.style(b1,b4)}if(bf.test(b5)&&a6.test(b4)){b7=b6.width;b3=b6.minWidth;b2=b6.maxWidth;b6.minWidth=b6.maxWidth=b6.width=b5;b5=b0.width;b6.width=b7;b6.minWidth=b3;b6.maxWidth=b2}}return b5}}else{if(R.documentElement.currentStyle){O=function(b0,b2){var b1,b4,b3=b0.currentStyle&&b0.currentStyle[b2],b5=b0.style;if(b3==null&&b5&&b5[b2]){b3=b5[b2]}if(bf.test(b3)&&!bk.test(b2)){b1=b5.left;b4=b0.runtimeStyle&&b0.runtimeStyle.left;if(b4){b0.runtimeStyle.left=b0.currentStyle.left}b5.left=b2==="fontSize"?"1em":b3;b3=b5.pixelLeft+"px";b5.left=b1;if(b4){b0.runtimeStyle.left=b4}}return b3===""?"auto":b3}}}function bL(b0,b3,b2){var b1=bg.exec(b3);return b1?Math.max(0,b1[1]-(b2||0))+(b1[2]||"px"):b3}function n(b0,b4,b1,b3){var b2=b1===(b3?"border":"content")?4:b4==="width"?1:0,b5=0;for(;b2<4;b2+=2){if(b1==="margin"){b5+=aq.css(b0,b1+K[b2],true)}if(b3){if(b1==="content"){b5-=parseFloat(O(b0,"padding"+K[b2]))||0}if(b1!=="margin"){b5-=parseFloat(O(b0,"border"+K[b2]+"Width"))||0}}else{b5+=parseFloat(O(b0,"padding"+K[b2]))||0;if(b1!=="padding"){b5+=parseFloat(O(b0,"border"+K[b2]+"Width"))||0}}}return b5}function af(b0,b3,b1){var b4=b3==="width"?b0.offsetWidth:b0.offsetHeight,b5=true,b2=aq.support.boxSizing&&aq.css(b0,"boxSizing")==="border-box";if(b4<=0||b4==null){b4=O(b0,b3);if(b4<0||b4==null){b4=b0.style[b3]}if(bf.test(b4)){return b4}b5=b2&&(aq.support.boxSizingReliable||b4===b0.style[b3]);b4=parseFloat(b4)||0}return(b4+n(b0,b3,b1||(b2?"border":"content"),b5))+"px"}function J(b2){if(U[b2]){return U[b2]}var b1=aq("<"+b2+">").appendTo(R.body),b0=b1.css("display");b1.remove();if(b0==="none"||b0===""){aj=R.body.appendChild(aj||aq.extend(R.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!ak||!aj.createElement){ak=(aj.contentWindow||aj.contentDocument).document;ak.write("<!doctype html><html><body>");ak.close()}b1=ak.body.appendChild(ak.createElement(b2));b0=O(b1,"display");R.body.removeChild(aj)}U[b2]=b0;return b0}aq.each(["height","width"],function(b0,b1){aq.cssHooks[b1]={get:function(b3,b2,b4){if(b2){if(b3.offsetWidth===0&&aN.test(O(b3,"display"))){return aq.swap(b3,N,function(){return af(b3,b1,b4)})}else{return af(b3,b1,b4)}}},set:function(b2,b4,b3){return bL(b2,b4,b3?n(b2,b1,b3,aq.support.boxSizing&&aq.css(b2,"boxSizing")==="border-box"):0)}}});if(!aq.support.opacity){aq.cssHooks.opacity={get:function(b1,b0){return bi.test((b0&&b1.currentStyle?b1.currentStyle.filter:b1.style.filter)||"")?(0.01*parseFloat(RegExp.$1))+"":b0?"1":""},set:function(b1,b5){var b4=b1.style,b0=b1.currentStyle,b3=aq.isNumeric(b5)?"alpha(opacity="+b5*100+")":"",b2=b0&&b0.filter||b4.filter||"";b4.zoom=1;if(b5>=1&&aq.trim(b2.replace(aC,""))===""&&b4.removeAttribute){b4.removeAttribute("filter");if(b0&&!b0.filter){return}}b4.filter=aC.test(b2)?b2.replace(aC,b3):b2+" "+b3}}}aq(function(){if(!aq.support.reliableMarginRight){aq.cssHooks.marginRight={get:function(b1,b0){return aq.swap(b1,{display:"inline-block"},function(){if(b0){return O(b1,"marginRight")}})}}}if(!aq.support.pixelPosition&&aq.fn.position){aq.each(["top","left"],function(b0,b1){aq.cssHooks[b1]={get:function(b3,b2){if(b2){var b4=O(b3,b1);return bf.test(b4)?aq(b3).position()[b1]+"px":b4}}}})}});if(aq.expr&&aq.expr.filters){aq.expr.filters.hidden=function(b0){return(b0.offsetWidth===0&&b0.offsetHeight===0)||(!aq.support.reliableHiddenOffsets&&((b0.style&&b0.style.display)||O(b0,"display"))==="none")};aq.expr.filters.visible=function(b0){return !aq.expr.filters.hidden(b0)}}aq.each({margin:"",padding:"",border:"Width"},function(b0,b1){aq.cssHooks[b0+b1]={expand:function(b5){var b3,b4=typeof b5==="string"?b5.split(" "):[b5],b2={};for(b3=0;b3<4;b3++){b2[b0+K[b3]+b1]=b4[b3]||b4[b3-2]||b4[0]}return b2}};if(!a6.test(b0)){aq.cssHooks[b0+b1].set=bL}});var aB=/%20/g,aF=/\[\]$/,aL=/\r?\n/g,a1=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bv=/^(?:select|textarea)/i;aq.fn.extend({serialize:function(){return aq.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?aq.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bv.test(this.nodeName)||a1.test(this.type))}).map(function(b1,b0){var b2=aq(this).val();return b2==null?null:aq.isArray(b2)?aq.map(b2,function(b4,b3){return{name:b0.name,value:b4.replace(aL,"\r\n")}}):{name:b0.name,value:b2.replace(aL,"\r\n")}}).get()}});aq.param=function(b0,b4){var b2,b3=[],b1=function(b5,b6){b6=aq.isFunction(b6)?b6():(b6==null?"":b6);b3[b3.length]=encodeURIComponent(b5)+"="+encodeURIComponent(b6)};if(b4===bS){b4=aq.ajaxSettings&&aq.ajaxSettings.traditional}if(aq.isArray(b0)||(b0.jquery&&!aq.isPlainObject(b0))){aq.each(b0,function(){b1(this.name,this.value)})}else{for(b2 in b0){p(b2,b0[b2],b4,b1)}}return b3.join("&").replace(aB,"+")};function p(b3,b2,b4,b0){var b1;if(aq.isArray(b2)){aq.each(b2,function(b5,b6){if(b4||aF.test(b3)){b0(b3,b6)}else{p(b3+"["+(typeof b6==="object"?b5:"")+"]",b6,b4,b0)}})}else{if(!b4&&aq.type(b2)==="object"){for(b1 in b2){p(b3+"["+b1+"]",b2[b1],b4,b0)}}else{b0(b3,b2)}}}var j,i,aW=/#.*$/,aX=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,a5=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bc=/^(?:GET|HEAD)$/,bl=/^\/\//,bm=/\?/,bt=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bA=/([?&])_=[^&]*/,bE=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,c=aq.fn.load,az={},bP={},k=["*/"]+["*"];try{i=ar.href}catch(T){i=R.createElement("a");i.href="";i=i.href}j=bE.exec(i.toLowerCase())||[];function d(b0){return function(b2,b4){if(typeof b2!=="string"){b4=b2;b2="*"}var b1,b7,b8,b3=b2.toLowerCase().split(z),b5=0,b6=b3.length;if(aq.isFunction(b4)){for(;b5<b6;b5++){b1=b3[b5];b8=/^\+/.test(b1);if(b8){b1=b1.substr(1)||"*"}b7=b0[b1]=b0[b1]||[];b7[b8?"unshift":"push"](b4)}}}}function al(ca,b7,b8,b4,b0,b3){b0=b0||b7.dataTypes[0];b3=b3||{};b3[b0]=true;var b9,b6=ca[b0],b2=0,b5=b6?b6.length:0,b1=(ca===az);for(;b2<b5&&(b1||!b9);b2++){b9=b6[b2](b7,b8,b4);if(typeof b9==="string"){if(!b1||b3[b9]){b9=bS}else{b7.dataTypes.unshift(b9);b9=al(ca,b7,b8,b4,b9,b3)}}}if((b1||!b9)&&!b3["*"]){b9=al(ca,b7,b8,b4,"*",b3)}return b9}function g(b4,b3){var b2,b0,b1=aq.ajaxSettings.flatOptions||{};for(b2 in b3){if(b3[b2]!==bS){(b1[b2]?b4:(b0||(b0={})))[b2]=b3[b2]}}if(b0){aq.extend(true,b4,b0)}}aq.fn.load=function(b7,b2,b0){if(typeof b7!=="string"&&c){return c.apply(this,arguments)}if(!this.length){return this}var b4,b6,b3,b5=this,b1=b7.indexOf(" ");if(b1>=0){b4=b7.slice(b1,b7.length);b7=b7.slice(0,b1)}if(aq.isFunction(b2)){b0=b2;b2=bS}else{if(b2&&typeof b2==="object"){b6="POST"}}aq.ajax({url:b7,type:b6,dataType:"html",data:b2,complete:function(b8,b9){if(b0){b5.each(b0,b3||[b8.responseText,b9,b8])}}}).done(function(b8){b3=arguments;b5.html(b4?aq("<div>").append(b8.replace(bt,"")).find(b4):b8)});return this};aq.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(b0,b1){aq.fn[b1]=function(b2){return this.on(b1,b2)}});aq.each(["get","post"],function(b0,b1){aq[b1]=function(b5,b3,b2,b4){if(aq.isFunction(b3)){b4=b4||b2;b2=b3;b3=bS}return aq.ajax({type:b1,url:b5,data:b3,success:b2,dataType:b4})}});aq.extend({getScript:function(b1,b0){return aq.get(b1,bS,b0,"script")},getJSON:function(b2,b1,b0){return aq.get(b2,b1,b0,"json")},ajaxSetup:function(b1,b0){if(b0){g(b1,aq.ajaxSettings)}else{b0=b1;b1=aq.ajaxSettings}g(b1,b0);return b1},ajaxSettings:{url:i,isLocal:a5.test(j[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":k},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":bU.String,"text html":true,"text json":aq.parseJSON,"text xml":aq.parseXML},flatOptions:{context:true,url:true}},ajaxPrefilter:d(az),ajaxTransport:d(bP),ajax:function(co,ca){if(typeof co==="object"){ca=co;co=bS}ca=ca||{};var b8,cf,ce,cm,cl,cb,b5,b7,ch=aq.ajaxSetup({},ca),b0=ch.context||ch,b6=b0!==ch&&(b0.nodeType||b0 instanceof aq)?aq(b0):aq.event,b2=aq.Deferred(),b1=aq.Callbacks("once memory"),cj=ch.statusCode||{},cc={},cd={},ci=0,ck="canceled",b9={readyState:0,setRequestHeader:function(cq,cr){if(!ci){var cp=cq.toLowerCase();cq=cd[cp]=cd[cp]||cq;cc[cq]=cr}return this},getAllResponseHeaders:function(){return ci===2?cf:null},getResponseHeader:function(cp){var cq;if(ci===2){if(!ce){ce={};while((cq=aX.exec(cf))){ce[cq[1].toLowerCase()]=cq[2]}}cq=ce[cp.toLowerCase()]}return cq===bS?null:cq},overrideMimeType:function(cp){if(!ci){ch.mimeType=cp}return this},abort:function(cp){cp=cp||ck;if(cm){cm.abort(cp)}b3(0,cp);return this}};function b3(cw,ct,cv,cq){var cr,cy,cp,cu,cs,cx=ct;if(ci===2){return}ci=2;if(cl){clearTimeout(cl)}cm=bS;cf=cq||"";b9.readyState=cw>0?4:0;if(cv){cu=h(ch,b9,cv)}if(cw>=200&&cw<300||cw===304){if(ch.ifModified){cs=b9.getResponseHeader("Last-Modified");if(cs){aq.lastModified[b8]=cs}cs=b9.getResponseHeader("Etag");if(cs){aq.etag[b8]=cs}}if(cw===304){cx="notmodified";cr=true}else{cr=f(ch,cu);cx=cr.state;cy=cr.data;cp=cr.error;cr=!cp}}else{cp=cx;if(!cx||cw){cx="error";if(cw<0){cw=0}}}b9.status=cw;b9.statusText=(ct||cx)+"";if(cr){b2.resolveWith(b0,[cy,cx,b9])}else{b2.rejectWith(b0,[b9,cx,cp])}b9.statusCode(cj);cj=bS;if(b5){b6.trigger("ajax"+(cr?"Success":"Error"),[b9,ch,cr?cy:cp])}b1.fireWith(b0,[b9,cx]);if(b5){b6.trigger("ajaxComplete",[b9,ch]);if(!(--aq.active)){aq.event.trigger("ajaxStop")}}}b2.promise(b9);b9.success=b9.done;b9.error=b9.fail;b9.complete=b1.add;b9.statusCode=function(cp){if(cp){var cq;if(ci<2){for(cq in cp){cj[cq]=[cj[cq],cp[cq]]}}else{cq=cp[b9.status];b9.always(cq)}}return this};ch.url=((co||ch.url)+"").replace(aW,"").replace(bl,j[1]+"//");ch.dataTypes=aq.trim(ch.dataType||"*").toLowerCase().split(z);if(ch.crossDomain==null){cb=bE.exec(ch.url.toLowerCase());ch.crossDomain=!!(cb&&(cb[1]!==j[1]||cb[2]!==j[2]||(cb[3]||(cb[1]==="http:"?80:443))!=(j[3]||(j[1]==="http:"?80:443))))}if(ch.data&&ch.processData&&typeof ch.data!=="string"){ch.data=aq.param(ch.data,ch.traditional)}al(az,ch,ca,b9);if(ci===2){return b9}b5=ch.global;ch.type=ch.type.toUpperCase();ch.hasContent=!bc.test(ch.type);if(b5&&aq.active++===0){aq.event.trigger("ajaxStart")}if(!ch.hasContent){if(ch.data){ch.url+=(bm.test(ch.url)?"&":"?")+ch.data;delete ch.data}b8=ch.url;if(ch.cache===false){var cn=aq.now(),cg=ch.url.replace(bA,"$1_="+cn);ch.url=cg+((cg===ch.url)?(bm.test(ch.url)?"&":"?")+"_="+cn:"")}}if(ch.data&&ch.hasContent&&ch.contentType!==false||ca.contentType){b9.setRequestHeader("Content-Type",ch.contentType)}if(ch.ifModified){b8=b8||ch.url;if(aq.lastModified[b8]){b9.setRequestHeader("If-Modified-Since",aq.lastModified[b8])}if(aq.etag[b8]){b9.setRequestHeader("If-None-Match",aq.etag[b8])}}b9.setRequestHeader("Accept",ch.dataTypes[0]&&ch.accepts[ch.dataTypes[0]]?ch.accepts[ch.dataTypes[0]]+(ch.dataTypes[0]!=="*"?", "+k+"; q=0.01":""):ch.accepts["*"]);for(b7 in ch.headers){b9.setRequestHeader(b7,ch.headers[b7])}if(ch.beforeSend&&(ch.beforeSend.call(b0,b9,ch)===false||ci===2)){return b9.abort()}ck="abort";for(b7 in {success:1,error:1,complete:1}){b9[b7](ch[b7])}cm=al(bP,ch,ca,b9);if(!cm){b3(-1,"No Transport")}else{b9.readyState=1;if(b5){b6.trigger("ajaxSend",[b9,ch])}if(ch.async&&ch.timeout>0){cl=setTimeout(function(){b9.abort("timeout")},ch.timeout)}try{ci=1;cm.send(cc,b3)}catch(b4){if(ci<2){b3(-1,b4)}else{throw b4}}}return b9},active:0,lastModified:{},etag:{}});function h(b8,b5,b7){var b1,b9,b3,b4,b0=b8.contents,b2=b8.dataTypes,b6=b8.responseFields;for(b9 in b6){if(b9 in b7){b5[b6[b9]]=b7[b9]}}while(b2[0]==="*"){b2.shift();if(b1===bS){b1=b8.mimeType||b5.getResponseHeader("content-type")}}if(b1){for(b9 in b0){if(b0[b9]&&b0[b9].test(b1)){b2.unshift(b9);break}}}if(b2[0] in b7){b3=b2[0]}else{for(b9 in b7){if(!b2[0]||b8.converters[b9+" "+b2[0]]){b3=b9;break}if(!b4){b4=b9}}b3=b3||b4}if(b3){if(b3!==b2[0]){b2.unshift(b3)}return b7[b3]}}function f(b9,b8){var b0,b1,b3,ca,b4=b9.dataTypes.slice(),b7=b4[0],b2={},b6=0;if(b9.dataFilter){b8=b9.dataFilter(b8,b9.dataType)}if(b4[1]){for(b0 in b9.converters){b2[b0.toLowerCase()]=b9.converters[b0]}}for(;(b3=b4[++b6]);){if(b3!=="*"){if(b7!=="*"&&b7!==b3){b0=b2[b7+" "+b3]||b2["* "+b3];if(!b0){for(b1 in b2){ca=b1.split(" ");if(ca[1]===b3){b0=b2[b7+" "+ca[0]]||b2["* "+ca[0]];if(b0){if(b0===true){b0=b2[b1]}else{if(b2[b1]!==true){b3=ca[0];b4.splice(b6--,0,b3)}}break}}}}if(b0!==true){if(b0&&b9["throws"]){b8=b0(b8)}else{try{b8=b0(b8)}catch(b5){return{state:"parsererror",error:b0?b5:"No conversion from "+b7+" to "+b3}}}}}b7=b3}}return{state:"success",data:b8}}var ax=[],bn=/\?/,a2=/(=)\?(?=&|$)|\?\?/,aw=aq.now();aq.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var b0=ax.pop()||(aq.expando+"_"+(aw++));this[b0]=true;return b0}});aq.ajaxPrefilter("json jsonp",function(b9,b4,b3){var b0,b5,b8,b1=b9.data,ca=b9.url,b2=b9.jsonp!==false,b7=b2&&a2.test(ca),b6=b2&&!b7&&typeof b1==="string"&&!(b9.contentType||"").indexOf("application/x-www-form-urlencoded")&&a2.test(b1);if(b9.dataTypes[0]==="jsonp"||b7||b6){b0=b9.jsonpCallback=aq.isFunction(b9.jsonpCallback)?b9.jsonpCallback():b9.jsonpCallback;b5=bU[b0];if(b7){b9.url=ca.replace(a2,"$1"+b0)}else{if(b6){b9.data=b1.replace(a2,"$1"+b0)}else{if(b2){b9.url+=(bn.test(ca)?"&":"?")+b9.jsonp+"="+b0}}}b9.converters["script json"]=function(){if(!b8){aq.error(b0+" was not called")}return b8[0]};b9.dataTypes[0]="json";bU[b0]=function(){b8=arguments};b3.always(function(){bU[b0]=b5;if(b9[b0]){b9.jsonpCallback=b4.jsonpCallback;ax.push(b0)}if(b8&&aq.isFunction(b5)){b5(b8[0])}b8=b5=bS});return"script"}});aq.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(b0){aq.globalEval(b0);return b0}}});aq.ajaxPrefilter("script",function(b0){if(b0.cache===bS){b0.cache=false}if(b0.crossDomain){b0.type="GET";b0.global=false}});aq.ajaxTransport("script",function(b1){if(b1.crossDomain){var b2,b0=R.head||R.getElementsByTagName("head")[0]||R.documentElement;return{send:function(b3,b4){b2=R.createElement("script");b2.async="async";if(b1.scriptCharset){b2.charset=b1.scriptCharset}b2.src=b1.url;b2.onload=b2.onreadystatechange=function(b5,b6){if(b6||!b2.readyState||/loaded|complete/.test(b2.readyState)){b2.onload=b2.onreadystatechange=null;if(b0&&b2.parentNode){b0.removeChild(b2)}b2=bS;if(!b6){b4(200,"success")}}};b0.insertBefore(b2,b0.firstChild)},abort:function(){if(b2){b2.onload(0,1)}}}}});var bX,bZ=bU.ActiveXObject?function(){for(var b0 in bX){bX[b0](0,1)}}:false,bY=0;function H(){try{return new bU.XMLHttpRequest()}catch(b0){}}function D(){try{return new bU.ActiveXObject("Microsoft.XMLHTTP")}catch(b0){}}aq.ajaxSettings.xhr=bU.ActiveXObject?function(){return !this.isLocal&&H()||D()}:H;(function(b0){aq.extend(aq.support,{ajax:!!b0,cors:!!b0&&("withCredentials" in b0)})})(aq.ajaxSettings.xhr());if(aq.support.ajax){aq.ajaxTransport(function(b1){if(!b1.crossDomain||aq.support.cors){var b0;return{send:function(b5,b3){var b4,b6,b7=b1.xhr();if(b1.username){b7.open(b1.type,b1.url,b1.async,b1.username,b1.password)}else{b7.open(b1.type,b1.url,b1.async)}if(b1.xhrFields){for(b6 in b1.xhrFields){b7[b6]=b1.xhrFields[b6]}}if(b1.mimeType&&b7.overrideMimeType){b7.overrideMimeType(b1.mimeType)}if(!b1.crossDomain&&!b5["X-Requested-With"]){b5["X-Requested-With"]="XMLHttpRequest"}try{for(b6 in b5){b7.setRequestHeader(b6,b5[b6])}}catch(b2){}b7.send((b1.hasContent&&b1.data)||null);b0=function(b8,cb){var ce,cf,cc,cd,cg;try{if(b0&&(cb||b7.readyState===4)){b0=bS;if(b4){b7.onreadystatechange=aq.noop;if(bZ){delete bX[b4]}}if(cb){if(b7.readyState!==4){b7.abort()}}else{ce=b7.status;cc=b7.getAllResponseHeaders();cd={};cg=b7.responseXML;if(cg&&cg.documentElement){cd.xml=cg}try{cd.text=b7.responseText}catch(b9){}try{cf=b7.statusText}catch(b9){cf=""}if(!ce&&b1.isLocal&&!b1.crossDomain){ce=cd.text?200:404}else{if(ce===1223){ce=204}}}}}catch(ca){if(!cb){b3(-1,ca)}}if(cd){b3(ce,cf,cd,cc)}};if(!b1.async){b0()}else{if(b7.readyState===4){setTimeout(b0,0)}else{b4=++bY;if(bZ){if(!bX){bX={};aq(bU).unload(bZ)}bX[b4]=b0}b7.onreadystatechange=b0}}},abort:function(){if(b0){b0(0,1)}}}}})}var ab,bO,aV=/^(?:toggle|show|hide)$/,aU=new RegExp("^(?:([-+])=|)("+w+")([a-z%]*)$","i"),bs=/queueHooks$/,m=[Q],bR={"*":[function(b3,b9){var b0,b8,b7=this.createTween(b3,b9),b2=aU.exec(b9),b6=b7.cur(),b5=+b6||0,b4=1,b1=20;if(b2){b0=+b2[2];b8=b2[3]||(aq.cssNumber[b3]?"":"px");if(b8!=="px"&&b5){b5=aq.css(b7.elem,b3,true)||b0||1;do{b4=b4||".5";b5=b5/b4;aq.style(b7.elem,b3,b5+b8)}while(b4!==(b4=b7.cur()/b6)&&b4!==1&&--b1)}b7.unit=b8;b7.start=b5;b7.end=b2[1]?b5+(b2[1]+1)*b0:b0}return b7}]};function E(){setTimeout(function(){ab=bS},0);return(ab=aq.now())}function I(b0,b1){aq.each(b1,function(b5,b6){var b2=(bR[b5]||[]).concat(bR["*"]),b3=0,b4=b2.length;for(;b3<b4;b3++){if(b2[b3].call(b0,b5,b6)){return}}})}function l(b2,b6,b5){var b8,b3=0,ca=0,b4=m.length,b1=aq.Deferred().always(function(){delete b9.elem}),b9=function(){var cb=ab||E(),cf=Math.max(0,b0.startTime+b0.duration-cb),cg=cf/b0.duration||0,ce=1-cg,cc=0,cd=b0.tweens.length;for(;cc<cd;cc++){b0.tweens[cc].run(ce)}b1.notifyWith(b2,[b0,ce,cf]);if(ce<1&&cd){return cf}else{b1.resolveWith(b2,[b0]);return false}},b0=b1.promise({elem:b2,props:aq.extend({},b6),opts:aq.extend(true,{specialEasing:{}},b5),originalProperties:b6,originalOptions:b5,startTime:ab||E(),duration:b5.duration,tweens:[],createTween:function(cd,cc,cb){var ce=aq.Tween(b2,b0.opts,cd,cc,b0.opts.specialEasing[cd]||b0.opts.easing);b0.tweens.push(ce);return ce},stop:function(cb){var cc=0,cd=cb?b0.tweens.length:0;for(;cc<cd;cc++){b0.tweens[cc].run(1)}if(cb){b1.resolveWith(b2,[b0,cb])}else{b1.rejectWith(b2,[b0,cb])}return this}}),b7=b0.props;aA(b7,b0.opts.specialEasing);for(;b3<b4;b3++){b8=m[b3].call(b0,b2,b7,b0.opts);if(b8){return b8}}I(b0,b7);if(aq.isFunction(b0.opts.start)){b0.opts.start.call(b2,b0)}aq.fx.timer(aq.extend(b9,{anim:b0,queue:b0.opts.queue,elem:b2}));return b0.progress(b0.opts.progress).done(b0.opts.done,b0.opts.complete).fail(b0.opts.fail).always(b0.opts.always)}function aA(b4,b5){var b2,b3,b0,b6,b1;for(b2 in b4){b3=aq.camelCase(b2);b0=b5[b3];b6=b4[b2];if(aq.isArray(b6)){b0=b6[1];b6=b4[b2]=b6[0]}if(b2!==b3){b4[b3]=b6;delete b4[b2]}b1=aq.cssHooks[b3];if(b1&&"expand" in b1){b6=b1.expand(b6);delete b4[b3];for(b2 in b6){if(!(b2 in b4)){b4[b2]=b6[b2];b5[b2]=b0}}}else{b5[b3]=b0}}}aq.Animation=aq.extend(l,{tweener:function(b4,b0){if(aq.isFunction(b4)){b0=b4;b4=["*"]}else{b4=b4.split(" ")}var b3,b1=0,b2=b4.length;for(;b1<b2;b1++){b3=b4[b1];bR[b3]=bR[b3]||[];bR[b3].unshift(b0)}},prefilter:function(b0,b1){if(b1){m.unshift(b0)}else{m.push(b0)}}});function Q(b2,cc,b9){var b6,cb,cg,b7,b1,ce,cf,b5,b8,b0=this,cd=b2.style,ca={},b3=[],b4=b2.nodeType&&ao(b2);if(!b9.queue){b5=aq._queueHooks(b2,"fx");if(b5.unqueued==null){b5.unqueued=0;b8=b5.empty.fire;b5.empty.fire=function(){if(!b5.unqueued){b8()}}}b5.unqueued++;b0.always(function(){b0.always(function(){b5.unqueued--;if(!aq.queue(b2,"fx").length){b5.empty.fire()}})})}if(b2.nodeType===1&&("height" in cc||"width" in cc)){b9.overflow=[cd.overflow,cd.overflowX,cd.overflowY];if(aq.css(b2,"display")==="inline"&&aq.css(b2,"float")==="none"){if(!aq.support.inlineBlockNeedsLayout||J(b2.nodeName)==="inline"){cd.display="inline-block"}else{cd.zoom=1}}}if(b9.overflow){cd.overflow="hidden";if(!aq.support.shrinkWrapBlocks){b0.done(function(){cd.overflow=b9.overflow[0];cd.overflowX=b9.overflow[1];cd.overflowY=b9.overflow[2]})}}for(b6 in cc){cg=cc[b6];if(aV.exec(cg)){delete cc[b6];ce=ce||cg==="toggle";if(cg===(b4?"hide":"show")){continue}b3.push(b6)}}b7=b3.length;if(b7){b1=aq._data(b2,"fxshow")||aq._data(b2,"fxshow",{});if("hidden" in b1){b4=b1.hidden}if(ce){b1.hidden=!b4}if(b4){aq(b2).show()}else{b0.done(function(){aq(b2).hide()})}b0.done(function(){var ch;aq.removeData(b2,"fxshow",true);for(ch in ca){aq.style(b2,ch,ca[ch])}});for(b6=0;b6<b7;b6++){cb=b3[b6];cf=b0.createTween(cb,b4?b1[cb]:0);ca[cb]=b1[cb]||aq.style(b2,cb);if(!(cb in b1)){b1[cb]=cf.start;if(b4){cf.end=cf.start;cf.start=cb==="width"||cb==="height"?1:0}}}}}function bQ(b1,b3,b4,b2,b0){return new bQ.prototype.init(b1,b3,b4,b2,b0)}aq.Tween=bQ;bQ.prototype={constructor:bQ,init:function(b1,b3,b4,b2,b0,b5){this.elem=b1;this.prop=b4;this.easing=b0||"swing";this.options=b3;this.start=this.now=this.cur();this.end=b2;this.unit=b5||(aq.cssNumber[b4]?"":"px")},cur:function(){var b0=bQ.propHooks[this.prop];return b0&&b0.get?b0.get(this):bQ.propHooks._default.get(this)},run:function(b2){var b0,b1=bQ.propHooks[this.prop];if(this.options.duration){this.pos=b0=aq.easing[this.easing](b2,this.options.duration*b2,0,1,this.options.duration)}else{this.pos=b0=b2}this.now=(this.end-this.start)*b0+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(b1&&b1.set){b1.set(this)}else{bQ.propHooks._default.set(this)}return this}};bQ.prototype.init.prototype=bQ.prototype;bQ.propHooks={_default:{get:function(b1){var b0;if(b1.elem[b1.prop]!=null&&(!b1.elem.style||b1.elem.style[b1.prop]==null)){return b1.elem[b1.prop]}b0=aq.css(b1.elem,b1.prop,false,"");return !b0||b0==="auto"?0:b0},set:function(b0){if(aq.fx.step[b0.prop]){aq.fx.step[b0.prop](b0)}else{if(b0.elem.style&&(b0.elem.style[aq.cssProps[b0.prop]]!=null||aq.cssHooks[b0.prop])){aq.style(b0.elem,b0.prop,b0.now+b0.unit)}else{b0.elem[b0.prop]=b0.now}}}}};bQ.propHooks.scrollTop=bQ.propHooks.scrollLeft={set:function(b0){if(b0.elem.nodeType&&b0.elem.parentNode){b0.elem[b0.prop]=b0.now}}};aq.each(["toggle","show","hide"],function(b1,b2){var b0=aq.fn[b2];aq.fn[b2]=function(b5,b4,b3){return b5==null||typeof b5==="boolean"||(!b1&&aq.isFunction(b5)&&aq.isFunction(b4))?b0.apply(this,arguments):this.animate(ac(b2,true),b5,b4,b3)}});aq.fn.extend({fadeTo:function(b2,b3,b1,b0){return this.filter(ao).css("opacity",0).show().end().animate({opacity:b3},b2,b1,b0)},animate:function(b5,b6,b2,b0){var b3=aq.isEmptyObject(b5),b4=aq.speed(b6,b2,b0),b1=function(){var b7=l(this,aq.extend({},b5),b4);if(b3){b7.stop(true)}};return b3||b4.queue===false?this.each(b1):this.queue(b4.queue,b1)},stop:function(b3,b0,b1){var b2=function(b4){var b5=b4.stop;delete b4.stop;b5(b1)};if(typeof b3!=="string"){b1=b0;b0=b3;b3=bS}if(b0&&b3!==false){this.queue(b3||"fx",[])}return this.each(function(){var b5=true,b6=b3!=null&&b3+"queueHooks",b7=aq.timers,b4=aq._data(this);if(b6){if(b4[b6]&&b4[b6].stop){b2(b4[b6])}}else{for(b6 in b4){if(b4[b6]&&b4[b6].stop&&bs.test(b6)){b2(b4[b6])}}}for(b6=b7.length;b6--;){if(b7[b6].elem===this&&(b3==null||b7[b6].queue===b3)){b7[b6].anim.stop(b1);b5=false;b7.splice(b6,1)}}if(b5||!b1){aq.dequeue(this,b3)}})}});function ac(b3,b2){var b4,b0={height:b3},b1=0;b2=b2?1:0;for(;b1<4;b1+=2-b2){b4=K[b1];b0["margin"+b4]=b0["padding"+b4]=b3}if(b2){b0.opacity=b0.width=b3}return b0}aq.each({slideDown:ac("show"),slideUp:ac("hide"),slideToggle:ac("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(b0,b1){aq.fn[b0]=function(b4,b3,b2){return this.animate(b1,b4,b3,b2)}});aq.speed=function(b3,b0,b1){var b2=b3&&typeof b3==="object"?aq.extend({},b3):{complete:b1||!b1&&b0||aq.isFunction(b3)&&b3,duration:b3,easing:b1&&b0||b0&&!aq.isFunction(b0)&&b0};b2.duration=aq.fx.off?0:typeof b2.duration==="number"?b2.duration:b2.duration in aq.fx.speeds?aq.fx.speeds[b2.duration]:aq.fx.speeds._default;if(b2.queue==null||b2.queue===true){b2.queue="fx"}b2.old=b2.complete;b2.complete=function(){if(aq.isFunction(b2.old)){b2.old.call(this)}if(b2.queue){aq.dequeue(this,b2.queue)}};return b2};aq.easing={linear:function(b0){return b0},swing:function(b0){return 0.5-Math.cos(b0*Math.PI)/2}};aq.timers=[];aq.fx=bQ.prototype.init;aq.fx.tick=function(){var b1,b2=aq.timers,b0=0;ab=aq.now();for(;b0<b2.length;b0++){b1=b2[b0];if(!b1()&&b2[b0]===b1){b2.splice(b0--,1)}}if(!b2.length){aq.fx.stop()}ab=bS};aq.fx.timer=function(b0){if(b0()&&aq.timers.push(b0)&&!bO){bO=setInterval(aq.fx.tick,aq.fx.interval)}};aq.fx.interval=13;aq.fx.stop=function(){clearInterval(bO);bO=null};aq.fx.speeds={slow:600,fast:200,_default:400};aq.fx.step={};if(aq.expr&&aq.expr.filters){aq.expr.filters.animated=function(b0){return aq.grep(aq.timers,function(b1){return b0===b1.elem}).length}}var br=/^(?:body|html)$/i;aq.fn.offset=function(b7){if(arguments.length){return b7===bS?this:this.each(function(cb){aq.offset.setOffset(this,b7,cb)})}var b5,b0,ca,b3,b2,b9,b8,b1={top:0,left:0},b6=this[0],b4=b6&&b6.ownerDocument;if(!b4){return}if((b0=b4.body)===b6){return aq.offset.bodyOffset(b6)}b5=b4.documentElement;if(!aq.contains(b5,b6)){return b1}if(typeof b6.getBoundingClientRect!=="undefined"){b1=b6.getBoundingClientRect()}ca=ag(b4);b3=b5.clientTop||b0.clientTop||0;b2=b5.clientLeft||b0.clientLeft||0;b9=ca.pageYOffset||b5.scrollTop;b8=ca.pageXOffset||b5.scrollLeft;return{top:b1.top+b9-b3,left:b1.left+b8-b2}};aq.offset={bodyOffset:function(b0){var b2=b0.offsetTop,b1=b0.offsetLeft;if(aq.support.doesNotIncludeMarginInBodyOffset){b2+=parseFloat(aq.css(b0,"marginTop"))||0;b1+=parseFloat(aq.css(b0,"marginLeft"))||0}return{top:b2,left:b1}},setOffset:function(b8,ca,b9){var cb=aq.css(b8,"position");if(cb==="static"){b8.style.position="relative"}var b3=aq(b8),b5=b3.offset(),b2=aq.css(b8,"top"),b1=aq.css(b8,"left"),b0=(cb==="absolute"||cb==="fixed")&&aq.inArray("auto",[b2,b1])>-1,cc={},b6={},b7,b4;if(b0){b6=b3.position();b7=b6.top;b4=b6.left}else{b7=parseFloat(b2)||0;b4=parseFloat(b1)||0}if(aq.isFunction(ca)){ca=ca.call(b8,b9,b5)}if(ca.top!=null){cc.top=(ca.top-b5.top)+b7}if(ca.left!=null){cc.left=(ca.left-b5.left)+b4}if("using" in ca){ca.using.call(b8,cc)}else{b3.css(cc)}}};aq.fn.extend({position:function(){if(!this[0]){return}var b0=this[0],b2=this.offsetParent(),b1=this.offset(),b3=br.test(b2[0].nodeName)?{top:0,left:0}:b2.offset();b1.top-=parseFloat(aq.css(b0,"marginTop"))||0;b1.left-=parseFloat(aq.css(b0,"marginLeft"))||0;b3.top+=parseFloat(aq.css(b2[0],"borderTopWidth"))||0;b3.left+=parseFloat(aq.css(b2[0],"borderLeftWidth"))||0;return{top:b1.top-b3.top,left:b1.left-b3.left}},offsetParent:function(){return this.map(function(){var b0=this.offsetParent||R.body;while(b0&&(!br.test(b0.nodeName)&&aq.css(b0,"position")==="static")){b0=b0.offsetParent}return b0||R.body})}});aq.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b0,b1){var b2=/Y/.test(b1);aq.fn[b0]=function(b3){return aq.access(this,function(b4,b5,b6){var b7=ag(b4);if(b6===bS){return b7?(b1 in b7)?b7[b1]:b7.document.documentElement[b5]:b4[b5]}if(b7){b7.scrollTo(!b2?b6:aq(b7).scrollLeft(),b2?b6:aq(b7).scrollTop())}else{b4[b5]=b6}},b0,b3,arguments.length,null)}});function ag(b0){return aq.isWindow(b0)?b0:b0.nodeType===9?b0.defaultView||b0.parentWindow:false}aq.each({Height:"height",Width:"width"},function(b0,b1){aq.each({padding:"inner"+b0,content:b1,"":"outer"+b0},function(b2,b3){aq.fn[b3]=function(b6,b7){var b4=arguments.length&&(b2||typeof b6!=="boolean"),b5=b2||(b6===true||b7===true?"margin":"border");return aq.access(this,function(b9,ca,cb){var b8;if(aq.isWindow(b9)){return b9.document.documentElement["client"+b0]}if(b9.nodeType===9){b8=b9.documentElement;return Math.max(b9.body["scroll"+b0],b8["scroll"+b0],b9.body["offset"+b0],b8["offset"+b0],b8["client"+b0])}return cb===bS?aq.css(b9,ca,cb,b5):aq.style(b9,ca,cb,b5)},b1,b4?b6:bS,b4,null)}})});bU.jQuery=bU.$=aq;if(typeof define==="function"&&define.amd&&define.amd.jQuery){define("jquery",[],function(){return aq})}})(window);
/* jQuery UI - v1.9.2 - 2012-12-05
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.datepicker.js
* Copyright (c) 2012 jQuery Foundation and other contributors Licensed MIT */
(function(a,d){var f=0,c=/^ui-id-\d+$/;a.ui=a.ui||{};if(a.ui.version){return}a.extend(a.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});a.fn.extend({_focus:a.fn.focus,focus:function(h,i){return typeof h==="number"?this.each(function(){var j=this;setTimeout(function(){a(j).focus();if(i){i.call(j)}},h)}):this._focus.apply(this,arguments)},scrollParent:function(){var h;if((a.ui.ie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){h=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test(a.css(this,"position"))&&(/(auto|scroll)/).test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0)}else{h=this.parents().filter(function(){return(/(auto|scroll)/).test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0)}return(/fixed/).test(this.css("position"))||!h.length?a(document):h},zIndex:function(k){if(k!==d){return this.css("zIndex",k)}if(this.length){var h=a(this[0]),i,j;while(h.length&&h[0]!==document){i=h.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){j=parseInt(h.css("zIndex"),10);if(!isNaN(j)&&j!==0){return j}}h=h.parent()}}return 0},uniqueId:function(){return this.each(function(){if(!this.id){this.id="ui-id-"+(++f)}})},removeUniqueId:function(){return this.each(function(){if(c.test(this.id)){a(this).removeAttr("id")}})}});function b(h,j){var k,l,i,m=h.nodeName.toLowerCase();if("area"===m){k=h.parentNode;l=k.name;if(!h.href||!l||k.nodeName.toLowerCase()!=="map"){return false}i=a("img[usemap=#"+l+"]")[0];return !!i&&g(i)}return(/input|select|textarea|button|object/.test(m)?!h.disabled:"a"===m?h.href||j:j)&&g(h)}function g(h){return a.expr.filters.visible(h)&&!a(h).parents().andSelf().filter(function(){return a.css(this,"visibility")==="hidden"}).length}a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(h){return function(i){return !!a.data(i,h)}}):function(h,j,k){return !!a.data(h,k[3])},focusable:function(h){return b(h,!isNaN(a.attr(h,"tabindex")))},tabbable:function(h){var j=a.attr(h,"tabindex"),i=isNaN(j);return(i||j>=0)&&b(h,!i)}});a(function(){var h=document.body,i=h.appendChild(i=document.createElement("div"));i.offsetHeight;a.extend(i.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=i.offsetHeight===100;a.support.selectstart="onselectstart" in i;h.removeChild(i).style.display="none"});if(!a("<a>").outerWidth(1).jquery){a.each(["Width","Height"],function(h,j){var m=j==="Width"?["Left","Right"]:["Top","Bottom"],n=j.toLowerCase(),k={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};function l(o,q,i,p){a.each(m,function(){q-=parseFloat(a.css(o,"padding"+this))||0;if(i){q-=parseFloat(a.css(o,"border"+this+"Width"))||0}if(p){q-=parseFloat(a.css(o,"margin"+this))||0}});return q}a.fn["inner"+j]=function(i){if(i===d){return k["inner"+j].call(this)}return this.each(function(){a(this).css(n,l(this,i)+"px")})};a.fn["outer"+j]=function(o,i){if(typeof o!=="number"){return k["outer"+j].call(this,o)}return this.each(function(){a(this).css(n,l(this,o,true,i)+"px")})}})}if(a("<a>").data("a-b","a").removeData("a-b").data("a-b")){a.fn.removeData=(function(h){return function(i){if(arguments.length){return h.call(this,a.camelCase(i))}else{return h.call(this)}}})(a.fn.removeData)}(function(){var h=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];a.ui.ie=h.length?true:false;a.ui.ie6=parseFloat(h[1],10)===6})();a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(h){h.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});a.extend(a.ui,{plugin:{add:function(j,k,m){var h,l=a.ui[j].prototype;for(h in m){l.plugins[h]=l.plugins[h]||[];l.plugins[h].push([k,m[h]])}},call:function(k,l,h){var j,m=k.plugins[l];if(!m||!k.element[0].parentNode||k.element[0].parentNode.nodeType===11){return}for(j=0;j<m.length;j++){if(k.options[m[j][0]]){m[j][1].apply(k.element,h)}}}},contains:a.contains,hasScroll:function(i,h){if(a(i).css("overflow")==="hidden"){return false}var k=(h&&h==="left")?"scrollLeft":"scrollTop",j=false;if(i[k]>0){return true}i[k]=1;j=(i[k]>0);i[k]=0;return j},isOverAxis:function(j,h,i){return(j>h)&&(j<(h+i))},isOver:function(m,l,j,i,h,k){return a.ui.isOverAxis(m,j,h)&&a.ui.isOverAxis(l,i,k)}})})(jQuery);(function(a,d){var f=0,c=Array.prototype.slice,b=a.cleanData;a.cleanData=function(j){for(var k=0,h;(h=j[k])!=null;k++){try{a(h).triggerHandler("remove")}catch(g){}}b(j)};a.widget=function(l,g,n){var k,j,i,h,m=l.split(".")[0];l=l.split(".")[1];k=m+"-"+l;if(!n){n=g;g=a.Widget}a.expr[":"][k.toLowerCase()]=function(o){return !!a.data(o,k)};a[m]=a[m]||{};j=a[m][l];i=a[m][l]=function(p,o){if(!this._createWidget){return new i(p,o)}if(arguments.length){this._createWidget(p,o)}};a.extend(i,j,{version:n.version,_proto:a.extend({},n),_childConstructors:[]});h=new g();h.options=a.widget.extend({},h.options);a.each(n,function(o,p){if(a.isFunction(p)){n[o]=(function(){var q=function(){return g.prototype[o].apply(this,arguments)},r=function(t){return g.prototype[o].apply(this,t)};return function(){var t=this._super,u=this._superApply,v;this._super=q;this._superApply=r;v=p.apply(this,arguments);this._super=t;this._superApply=u;return v}})()}});i.prototype=a.widget.extend(h,{widgetEventPrefix:j?h.widgetEventPrefix:l},n,{constructor:i,namespace:m,widgetName:l,widgetBaseClass:k,widgetFullName:k});if(j){a.each(j._childConstructors,function(q,o){var p=o.prototype;a.widget(p.namespace+"."+p.widgetName,i,o._proto)});delete j._childConstructors}else{g._childConstructors.push(i)}a.widget.bridge(l,i)};a.widget.extend=function(k){var g=c.call(arguments,1),h=0,i=g.length,j,l;for(;h<i;h++){for(j in g[h]){l=g[h][j];if(g[h].hasOwnProperty(j)&&l!==d){if(a.isPlainObject(l)){k[j]=a.isPlainObject(k[j])?a.widget.extend({},k[j],l):a.widget.extend({},l)}else{k[j]=l}}}}return k};a.widget.bridge=function(h,i){var g=i.prototype.widgetFullName||h;a.fn[h]=function(l){var k=typeof l==="string",j=c.call(arguments,1),m=this;l=!k&&j.length?a.widget.extend.apply(null,[l].concat(j)):l;if(k){this.each(function(){var o,n=a.data(this,g);if(!n){return a.error("cannot call methods on "+h+" prior to initialization; attempted to call method '"+l+"'")}if(!a.isFunction(n[l])||l.charAt(0)==="_"){return a.error("no such method '"+l+"' for "+h+" widget instance")}o=n[l].apply(n,j);if(o!==n&&o!==d){m=o&&o.jquery?m.pushStack(o.get()):o;return false}})}else{this.each(function(){var n=a.data(this,g);if(n){n.option(l||{})._init()}else{a.data(this,g,new i(l,this))}})}return m}};a.Widget=function(){};a.Widget._childConstructors=[];a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(h,g){g=a(g||this.defaultElement||this)[0];this.element=a(g);this.uuid=f++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=a.widget.extend({},this.options,this._getCreateOptions(),h);this.bindings=a();this.hoverable=a();this.focusable=a();if(g!==this){a.data(g,this.widgetName,this);a.data(g,this.widgetFullName,this);this._on(true,this.element,{remove:function(i){if(i.target===g){this.destroy()}}});this.document=a(g.style?g.ownerDocument:g.document||g);this.window=a(this.document[0].defaultView||this.document[0].parentWindow)}this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(j,m){var k=j,l,g,h;if(arguments.length===0){return a.widget.extend({},this.options)}if(typeof j==="string"){k={};l=j.split(".");j=l.shift();if(l.length){g=k[j]=a.widget.extend({},this.options[j]);for(h=0;h<l.length-1;h++){g[l[h]]=g[l[h]]||{};g=g[l[h]]}j=l.pop();if(m===d){return g[j]===d?null:g[j]}g[j]=m}else{if(m===d){return this.options[j]===d?null:this.options[j]}k[j]=m}}this._setOptions(k);return this},_setOptions:function(h){var g;for(g in h){this._setOption(g,h[g])}return this},_setOption:function(g,h){this.options[g]=h;if(g==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!h).attr("aria-disabled",h);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_on:function(k,h,i){var g,j=this;if(typeof k!=="boolean"){i=h;h=k;k=false}if(!i){i=h;h=this.element;g=this.widget()}else{h=g=a(h);this.bindings=this.bindings.add(h)}a.each(i,function(l,n){function o(){if(!k&&(j.options.disabled===true||a(this).hasClass("ui-state-disabled"))){return}return(typeof n==="string"?j[n]:n).apply(j,arguments)}if(typeof n!=="string"){o.guid=n.guid=n.guid||o.guid||a.guid++}var p=l.match(/^(\w+)\s*(.*)$/),m=p[1]+j.eventNamespace,q=p[2];if(q){g.delegate(q,m,o)}else{h.bind(m,o)}})},_off:function(g,h){h=(h||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;g.unbind(h).undelegate(h)},_delay:function(h,g){function i(){return(typeof h==="string"?j[h]:h).apply(j,arguments)}var j=this;return setTimeout(i,g||0)},_hoverable:function(g){this.hoverable=this.hoverable.add(g);this._on(g,{mouseenter:function(h){a(h.currentTarget).addClass("ui-state-hover")},mouseleave:function(h){a(h.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(g){this.focusable=this.focusable.add(g);this._on(g,{focusin:function(h){a(h.currentTarget).addClass("ui-state-focus")},focusout:function(h){a(h.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(l,i,h){var k,j,g=this.options[l];h=h||{};i=a.Event(i);i.type=(l===this.widgetEventPrefix?l:this.widgetEventPrefix+l).toLowerCase();i.target=this.element[0];j=i.originalEvent;if(j){for(k in j){if(!(k in i)){i[k]=j[k]}}}this.element.trigger(i,h);return !(a.isFunction(g)&&g.apply(this.element[0],[i].concat(h))===false||i.isDefaultPrevented())}};a.each({show:"fadeIn",hide:"fadeOut"},function(h,g){a.Widget.prototype["_"+h]=function(k,m,i){if(typeof m==="string"){m={effect:m}}var l,j=!m?h:m===true||typeof m==="number"?g:m.effect||g;m=m||{};if(typeof m==="number"){m={duration:m}}l=!a.isEmptyObject(m);m.complete=i;if(m.delay){k.delay(m.delay)}if(l&&a.effects&&(a.effects.effect[j]||a.uiBackCompat!==false&&a.effects[j])){k[h](m)}else{if(j!==h&&k[j]){k[j](m.duration,m.easing,i)}else{k.queue(function(n){a(this)[h]();if(i){i.call(k[0])}n()})}}}});if(a.uiBackCompat!==false){a.Widget.prototype._getCreateOptions=function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]}}})(jQuery);(function(a,c){var b=false;a(document).mouseup(function(d){b=false});a.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var d=this;this.element.bind("mousedown."+this.widgetName,function(f){return d._mouseDown(f)}).bind("click."+this.widgetName,function(f){if(true===a.data(f.target,d.widgetName+".preventClickEvent")){a.removeData(f.target,d.widgetName+".preventClickEvent");f.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);if(this._mouseMoveDelegate){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)}},_mouseDown:function(g){if(b){return}(this._mouseStarted&&this._mouseUp(g));this._mouseDownEvent=g;var h=this,d=(g.which===1),f=(typeof this.options.cancel==="string"&&g.target.nodeName?a(g.target).closest(this.options.cancel).length:false);if(!d||f||!this._mouseCapture(g)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){h.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(g)&&this._mouseDelayMet(g)){this._mouseStarted=(this._mouseStart(g)!==false);if(!this._mouseStarted){g.preventDefault();return true}}if(true===a.data(g.target,this.widgetName+".preventClickEvent")){a.removeData(g.target,this.widgetName+".preventClickEvent")}this._mouseMoveDelegate=function(i){return h._mouseMove(i)};this._mouseUpDelegate=function(i){return h._mouseUp(i)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);g.preventDefault();b=true;return true},_mouseMove:function(d){if(a.ui.ie&&!(document.documentMode>=9)&&!d.button){return this._mouseUp(d)}if(this._mouseStarted){this._mouseDrag(d);return d.preventDefault()}if(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,d)!==false);(this._mouseStarted?this._mouseDrag(d):this._mouseUp(d))}return !this._mouseStarted},_mouseUp:function(d){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(d.target===this._mouseDownEvent.target){a.data(d.target,this.widgetName+".preventClickEvent",true)}this._mouseStop(d)}return false},_mouseDistanceMet:function(d){return(Math.max(Math.abs(this._mouseDownEvent.pageX-d.pageX),Math.abs(this._mouseDownEvent.pageY-d.pageY))>=this.options.distance)},_mouseDelayMet:function(d){return this.mouseDelayMet},_mouseStart:function(d){},_mouseDrag:function(d){},_mouseStop:function(d){},_mouseCapture:function(d){return true}})})(jQuery);(function(a,o){a.ui=a.ui||{};var d,g=Math.max,c=Math.abs,k=Math.round,i=/left|center|right/,n=/top|center|bottom/,j=/[\+\-]\d+%?/,m=/^\w+/,l=/%$/,b=a.fn.position;function f(q,r,p){return[parseInt(q[0],10)*(l.test(q[0])?r/100:1),parseInt(q[1],10)*(l.test(q[1])?p/100:1)]}function h(p,q){return parseInt(a.css(p,q),10)||0}a.position={scrollbarWidth:function(){if(d!==o){return d}var r,t,p=a("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),q=p.children()[0];a("body").append(p);r=q.offsetWidth;p.css("overflow","scroll");t=q.offsetWidth;if(r===t){t=p[0].clientWidth}p.remove();return(d=r-t)},getScrollInfo:function(u){var r=u.isWindow?"":u.element.css("overflow-x"),t=u.isWindow?"":u.element.css("overflow-y"),p=r==="scroll"||(r==="auto"&&u.width<u.element[0].scrollWidth),q=t==="scroll"||(t==="auto"&&u.height<u.element[0].scrollHeight);return{width:p?a.position.scrollbarWidth():0,height:q?a.position.scrollbarWidth():0}},getWithinInfo:function(p){var r=a(p||window),q=a.isWindow(r[0]);return{element:r,isWindow:q,offset:r.offset()||{left:0,top:0},scrollLeft:r.scrollLeft(),scrollTop:r.scrollTop(),width:q?r.width():r.outerWidth(),height:q?r.height():r.outerHeight()}}};a.fn.position=function(u){if(!u||!u.of){return b.apply(this,arguments)}u=a.extend({},u);var p,A,y,z,q,w=a(u.of),B=a.position.getWithinInfo(u.within),v=a.position.getScrollInfo(B),x=w[0],r=(u.collision||"flip").split(" "),t={};if(x.nodeType===9){A=w.width();y=w.height();z={top:0,left:0}}else{if(a.isWindow(x)){A=w.width();y=w.height();z={top:w.scrollTop(),left:w.scrollLeft()}}else{if(x.preventDefault){u.at="left top";A=y=0;z={top:x.pageY,left:x.pageX}}else{A=w.outerWidth();y=w.outerHeight();z=w.offset()}}}q=a.extend({},z);a.each(["my","at"],function(){var D=(u[this]||"").split(" "),C,E;if(D.length===1){D=i.test(D[0])?D.concat(["center"]):n.test(D[0])?["center"].concat(D):["center","center"]}D[0]=i.test(D[0])?D[0]:"center";D[1]=n.test(D[1])?D[1]:"center";C=j.exec(D[0]);E=j.exec(D[1]);t[this]=[C?C[0]:0,E?E[0]:0];u[this]=[m.exec(D[0])[0],m.exec(D[1])[0]]});if(r.length===1){r[1]=r[0]}if(u.at[0]==="right"){q.left+=A}else{if(u.at[0]==="center"){q.left+=A/2}}if(u.at[1]==="bottom"){q.top+=y}else{if(u.at[1]==="center"){q.top+=y/2}}p=f(t.at,A,y);q.left+=p[0];q.top+=p[1];return this.each(function(){var D,M,F=a(this),H=F.outerWidth(),G=F.outerHeight(),I=h(this,"marginLeft"),J=h(this,"marginTop"),E=H+I+h(this,"marginRight")+v.width,C=G+J+h(this,"marginBottom")+v.height,L=a.extend({},q),K=f(t.my,F.outerWidth(),F.outerHeight());if(u.my[0]==="right"){L.left-=H}else{if(u.my[0]==="center"){L.left-=H/2}}if(u.my[1]==="bottom"){L.top-=G}else{if(u.my[1]==="center"){L.top-=G/2}}L.left+=K[0];L.top+=K[1];if(!a.support.offsetFractions){L.left=k(L.left);L.top=k(L.top)}D={marginLeft:I,marginTop:J};a.each(["left","top"],function(O,N){if(a.ui.position[r[O]]){a.ui.position[r[O]][N](L,{targetWidth:A,targetHeight:y,elemWidth:H,elemHeight:G,collisionPosition:D,collisionWidth:E,collisionHeight:C,offset:[p[0]+K[0],p[1]+K[1]],my:u.my,at:u.at,within:B,elem:F})}});if(a.fn.bgiframe){F.bgiframe()}if(u.using){M=function(Q){var P=z.left-L.left,R=P+A-H,S=z.top-L.top,N=S+y-G,O={target:{element:w,left:z.left,top:z.top,width:A,height:y},element:{element:F,left:L.left,top:L.top,width:H,height:G},horizontal:R<0?"left":P>0?"right":"center",vertical:N<0?"top":S>0?"bottom":"middle"};if(A<H&&c(P+R)<A){O.horizontal="center"}if(y<G&&c(S+N)<y){O.vertical="middle"}if(g(c(P),c(R))>g(c(S),c(N))){O.important="horizontal"}else{O.important="vertical"}u.using.call(this,Q,O)}}F.offset(a.extend(L,{using:M}))})};a.ui.position={fit:{left:function(w,q){var x=q.within,y=x.isWindow?x.scrollLeft:x.offset.left,t=x.width,p=w.left-q.collisionPosition.marginLeft,u=y-p,v=p+q.collisionWidth-t-y,r;if(q.collisionWidth>t){if(u>0&&v<=0){r=w.left+u+q.collisionWidth-t-y;w.left+=u-r}else{if(v>0&&u<=0){w.left=y}else{if(u>v){w.left=y+t-q.collisionWidth}else{w.left=y}}}}else{if(u>0){w.left+=u}else{if(v>0){w.left-=v}else{w.left=g(w.left-p,w.left)}}}},top:function(w,q){var x=q.within,y=x.isWindow?x.scrollTop:x.offset.top,t=q.within.height,p=w.top-q.collisionPosition.marginTop,v=y-p,u=p+q.collisionHeight-t-y,r;if(q.collisionHeight>t){if(v>0&&u<=0){r=w.top+v+q.collisionHeight-t-y;w.top+=v-r}else{if(u>0&&v<=0){w.top=y}else{if(v>u){w.top=y+t-q.collisionHeight}else{w.top=y}}}}else{if(v>0){w.top+=v}else{if(u>0){w.top-=u}else{w.top=g(w.top-p,w.top)}}}}},flip:{left:function(B,r){var C=r.within,D=C.offset.left+C.scrollLeft,y=C.width,x=C.isWindow?C.scrollLeft:C.offset.left,q=B.left-r.collisionPosition.marginLeft,z=q-x,A=q+r.collisionWidth-y-x,t=r.my[0]==="left"?-r.elemWidth:r.my[0]==="right"?r.elemWidth:0,p=r.at[0]==="left"?r.targetWidth:r.at[0]==="right"?-r.targetWidth:0,w=-2*r.offset[0],v,u;if(z<0){v=B.left+t+p+w+r.collisionWidth-y-D;if(v<0||v<c(z)){B.left+=t+p+w}}else{if(A>0){u=B.left-r.collisionPosition.marginLeft+t+p+w-x;if(u>0||c(u)<A){B.left+=t+p+w}}}},top:function(B,r){var D=r.within,E=D.offset.top+D.scrollTop,y=D.height,x=D.isWindow?D.scrollTop:D.offset.top,q=B.top-r.collisionPosition.marginTop,A=q-x,z=q+r.collisionHeight-y-x,C=r.my[1]==="top",t=C?-r.elemHeight:r.my[1]==="bottom"?r.elemHeight:0,p=r.at[1]==="top"?r.targetHeight:r.at[1]==="bottom"?-r.targetHeight:0,w=-2*r.offset[1],v,u;if(A<0){u=B.top+t+p+w+r.collisionHeight-y-E;if((B.top+t+p+w)>A&&(u<0||u<c(A))){B.top+=t+p+w}}else{if(z>0){v=B.top-r.collisionPosition.marginTop+t+p+w-x;if((B.top+t+p+w)>z&&(v>0||c(v)<z)){B.top+=t+p+w}}}}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments);a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments);a.ui.position.fit.top.apply(this,arguments)}}};(function(){var u,v,w,t,r,p=document.getElementsByTagName("body")[0],q=document.createElement("div");u=document.createElement(p?"div":"body");w={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(p){a.extend(w,{position:"absolute",left:"-1000px",top:"-1000px"})}for(r in w){u.style[r]=w[r]}u.appendChild(q);v=p||document.documentElement;v.insertBefore(u,v.firstChild);q.style.cssText="position: absolute; left: 10.7432222px;";t=a(q).offset().left;a.support.offsetFractions=t>10&&t<11;u.innerHTML="";v.removeChild(u)})();if(a.uiBackCompat!==false){(function(p){var q=p.fn.position;p.fn.position=function(u){if(!u||!u.offset){return q.call(this,u)}var t=u.offset.split(" "),r=u.at.split(" ");if(t.length===1){t[1]=t[0]}if(/^\d/.test(t[0])){t[0]="+"+t[0]}if(/^\d/.test(t[1])){t[1]="+"+t[1]}if(r.length===1){if(/left|center|right/.test(r[0])){r[1]="center"}else{r[1]=r[0];r[0]="center"}}return q.call(this,p.extend(u,{at:r[0]+t[0]+" "+r[1]+t[1],offset:o}))}}(jQuery))}}(jQuery));"undefined"==typeof jwplayer&&(jwplayer=function(a){if(jwplayer.api){return jwplayer.api.selectPlayer(a)}},jwplayer.version="6.8.4616",jwplayer.vid=document.createElement("video"),jwplayer.audio=document.createElement("audio"),jwplayer.source=document.createElement("source"),function(n){function h(a){return function(){return i(a)}}function r(f,d,c,l,g){return function(){var a,b;if(g){c(f)}else{try{if(a=f.responseXML){if(b=a.firstChild,a.lastChild&&"parsererror"===a.lastChild.nodeName){l&&l("Invalid XML");return}}}catch(m){}if(a&&b){return c(f)}(a=j.parseXML(f.responseText))&&a.firstChild?(f=j.extend({},f,{responseXML:a}),c(f)):l&&l(f.responseText?"Invalid XML":d)}}}var q=document,o=window,k=navigator,j=n.utils=function(){};j.exists=function(a){switch(typeof a){case"string":return 0<a.length;case"object":return null!==a;case"undefined":return !1}return !0};j.styleDimension=function(a){return a+(0<a.toString().indexOf("%")?"":"px")};j.getAbsolutePath=function(p,g){j.exists(g)||(g=q.location.href);if(j.exists(p)){var c;if(j.exists(p)){c=p.indexOf("://");var w=p.indexOf("?");c=0<c&&(0>w||w>c)}else{c=void 0}if(c){return p}c=g.substring(0,g.indexOf("://")+3);var w=g.substring(c.length,g.indexOf("/",c.length+1)),v;0===p.indexOf("/")?v=p.split("/"):(v=g.split("?")[0],v=v.substring(c.length+w.length+1,v.lastIndexOf("/")),v=v.split("/").concat(p.split("/")));for(var l=[],m=0;m<v.length;m++){v[m]&&(j.exists(v[m])&&"."!=v[m])&&(".."==v[m]?l.pop():l.push(v[m]))}return c+w+"/"+l.join("/")}};j.extend=function(){var c=j.extend.arguments;if(1<c.length){for(var b=1;b<c.length;b++){j.foreach(c[b],function(d,g){try{j.exists(g)&&(c[0][d]=g)}catch(f){}})}return c[0]}return null};var t=window.console=window.console||{log:function(){}};j.log=function(){var a=Array.prototype.slice.call(arguments,0);"object"===typeof t.log?t.log(a):t.log.apply(t,a)};var i=j.userAgentMatch=function(a){return null!==k.userAgent.toLowerCase().match(a)};j.isIE=j.isMSIE=h(/msie/i);j.isFF=h(/firefox/i);j.isChrome=h(/chrome/i);j.isIPod=h(/iP(hone|od)/i);j.isIPad=h(/iPad/i);j.isSafari602=h(/Macintosh.*Mac OS X 10_8.*6\.0\.\d* Safari/i);j.isIETrident=function(a){return a?(a=parseFloat(a).toFixed(1),i(RegExp("msie\\s*"+a+"|trident/.+rv:\\s*"+a,"i"))):i(/msie|trident/i)};j.isSafari=function(){return i(/safari/i)&&!i(/chrome/i)&&!i(/chromium/i)&&!i(/android/i)};j.isIOS=function(a){return a?i(RegExp("iP(hone|ad|od).+\\sOS\\s"+a,"i")):i(/iP(hone|ad|od)/i)};j.isAndroid=function(f,b){var d=b?!i(/chrome\/[23456789]/i):!0;return f?d&&i(RegExp("android.*"+f,"i")):d&&i(/android/i)};j.isMobile=function(){return j.isIOS()||j.isAndroid()};j.saveCookie=function(c,b){q.cookie="jwplayer."+c+"\x3d"+b+"; path\x3d/"};j.getCookies=function(){for(var f={},b=q.cookie.split("; "),d=0;d<b.length;d++){var g=b[d].split("\x3d");0===g[0].indexOf("jwplayer.")&&(f[g[0].substring(9,g[0].length)]=g[1])}return f};j.typeOf=function(c){var b=typeof c;return"object"===b?!c?"null":c instanceof Array?"array":b:b};j.translateEventResponse=function(f,c){var d=j.extend({},c);if(f==n.events.JWPLAYER_FULLSCREEN&&!d.fullscreen){d.fullscreen="true"==d.message?!0:!1,delete d.message}else{if("object"==typeof d.data){var g=d.data;delete d.data;d=j.extend(d,g)}else{"object"==typeof d.metadata&&j.deepReplaceKeyName(d.metadata,["__dot__","__spc__","__dsh__","__default__"],["."," ","-","default"])}}j.foreach(["position","duration","offset"],function(l,b){d[b]&&(d[b]=Math.round(1000*d[b])/1000)});return d};j.flashVersion=function(){if(j.isAndroid()){return 0}var f=k.plugins,c;try{if("undefined"!==f&&(c=f["Shockwave Flash"])){return parseInt(c.description.replace(/\D+(\d+)\..*/,"$1"),10)}}catch(d){}if("undefined"!=typeof o.ActiveXObject){try{if(c=new o.ActiveXObject("ShockwaveFlash.ShockwaveFlash")){return parseInt(c.GetVariable("$version").split(" ")[1].split(",")[0],10)}}catch(g){}}return 0};j.getScriptPath=function(l){for(var d=q.getElementsByTagName("script"),f=0;f<d.length;f++){var g=d[f].src;if(g&&0<=g.indexOf(l)){return g.substr(0,g.indexOf(l))}}return""};j.deepReplaceKeyName=function(f,c,d){switch(n.utils.typeOf(f)){case"array":for(var g=0;g<f.length;g++){f[g]=n.utils.deepReplaceKeyName(f[g],c,d)}break;case"object":j.foreach(f,function(a,p){var b;if(c instanceof Array&&d instanceof Array){if(c.length!=d.length){return}b=c}else{b=[c]}for(var l=a,m=0;m<b.length;m++){l=l.replace(RegExp(c[m],"g"),d[m])}f[l]=n.utils.deepReplaceKeyName(p,c,d);a!=l&&delete f[a]})}return f};var u=j.pluginPathType={ABSOLUTE:0,RELATIVE:1,CDN:2};j.getPluginPathType=function(f){if("string"==typeof f){f=f.split("?")[0];var c=f.indexOf("://");if(0<c){return u.ABSOLUTE}var d=f.indexOf("/");f=j.extension(f);return 0>c&&0>d&&(!f||!isNaN(f))?u.CDN:u.RELATIVE}};j.getPluginName=function(a){return a.replace(/^(.*\/)?([^-]*)-?.*\.(swf|js)$/,"$2")};j.getPluginVersion=function(a){return a.replace(/[^-]*-?([^\.]*).*$/,"$1")};j.isYouTube=function(a){return/^(http|\/\/).*(youtube\.com|youtu\.be)\/.+/.test(a)};j.youTubeID=function(c){try{return/v[=\/]([^?&]*)|youtu\.be\/([^?]*)|^([\w-]*)$/i.exec(c).slice(1).join("").replace("?","")}catch(b){return""}};j.isRtmp=function(c,b){return 0===c.indexOf("rtmp")||"rtmp"==b};j.foreach=function(c,f){var g,l;for(g in c){"function"==j.typeOf(c.hasOwnProperty)?c.hasOwnProperty(g)&&(l=c[g],f(g,l)):(l=c[g],f(g,l))}};j.isHTTPS=function(){return 0===o.location.href.indexOf("https")};j.repo=function(){var c="http://p.jwpcdn.com/"+n.version.split(/\W/).splice(0,2).join("/")+"/";try{j.isHTTPS()&&(c=c.replace("http://","https://ssl."))}catch(d){}return c};j.ajax=function(c,f,l,v){var p;0<c.indexOf("#")&&(c=c.replace(/#.*$/,""));if(c&&0<=c.indexOf("://")&&c.split("/")[2]!=o.location.href.split("/")[2]&&j.exists(o.XDomainRequest)){p=new o.XDomainRequest,p.onload=r(p,c,f,l,v),p.ontimeout=p.onprogress=function(){},p.timeout=5000}else{if(j.exists(o.XMLHttpRequest)){var m=p=new o.XMLHttpRequest,w=c;p.onreadystatechange=function(){if(4===m.readyState){switch(m.status){case 200:r(m,w,f,l,v)();break;case 404:l("File not found")}}}}else{return l&&l(),p}}p.overrideMimeType&&p.overrideMimeType("text/xml");p.onerror=function(){l("Error loading file")};setTimeout(function(){try{p.open("GET",c,!0),p.send()}catch(a){l&&l(c)}},0);return p};j.parseXML=function(d){var f;try{if(o.DOMParser){if(f=(new o.DOMParser).parseFromString(d,"text/xml"),f.childNodes&&f.childNodes.length&&"parsererror"==f.childNodes[0].firstChild.nodeName){return}}else{f=new o.ActiveXObject("Microsoft.XMLDOM"),f.async="false",f.loadXML(d)}}catch(g){return}return f};j.filterPlaylist=function(c,l){var m=[],x,w,p,v;for(x=0;x<c.length;x++){if(w=j.extend({},c[x]),w.sources=j.filterSources(w.sources),0<w.sources.length){for(p=0;p<w.sources.length;p++){v=w.sources[p],v.label||(v.label=p.toString())}m.push(w)}}if(l&&0===m.length){for(x=0;x<c.length;x++){if(w=j.extend({},c[x]),w.sources=j.filterSources(w.sources,!0),0<w.sources.length){for(p=0;p<w.sources.length;p++){v=w.sources[p],v.label||(v.label=p.toString())}m.push(w)}}}return m};j.filterSources=function(c,l){var p,y,x=j.extensionmap;if(c){y=[];for(var v=0;v<c.length;v++){var w=c[v].type,z=c[v].file;z&&(z=j.trim(z));w||(w=x.extType(j.extension(z)),c[v].type=w);l?n.embed.flashCanPlay(z,w)&&(p||(p=w),w==p&&y.push(j.extend({},c[v]))):j.canPlayHTML5(w)&&(p||(p=w),w==p&&y.push(j.extend({},c[v])))}}return y};j.canPlayHTML5=function(b){if(j.isAndroid()&&("hls"==b||"m3u"==b||"m3u8"==b)){return !1}b=j.extensionmap.types[b];return !!b&&!!n.vid.canPlayType&&n.vid.canPlayType(b)};j.seconds=function(d){d=d.replace(",",".");var f=d.split(":"),g=0;"s"==d.slice(-1)?g=parseFloat(d):"m"==d.slice(-1)?g=60*parseFloat(d):"h"==d.slice(-1)?g=3600*parseFloat(d):1<f.length?(g=parseFloat(f[f.length-1]),g+=60*parseFloat(f[f.length-2]),3==f.length&&(g+=3600*parseFloat(f[f.length-3]))):g=parseFloat(d);return g};j.serialize=function(b){return null==b?null:"true"==b.toString().toLowerCase()?!0:"false"==b.toString().toLowerCase()?!1:isNaN(Number(b))||5<b.length||0===b.length?b:Number(b)}}(jwplayer),function(h){var b="video/",k=h.foreach,j={mp4:b+"mp4",vorbis:"audio/ogg",ogg:b+"ogg",webm:b+"webm",aac:"audio/mp4",mp3:"audio/mpeg",hls:"application/vnd.apple.mpegurl"},i={mp4:j.mp4,f4v:j.mp4,m4v:j.mp4,mov:j.mp4,m4a:j.aac,f4a:j.aac,aac:j.aac,mp3:j.mp3,ogv:j.ogg,ogg:j.vorbis,oga:j.vorbis,webm:j.webm,m3u8:j.hls,hls:j.hls},b="video",b={flv:b,f4v:b,mov:b,m4a:b,m4v:b,mp4:b,aac:b,f4a:b,mp3:"sound",smil:"rtmp",m3u8:"hls",hls:"hls"},c=h.extensionmap={};k(i,function(d,g){c[d]={html5:g}});k(b,function(d,g){c[d]||(c[d]={});c[d].flash=g});c.types=j;c.mimeType=function(f){var g;k(j,function(a,d){!g&&d==f&&(g=a)});return g};c.extType=function(d){return c.mimeType(i[d])}}(jwplayer.utils),function(c){var b=c.loaderstatus={NEW:0,LOADING:1,ERROR:2,COMPLETE:3},d=document;c.scriptloader=function(k){function j(){h=b.ERROR;a.sendEvent(l.ERROR)}function i(){h=b.COMPLETE;a.sendEvent(l.COMPLETE)}var h=b.NEW,l=jwplayer.events,a=new l.eventdispatcher;c.extend(this,a);this.load=function(){var f=c.scriptloader.loaders[k];if(f&&(f.getStatus()==b.NEW||f.getStatus()==b.LOADING)){f.addEventListener(l.ERROR,j),f.addEventListener(l.COMPLETE,i)}else{if(c.scriptloader.loaders[k]=this,h==b.NEW){h=b.LOADING;var g=d.createElement("script");g.addEventListener?(g.onload=i,g.onerror=j):g.readyState&&(g.onreadystatechange=function(){("loaded"==g.readyState||"complete"==g.readyState)&&i()});d.getElementsByTagName("head")[0].appendChild(g);g.src=k}}};this.getStatus=function(){return h}};c.scriptloader.loaders={}}(jwplayer.utils),function(a){a.trim=function(b){return b.replace(/^\s*/,"").replace(/\s*$/,"")};a.pad=function(b,c,d){for(d||(d="0");b.length<c;){b=d+b}return b};a.xmlAttribute=function(b,c){for(var d=0;d<b.attributes.length;d++){if(b.attributes[d].name&&b.attributes[d].name.toLowerCase()==c.toLowerCase()){return b.attributes[d].value.toString()}}return""};a.extension=function(b){if(!b||"rtmp"==b.substr(0,4)){return""}b=b.substring(b.lastIndexOf("/")+1,b.length).split("?")[0].split("#")[0];if(-1<b.lastIndexOf(".")){return b.substr(b.lastIndexOf(".")+1,b.length).toLowerCase()}};a.stringToColor=function(b){b=b.replace(/(#|0x)?([0-9A-F]{3,6})$/gi,"$2");3==b.length&&(b=b.charAt(0)+b.charAt(0)+b.charAt(1)+b.charAt(1)+b.charAt(2)+b.charAt(2));return parseInt(b,16)}}(jwplayer.utils),function(c){var b="touchmove",d="touchstart";c.touch=function(l){function k(f){f.type==d?(a=!0,o=i(t.DRAG_START,f)):f.type==b?a&&(v||(j(t.DRAG_START,f,o),v=!0),j(t.DRAG,f)):(a&&(v?j(t.DRAG_END,f):(f.cancelBubble=!0,j(t.TAP,f))),a=v=!1,o=null)}function j(f,g,h){if(u[f]&&(g.preventManipulation&&g.preventManipulation(),g.preventDefault&&g.preventDefault(),g=h?h:i(f,g))){u[f](g)}}function i(f,g){var m=null;g.touches&&g.touches.length?m=g.touches[0]:g.changedTouches&&g.changedTouches.length&&(m=g.changedTouches[0]);if(!m){return null}var h=r.getBoundingClientRect(),m={type:f,target:r,x:m.pageX-window.pageXOffset-h.left,y:m.pageY,deltaX:0,deltaY:0};f!=t.TAP&&o&&(m.deltaX=m.x-o.x,m.deltaY=m.y-o.y);return m}var r=l,a=!1,u={},o=null,v=!1,t=c.touchEvents;document.addEventListener(b,k);document.addEventListener("touchend",function(f){a&&v&&j(t.DRAG_END,f);a=v=!1;o=null});document.addEventListener("touchcancel",k);l.addEventListener(d,k);l.addEventListener("touchend",k);this.addEventListener=function(f,g){u[f]=g};this.removeEventListener=function(f){delete u[f]};return this}}(jwplayer.utils),function(a){a.touchEvents={DRAG:"jwplayerDrag",DRAG_START:"jwplayerDragStart",DRAG_END:"jwplayerDragEnd",TAP:"jwplayerTap"}}(jwplayer.utils),function(a){a.key=function(b){var m,k,j;this.edition=function(){return j&&j.getTime()<(new Date).getTime()?"invalid":m};this.token=function(){return k};a.exists(b)||(b="");try{b=a.tea.decrypt(b,"36QXq4W@GSBV^teR");var i=b.split("/");(m=i[0])?/^(free|pro|premium|ads)$/i.test(m)?(k=i[1],i[2]&&0<parseInt(i[2])&&(j=new Date,j.setTime(String(i[2])))):m="invalid":m="free"}catch(h){m="invalid"}}}(jwplayer.utils),function(c){var b=c.tea={};b.encrypt=function(o,i){if(0==o.length){return""}var g=b.strToLongs(d.encode(o));1>=g.length&&(g[1]=0);for(var u=b.strToLongs(d.encode(i).slice(0,16)),a=g.length,l=g[a-1],p=g[0],w,v=Math.floor(6+52/a),t=0;0<v--;){t+=2654435769;w=t>>>2&3;for(var r=0;r<a;r++){p=g[(r+1)%a],l=(l>>>5^p<<2)+(p>>>3^l<<4)^(t^p)+(u[r&3^w]^l),l=g[r]+=l}}g=b.longsToStr(g);return f.encode(g)};b.decrypt=function(l,i){if(0==l.length){return""}for(var g=b.strToLongs(f.decode(l)),r=b.strToLongs(d.encode(i).slice(0,16)),a=g.length,j=g[a-1],o=g[0],u,t=2654435769*Math.floor(6+52/a);0!=t;){u=t>>>2&3;for(var p=a-1;0<=p;p--){j=g[0<p?p-1:a-1],j=(j>>>5^o<<2)+(o>>>3^j<<4)^(t^o)+(r[p&3^u]^j),o=g[p]-=j}t-=2654435769}g=b.longsToStr(g);g=g.replace(/\0+$/,"");return d.decode(g)};b.strToLongs=function(g){for(var i=Array(Math.ceil(g.length/4)),h=0;h<i.length;h++){i[h]=g.charCodeAt(4*h)+(g.charCodeAt(4*h+1)<<8)+(g.charCodeAt(4*h+2)<<16)+(g.charCodeAt(4*h+3)<<24)}return i};b.longsToStr=function(g){for(var i=Array(g.length),h=0;h<g.length;h++){i[h]=String.fromCharCode(g[h]&255,g[h]>>>8&255,g[h]>>>16&255,g[h]>>>24&255)}return i.join("")};var f={code:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d",encode:function(g,m){var l,o,i,w,r=[],x="",v,u,t=f.code;u=("undefined"==typeof m?0:m)?d.encode(g):g;v=u.length%3;if(0<v){for(;3>v++;){x+="\x3d",u+="\x00"}}for(v=0;v<u.length;v+=3){l=u.charCodeAt(v),o=u.charCodeAt(v+1),i=u.charCodeAt(v+2),w=l<<16|o<<8|i,l=w>>18&63,o=w>>12&63,i=w>>6&63,w&=63,r[v/3]=t.charAt(l)+t.charAt(o)+t.charAt(i)+t.charAt(w)}r=r.join("");return r=r.slice(0,r.length-x.length)+x},decode:function(g,m){m="undefined"==typeof m?!1:m;var l,o,i,w,r,x=[],v,u=f.code;v=m?d.decode(g):g;for(var t=0;t<v.length;t+=4){l=u.indexOf(v.charAt(t)),o=u.indexOf(v.charAt(t+1)),w=u.indexOf(v.charAt(t+2)),r=u.indexOf(v.charAt(t+3)),i=l<<18|o<<12|w<<6|r,l=i>>>16&255,o=i>>>8&255,i&=255,x[t/4]=String.fromCharCode(l,o,i),64==r&&(x[t/4]=String.fromCharCode(l,o)),64==w&&(x[t/4]=String.fromCharCode(l))}w=x.join("");return m?d.decode(w):w}},d={encode:function(g){g=g.replace(/[\u0080-\u07ff]/g,function(h){h=h.charCodeAt(0);return String.fromCharCode(192|h>>6,128|h&63)});return g=g.replace(/[\u0800-\uffff]/g,function(h){h=h.charCodeAt(0);return String.fromCharCode(224|h>>12,128|h>>6&63,128|h&63)})},decode:function(g){g=g.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(h){h=(h.charCodeAt(0)&15)<<12|(h.charCodeAt(1)&63)<<6|h.charCodeAt(2)&63;return String.fromCharCode(h)});return g=g.replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(h){h=(h.charCodeAt(0)&31)<<6|h.charCodeAt(1)&63;return String.fromCharCode(h)})}}}(jwplayer.utils),function(a){a.events={COMPLETE:"COMPLETE",ERROR:"ERROR",API_READY:"jwplayerAPIReady",JWPLAYER_READY:"jwplayerReady",JWPLAYER_FULLSCREEN:"jwplayerFullscreen",JWPLAYER_RESIZE:"jwplayerResize",JWPLAYER_ERROR:"jwplayerError",JWPLAYER_SETUP_ERROR:"jwplayerSetupError",JWPLAYER_MEDIA_BEFOREPLAY:"jwplayerMediaBeforePlay",JWPLAYER_MEDIA_BEFORECOMPLETE:"jwplayerMediaBeforeComplete",JWPLAYER_COMPONENT_SHOW:"jwplayerComponentShow",JWPLAYER_COMPONENT_HIDE:"jwplayerComponentHide",JWPLAYER_MEDIA_BUFFER:"jwplayerMediaBuffer",JWPLAYER_MEDIA_BUFFER_FULL:"jwplayerMediaBufferFull",JWPLAYER_MEDIA_ERROR:"jwplayerMediaError",JWPLAYER_MEDIA_LOADED:"jwplayerMediaLoaded",JWPLAYER_MEDIA_COMPLETE:"jwplayerMediaComplete",JWPLAYER_MEDIA_SEEK:"jwplayerMediaSeek",JWPLAYER_MEDIA_TIME:"jwplayerMediaTime",JWPLAYER_MEDIA_VOLUME:"jwplayerMediaVolume",JWPLAYER_MEDIA_META:"jwplayerMediaMeta",JWPLAYER_MEDIA_MUTE:"jwplayerMediaMute",JWPLAYER_MEDIA_LEVELS:"jwplayerMediaLevels",JWPLAYER_MEDIA_LEVEL_CHANGED:"jwplayerMediaLevelChanged",JWPLAYER_CAPTIONS_CHANGED:"jwplayerCaptionsChanged",JWPLAYER_CAPTIONS_LIST:"jwplayerCaptionsList",JWPLAYER_CAPTIONS_LOADED:"jwplayerCaptionsLoaded",JWPLAYER_PLAYER_STATE:"jwplayerPlayerState",state:{BUFFERING:"BUFFERING",IDLE:"IDLE",PAUSED:"PAUSED",PLAYING:"PLAYING"},JWPLAYER_PLAYLIST_LOADED:"jwplayerPlaylistLoaded",JWPLAYER_PLAYLIST_ITEM:"jwplayerPlaylistItem",JWPLAYER_PLAYLIST_COMPLETE:"jwplayerPlaylistComplete",JWPLAYER_DISPLAY_CLICK:"jwplayerViewClick",JWPLAYER_CONTROLS:"jwplayerViewControls",JWPLAYER_USER_ACTION:"jwplayerUserAction",JWPLAYER_INSTREAM_CLICK:"jwplayerInstreamClicked",JWPLAYER_INSTREAM_DESTROYED:"jwplayerInstreamDestroyed",JWPLAYER_AD_TIME:"jwplayerAdTime",JWPLAYER_AD_ERROR:"jwplayerAdError",JWPLAYER_AD_CLICK:"jwplayerAdClicked",JWPLAYER_AD_COMPLETE:"jwplayerAdComplete",JWPLAYER_AD_IMPRESSION:"jwplayerAdImpression",JWPLAYER_AD_COMPANIONS:"jwplayerAdCompanions",JWPLAYER_AD_SKIPPED:"jwplayerAdSkipped"}}(jwplayer),function(c){var b=c.utils;c.events.eventdispatcher=function(k,j){function i(m,l,n){if(m){for(var q=0;q<m.length;q++){var p=m[q];if(p){null!==p.count&&0===--p.count&&delete m[q];try{p.listener(l)}catch(o){b.log('Error handling "'+n+'" event listener ['+q+"]: "+o.toString(),p.listener,l)}}}}}var h,a;this.resetEventListeners=function(){h={};a=[]};this.resetEventListeners();this.addEventListener=function(f,d,l){try{b.exists(h[f])||(h[f]=[]),"string"==b.typeOf(d)&&(d=(new Function("return "+d))()),h[f].push({listener:d,count:l||null})}catch(m){b.log("error",m)}return !1};this.removeEventListener=function(f,d){if(h[f]){try{for(var l=0;l<h[f].length;l++){if(h[f][l].listener.toString()==d.toString()){h[f].splice(l,1);break}}}catch(m){b.log("error",m)}return !1}};this.addGlobalListener=function(l,f){try{"string"==b.typeOf(l)&&(l=(new Function("return "+l))()),a.push({listener:l,count:f||null})}catch(m){b.log("error",m)}return !1};this.removeGlobalListener=function(l){if(l){try{for(var f=a.length;f--;){a[f].listener.toString()==l.toString()&&a.splice(f,1)}}catch(m){b.log("error",m)}return !1}};this.sendEvent=function(f,d){b.exists(d)||(d={});b.extend(d,{id:k,version:c.version,type:f});j&&b.log(f,d);i(h[f],d,f);i(a,d,f)}}}(window.jwplayer),function(c){var b={},d={};c.plugins=function(){};c.plugins.loadPlugins=function(h,a){d[h]=new c.plugins.pluginloader(new c.plugins.model(b),a);return d[h]};c.plugins.registerPlugin=function(j,i,h,a){var k=c.utils.getPluginName(j);b[k]||(b[k]=new c.plugins.plugin(j));b[k].registerPlugin(j,i,h,a)}}(jwplayer),function(a){a.plugins.model=function(b){this.addPlugin=function(d){var c=a.utils.getPluginName(d);b[c]||(b[c]=new a.plugins.plugin(d));return b[c]};this.getPlugins=function(){return b}}}(jwplayer),function(c){var b=jwplayer.utils,d=jwplayer.events;c.pluginmodes={FLASH:0,JAVASCRIPT:1,HYBRID:2};c.plugin=function(l){function k(){switch(b.getPluginPathType(l)){case b.pluginPathType.ABSOLUTE:return l;case b.pluginPathType.RELATIVE:return b.getAbsolutePath(l,window.location.href)}}function j(){v=setTimeout(function(){r=b.loaderstatus.COMPLETE;t.sendEvent(d.COMPLETE)},1000)}function i(){r=b.loaderstatus.ERROR;t.sendEvent(d.ERROR)}var r=b.loaderstatus.NEW,a,u,o,v,t=new d.eventdispatcher;b.extend(this,t);this.load=function(){if(r==b.loaderstatus.NEW){if(0<l.lastIndexOf(".swf")){a=l,r=b.loaderstatus.COMPLETE,t.sendEvent(d.COMPLETE)}else{if(b.getPluginPathType(l)==b.pluginPathType.CDN){r=b.loaderstatus.COMPLETE,t.sendEvent(d.COMPLETE)}else{r=b.loaderstatus.LOADING;var f=new b.scriptloader(k());f.addEventListener(d.COMPLETE,j);f.addEventListener(d.ERROR,i);f.load()}}}};this.registerPlugin=function(h,m,p,n){v&&(clearTimeout(v),v=void 0);o=m;p&&n?(a=n,u=p):"string"==typeof p?a=p:"function"==typeof p?u=p:!p&&!n&&(a=h);r=b.loaderstatus.COMPLETE;t.sendEvent(d.COMPLETE)};this.getStatus=function(){return r};this.getPluginName=function(){return b.getPluginName(l)};this.getFlashPath=function(){if(a){switch(b.getPluginPathType(a)){case b.pluginPathType.ABSOLUTE:return a;case b.pluginPathType.RELATIVE:return 0<l.lastIndexOf(".swf")?b.getAbsolutePath(a,window.location.href):b.getAbsolutePath(a,k())}}return null};this.getJS=function(){return u};this.getTarget=function(){return o};this.getPluginmode=function(){if("undefined"!=typeof a&&"undefined"!=typeof u){return c.pluginmodes.HYBRID}if("undefined"!=typeof a){return c.pluginmodes.FLASH}if("undefined"!=typeof u){return c.pluginmodes.JAVASCRIPT}};this.getNewInstance=function(f,g,h){return new u(f,g,h)};this.getURL=function(){return l}}}(jwplayer.plugins),function(c){var b=c.utils,f=c.events,d=b.foreach;c.plugins.pluginloader=function(l,i){function g(){o?t.sendEvent(f.ERROR,{message:x}):w||(w=!0,a=b.loaderstatus.COMPLETE,t.sendEvent(f.COMPLETE))}function u(){v||g();if(!w&&!o){var h=0,j=l.getPlugins();b.foreach(v,function(n){n=b.getPluginName(n);var p=j[n];n=p.getJS();var m=p.getTarget(),p=p.getStatus();if(p==b.loaderstatus.LOADING||p==b.loaderstatus.NEW){h++}else{if(n&&(!m||parseFloat(m)>parseFloat(c.version))){o=!0,x="Incompatible player version",g()}}});0==h&&g()}}var a=b.loaderstatus.NEW,w=!1,o=!1,x,v=i,t=new f.eventdispatcher;b.extend(this,t);this.setupPlugins=function(m,n,p){var A={length:0,plugins:{}},y=0,z={},q=l.getPlugins();d(n.plugins,function(B,j){var E=b.getPluginName(B),H=q[E],D=H.getFlashPath(),G=H.getJS(),I=H.getURL();D&&(A.plugins[D]=b.extend({},j),A.plugins[D].pluginmode=H.getPluginmode(),A.length++);try{if(G&&n.plugins&&n.plugins[I]){var h=document.createElement("div");h.id=m.id+"_"+E;h.style.position="absolute";h.style.top=0;h.style.zIndex=y+10;z[E]=H.getNewInstance(m,b.extend({},n.plugins[I]),h);y++;m.onReady(p(z[E],h,!0));m.onResize(p(z[E],h))}}catch(k){b.log("ERROR: Failed to load "+E+".")}});m.plugins=z;return A};this.load=function(){if(!(b.exists(i)&&"object"!=b.typeOf(i))){a=b.loaderstatus.LOADING;d(i,function(j){b.exists(j)&&(j=l.addPlugin(j),j.addEventListener(f.COMPLETE,u),j.addEventListener(f.ERROR,r))});var h=l.getPlugins();d(h,function(j,k){k.load()})}u()};var r=this.pluginFailed=function(){o||(o=!0,x="File not found",g())};this.getStatus=function(){return a}}}(jwplayer),function(){jwplayer.parsers={localName:function(a){return a?a.localName?a.localName:a.baseName?a.baseName:"":""},textContent:function(a){return a?a.textContent?jwplayer.utils.trim(a.textContent):a.text?jwplayer.utils.trim(a.text):"":""},getChildNode:function(c,b){return c.childNodes[b]},numChildren:function(a){return a.childNodes?a.childNodes.length:0}}}(jwplayer),function(c){var b=c.parsers;(b.jwparser=function(){}).parseEntry=function(n,k){for(var j=[],i=[],h=c.utils.xmlAttribute,o=0;o<n.childNodes.length;o++){var a=n.childNodes[o];if("jwplayer"==a.prefix){var q=b.localName(a);"source"==q?(delete k.sources,j.push({file:h(a,"file"),"default":h(a,"default"),label:h(a,"label"),type:h(a,"type")})):"track"==q?(delete k.tracks,i.push({file:h(a,"file"),"default":h(a,"default"),kind:h(a,"kind"),label:h(a,"label")})):(k[q]=c.utils.serialize(b.textContent(a)),"file"==q&&k.sources&&delete k.sources)}k.file||(k.file=k.link)}if(j.length){k.sources=[];for(o=0;o<j.length;o++){0<j[o].file.length&&(j[o]["default"]="true"==j[o]["default"]?!0:!1,j[o].label.length||delete j[o].label,k.sources.push(j[o]))}}if(i.length){k.tracks=[];for(o=0;o<i.length;o++){0<i[o].file.length&&(i[o]["default"]="true"==i[o]["default"]?!0:!1,i[o].kind=!i[o].kind.length?"captions":i[o].kind,i[o].label.length||delete i[o].label,k.tracks.push(i[o]))}}return k}}(jwplayer),function(j){var b=jwplayer.utils,n=b.xmlAttribute,m=j.localName,k=j.textContent,i=j.numChildren,h=j.mediaparser=function(){};h.parseGroup=function(c,a){var o,d,r=[];for(d=0;d<i(c);d++){if(o=c.childNodes[d],"media"==o.prefix&&m(o)){switch(m(o).toLowerCase()){case"content":n(o,"duration")&&(a.duration=b.seconds(n(o,"duration")));0<i(o)&&(a=h.parseGroup(o,a));n(o,"url")&&(a.sources||(a.sources=[]),a.sources.push({file:n(o,"url"),type:n(o,"type"),width:n(o,"width"),label:n(o,"label")}));break;case"title":a.title=k(o);break;case"description":a.description=k(o);break;case"guid":a.mediaid=k(o);break;case"thumbnail":a.image||(a.image=n(o,"url"));break;case"group":h.parseGroup(o,a);break;case"subtitle":var l={};l.file=n(o,"url");l.kind="captions";if(0<n(o,"lang").length){var g=l;o=n(o,"lang");var f={zh:"Chinese",nl:"Dutch",en:"English",fr:"French",de:"German",it:"Italian",ja:"Japanese",pt:"Portuguese",ru:"Russian",es:"Spanish"};o=f[o]?f[o]:o;g.label=o}r.push(l)}}}a.hasOwnProperty("tracks")||(a.tracks=[]);for(d=0;d<r.length;d++){a.tracks.push(r[d])}return a}}(jwplayer.parsers),function(j){function b(c){for(var g={},l=0;l<c.childNodes.length;l++){var p=c.childNodes[l],o=h(p);if(o){switch(o.toLowerCase()){case"enclosure":g.file=n.xmlAttribute(p,"url");break;case"title":g.title=m(p);break;case"guid":g.mediaid=m(p);break;case"pubdate":g.date=m(p);break;case"description":g.description=m(p);break;case"link":g.link=m(p);break;case"category":g.tags=g.tags?g.tags+m(p):m(p)}}}g=j.mediaparser.parseGroup(c,g);g=j.jwparser.parseEntry(c,g);return new jwplayer.playlist.item(g)}var n=jwplayer.utils,m=j.textContent,k=j.getChildNode,i=j.numChildren,h=j.localName;j.rssparser={};j.rssparser.parse=function(d){for(var a=[],c=0;c<i(d);c++){var f=k(d,c);if("channel"==h(f).toLowerCase()){for(var o=0;o<i(f);o++){var p=k(f,o);"item"==h(p).toLowerCase()&&a.push(b(p))}}}return a}}(jwplayer.parsers),function(a){a.playlist=function(b){var d=[];if("array"==a.utils.typeOf(b)){for(var c=0;c<b.length;c++){d.push(new a.playlist.item(b[c]))}}else{d.push(new a.playlist.item(b))}return d}}(jwplayer),function(c){var b=c.item=function(k){var j=jwplayer.utils,i=j.extend({},b.defaults,k);i.tracks=k&&j.exists(k.tracks)?k.tracks:[];0==i.sources.length&&(i.sources=[new c.source(i)]);for(var h=0;h<i.sources.length;h++){var a=i.sources[h]["default"];i.sources[h]["default"]=a?"true"==a.toString():!1;i.sources[h]=new c.source(i.sources[h])}if(i.captions&&!j.exists(k.tracks)){for(k=0;k<i.captions.length;k++){i.tracks.push(i.captions[k])}delete i.captions}for(h=0;h<i.tracks.length;h++){i.tracks[h]=new c.track(i.tracks[h])}return i};b.defaults={description:"",image:"",mediaid:"",title:"",sources:[],tracks:[]}}(jwplayer.playlist),function(c){var b=jwplayer,i=b.utils,h=b.events,d=b.parsers;c.loader=function(){function f(a){try{var m=a.responseXML.childNodes;a="";for(var p=0;p<m.length&&!(a=m[p],8!=a.nodeType);p++){}"xml"==d.localName(a)&&(a=a.nextSibling);if("rss"!=d.localName(a)){k("Not a valid RSS feed")}else{var q=new c(d.rssparser.parse(a));g.sendEvent(h.JWPLAYER_PLAYLIST_LOADED,{playlist:q})}}catch(o){k()}}function j(l){k(l.match(/invalid/i)?"Not a valid RSS feed":"")}function k(l){g.sendEvent(h.JWPLAYER_ERROR,{message:l?l:"Error loading file"})}var g=new h.eventdispatcher;i.extend(this,g);this.load=function(a){i.ajax(a,f,j)}}}(jwplayer.playlist),function(c){var b=jwplayer.utils,d={file:void 0,label:void 0,type:void 0,"default":void 0};c.source=function(h){var a=b.extend({},d);b.foreach(d,function(f){b.exists(h[f])&&(a[f]=h[f],delete h[f])});a.type&&0<a.type.indexOf("/")&&(a.type=b.extensionmap.mimeType(a.type));"m3u8"==a.type&&(a.type="hls");"smil"==a.type&&(a.type="rtmp");return a}}(jwplayer.playlist),function(c){var b=jwplayer.utils,d={file:void 0,label:void 0,kind:"captions","default":!1};c.track=function(h){var a=b.extend({},d);h||(h={});b.foreach(d,function(f){b.exists(h[f])&&(a[f]=h[f],delete h[f])});return a}}(jwplayer.playlist),function(j){function b(f,l,m){var q=f.style;q.backgroundColor="#000";q.color="#FFF";q.width=o.styleDimension(m.width);q.height=o.styleDimension(m.height);q.display="table";q.opacity=1;m=document.createElement("p");q=m.style;q.verticalAlign="middle";q.textAlign="center";q.display="table-cell";q.font="15px/20px Arial, Helvetica, sans-serif";m.innerHTML=l.replace(":",":\x3cbr\x3e");f.innerHTML="";f.appendChild(m)}var o=j.utils,n=j.events,k=!0,i=!1,h=document,p=j.embed=function(c){function G(q,r){o.foreach(r,function(t,u){"function"==typeof q[t]&&q[t].call(q,u)})}function l(){if(!g){if("array"==o.typeOf(J.playlist)&&2>J.playlist.length&&(0==J.playlist.length||!J.playlist[0].sources||0==J.playlist[0].sources.length)){C()}else{if(!d){if("string"==o.typeOf(J.playlist)){var q=new j.playlist.loader;q.addEventListener(n.JWPLAYER_PLAYLIST_LOADED,function(u){J.playlist=u.playlist;d=i;l()});q.addEventListener(n.JWPLAYER_ERROR,function(u){d=i;C(u)});d=k;q.load(J.playlist)}else{if(O.getStatus()==o.loaderstatus.COMPLETE){for(q=0;q<J.modes.length;q++){if(J.modes[q].type&&p[J.modes[q].type]){var r=o.extend({},J),t=new p[J.modes[q].type](I,J.modes[q],r,O,c);if(t.supportsConfig()){return t.addEventListener(n.ERROR,H),t.embed(),G(c,r.events),c}}}var v;J.fallback?(v="No suitable players found and fallback enabled",f=setTimeout(function(){m(v,k)},10),o.log(v),new p.download(I,J,C)):(v="No suitable players found and fallback disabled",m(v,i),o.log(v),I.parentNode.replaceChild(M,I))}}}}}}function H(q){K(a+q.message)}function F(q){K("Could not load plugins: "+q.message)}function C(q){q&&q.message?K("Error loading playlist: "+q.message):K(a+"No playable sources found")}function m(q,r){f&&(clearTimeout(f),f=null);f=setTimeout(function(){f=null;c.dispatchEvent(n.JWPLAYER_SETUP_ERROR,{message:q,fallback:r})},0)}function K(q){g||(J.fallback?(g=k,b(I,q,J),m(q,k)):m(q,i))}var J=new p.config(c.config),I,L,M,N=J.width,P=J.height,a="Error loading player: ",O=j.plugins.loadPlugins(c.id,J.plugins),d=i,g=i,f=null;J.fallbackDiv&&(M=J.fallbackDiv,delete J.fallbackDiv);J.id=c.id;L=h.getElementById(c.id);J.aspectratio?c.config.aspectratio=J.aspectratio:delete c.config.aspectratio;I=h.createElement("div");I.id=L.id;I.style.width=0<N.toString().indexOf("%")?N:N+"px";I.style.height=0<P.toString().indexOf("%")?P:P+"px";L.parentNode.replaceChild(I,L);this.embed=function(){g||(O.addEventListener(n.COMPLETE,l),O.addEventListener(n.ERROR,F),O.load())};this.errorScreen=K;return this};j.embed.errorScreen=b}(jwplayer),function(c){function b(f){if(f.playlist){for(var g=0;g<f.playlist.length;g++){f.playlist[g]=new d(f.playlist[g])}}else{var j={};h.foreach(d.defaults,function(a){i(f,j,a)});j.sources||(f.levels?(j.sources=f.levels,delete f.levels):(g={},i(f,g,"file"),i(f,g,"type"),j.sources=g.file?[g]:[]));f.playlist=[new d(j)]}}function i(g,j,k){h.exists(g[k])&&(j[k]=g[k],delete g[k])}var h=c.utils,d=c.playlist.item;(c.embed.config=function(j){var g={fallback:!0,height:270,primary:"html5",width:480,base:j.base?j.base:h.getScriptPath("jwplayer.js"),aspectratio:""};j=h.extend(g,c.defaults,j);var g={type:"html5",src:j.base+"ClientFiles/COR/Flash/jwplayer.html5.js"},k={type:"flash",src:j.base+"ClientFiles/COR/Flash/jwplayer.flash.swf"};j.modes="flash"==j.primary?[k,g]:[g,k];j.listbar&&(j.playlistsize=j.listbar.size,j.playlistposition=j.listbar.position,j.playlistlayout=j.listbar.layout);j.flashplayer&&(k.src=j.flashplayer);j.html5player&&(g.src=j.html5player);b(j);k=j.aspectratio;if("string"!=typeof k||!h.exists(k)){g=0}else{var a=k.indexOf(":");-1==a?g=0:(g=parseFloat(k.substr(0,a)),k=parseFloat(k.substr(a+1)),g=0>=g||0>=k?0:100*(k/g)+"%")}-1==j.width.toString().indexOf("%")?delete j.aspectratio:g?j.aspectratio=g:delete j.aspectratio;return j}).addConfig=function(f,a){b(a);return h.extend(f,a)}}(jwplayer),function(c){var b=c.utils,d=document;c.embed.download=function(w,o,l){function i(f,h){for(var j=d.querySelectorAll(f),k=0;k<j.length;k++){b.foreach(h,function(g,n){j[k].style[g]=n})}}function m(f,g,h){f=d.createElement(f);g&&(f.className="jwdownload"+g);h&&h.appendChild(f);return f}var a=b.extend({},o),B=a.width?a.width:480,x=a.height?a.height:320,C;o=o.logo?o.logo:{prefix:b.repo(),file:"logo.png",margin:10};var A,z,y,a=a.playlist,F,E=["mp4","aac","mp3"];if(a&&a.length){F=a[0];C=F.sources;for(a=0;a<C.length;a++){var D=C[a],G=D.type?D.type:b.extensionmap.extType(b.extension(D.file));D.file&&b.foreach(E,function(f){G==E[f]?(A=D.file,z=F.image):b.isYouTube(D.file)&&(y=D.file)})}A?(C=A,l=z,w&&(a=m("a","display",w),m("div","icon",a),m("div","logo",a),C&&a.setAttribute("href",b.getAbsolutePath(C))),a="#"+w.id+" .jwdownload",w.style.width="",w.style.height="",i(a+"display",{width:b.styleDimension(Math.max(320,B)),height:b.styleDimension(Math.max(180,x)),background:"black center no-repeat "+(l?"url("+l+")":""),backgroundSize:"contain",position:"relative",border:"none",display:"block"}),i(a+"display div",{position:"absolute",width:"100%",height:"100%"}),i(a+"logo",{top:o.margin+"px",right:o.margin+"px",background:"top right no-repeat url("+o.prefix+o.file+")"}),i(a+"icon",{background:"center no-repeat url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAgNJREFUeNrs28lqwkAYB/CZqNVDDj2r6FN41QeIy8Fe+gj6BL275Q08u9FbT8ZdwVfotSBYEPUkxFOoks4EKiJdaDuTjMn3wWBO0V/+sySR8SNSqVRKIR8qaXHkzlqS9jCfzzWcTCYp9hF5o+59sVjsiRzcegSckFzcjT+ruN80TeSlAjCAAXzdJSGPFXRpAAMYwACGZQkSdhG4WCzehMNhqV6vG6vVSrirKVEw66YoSqDb7cqlUilE8JjHd/y1MQefVzqdDmiaJpfLZWHgXMHn8F6vJ1cqlVAkEsGuAn83J4gAd2RZymQygX6/L1erVQt+9ZPWb+CDwcCC2zXGJaewl/DhcHhK3DVj+KfKZrMWvFarcYNLomAv4aPRSFZVlTlcSPA5fDweW/BoNIqFnKV53JvncjkLns/n/cLdS+92O7RYLLgsKfv9/t8XlDn4eDyiw+HA9Jyz2eyt0+kY2+3WFC5hluej0Ha7zQQq9PPwdDq1Et1sNsx/nFBgCqWJ8oAK1aUptNVqcYWewE4nahfU0YQnk4ntUEfGMIU2m01HoLaCKbTRaDgKtaVLk9tBYaBcE/6Artdr4RZ5TB6/dC+9iIe/WgAMYADDpAUJAxjAAAYwgGFZgoS/AtNNTF7Z2bL0BYPBV3Jw5xFwwWcYxgtBP5OkE8i9G7aWGOOCruvauwADALMLMEbKf4SdAAAAAElFTkSuQmCC)"})):y?(o=y,w=m("iframe","",w),w.src="http://www.youtube.com/embed/"+b.youTubeID(o),w.width=B,w.height=x,w.style.border="none"):l()}}}(jwplayer),function(c){var b=c.utils,i=c.events,h={};(c.embed.flash=function(g,f,t,a,v){function l(j,k,m){var n=document.createElement("param");n.setAttribute("name",k);n.setAttribute("value",m);j.appendChild(n)}function w(j,k,m){return function(){try{m&&document.getElementById(v.id+"_wrapper").appendChild(k);var n=document.getElementById(v.id).getPluginConfig("display");"function"==typeof j.resize&&j.resize(n.width,n.height);k.style.left=n.x;k.style.top=n.h}catch(p){}}}function u(j){if(!j){return{}}var k={},m=[];b.foreach(j,function(n,p){var q=b.getPluginName(n);m.push(n);b.foreach(p,function(x,y){k[q+"."+x]=y})});k.plugins=m.join(",");return k}var r=new c.events.eventdispatcher,o=b.flashVersion();b.extend(this,r);this.embed=function(){t.id=v.id;if(10>o){return r.sendEvent(i.ERROR,{message:"Flash version must be 10.0 or greater"}),!1}var k,j,m=v.config.listbar,n=b.extend({},t);if(g.id+"_wrapper"==g.parentNode.id){k=document.getElementById(g.id+"_wrapper")}else{k=document.createElement("div");j=document.createElement("div");j.style.display="none";j.id=g.id+"_aspect";k.id=g.id+"_wrapper";k.style.position="relative";k.style.display="block";k.style.width=b.styleDimension(n.width);k.style.height=b.styleDimension(n.height);if(v.config.aspectratio){var p=parseFloat(v.config.aspectratio);j.style.display="block";j.style.marginTop=v.config.aspectratio;k.style.height="auto";k.style.display="inline-block";m&&("bottom"==m.position?j.style.paddingBottom=m.size+"px":"right"==m.position&&(j.style.marginBottom=-1*m.size*(p/100)+"px"))}g.parentNode.replaceChild(k,g);k.appendChild(g);k.appendChild(j)}k=a.setupPlugins(v,n,w);0<k.length?b.extend(n,u(k.plugins)):delete n.plugins;"undefined"!=typeof n["dock.position"]&&"false"==n["dock.position"].toString().toLowerCase()&&(n.dock=n["dock.position"],delete n["dock.position"]);k=n.wmode?n.wmode:n.height&&40>=n.height?"transparent":"opaque";j="height width modes events primary base fallback volume".split(" ");for(m=0;m<j.length;m++){delete n[j[m]]}j=b.getCookies();b.foreach(j,function(q,x){"undefined"==typeof n[q]&&(n[q]=x)});j=window.location.href.split("/");j.splice(j.length-1,1);j=j.join("/");n.base=j+"/";h[g.id]=n;b.isIE()?(j='\x3cobject classid\x3d"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" " width\x3d"100%" height\x3d"100%"id\x3d"'+g.id+'" name\x3d"'+g.id+'" tabindex\x3d0""\x3e',j+='\x3cparam name\x3d"movie" value\x3d"'+f.src+'"\x3e',j+='\x3cparam name\x3d"allowfullscreen" value\x3d"true"\x3e\x3cparam name\x3d"allowscriptaccess" value\x3d"always"\x3e',j+='\x3cparam name\x3d"seamlesstabbing" value\x3d"true"\x3e',j+='\x3cparam name\x3d"wmode" value\x3d"'+k+'"\x3e',j+='\x3cparam name\x3d"bgcolor" value\x3d"#000000"\x3e',j+="\x3c/object\x3e",g.outerHTML=j,k=document.getElementById(g.id)):(j=document.createElement("object"),j.setAttribute("type","application/x-shockwave-flash"),j.setAttribute("data",f.src),j.setAttribute("width","100%"),j.setAttribute("height","100%"),j.setAttribute("bgcolor","#000000"),j.setAttribute("id",g.id),j.setAttribute("name",g.id),j.setAttribute("tabindex",0),l(j,"allowfullscreen","true"),l(j,"allowscriptaccess","always"),l(j,"seamlesstabbing","true"),l(j,"wmode",k),g.parentNode.replaceChild(j,g),k=j);v.config.aspectratio&&(k.style.position="absolute");v.container=k;v.setPlayer(k,"flash")};this.supportsConfig=function(){if(o){if(t){if("string"==b.typeOf(t.playlist)){return !0}try{var j=t.playlist[0].sources;if("undefined"==typeof j){return !0}for(var k=0;k<j.length;k++){if(j[k].file&&d(j[k].file,j[k].type)){return !0}}}catch(m){}}else{return !0}}return !1}}).getVars=function(f){return h[f]};var d=c.embed.flashCanPlay=function(g,a){if(b.isYouTube(g)||b.isRtmp(g,a)||"hls"==a){return !0}var j=b.extensionmap[a?a:b.extension(g)];return !j?!1:!!j.flash}}(jwplayer),function(c){var b=c.utils,f=b.extensionmap,d=c.events;c.embed.html5=function(j,i,g,l,a){function r(h,m,n){return function(){try{var p=document.querySelector("#"+j.id+" .jwmain");n&&p.appendChild(m);"function"==typeof h.resize&&(h.resize(p.clientWidth,p.clientHeight),setTimeout(function(){h.resize(p.clientWidth,p.clientHeight)},400));m.left=p.style.left;m.top=p.style.top}catch(q){}}}function k(h){t.sendEvent(h.type,{message:"HTML5 player not found"})}var t=this,o=new d.eventdispatcher;b.extend(t,o);t.embed=function(){if(c.html5){l.setupPlugins(a,g,r);j.innerHTML="";var h=c.utils.extend({},g);delete h.volume;h=new c.html5.player(h);a.container=document.getElementById(a.id);a.setPlayer(h,"html5")}else{h=new b.scriptloader(i.src),h.addEventListener(d.ERROR,k),h.addEventListener(d.COMPLETE,t.embed),h.load()}};t.supportsConfig=function(){if(c.vid.canPlayType){try{if("string"==b.typeOf(g.playlist)){return !0}for(var v=g.playlist[0].sources,w=0;w<v.length;w++){var x;var z=v[w].file,B=v[w].type;if(null!==navigator.userAgent.match(/BlackBerry/i)||b.isAndroid()&&("m3u"==b.extension(z)||"m3u8"==b.extension(z))||b.isRtmp(z,B)){x=!1}else{var E=f[B?B:b.extension(z)],C;if(!E||E.flash&&!E.html5){C=!1}else{var D=E.html5,F=c.vid;if(D){try{C=F.canPlayType(D)?!0:!1}catch(u){C=!1}}else{C=!0}}x=C}if(x){return !0}}}catch(G){}}return !1}}}(jwplayer),function(c){var b=c.embed,f=c.utils,d=/\.(js|swf)$/;c.embed=f.extend(function(l){function i(){C="Adobe SiteCatalyst Error: Could not find Media Module"}var g=f.repo(),y=f.extend({},c.defaults),a=f.extend({},y,l.config),A=l.config,o=a.plugins,B=a.analytics,z=g+"jwpsrv.js",x=g+"sharing.js",w=g+"related.js",E=g+"gapro.js",y=c.key?c.key:y.key,D=(new c.utils.key(y)).edition(),C,o=o?o:{};"ads"==D&&a.advertising&&(d.test(a.advertising.client)?o[a.advertising.client]=a.advertising:o[g+a.advertising.client+".js"]=a.advertising);delete A.advertising;A.key=y;a.analytics&&d.test(a.analytics.client)&&(z=a.analytics.client);delete A.analytics;B&&"ads"!==D&&delete B.enabled;if("free"==D||!B||!1!==B.enabled){o[z]=B?B:{}}delete o.sharing;delete o.related;switch(D){case"ads":if(A.sitecatalyst){try{window.s&&window.s.hasOwnProperty("Media")?new c.embed.sitecatalyst(l):i()}catch(F){i()}}case"premium":a.related&&(d.test(a.related.client)&&(w=a.related.client),o[w]=a.related),a.ga&&(d.test(a.ga.client)&&(E=a.ga.client),o[E]=a.ga);case"pro":a.sharing&&(d.test(a.sharing.client)&&(x=a.sharing.client),o[x]=a.sharing),a.skin&&(A.skin=a.skin.replace(/^(beelden|bekle|five|glow|modieus|roundster|stormtrooper|vapor)$/i,f.repo()+"skins/$1.xml"))}A.plugins=o;l.config=A;l=new b(l);C&&l.errorScreen(C);return l},c.embed)}(jwplayer),function(c){var b=jwplayer.utils;c.sitecatalyst=function(o){function t(d){a.debug&&b.log(d)}function r(d){d=d.split("/");d=d[d.length-1];d=d.split("?");return d[0]}function l(){if(!x){x=!0;var d=y.getPosition();t("stop: "+v+" : "+d);s.Media.stop(v,d)}}function i(){w||(l(),w=!0,t("close: "+v),s.Media.close(v),C=!0,z=0)}var y=o,a=b.extend({},y.config.sitecatalyst),A={onPlay:function(){if(!C){var d=y.getPosition();x=!1;t("play: "+v+" : "+d);s.Media.play(v,d)}},onPause:l,onBuffer:l,onIdle:i,onPlaylistItem:function(f){try{C=!0;i();z=0;var j;if(a.mediaName){j=a.mediaName}else{var h=y.getPlaylistItem(f.index);j=h.title?h.title:h.file?r(h.file):h.sources&&h.sources.length?r(h.sources[0].file):""}v=j;B=a.playerName?a.playerName:y.id}catch(m){b.log(m)}},onTime:function(){if(C){var d=y.getDuration();if(-1==d){return}w=x=C=!1;t("open: "+v+" : "+d+" : "+B);s.Media.open(v,d,B);t("play: "+v+" : 0");s.Media.play(v,0)}d=y.getPosition();if(3<=Math.abs(d-z)){var f=z;t("seek: "+f+" to "+d);t("stop: "+v+" : "+f);s.Media.stop(v,f);t("play: "+v+" : "+d);s.Media.play(v,d)}z=d},onComplete:i},v,B,z,x=!0,w=!0,C;b.foreach(A,function(d){y[d](A[d])})}}(jwplayer.embed),function(j,b){var o=[],n=j.utils,k=j.events,i=k.state,h=document,p=j.api=function(c){function C(l,q){return function(r){return q(l,r)}}function f(l,q){G[l]||(G[l]=[],D(k.JWPLAYER_PLAYER_STATE,function(r){var t=r.newstate;r=r.oldstate;if(t==l){var u=G[t];if(u){for(var w=0;w<u.length;w++){var v=u[w];"function"==typeof v&&v.call(this,{oldstate:r,newstate:t})}}}}));G[l].push(q);return g}function E(l,q){try{l.jwAddEventListener(q,'function(dat) { jwplayer("'+g.id+'").dispatchEvent("'+q+'", dat); }')}catch(r){n.log("Could not add internal listener")}}function D(l,q){H[l]||(H[l]=[],F&&I&&E(F,l));H[l].push(q);return g}function m(){if(I){if(F){var l=Array.prototype.slice.call(arguments,0),q=l.shift();if("function"===typeof F[q]){switch(l.length){case 6:return F[q](l[0],l[1],l[2],l[3],l[4],l[5]);case 5:return F[q](l[0],l[1],l[2],l[3],l[4]);case 4:return F[q](l[0],l[1],l[2],l[3]);case 3:return F[q](l[0],l[1],l[2]);case 2:return F[q](l[0],l[1]);case 1:return F[q](l[0])}return F[q]()}}return null}J.push(arguments)}var g=this,H={},G={},F,I=!1,J=[],K,M={},a={};g.container=c;g.id=c.id;g.getBuffer=function(){return m("jwGetBuffer")};g.getContainer=function(){return g.container};g.addButton=function(l,q,r,t){try{a[t]=r,m("jwDockAddButton",l,q,"jwplayer('"+g.id+"').callback('"+t+"')",t)}catch(u){n.log("Could not add dock button"+u.message)}};g.removeButton=function(l){m("jwDockRemoveButton",l)};g.callback=function(l){if(a[l]){a[l]()}};g.forceState=function(l){m("jwForceState",l);return g};g.releaseState=function(){return m("jwReleaseState")};g.getDuration=function(){return m("jwGetDuration")};g.getFullscreen=function(){return m("jwGetFullscreen")};g.getHeight=function(){return m("jwGetHeight")};g.getLockState=function(){return m("jwGetLockState")};g.getMeta=function(){return g.getItemMeta()};g.getMute=function(){return m("jwGetMute")};g.getPlaylist=function(){var l=m("jwGetPlaylist");"flash"==g.renderingMode&&n.deepReplaceKeyName(l,["__dot__","__spc__","__dsh__","__default__"],["."," ","-","default"]);return l};g.getPlaylistItem=function(l){n.exists(l)||(l=g.getPlaylistIndex());return g.getPlaylist()[l]};g.getPlaylistIndex=function(){return m("jwGetPlaylistIndex")};g.getPosition=function(){return m("jwGetPosition")};g.getRenderingMode=function(){return g.renderingMode};g.getState=function(){return m("jwGetState")};g.getVolume=function(){return m("jwGetVolume")};g.getWidth=function(){return m("jwGetWidth")};g.setFullscreen=function(l){n.exists(l)?m("jwSetFullscreen",l):m("jwSetFullscreen",!m("jwGetFullscreen"));return g};g.setMute=function(l){n.exists(l)?m("jwSetMute",l):m("jwSetMute",!m("jwGetMute"));return g};g.lock=function(){return g};g.unlock=function(){return g};g.load=function(l){m("jwLoad",l);return g};g.playlistItem=function(l){m("jwPlaylistItem",parseInt(l,10));return g};g.playlistPrev=function(){m("jwPlaylistPrev");return g};g.playlistNext=function(){m("jwPlaylistNext");return g};g.resize=function(l,q){if("flash"!==g.renderingMode){m("jwResize",l,q)}else{var r=h.getElementById(g.id+"_wrapper"),t=h.getElementById(g.id+"_aspect");t&&(t.style.display="none");r&&(r.style.display="block",r.style.width=n.styleDimension(l),r.style.height=n.styleDimension(q))}return g};g.play=function(l){l===b?(l=g.getState(),l==i.PLAYING||l==i.BUFFERING?m("jwPause"):m("jwPlay")):m("jwPlay",l);return g};g.pause=function(l){l===b?(l=g.getState(),l==i.PLAYING||l==i.BUFFERING?m("jwPause"):m("jwPlay")):m("jwPause",l);return g};g.stop=function(){m("jwStop");return g};g.seek=function(l){m("jwSeek",l);return g};g.setVolume=function(l){m("jwSetVolume",l);return g};g.createInstream=function(){return new p.instream(this,F)};g.setInstream=function(l){return K=l};g.loadInstream=function(l,q){K=g.setInstream(g.createInstream()).init(q);K.loadItem(l);return K};g.getQualityLevels=function(){return m("jwGetQualityLevels")};g.getCurrentQuality=function(){return m("jwGetCurrentQuality")};g.setCurrentQuality=function(l){m("jwSetCurrentQuality",l)};g.getCaptionsList=function(){return m("jwGetCaptionsList")};g.getCurrentCaptions=function(){return m("jwGetCurrentCaptions")};g.setCurrentCaptions=function(l){m("jwSetCurrentCaptions",l)};g.getControls=function(){return m("jwGetControls")};g.getSafeRegion=function(){return m("jwGetSafeRegion")};g.setControls=function(l){m("jwSetControls",l)};g.destroyPlayer=function(){m("jwPlayerDestroy")};g.playAd=function(l){var q=j(g.id).plugins;q.vast&&q.vast.jwPlayAd(l)};g.pauseAd=function(){var l=j(g.id).plugins;l.vast?l.vast.jwPauseAd():m("jwPauseAd")};var L={onBufferChange:k.JWPLAYER_MEDIA_BUFFER,onBufferFull:k.JWPLAYER_MEDIA_BUFFER_FULL,onError:k.JWPLAYER_ERROR,onSetupError:k.JWPLAYER_SETUP_ERROR,onFullscreen:k.JWPLAYER_FULLSCREEN,onMeta:k.JWPLAYER_MEDIA_META,onMute:k.JWPLAYER_MEDIA_MUTE,onPlaylist:k.JWPLAYER_PLAYLIST_LOADED,onPlaylistItem:k.JWPLAYER_PLAYLIST_ITEM,onPlaylistComplete:k.JWPLAYER_PLAYLIST_COMPLETE,onReady:k.API_READY,onResize:k.JWPLAYER_RESIZE,onComplete:k.JWPLAYER_MEDIA_COMPLETE,onSeek:k.JWPLAYER_MEDIA_SEEK,onTime:k.JWPLAYER_MEDIA_TIME,onVolume:k.JWPLAYER_MEDIA_VOLUME,onBeforePlay:k.JWPLAYER_MEDIA_BEFOREPLAY,onBeforeComplete:k.JWPLAYER_MEDIA_BEFORECOMPLETE,onDisplayClick:k.JWPLAYER_DISPLAY_CLICK,onControls:k.JWPLAYER_CONTROLS,onQualityLevels:k.JWPLAYER_MEDIA_LEVELS,onQualityChange:k.JWPLAYER_MEDIA_LEVEL_CHANGED,onCaptionsList:k.JWPLAYER_CAPTIONS_LIST,onCaptionsChange:k.JWPLAYER_CAPTIONS_CHANGED,onAdError:k.JWPLAYER_AD_ERROR,onAdClick:k.JWPLAYER_AD_CLICK,onAdImpression:k.JWPLAYER_AD_IMPRESSION,onAdTime:k.JWPLAYER_AD_TIME,onAdComplete:k.JWPLAYER_AD_COMPLETE,onAdCompanions:k.JWPLAYER_AD_COMPANIONS,onAdSkipped:k.JWPLAYER_AD_SKIPPED};n.foreach(L,function(l){g[l]=C(L[l],D)});var d={onBuffer:i.BUFFERING,onPause:i.PAUSED,onPlay:i.PLAYING,onIdle:i.IDLE};n.foreach(d,function(l){g[l]=C(d[l],f)});g.remove=function(){if(!I){throw"Cannot call remove() before player is ready"}J=[];p.destroyPlayer(this.id)};g.setup=function(l){if(j.embed){var q=h.getElementById(g.id);q&&(l.fallbackDiv=q);q=g;J=[];p.destroyPlayer(q.id);q=j(g.id);q.config=l;(new j.embed(q)).embed();return q}return g};g.registerPlugin=function(l,q,r,t){j.plugins.registerPlugin(l,q,r,t)};g.setPlayer=function(l,q){F=l;g.renderingMode=q};g.detachMedia=function(){if("html5"==g.renderingMode){return m("jwDetachMedia")}};g.attachMedia=function(l){if("html5"==g.renderingMode){return m("jwAttachMedia",l)}};g.removeEventListener=function(l,q){var r=H[l];if(r){for(var t=r.length;t--;){r[t]===q&&r.splice(t,1)}}};g.dispatchEvent=function(l,q){var r=H[l];if(r){for(var r=r.slice(0),t=n.translateEventResponse(l,q),u=0;u<r.length;u++){var w=r[u];if("function"===typeof w){try{l===k.JWPLAYER_PLAYLIST_LOADED&&n.deepReplaceKeyName(t.playlist,["__dot__","__spc__","__dsh__","__default__"],["."," ","-","default"]),w.call(this,t)}catch(v){n.log("There was an error calling back an event handler")}}}}};g.dispatchInstreamEvent=function(l){K&&K.dispatchEvent(l,arguments)};g.callInternal=m;g.playerReady=function(l){I=!0;F||g.setPlayer(h.getElementById(l.id));g.container=h.getElementById(g.id);n.foreach(H,function(q){E(F,q)});D(k.JWPLAYER_PLAYLIST_ITEM,function(){M={}});D(k.JWPLAYER_MEDIA_META,function(q){n.extend(M,q.metadata)});for(g.dispatchEvent(k.API_READY);0<J.length;){m.apply(this,J.shift())}};g.getItemMeta=function(){return M};g.isBeforePlay=function(){return m("jwIsBeforePlay")};g.isBeforeComplete=function(){return m("jwIsBeforeComplete")};return g};p.selectPlayer=function(c){var f;n.exists(c)||(c=0);c.nodeType?f=c:"string"==typeof c&&(f=h.getElementById(c));return f?(c=p.playerById(f.id))?c:p.addPlayer(new p(f)):"number"==typeof c?o[c]:null};p.playerById=function(d){for(var f=0;f<o.length;f++){if(o[f].id==d){return o[f]}}return null};p.addPlayer=function(d){for(var f=0;f<o.length;f++){if(o[f]==d){return d}}o.push(d);return d};p.destroyPlayer=function(c){for(var g=-1,m,l=0;l<o.length;l++){o[l].id==c&&(g=l,m=o[l])}0<=g&&(c=m.id,l=h.getElementById(c+("flash"==m.renderingMode?"_wrapper":"")),n.clearCss&&n.clearCss("#"+c),l&&("html5"==m.renderingMode&&m.destroyPlayer(),m=h.createElement("div"),m.id=c,l.parentNode.replaceChild(m,l)),o.splice(g,1));return null};j.playerReady=function(d){var f=j.api.playerById(d.id);f?f.playerReady(d):j.api.selectPlayer(d.id).playerReady(d)}}(window.jwplayer),function(c){var b=c.events,f=c.utils,d=b.state;c.api.instream=function(k,i){function g(h,n){l[h]||(l[h]=[],i.jwInstreamAddEventListener(h,'function(dat) { jwplayer("'+k.id+'").dispatchInstreamEvent("'+h+'", dat); }'));l[h].push(n);return this}function j(h,n){r[h]||(r[h]=[],g(b.JWPLAYER_PLAYER_STATE,function(p){var q=p.newstate,t=p.oldstate;if(q==h){var u=r[q];if(u){for(var v=0;v<u.length;v++){var w=u[v];"function"==typeof w&&w.call(this,{oldstate:t,newstate:q,type:p.type})}}}}));r[h].push(n);return this}var a,o,l={},r={},m=this;m.type="instream";m.init=function(){k.callInternal("jwInitInstream");return m};m.loadItem=function(h,n){a=h;o=n||{};"array"==f.typeOf(h)?k.callInternal("jwLoadArrayInstream",a,o):k.callInternal("jwLoadItemInstream",a,o)};m.removeEvents=function(){l=r={}};m.removeEventListener=function(h,n){var p=l[h];if(p){for(var q=p.length;q--;){p[q]===n&&p.splice(q,1)}}};m.dispatchEvent=function(h,n){var p=l[h];if(p){for(var p=p.slice(0),q=f.translateEventResponse(h,n[1]),t=0;t<p.length;t++){var u=p[t];"function"==typeof u&&u.call(this,q)}}};m.onError=function(h){return g(b.JWPLAYER_ERROR,h)};m.onMediaError=function(h){return g(b.JWPLAYER_MEDIA_ERROR,h)};m.onFullscreen=function(h){return g(b.JWPLAYER_FULLSCREEN,h)};m.onMeta=function(h){return g(b.JWPLAYER_MEDIA_META,h)};m.onMute=function(h){return g(b.JWPLAYER_MEDIA_MUTE,h)};m.onComplete=function(h){return g(b.JWPLAYER_MEDIA_COMPLETE,h)};m.onPlaylistComplete=function(h){return g(b.JWPLAYER_PLAYLIST_COMPLETE,h)};m.onPlaylistItem=function(h){return g(b.JWPLAYER_PLAYLIST_ITEM,h)};m.onTime=function(h){return g(b.JWPLAYER_MEDIA_TIME,h)};m.onBuffer=function(h){return j(d.BUFFERING,h)};m.onPause=function(h){return j(d.PAUSED,h)};m.onPlay=function(h){return j(d.PLAYING,h)};m.onIdle=function(h){return j(d.IDLE,h)};m.onClick=function(h){return g(b.JWPLAYER_INSTREAM_CLICK,h)};m.onInstreamDestroyed=function(h){return g(b.JWPLAYER_INSTREAM_DESTROYED,h)};m.onAdSkipped=function(h){return g(b.JWPLAYER_AD_SKIPPED,h)};m.play=function(h){i.jwInstreamPlay(h)};m.pause=function(h){i.jwInstreamPause(h)};m.hide=function(){k.callInternal("jwInstreamHide")};m.destroy=function(){m.removeEvents();k.callInternal("jwInstreamDestroy")};m.setText=function(h){i.jwInstreamSetText(h?h:"")};m.getState=function(){return i.jwInstreamState()};m.setClick=function(h){i.jwInstreamClick&&i.jwInstreamClick(h)}}}(window.jwplayer),function(c){var b=c.api,d=b.selectPlayer;b.selectPlayer=function(f){return(f=d(f))?f:{registerPlugin:function(g,i,h){c.plugins.registerPlugin(g,i,h)}}}}(jwplayer));jwplayer.key="5yLO/xjOfcFQoR0/ERhaESsJctWUm5j6T+IaUWsLUac=";function Collection(){this.moCollectionToVForm=new Object();this.moVFormToCollection=new Object()}Collection.prototype={Add:function(a,b){var d=false;var c=true;if(!Utils.IsString(a)){c=false}if(!Utils.IsString(b)){c=false}if(c){if(!(a in this.moCollectionToVForm)){this.moCollectionToVForm[a]=new FastArray()}if(!(b in this.moVFormToCollection)){this.moVFormToCollection[b]=new FastArray()}if(this.moCollectionToVForm[a].PushIfNotExists(b)&&this.moVFormToCollection[b].PushIfNotExists(a)){d=true}}return d},GetVFormIndexes:function(a){var c=true;var g=null;if(!Utils.IsString(a)){c=false}if(c){g=new Object();if(a in this.moVFormToCollection){var b=this.moVFormToCollection[a].GetArray();for(var d=0,f=b.length;d<f;d++){var h=b[d];g[h]=this.moCollectionToVForm[h].GetIndex(a).toString()}}}return g},GetVFormList:function(a){var b=true;var c=null;if(!Utils.IsString(a)){b=false}if(b){if(a in this.moCollectionToVForm){c=this.moCollectionToVForm[a].GetArray()}else{if(a==""){c=new Array();for(var d in Matrix3.moVFormTable){c.push(d)}}else{c=new Array()}}}return c},IsVFormInCollection:function(b,a){var d=false;var c=true;if(!Utils.IsString(b)){c=false}if(!Utils.IsString(a)){c=false}if(c){if(a in this.moCollectionToVForm){d=this.moCollectionToVForm[a].Exists(b)}}else{if(a==""){d=true}}return d}};function EventItem(f,c,d,i,g,h,b,a){if(Utils.IsString(f)){this.msSourceVForm=f}else{this.msSourceVForm=null}if(Utils.IsString(c)||c==null){this.msSourceEvent=c}else{this.msSourceEvent=null}if(Utils.IsString(d)&&(d==Matrix3.Const.RETURNTYPE_FULL||d==Matrix3.Const.RETURNTYPE_VIEWSTATE)){this.msSourceType=d}else{this.msSourceType=null}if(Utils.IsString(i)||i==null){this.msTargetVForm=i}else{this.msTargetVForm=null}if(Utils.IsString(g)||g==null){this.msTargetEvent=g}else{this.msTargetEvent=null}if((Utils.IsString(h)&&(h==Matrix3.Const.RETURNTYPE_FULL||h==Matrix3.Const.RETURNTYPE_VIEWSTATE))||h==null){this.msTargetType=h}else{this.msTargetType=null}if(Utils.IsString(b)&&(b==Matrix3.Const.DELAY_BUFFERED||b==Matrix3.Const.DELAY_IMMEDIAT)){this.msEventDelay=b}else{this.msEventDelay=null}this.msArgs=a}EventItem.Const={SEPARATOR:"|",SOURCE_VFORM:"SVF",SOURCE_EVENT:"SE",SOURCE_TYPE:"SRT",TARGET_VFORM:"TVF",TARGET_VFORM_SUB_ID:"TVFS",TARGET_EVENT:"TE",TARGET_TYPE:"TRT",DELAY:"D",ARGUMENTS:"ARGS"};EventItem.CreateID=function(b,a,d,c){var f=null;if(Utils.IsString(b)&&(a==null||Utils.IsString(a))&&(d==null||Utils.IsString(d))&&(c==null||Utils.IsString(c))){f=b;if(a!=null){f+=EventItem.Const.SEPARATOR+a}if(d!=null){f+=EventItem.Const.SEPARATOR+d}if(c!=null){f+=EventItem.Const.SEPARATOR+c}}else{}return f};EventItem.prototype={GetSourceVForm:function(){return this.msSourceVForm},GetSourceType:function(){return this.msSourceType},GetTargetVForm:function(){return this.msTargetVForm},GetTargetType:function(){return this.msTargetType},GetID:function(){return EventItem.CreateID(this.msSourceVForm,this.msSourceEvent,this.msTargetVForm,this.msTargetEvent)},GetObjectToSerialize:function(){var a=new Object();if(Utils.IsString(this.msSourceVForm)){a[EventItem.Const.SOURCE_VFORM]=this.msSourceVForm}if(Utils.IsString(this.msSourceEvent)){a[EventItem.Const.SOURCE_EVENT]=this.msSourceEvent}if(Utils.IsString(this.msTargetVForm)){a[EventItem.Const.TARGET_VFORM]=this.msTargetVForm;a[EventItem.Const.TARGET_VFORM_SUB_ID]=this.GetSubID(this.msTargetVForm)}if(Utils.IsString(this.msTargetEvent)){a[EventItem.Const.TARGET_EVENT]=this.msTargetEvent}if(Utils.IsString(this.msEventDelay)){a[EventItem.Const.DELAY]=this.msEventDelay}if(Utils.IsString(this.msArgs)){a[EventItem.Const.ARGUMENTS]=this.msArgs}return a},GetSubID:function(a){var c=null;var b=Matrix3.GetVFormInfoItem(a);if(b){c=b.GetSubID()}return c}};function EventTable(){this.moEventList=new Array();this.moEventTable=new Object()}EventTable.prototype={AddEventItem:function(a){var b=false;if(a instanceof EventItem){this.moEventList.push(a);this.moEventTable[a.GetID()]=this.moEventList.length-1;b=true}else{}return b},Merge:function(a){var b=false;if(a instanceof EventTable){var h=a.GetEventList();for(var c=0,f=h.length;c<f;c++){var k=h[c];if(k.GetID() in this.moEventTable){if(k.msEventArgs&&this.moEventTable[k.GetID()].msEventArgs==k.msEventArgs){this.moEventList.splice(this.moEventTable[k.GetID()],1);for(var d=0,g=this.moEventList.length;d<g;d++){this.moEventTable[this.moEventList[d].GetID()]=d}}}this.moEventList.push(k)}for(var c=0,f=this.moEventList.length;c<f;c++){this.moEventTable[this.moEventList[c].GetID()]=c}}else{}return b},GetEventList:function(){return this.moEventList},Serialize:function(){var c=new Array();for(var a=0,b=this.moEventList.length;a<b;a++){c.push(this.moEventList[a].GetObjectToSerialize())}var d=JSON.stringify(c);return d}};var Matrix3={Init:function(){try{this.miStartTime=new Date().getTime();this.AddLoading();this.AddPositioning();this.mbContentIsLoaded=true;this.moEventTable=new EventTable();this.moTriggerTable=new TriggerTable();this.moVFormTable=new Object();this.moPopupTable=new Object();this.maPopupStack=new Array();this.maPopupForceCenteringStack=new Array();this.moCollection=new Collection();this.miVersion=null;this.msScript="";this.msWaitMsg="";this.maPrePositionCalls=new Array();this.miReloadTimeout;this.mbProducingPostBack=false;this.mbPostBackRequested=false;this.msAjaxToken="";this.msLastEventSkinFamily=null;this.moEffects=new Object();this.mbIsInit=true;this.mbEvent=true;this.mbModal=true;this.mbIsParameterPage=false;this.maNodeToExtract=new Array();if(typeof(Storage)!=="undefined"){var c=+new Date();if(localStorage.EnableMatrixTrackingUntil&&localStorage.EnableMatrixTrackingUntil>c){localStorage.MatrixTrace+="Page loaded: "+window.location.href+"<br/>";$("body").click(function(i){var n=i.target;while(n!=null&&!n.id){n=n.parentNode}localStorage.MatrixTrace+="Clicked on:"+n.id+"<br/>"})}}var k=document.createElement("div");var j=$Elt(Matrix3.Const.HIDDENFIELDS);if(j){k.appendChild(j)}var h=$Elt(Matrix3.Const.LAYER_VFORMS);if(h){var g=new Array();var f=h.childNodes;for(var b=0,d=f.length;b<d;b++){g.push(f[b])}for(var b=0,d=g.length;b<d;b++){k.appendChild(g[b])}}ResizeMgr.GetInstance().ExportScreenToLists();ControlMgr.GetInstance().CreateControl(null);if(!Utils.IsIE()){CacheMgr.GetInstance().LoadCache()}var m=this;function l(){try{if(jQuery.browser.safari&&document.readyState!="complete"){throw"Waiting Loading"}var p=document.styleSheets;for(var n=0,o=p.length;n<o;n++){if(Utils.StartsWith(p[n].href,HistoryMgr.GetBaseURL())){p[n].cssRules}}window.setTimeout(function(){var r=Matrix3.PreRender(k);Matrix3.Render(r);var q=m;$(document).keydown(function(t){return q.KeyPressCallback(t)});m.msLastViewportSize=Utils.GetViewportWidth()+"x"+Utils.GetViewportHeight();Utils.AddEvent(window,"resize",function(){Utils.ClearViewPortCache();var u=Utils.GetViewportWidth()+"x"+Utils.GetViewportHeight();if(u!=Matrix3.msLastViewportSize){Matrix3.msLastViewportSize=u;DragDropMgr.RefreshCache();$.ajax({type:"GET",url:"htm/Resolution.aspx?W="+Utils.GetViewportWidth()+"&H="+Utils.GetViewportHeight()});var t=false;for(var v in Matrix3.moPopupTable){t=true;break}if(!t&&!Matrix3.mbBlockReloadOnResize){if(Matrix3.miReloadTimeout){clearTimeout(Matrix3.miReloadTimeout)}Matrix3.miReloadTimeout=setTimeout(function(){window.location.href=Matrix3.msURL},500)}}});Utils.AddEvent(window,"mousemove",function(t){Utils.GetMousePosition(t)});Utils.AddEvent(document.body,"click",function(t){t=$.event.fix(t);var u=t.target;if(u&&u.nodeName==="INPUT"){var v=u.parentNode;if(v!=null){if(u.checked){$AddClass(v,"Checked")}else{$RemoveClass(v,"Checked")}}}});HistoryMgr.GetInstance().Init();Utils.AddEvent(window,"resize",ResizeMgr.GetInstance().Resize,ResizeMgr.GetInstance())},50)}catch(i){window.setTimeout(l,25)}}window.setTimeout(l,5)}catch(a){Matrix3.LogError(a)}},GetTriggerTable:function(){return this.moTriggerTable},StartCMS:function(){this.moCMS=new CMS();this.moCMS.Start()},RefreshCMS:function(){if(typeof this.moCMS!="undefined"){this.moCMS.Refresh()}else{this.StartCMS()}},GetSelectGroupCommandEventTable:function(f,c,d,g,b,a){var t=new EventTable();var l=a.split(",");for(var n=0,o=l.length;n<o;n++){var z=Utils.Trim(l[n]);if(z!=""){var j=MultipleSelectionMgr.GetInstance().GetObjects(z,MultipleSelectionMgr.Const.FLAG_SELECTED);var h=new Array();if(j!=null){for(var n=0,p=j.length;n<p;n++){var q=new Object();var w=j[n];var A=w.GetID();var m=A.split(Matrix3.Const.SEPARATOR_CONTROL);q[Matrix3.Const.ARG_VFORMID]=m[0];var y=null;if(m.length>0){q[Matrix3.Const.ARG_CONTROL]=m[1]}var z=null;var u=null;if(A in MultipleSelectionMgr.GetInstance().moSelectionItemGroups){u=MultipleSelectionMgr.GetInstance().moSelectionItemGroups[A];if(u!=null){var k=u.GetArray();if(k.length>0){q[Matrix3.Const.ARG_GROUPS]=k.join(",")}}}var r=new EventItem(f,c,d,q[Matrix3.Const.ARG_VFORMID],Matrix3.Const.EVENT_SELECT,g,b);t.AddEventItem(r);h.push(q)}}}}var x=JSON.stringify(h);var v=new Object();v[Matrix3.Const.COMMAND_EVENT]=t;v[Matrix3.Const.COMMAND_ARGS]=x;return v},GetDragCommandEventTable:function(f,c,d,g,b,a){var l=new EventTable();if(Utils.IsArray(a)){for(var h=0,j=a.length;h<j;h++){var k=new EventItem(f,c,d,a[h],Matrix3.Const.EVENT_DRAG,g,b);l.AddEventItem(k)}}else{}return l},GetReorderCommandEventTable:function(f,c,d,g,b,a){var n=new EventTable();if(Utils.IsArray(a)){var h=false;for(var j=0,k=a.length;j<k;j++){var m=this.moTriggerTable.GetEventTable(a[j],c,d,b,this.moCollection);if(m!=null){n.Merge(m);h=true}if(j!=0||!h){var l=new EventItem(a[j],c,d,a[j],c,g,b);n.AddEventItem(l)}}this.mbReorderOptimization=true}else{}return n},FinishLoad:function(){this.miNumberOfAction--;if(this.miNumberOfAction==0){Matrix3.PostRender()}},LoadEffects:function(a){this.moEffects=new Object();if(a){var b=a.split(Matrix3.Const.SEPARATOR_EFFECT);for(var d=0,f=b.length;d<f;d++){var c=b[d].split(Matrix3.Const.SEPARATOR_EFFECT_FUNCTION);if(c.length==2){this.moEffects[c[0]]=c[1]}}}},ShowWaitMsg:function(b,c,a){var i=Utils.GetOptions(a);if(b&&$S(Matrix3.Const.ID_WAIT_MSG,"display")=="none"){document.body.style.cursor="wait";$Elt(Matrix3.Const.ID_WAIT_MSG_CONTENT).innerHTML=b;var g=0;var h=0;$SetStyle(Matrix3.Const.ID_WAIT_MSG,"visibility","hidden");$SetStyle(Matrix3.Const.ID_WAIT_MSG,"display","block");if(Utils.IsSafari()&&c==Matrix3.Const.WAITMSG_MODE_POSTBACK){$SetStyle(Matrix3.Const.ID_WAIT_MSG_CLOSE,"display","block")}var f=Utils.GetAbsoluteWidth(Matrix3.Const.ID_WAIT_MSG);var d=Utils.GetAbsoluteHeight(Matrix3.Const.ID_WAIT_MSG);switch(c){case Matrix3.Const.WAITMSG_MODE_MOUSE:var g=Utils.GetMousePositionX();var h=Utils.GetMousePositionY();break;default:g=(Utils.GetViewportWidth()-f)/2+document.body.scrollLeft;h=(Utils.GetViewportHeight()-d)/2+document.body.scrollTop}if(g+f>Utils.GetViewportWidth()){g=Utils.GetViewportWidth()-f}if(h+d>Utils.GetViewportHeight()){h=Utils.GetViewportHeight()-d}$SetStyle(Matrix3.Const.ID_WAIT_MSG,"left",g+"px");$SetStyle(Matrix3.Const.ID_WAIT_MSG,"top",h+"px");$SetStyle(Matrix3.Const.ID_WAIT_MSG,"visibility","visible")}},HideWaitMsg:function(a){$SetStyle(Matrix3.Const.ID_WAIT_MSG,"display","none");document.body.style.cursor="auto";$SetStyle(Matrix3.Const.ID_WAIT_MSG_CLOSE,"display","none");if(a){Matrix3.RemoveLoading();this.mbEvent=false;this.mbModal=true}},AddEvent:function(l,j,k,g,c,d,f,n,i,m,a,o,b,h,p){try{if(!this.mbPreloading){if(typeof(Storage)!=="undefined"){var t=+new Date();if(localStorage.EnableMatrixTrackingUntil&&localStorage.EnableMatrixTrackingUntil>t){localStorage.MatrixTrace+="Event triggered: "+j+"<br/>"}}if(ParamMgr.mbHasUnsavedChanges){ParamMgr.QueueSaveEvents()}if(!a&&g!=Matrix3.Const.DELAY_BUFFERED){this.AddLoading();LoadingAjaxMgr.GetInstance().DisplayAll()}if(this.mbEvent){if(this.mbModal){return}else{if(this.moCurrentEvtRequest){this.moCurrentEvtRequest.abort()}}}if(g!=Matrix3.Const.DELAY_BUFFERED){this.mbEvent=true;Matrix3.ShowWaitMsg(o,p);if(UploadCtrl.miUploadInProgress>0){this.mbEvent=false;window.setTimeout(function(){Matrix3.AddEvent(l,j,k,g,c,d,f,n,i,m,true,o,b,h,p)},Matrix3.Const.RETRY_DELAY);return}}}var x=$PI(l);if(x&&x!=null){var y=x;var A=y.GetProperty(Matrix3.Const.VFORM_PROPERTY_SKIN_FAMILY_ALIAS);while((!A||A==null)&&(y&&y!=null)){y=y.moParent;if(y&&y!=null){A=y.GetProperty(Matrix3.Const.VFORM_PROPERTY_SKIN_FAMILY_ALIAS)}}if(A&&A!=null){this.msLastEventSkinFamily=A}else{this.msLastEventSkinFamily=ControlMgr.GetInstance().moRootPositionItem.GetProperty(Matrix3.Const.VFORM_PROPERTY_SKIN_FAMILY_ALIAS)}}this.LoadEffects(m);var q=true;if(!Utils.IsString(l)){if(this.mbHistory){window.location.reload(true)}q=false}if(!Utils.IsString(j)){q=false}if(k!=Matrix3.Const.RETURNTYPE_FULL&&k!=Matrix3.Const.RETURNTYPE_VIEWSTATE){q=false}if(g!=Matrix3.Const.DELAY_BUFFERED&&g!=Matrix3.Const.DELAY_IMMEDIAT){q=false}if(!Utils.IsString(c)){c=null}if(!(!d||d==""||(Utils.IsString(d)&&d==Matrix3.Const.COMMAND_MULTIPLE_SELECT_F)||(Utils.IsString(d)&&d==Matrix3.Const.COMMAND_MULTIPLE_SELECT_VS)||(Utils.IsString(d)&&d==Matrix3.Const.COMMAND_DROP_VS)||(Utils.IsString(d)&&d==Matrix3.Const.COMMAND_DROP_F)||(Utils.IsString(d)&&d==Matrix3.Const.COMMAND_REORDER))){q=false}if(q){var u=null;if(d!=Matrix3.Const.COMMAND_REORDER){var v=this.moTriggerTable.GetEventTable(l,j,k,g,this.moCollection,c);c=null;this.moEventTable.Merge(v)}switch(d){case Matrix3.Const.COMMAND_MULTIPLE_SELECT_F:var w=this.GetSelectGroupCommandEventTable(l,j,k,Matrix3.Const.RETURNTYPE_FULL,g,f);u=w[Matrix3.Const.COMMAND_EVENT];c=w[Matrix3.Const.COMMAND_ARGS];break;case Matrix3.Const.COMMAND_MULTIPLE_SELECT_VS:var w=this.GetSelectGroupCommandEventTable(l,j,k,Matrix3.Const.RETURNTYPE_VIEWSTATE,g,f);u=w[Matrix3.Const.COMMAND_EVENT];c=w[Matrix3.Const.COMMAND_ARGS];break;case Matrix3.Const.COMMAND_DROP_F:u=this.GetDragCommandEventTable(l,j,k,Matrix3.Const.RETURNTYPE_FULL,g,f);break;case Matrix3.Const.COMMAND_DROP_VS:u=this.GetDragCommandEventTable(l,j,k,Matrix3.Const.RETURNTYPE_VIEWSTATE,g,f);break;case Matrix3.Const.COMMAND_REORDER:u=this.GetReorderCommandEventTable(l,j,k,Matrix3.Const.RETURNTYPE_FULL,g,f)}if(u!=null){this.moEventTable.Merge(u)}if(g==Matrix3.Const.DELAY_IMMEDIAT){var z=this.GetPostBody(c,true,false,n);this.moCurrentEvtRequest=this.SendRequest(z,l)}}}catch(r){Matrix3.LogError(r)}return q},DoPostBack:function(d,c,a,b){var f=true;Matrix3.mbProducingPostBack=true;Matrix3.mbPostBackRequested=true;LoadingPostBackMgr.GetInstance().DisplayAll();Matrix3.ShowWaitMsg(b,Matrix3.Const.WAITMSG_MODE_POSTBACK);if(!Utils.IsString(d)){f=false}if(!Utils.IsString(c)){f=false}if(!Utils.IsString(a)){a=null}if(f){var m=this.moTriggerTable.GetEventTable(d,c,Matrix3.Const.RETURNTYPE_FULL,Matrix3.Const.DELAY_IMMEDIAT,this.moCollection);this.moEventTable.Merge(m);var j=this.GetPostBody(a,false);var n=[];for(var o in j){var k=$Elt(o);if(!k){k=document.createElement("input");k.id=o;k.name=o;k.type="hidden";document.getElementById(Matrix3.Const.ID_FORM).appendChild(k)}else{if(k.tagName=="DIV"){k=document.createElement("input");k.name=o;k.type="hidden";document.getElementById(Matrix3.Const.ID_FORM).appendChild(k)}}n.push(k);k.value=j[o]}document.getElementById(Matrix3.Const.ID_FORM).submit();for(var g=0,h=n.length;g<h;g++){var l=$(n[g]);if(l&&typeof l[0]==="object"){l.remove()}}Matrix3.PostRender(true)}Matrix3.mbProducingPostBack=false;return f},AddPositioning:function(){window.setTimeout('$SetStyle("'+Matrix3.Const.POSITIONING_MASK_ID+'", "width", 100 + "%");$SetStyle("'+Matrix3.Const.POSITIONING_MASK_ID+'", "height", 100 + "%");',1);return true},RemovePositioning:function(){$SetStyle(Matrix3.Const.POSITIONING_MASK_ID,"display","none")},AddLoading:function(){if(this.mbIsLoading){return false}this.mbIsLoading=true;if(AutoCompletionMgr){AutoCompletionMgr.DisableAll()}if(typeof this.moCMS!="undefined"){CMSLoader.Show()}else{var a=$Elt(Matrix3.Const.LOADING_PANEL_ID);$(a).css("display","block").stop().fadeTo(0,0).delay(250).fadeTo(250,1)}return true},AddPopup:function(a){var b=false;if(a!=null&&(a.id!=null&&a.id!=undefined&&a.id!="")){var c=$Elt(a.id);if(c!=null){this.RemovePopup(a.id,true)}a=this.EvalScript(a);var f=this.msLastEventSkinFamily;if($HasClass(a,Matrix3.Const.POPUP_CLASS_SKIN_FAMILY_SET)===true){f=null}var d=new Popup(a,f);d.Show();this.moPopupTable[d.msID]=d;this.maPopupStack.push(d.msID);if(d.mbIsForceCenteringEnabled==true){this.maPopupForceCenteringStack.push(d.msID)}b=true}else{}Matrix3.FinishLoad();return b},LoadPopup:function(a){if(typeof a=="string"&&a!=null&&a!=""){var b=document.getElementById(a);Matrix3.AddPopup(b)}},EvalScript:function(a){var b=true;if(a==null||!Utils.IsObject(a)||!a.childNodes){b=false}if(b){var f=a.getElementsByTagName("script");for(var c=0,d=f.length;c<d;c++){var g=f.item(c).innerHTML;if(Utils.IsString(g)&&g!=""){if(g.indexOf(Matrix3.Const.POST_RENDER_FUNCTION)!=-1){this.msScript+=" "+g.substring(0,g.length-2)+",true);"}else{this.msScript+=" "+Matrix3.Const.POST_RENDER_FUNCTION+g+"},true);"}}}while(f.length!=0){f.item(0).parentNode.removeChild(f.item(0))}}return a},AddVForm:function(b,f,d,c,g,a){var j=false;var i=true;if(b==null||b.id==null||b.id==undefined||b.id==""){i=false}if(!Utils.IsString(f)&&f!=null){i=false}if(d!=null&&!Utils.IsString(d)){i=false}var h=false;if(d=="*"){d=null;h=true}$SetStyle(b,"visibility","hidden");if(i){var m=$PI(b.id);if(this.mbFullPage){$Elt("BodyContent").GetNode().appendChild(b);ControlMgr.GetInstance().moRootPositionItem=m;Matrix3.FinishLoad()}else{var o;var n=ControlMgr.GetInstance().GetPositionItem(b.id,true);if(n!=null){o=n.moParent;var p=n.nextSibling;while(p!=null&&d==null){d=p.id;p=p.nextSibling;if(d==""){d=null}}}if(o==null&&Utils.IsString(f)){o=$PI(f)}if(o!=null){if(d!=null){var l=$PI(d);if(l==null){l=$Elt(d)}if(l!=null){var n=ControlMgr.GetInstance().GetPositionItem(b.id,true);if(n!=null&&n.moParent===o){this.NewRefreshCaches(n.GetId());n.CopyDependenciesTo(m);n.GetNode().parentNode.removeChild(n.GetNode());n.RecursiveRemove()}l=$Elt(d);if(l==null){var q=o.moContainerForChildrens;if(q){var k=0;while(l==null&&k<q.length){if(q[k].msId!=b.id){l=q[k]}k++}}}o.AddControl(m,n,l);VFormEffects[VFormEffects.Const.EFFECT_NONE].call(this,b,o.GetNode(),l);j=true}}else{var n=ControlMgr.GetInstance().GetPositionItem(b.id,true);if(h){var q=o.moContainerForChildrens;if(q&&q.length>0){l=q[0]}}o.AddControl(m,n,l);if(n!=null&&n.moParent===o){if(Matrix3.IsPopup(n.GetId())){$AddClass(b,"PopupContentClass")}this.NewRefreshCaches(n.GetId());n.CopyDependenciesTo(m);n.RecursiveRemove();n.GetNode().parentNode.replaceChild(b,n.GetNode());if(o!=null&&o.moParent!=null&&o.moParent.msCtrlType==PositionItem.Const.CONTROL_TYPE_PANEL_TABLE){PositionMgr.GetInstance().AddToDirtyXList(o.moParent);PositionMgr.GetInstance().AddToDirtyYList(o.moParent)}this.EvalScript(b);Matrix3.FinishLoad()}else{VFormEffects[VFormEffects.Const.EFFECT_NONE].call(this,b,o.GetNode());o.FixAddDependency(m)}j=true}if(o!=null&&(o.msCtrlType==PositionItem.Const.CONTROL_TYPE_FLOAT_PANEL||o.msCtrlType==PositionItem.Const.CONTROL_TYPE_PANEL_TABLE)){PositionMgr.GetInstance().AddToDirtyXList(o);PositionMgr.GetInstance().AddToDirtyYList(o)}this.Animate(c,m,o,n)}else{if(ControlMgr.GetInstance().GetReference("DebugSummary")){if(Utils.IsString(f)){this.LogWarning("Matrix3.AddVForm() : _sParentID ( "+f+" ) not found for VForm "+b.id)}else{this.LogWarning("Matrix3.AddVForm() : VForm with id "+b.id+" is not found in the page and its parent is not given. The VForm cannot be added...")}}j=true;Matrix3.FinishLoad()}}}return j},Animate:function(d,a,c,b){if(d&&c){var k=400;if(b){this.RemoveIDs(b.GetNode())}var f=new Array();var i=new Array();var g=new Array();var h=new Array();AddTransformTansition=function(l,q,p,o,n,m){l.style.webkitTransform=q;l.style.MozTransform=p;if(!Utils.IsIE()){l.style.webkitTransition="-webkit-transform "+k+"ms "+m;l.style.MozTransition="-moz-transform "+k+"ms "+m}f.push(l);i.push(o);g.push(n)};AddOpacityTansition=function(n,m,l,o){n.style.opacity=m.toString();if(!Utils.IsIE()){n.style.webkitTransition="opacity "+k+"ms "+o;n.style.MozTransition="opacity "+k+"ms "+o}f.push(n);h.push(l)};switch(d){case"CFR":if(b){c.GetNode().insertBefore(b.GetNode(),a.GetNode())}AddTransformTansition(a.GetNode(),"translate3D("+c.GetWidth()+"px, 0, 0)","translate("+c.GetWidth()+"px, 0)","translate3d(0, 0, 0)","translate(0, 0)","ease-out");break;case"UTR":if(b){c.GetNode().appendChild(b.GetNode());AddTransformTansition(b.GetNode(),"translate3D(0px, 0, 0)","translate(0px, 0)","translate3D("+c.GetWidth()+"px, 0, 0)","translate("+c.GetWidth()+"px, 0)","ease-in")}break;case"PFP":if(b){c.GetNode().appendChild(b.GetNode());var j=c.GetWidth()/2;AddTransformTansition(b.GetNode(),"perspective(3000) translate3d(0, 0, 0px) rotate3d(0, 1, 0, 0deg)","translate(0, 0)","perspective(3000) translate3d("+j+"px, 0, "+j+"px) rotate3d(0, 1, 0, 90deg)","translate("+c.GetWidth()+"px, 0)","ease-in")}break;case"PFN":if(b){c.GetNode().insertBefore(b.GetNode(),a.GetNode());var j=c.GetWidth()/2;AddTransformTansition(a.GetNode(),"perspective(3000) translate3d("+j+"px, 0, "+j+"px) rotate3d(0, 1, 0, 90deg)","translate("+c.GetWidth()+"px, 0)","perspective(3000) translate3d(0, 0, 0px) rotate3d(0, 1, 0, 0deg)","translate(0, 0)","ease-in")}break;case"STL":if(b){c.GetNode().appendChild(b.GetNode());AddTransformTansition(b.GetNode(),"translate3d(0, 0, 0)","translate(0, 0)","translate3D(-"+c.GetWidth()+"px, 0, 0)","translate(-"+c.GetWidth()+"px, 0)","ease-out")}AddTransformTansition(a.GetNode(),"translate3D("+c.GetWidth()+"px, 0, 0)","translate("+c.GetWidth()+"px, 0)","translate3d(0, 0, 0)","translate(0, 0)","ease-out");break;case"STR":if(b){c.GetNode().appendChild(b.GetNode());AddTransformTansition(b.GetNode(),"translate3D(0px, 0, 0)","translate(0px, 0)","translate3D("+c.GetWidth()+"px, 0, 0)","translate("+c.GetWidth()+"px, 0)","ease-out")}AddTransformTansition(a.GetNode(),"translate3D(-"+c.GetWidth()+"px, 0, 0)","translate(-"+c.GetWidth()+"px, 0)","translate3D(0px, 0, 0)","translate(0px, 0)","ease-out");break;case"CF":if(b){c.GetNode().insertBefore(b.GetNode(),a.GetNode());AddOpacityTansition(b.GetNode(),1,0,"ease-out")}AddOpacityTansition(a.GetNode(),0,1,"ease-out");break}if(f.length>0){setTimeout(function(){while(f.length>0){var l=f.pop();if(i.length>0){l.style.webkitTransform=i.pop();l.style.MozTransform=g.pop()}if(h.length>0){l.style.opacity=h.pop().toString()}}if(b){setTimeout(function(){b.GetNode().style.visiblity="hidden"},k);setTimeout(function(){if(b.GetNode().parentNode){b.GetNode().parentNode.removeChild(b.GetNode())}},k+200)}},0)}}},RemoveIDs:function(f){var d=CacheMgr.GetInstance();d.RefreshNode(f.id);f.id=null;var g="";var a=f,b=null;do{b=a.firstChild;if(b==null){d.RefreshNode(a.id);if(a.id){a.id=null}b=a.nextSibling}if(b==null){var h=a;do{b=h.parentNode;if(b==f){break}d.RefreshNode(b.id);if(b.id){b.id=null}h=b;b=b.nextSibling}while(b==null)}a=b}while(a!=f);return g},RefreshNode:function(a){var b=false;if(a.type=="hidden"&&a.name==Matrix3.Const.CONTROL_REFERENCE){var d=a.value;a=$Elt(d);if(!a){a=document.createElement("div");a.id=d}this.RefreshCaches(a.id);b=true}else{if(a.id){a=a.id;try{MultipleSelectionMgr.GetInstance().RefreshNode(a)}catch(c){}try{CacheMgr.GetInstance().RefreshNode(a)}catch(c){}try{ControlMgr.GetInstance().RefreshNode(a)}catch(c){}try{StyleMgr.GetInstance().RefreshNode(a)}catch(c){}try{CtrlEventMgr.GetInstance().RefreshNode(a)}catch(c){}try{WysiwygProperties.RefreshNode(a)}catch(c){}try{LoadingPostBackMgr.GetInstance().RefreshNode(a)}catch(c){}try{WindowExitEvent.RefreshNode(a)}catch(c){}try{MapCtrl.RefreshNode(a)}catch(c){}try{PositionGroupProperties.RefreshNode(a)}catch(c){}try{SequenceLoadingProperties.GetInstance().RefreshNode(a)}catch(c){}try{AutoScroll.RefreshNode(a)}catch(c){}}}if(b&&a.parentNode){a.parentNode.removeChild(a)}},RegisterInCache:function(b,a){var g;var c=b.indexOf(Matrix3.Const.SEPARATOR_CONTROL);if(c==-1){g=b}else{g=b.substring(0,c)}var d=function(){if(a.GetInstance){a.GetInstance().RefreshNode(b)}else{a.RefreshNode(b)}};if(!(g in this.moMgrCache)){this.moMgrCache[g]=new Object()}this.moMgrCache[g][b+a.Const.MGR_NAME]=d;while(g!=""){var c=g.lastIndexOf(Matrix3.Const.SEPARATOR_HIERARCHY);var f;if(c!=-1){f=g.substring(0,c);if(!(f in this.moMgrCache)){this.moMgrCache[f]=new Object()}if(!(Matrix3.Const.CHILD_VFORM in this.moMgrCache[f])){this.moMgrCache[f][Matrix3.Const.CHILD_VFORM]=new Object()}this.moMgrCache[f][Matrix3.Const.CHILD_VFORM][g]=true}else{f=""}g=f}},NewRefreshCaches:function(a){a=a.split(Matrix3.Const.SEPARATOR_CONTROL)[0];if(a in this.moMgrCache){for(var d in this.moMgrCache[a]){if(d==Matrix3.Const.CHILD_VFORM){for(var c in this.moMgrCache[a][d]){this.NewRefreshCaches(c)}}else{this.moMgrCache[a][d]()}}delete (this.moMgrCache[a]);for(var f in this.moReferences[a]){var b=$Elt(f);if(b&&b.parentNode){b.parentNode.removeChild(b)}else{b=$PI(f);if(b&&b.GetNode().parentNode){b.GetNode().parentNode.removeChild(b.GetNode())}}}delete this.moReferences[a]}},RefreshCaches:function(a){a=$Elt(a);if(a){this.RefreshNode(a);if(a.className&&a.className.indexOf(Matrix3.Const.CLASS_DONOTFOLLOW)!=-1){return}var d=a.getElementsByTagName("div");for(var b=0,c=d.length;b<c;b++){this.RefreshNode(d.item(b))}d=a.getElementsByTagName("span");for(var b=0,c=d.length;b<c;b++){this.RefreshNode(d.item(b))}d=a.getElementsByTagName("input");for(var b=0,c=d.length;b<c;b++){this.RefreshNode(d.item(b))}d=a.getElementsByTagName("textarea");for(var b=0,c=d.length;b<c;b++){this.RefreshNode(d.item(b))}d=a.getElementsByTagName("select");for(var b=0,c=d.length;b<c;b++){this.RefreshNode(d.item(b))}d=a.getElementsByTagName("img");for(var b=0,c=d.length;b<c;b++){this.RefreshNode(d.item(b))}d=a.getElementsByTagName("a");for(var b=0,c=d.length;b<c;b++){this.RefreshNode(d.item(b))}d=a.getElementsByTagName("table");for(var b=0,c=d.length;b<c;b++){this.RefreshNode(d.item(b))}d=a.getElementsByTagName("tr");for(var b=0,c=d.length;b<c;b++){this.RefreshNode(d.item(b))}}},AjaxFailure:function(a,f,b){var d=false;var c=true;if(!Utils.IsObject(b)||b==null||!Utils.IsString(b.responseText)){c=false}if(c){d=this.ProcessFailure(b.responseText)}else{if(!Matrix3.mbPostBackRequested&&a.getAllResponseHeaders()){setTimeout("document.location = 'C.aspx?VP3=ErrorPage';",100)}Matrix3.mbPostBackRequested=false}return d},AjaxSuccess:function(b,n,a){this.miStartTime=new Date().getTime();if(this.miSuspendResponsesUntil>new Date().getTime()){setTimeout(function(){Matrix3.AjaxSuccess(b,n,a)},this.miSuspendResponsesUntil-new Date().getTime())}else{try{var d=false;var c=true;if((!Utils.IsObject(a))||a==null||!Utils.IsString(a.responseText)){c=false}if(c){var m=b;var l=false;var g=Matrix3.Const.LOAD_CSS_AJAX_RESPONSE_REGEX;if(g){var h=g.exec(m);if(h&&h!=null){var k=h[1];Utils.InsertCSS(k);m=m.replace(h[0],"");l=k}}if(l==false){Matrix3.AjaxSuccessProcess(m)}else{var i=this;function j(){var o=false;try{i.AjaxSuccessWaitCSS();o=true}catch(p){setTimeout(j,10)}if(o==true){setTimeout(function(){Matrix3.AjaxSuccessProcess(m)},10)}}setTimeout(j,10)}}}catch(f){Matrix3.LogError(f)}}return d},AjaxSuccessWaitCSS:function(){if(jQuery.browser.safari&&document.readyState!="complete"){throw"Waiting Loading"}var c=document.styleSheets;for(var a=0,b=c.length;a<b;a++){if(Utils.StartsWith(c[a].href,HistoryMgr.GetBaseURL())){c[a].cssRules}}},AjaxSuccessProcess:function(d){if(d!=null){if(d.substr(0,4)=="<div"||d.substr(0,6)=="<table"||d.substr(0,Matrix3.Const.RETURN_VALIDMARKER.length)==Matrix3.Const.RETURN_VALIDMARKER){var b=document.createElement("DIV");b.innerHTML='<span style="display:none;"><br /></span>'+d;var a=Matrix3.PreRender(b);Matrix3.Render(a);bResult=true}else{if(d.substr(0,Matrix3.Const.REDIRECT_MARKER.length)==Matrix3.Const.REDIRECT_MARKER){var c=d.substr(Matrix3.Const.REDIRECT_MARKER.length);if(c.indexOf("VP3=")!=-1){c+="&"+Matrix3.Const.MARKER_RESOLUTION_WIDTH+"="+Utils.GetViewportWidth();c+="&"+Matrix3.Const.MARKER_RESOLUTION_HEIGHT+"="+Utils.GetViewportHeight()}document.location=c;Matrix3.PostRender();bResult=true}else{Matrix3.ProcessFailure(d)}}}},PreloadSuccess:function(b,c,a){PreloadMgr.SetResponse(a.responseText)},ExecuteDefaultAction:function(_sVFormID){var bResult=false;var bParameters=true;if(!Utils.IsString(_sVFormID)){bParameters=false}if(bParameters){if(_sVFormID in this.moVFormTable){if(VFormInfoItem.Const.FIELD_DEFAULTACTION in this.moVFormTable[_sVFormID]){eval(this.moVFormTable[_sVFormID][VFormInfoItem.Const.FIELD_DEFAULTACTION]);bResult=true}else{if(!DefaultActionProperties.ExecuteDefaultAction(_sVFormID)){var iIndex=_sVFormID.lastIndexOf(Matrix3.Const.SEPARATOR_HIERARCHY);if(iIndex!=-1){var sParent=_sVFormID.substring(0,iIndex);this.ExecuteDefaultAction(sParent)}}}}}return bResult},GetVFormInfoItem:function(a){var d=null;if(!Utils.IsString(a)){}else{var f=a;if(Utils.IsObject(Matrix3.moVFormTable[f])&&Matrix3.moVFormTable[f]!=null){var l=Matrix3.moVFormTable[f][VFormInfoItem.Const.FIELD_PERSISTANT];var m=null;if(Matrix3.moVFormTable[f].hasOwnProperty(VFormInfoItem.Const.FIELD_SUB_ID)){m=Matrix3.moVFormTable[f][VFormInfoItem.Const.FIELD_SUB_ID]}var k=null;var j=null;var i=f.lastIndexOf(Matrix3.Const.SEPARATOR_HIERARCHY);var b=Matrix3.IsPopup(f);if(!b&&(i>0)){k=f.substr(0,i)}else{if(b){j=Matrix3.Const.POPUP_LAYER_ID}}var c=$Elt(f);if((c!=null)&&(c.parentNode!=null)){var h=c.parentNode.id;var g=h.indexOf(Matrix3.Const.SEPARATOR_CONTROL);if(g>0){j=h.substr(g+1)}d=new VFormInfoItem(f,m,l,k,j)}else{}}else{}}return d},GetPostBody:function(c,a,b,d){var f=true;var w="";var j=new Object();var p=new VFormInfoTable();var h=new Object();var q=new Object();var n=new Object();if(!Utils.IsString(c)&&c!=null){f=false}if(f){if(Utils.IsIE9()){$(".placeholder").each(function(){this.value=""})}var m=this.moEventTable.GetEventList();for(var g=0;g<m.length;g++){var l=m[g];if(!(l.GetSourceVForm() in q)&&!(l.GetSourceVForm() in n)){if(l.GetSourceType()!=Matrix3.Const.RETURNTYPE_VIEWSTATE){this.GetVFormControls($Elt(l.GetSourceVForm()),h,q)}else{n[l.GetSourceVForm()]=l.GetSourceVForm()}}if(l.GetTargetVForm()!=null){if(!(l.GetTargetVForm() in q)&&!(l.GetTargetVForm() in n)){if(l.GetTargetType()!=Matrix3.Const.RETURNTYPE_VIEWSTATE){this.GetVFormControls($Elt(l.GetTargetVForm()),h,q)}else{n[l.GetTargetVForm()]=l.GetTargetVForm()}}}}var r=WysiwygManager.SetValueOnRealTextareas();for(var t in r){if(typeof h[t]!=="undefined"){h[t]=r[t]}}if(Utils.IsIE9()){$(".placeholder").each(function(){$(this).trigger("blur.placeholder")})}for(var x in q){n[x]=x}for(var x in n){var o=this.GetVFormInfoItem(x);p.AddVFormInfoItem(o)}if(!a){j[Matrix3.Const.TRIGGER_LIST]=this.moEventTable.Serialize();j[Matrix3.Const.VFORM_TABLE]=p.Serialize();j[Matrix3.Const.ARGUMENTS]=c;j[Matrix3.Const.DOPOSTBACK_MARKER]="1";j[Matrix3.Const.MARKER_RESOLUTION_WIDTH]=Utils.GetViewportWidth();j[Matrix3.Const.MARKER_RESOLUTION_HEIGHT]=Utils.GetViewportHeight();if(h instanceof Object){for(var u in h){var k=$Elt(u);if(k&&k.tagName=="DIV"){j[u]=h[u]}}}}else{w+=Matrix3.Const.TRIGGER_LIST+"="+this.moEventTable.Serialize();w+="&"+Matrix3.Const.VFORM_TABLE+"="+p.Serialize();var v=Utils.HashToParameters(h);if(v!=""){w+="&"+v}if(c!=null){w+="&"+Matrix3.Const.ARGUMENTS+"="+c}w+="&"+Matrix3.Const.AJAX_MARKER+"=1";w+="&"+Matrix3.Const.AJAX_TOKEN_MARKER+"="+this.msAjaxToken;w+="&"+Matrix3.Const.PRELOAD_MARKER+"="+((b)?"1":"0");if(d){w+="&"+Matrix3.Const.VIRTUALID_MARKER+"="+d}w+="&"+Matrix3.Const.MARKER_RESOLUTION_WIDTH+"="+Utils.GetViewportWidth();w+="&"+Matrix3.Const.MARKER_RESOLUTION_HEIGHT+"="+Utils.GetViewportHeight();if(this.mbPreloading){w+="&_PRELOADV2_=1"}}}this.moEventTable=new EventTable();if(!a){return j}else{return w}},GetVFormControls:function(b,a,c){var d=true;var f=false;if(b==null||b.childNodes==undefined){d=false}if(!Utils.IsObject(a)||a==null){d=false}if(!Utils.IsObject(c)||c==null){d=false}if(d){if($HasClass(b,Matrix3.Const.CLASS_DONOTFOLLOW)){return}if(b.id!=null&&b.id!=""&&b.id.indexOf(Matrix3.Const.SEPARATOR_CONTROL)==-1){if(!(b.id in c)){c[b.id]=b.id;if(b.id in this.moReferences){var n=this.moReferences[b.id];for(var q in n){var m=$Elt(q);if(m){this.GetVFormControls(m,a,c)}else{m=$PI(q);if(m){this.GetVFormControls(m,a,c)}}}}}else{return true}}var l=b.childNodes;for(var h=0,j=l.length;h<j;h++){var k=l[h];switch(k.nodeName.toLowerCase()){case"input":if(k&&k.getAttribute("data-acvf")){var r=k.getAttribute("data-acvf");var p=document.getElementById(k.name+r);if(p){a[k.name]=p.value;if(Matrix3.mbProducingPostBack){$E(k.id+"_Value").attr("id",k.id);$E(k.id).attr("name",k.id);k.id=k.id+"_Value";k.name=k.id}}}else{if(k.type.toLowerCase()=="radio"){if(k.checked==true&&k.name){a[k.name]=k.value}}else{if(k.type.toLowerCase()=="checkbox"&&k.name){if(k.checked==true){a[k.name]="true"}else{a[k.name]="false"}}else{if(k.type.toLowerCase()=="hidden"&&k.name==Matrix3.Const.CONTROL_REFERENCE){this.GetVFormControls($Elt(k.value),a,c)}else{if(k.id){a[k.id]=k.value}}}}}break;case"textarea":if(k.id){a[k.id]=k.value}break;case"select":if(k.id){a[k.id]=k.value}break;case"object":if(((!Utils.IsIE()&&k.type.toLowerCase()=="application/x-shockwave-flash")||(Utils.IsIE()))&&k.parentNode.id){try{a[k.parentNode.id]=k.Matrix_GetControlValue()}catch(g){if(Utils.IsIE()){this.GetVFormControls(k,a,c)}}}else{this.GetVFormControls(k,a,c)}break;case"div":if(k.msCtrlType&&k.msCtrlType==PositionItem.Const.CONTROL_TYPE_FLOAT_PANEL&&k.HasProperty(SequenceLoadingProperties.Const.PROPERTY_SEQUENCE_LOADING)&&k.id){var o=SequenceLoadingMgr.GetInstance().Get(k.GetVFormId());if(o!=null){a[k.id]=o.GetSelectedIndex()}}this.GetVFormControls(k,a,c);break;default:this.GetVFormControls(k,a,c)}}f=true}return f},IsPopup:function(a){var c=false;var b=true;if(!Utils.IsString(a)){b=false}if(b){c=a in Matrix3.moPopupTable}return c},KeyPressCallback:function(a){var d;if(a.keyCode){d=a.keyCode}else{if(a.which){d=a.which}}var c;if(a.target){c=a.target}else{if(a.srcElement){c=a.srcElement}}if(d==13&&c!=null&&Utils.IsObject(c)&&c.type!="textarea"){var f=c.id;if(Utils.IsString(f)){var b=f.indexOf(Matrix3.Const.SEPARATOR_CONTROL);if(b>0){var g=f.substring(0,b);if(g!=""){this.ExecuteDefaultAction(g)}}}}if(d==27&&c!=null&&Utils.IsObject(c)&&c.type!="textarea"&&c.type!="text"){if(this.maPopupStack.length>0){this.RemovePopup(this.maPopupStack[this.maPopupStack.length-1])}}if((typeof this.moCMS!="undefined"||this.mbIsParameterPage==true)&&d==83&&a.ctrlKey){ParamMgr.SaveAll();a.stopImmediatePropagation();a.stopPropagation();a.preventDefault();return false}},PostRender:function(_bDoPostBack){var iStart=new Date().getTime();eval(this.msScript);ControlMgr.GetInstance().ClearOldInstance();if(!_bDoPostBack){LoadingPostBackMgr.GetInstance().HideAll();LoadingAjaxMgr.GetInstance().HideAll()}setTimeout("PostRenderMgr.GetInstance().ExecuteFunctions();",100);this.msScript="";if(!DragDropMgr.mbIsReorder){}if(!_bDoPostBack){this.RemoveLoading()}if(!this.mbIsInit){DragDropMgr.RefreshCache();MultipleSelectionMgr.GetInstance().Refresh()}else{this.mbIsInit=false}this.mbHistory=false;this.mbModal=true;this.mbEvent=false;this.mbFullPage=false;if(!_bDoPostBack||!Utils.IsSafari()){Matrix3.HideWaitMsg()}var oDebugSummary=ControlMgr.GetInstance().GetReference("DebugSummary");if(oDebugSummary){var dServerTime=Math.round(this.mdServerPageTime*100)/100;var dClientTime=Math.round((new Date().getTime()-this.miStartTime)/10)/100;$Control(oDebugSummary.msId,LabelCtrl.Const.CONTROL_NAME).SetValue("server time: "+dServerTime+"s. "+this.msServerTimeSplit+"<br/>client time: "+dClientTime+"s<br/>total: "+Math.round(this.mdServerPageTime*100+dClientTime*100)/100+"s",true)}for(var i=0,len=this.maPopupForceCenteringStack.length;i<len;i++){var oPopup=this.moPopupTable[this.maPopupForceCenteringStack[i]];if(oPopup){oPopup.Center()}}ScrollbarMgr.GetInstance().ReloadScrollPos();if(Utils.IsIE9()){$("input[placeholder]").placeholder();$("textarea[placeholder]").placeholder()}return true},PreRender:function(a){if(!Matrix3.mbIsInit){PostRenderMgr.GetInstance().Clear()}var f=new Date().getTime();if(this.mbFullPage){var u=$Elt(Matrix3.Const.ID_PANEL_MAIN).firstChild;this.NewRefreshCaches(u.id);u.parentNode.removeChild(u);u.RecursiveRemove();ControlMgr.GetInstance().ReInit();PositionMgr.GetInstance().ReInit();ResizeMgr.GetInstance().ReInit();ResizeMgr.GetInstance().ExportScreenToLists()}var b=true;var t=null;this.maNodeToExtract=new Array();if(a==null||a.nodeName==null||a.nodeName==""||a.nodeName==undefined){b=false}var o=document.getElementById(Matrix3.Const.DIRECT_POPUP_CONTAINER);if(o&&typeof o!="undefined"){var q=o.childNodes;for(var c=0,g=q.length;c<g;c++){var p=q[c];var r=ControlMgr.GetInstance().CreateControl(p);PositionMgr.GetInstance().AddToDirtyXList(r);PositionMgr.GetInstance().AddToDirtyYList(r)}}if(b){t=new Object();var k=null;var m=a.childNodes;var n=m[m.length-1];if(n.id==Matrix3.Const.PRELOAD_IMAGES){n=m[m.length-2]}k=Matrix3.SetupClientInfo(n.value);for(var c=0,g=m.length-1;c<g;c++){var p=m[c];if(!p||p.nodeName.toUpperCase()=="SPAN"){continue}if(p.id=="script"){this.EvalScript(p);continue}while(!p.id){p=p.firstChild}var v=p.id;if(v!=Matrix3.Const.HIDDENFIELDS){t[v]=new Object();t[v][VFormInfoItem.Const.FIELD_XMLCONTENT]=p;var w=null;var l=k[v];if(l!=null){var j=l[VFormInfoItem.Const.FIELD_ACTIONLIST];if(j!=null&&j.length>0){var h=j[0];if(h!=null&&h.hasOwnProperty(VFormInfoItem.Const.ACTIONLIST_PARENT)){w=h[VFormInfoItem.Const.ACTIONLIST_PARENT]}}}var d=this.GetVFormInsertionDepth(v,w);var r=ControlMgr.GetInstance().CreateControl(p,null,d);PositionMgr.GetInstance().AddToDirtyXList(r);PositionMgr.GetInstance().AddToDirtyYList(r);this.maNodeToExtract.push(r)}}if(k!=null){for(var v in k){if(!(v in t)){t[v]=new Object()}t[v][VFormInfoItem.Const.FIELD_ACTIONLIST]=k[v][VFormInfoItem.Const.FIELD_ACTIONLIST];t[v][VFormInfoItem.Const.ACTIONLIST_EFFECT]=k[v][VFormInfoItem.Const.ACTIONLIST_EFFECT];t[v][VFormInfoItem.Const.ACTIONLIST_VIRTUALID]=k[v][VFormInfoItem.Const.ACTIONLIST_VIRTUALID]}}else{t=null}}return t},ProcessFailure:function(a){var b=true;if(!Utils.IsString(a)){b=false}if(b&&!this.mbDebug){document.write(a);document.close()}return b},RemoveClientInfo:function(a){var b=true;var c=false;if(!Utils.IsString(a)){b=false}if(b){c=true}return c},RemoveLoading:function(){if(typeof this.moCMS!="undefined"){CMSLoader.Hide()}else{$('[id="'+Matrix3.Const.LOADING_PANEL_ID+'"]').stop().css("display","none");$SetStyle(Matrix3.Const.LOADING_MASK_ID,"display","none")}this.mbIsLoading=false;AutoCompletionMgr.EnableAll()},RemoveVForm:function(d,c,f,b,a){var g=true;var h=false;if(!Utils.IsString(d)){g=false}if(g){var j=$Elt(d);if(j!=null){this.NewRefreshCaches(j.id);j.parentNode.removeChild(j);if(Utils.IsIE()){oNodePI=$PI(j.id);oNodePI.RecursiveRemove()}else{j.RecursiveRemove()}if(Utils.IsIE()){j=new HTMLElement(j)}oParentNode=j.moParent;if(oParentNode!=null&&oParentNode.msCtrlType){var i=Utils.IndexOf(oParentNode.GetContainerForChildren(),j);if(i!=-1){oParentNode.GetContainerForChildren().splice(i,1)}PositionMgr.GetInstance().AddToDirtyXList(oParentNode);PositionMgr.GetInstance().AddToDirtyYList(oParentNode)}h=Matrix3.RemoveClientInfo(d)}else{}}if(!b){Matrix3.FinishLoad()}return h},RemovePopup:function(b,a){var c=false;if(!Utils.IsString(b)){}else{var d=this.moPopupTable[b];if(d instanceof Popup){d.Remove(a);c=Matrix3.RemoveClientInfo(b);c=true}else{}}Matrix3.FinishLoad();return c},Render:function(a){var j=new Date().getTime();var b=true;var c=false;if(!Utils.IsObject(a)||a==null){b=false}var p=document.getElementById(Matrix3.Const.DIRECT_POPUP_CONTAINER);if(p&&typeof p!="undefined"){var t=p.childNodes;for(var d=0,k=t.length;d<k;d++){var u=$PI(t[d].id);PositionMgr.GetInstance().AddToDirtyXList(u);PositionMgr.GetInstance().AddToDirtyYList(u);u.ExtractDependences();Matrix3.LoadPopup(t[d].id)}}this.miNumberOfAction=0;var q=new Array();if(b){var v=new Array();for(var x in a){v.push(x)}var h=0;while(h<v.length){var x=v[h];var o=a[x][VFormInfoItem.Const.FIELD_ACTIONLIST];if(o instanceof Array&&o.length>0&&o[0][VFormInfoItem.Const.ACTIONLIST_ACTION]==VFormInfoItem.Const.ACTIONLIST_ACTION_ADD){var y=o[0][VFormInfoItem.Const.ACTIONLIST_NEXTVFORM];if(y&&a.hasOwnProperty(y)){var g=Utils.IndexOf(v,y);if(g!=-1&&g>h){v[h]=y;v[g]=x;h--}}}h++}this.miNumberOfAction=v.length;this.miNumberOfAction++;for(var f=0,m=v.length;f<m;f++){var w;var x=v[f];var o=a[x][VFormInfoItem.Const.FIELD_ACTIONLIST];if(o instanceof Array){w=a[x][VFormInfoItem.Const.ACTIONLIST_EFFECT];var A=a[x][VFormInfoItem.Const.ACTIONLIST_VIRTUALID];this.miNumberOfAction+=o.length-1;for(var d=0,l=o.length;d<l;d++){var n=o[d];switch(n[VFormInfoItem.Const.ACTIONLIST_ACTION]){case VFormInfoItem.Const.ACTIONLIST_ACTION_ADD:if(a[x][VFormInfoItem.Const.FIELD_XMLCONTENT]!=null&&a[x][VFormInfoItem.Const.FIELD_XMLCONTENT].nodeName!=null&&a[x][VFormInfoItem.Const.FIELD_XMLCONTENT].nodeName!=undefined&&a[x][VFormInfoItem.Const.FIELD_XMLCONTENT].nodeName!=""){if(n[VFormInfoItem.Const.ACTIONLIST_LAYOUT]==VFormInfoItem.Const.ACTIONLIST_LAYOUT_POPUP){Matrix3.AddPopup(a[x][VFormInfoItem.Const.FIELD_XMLCONTENT])}else{Matrix3.AddVForm(a[x][VFormInfoItem.Const.FIELD_XMLCONTENT],n[VFormInfoItem.Const.ACTIONLIST_PARENT],n[VFormInfoItem.Const.ACTIONLIST_NEXTVFORM],w,A)}}else{Matrix3.FinishLoad()}break;case VFormInfoItem.Const.ACTIONLIST_ACTION_REMOVE:if(Matrix3.IsPopup(x)){Matrix3.RemovePopup(x)}else{Matrix3.RemoveVForm(x,w,A)}break}c=true}}else{w=this.moVFormTable[x][VFormInfoItem.Const.ACTIONLIST_EFFECT];Matrix3.AddVForm(a[x][VFormInfoItem.Const.FIELD_XMLCONTENT],null,null,w,A);c=true}}}if(this.mbIsInit||this.mbFullPage){var u=ControlMgr.GetInstance().GetRootPositionItem();PositionMgr.GetInstance().AddToDirtyXList(u);PositionMgr.GetInstance().AddToDirtyYList(u);u.ExtractDependences()}else{for(var d=0,k=this.maNodeToExtract.length;d<k;d++){this.maNodeToExtract[d].ExtractDependences()}}this.ProcessPrePositionCalls();Matrix3.mbInhibitPositioning=false;PositionMgr.GetInstance().CalculatePosition();if(!this.mbIsInit){for(var d=0,k=this.maNodeToExtract.length;d<k;d++){$SetStyle(this.maNodeToExtract[d].GetNode(),"visibility","inherit")}}ControlMgr.GetInstance().ApplyPropertyQueue();DOMChangesQueue.GetInstance().ApplyQueue();PreloadMgr.LaunchPreloadCall();for(var z in this.moPopupTable){var r=this.moPopupTable[z];r.CenterIfNeeded()}Matrix3.RemovePositioning();this.miNumberOfAction--;if(this.miNumberOfAction<=0){Matrix3.PostRender()}return c},ProcessPrePositionCalls:function(){for(var a in this.maPrePositionCalls){this.maPrePositionCalls[a]()}this.maPrePositionCalls=new Array()},SendRequest:function(a,b){var c=true;var g=null;if(!Utils.IsString(a)){c=false}if(c){var d={success:this.AjaxSuccess,failure:this.AjaxFailure,scope:this};if(this.mbPreloading){d.success=this.PreloadSuccess}try{g=$.ajax({type:"POST",url:HistoryMgr.GetInstance().GetCurrentURL(),data:a,success:d.success,error:d.failure,context:this})}catch(f){}}return g},LoadFullPage:function(a){this.mbEvent=true;this.mbFullPage=true;var b={success:this.AjaxSuccess,failure:this.AjaxFailure,scope:this};var c="_FPA_=1";$.ajax({type:"POST",url:a,data:c,success:this.AjaxSuccess,error:this.AjaxFailure})},SetupClientInfo:function(a){var d=true;var q=null;if(!Utils.IsString(a)){d=false}if(d){var x=decodeURIComponent(a);var m=null;m=JSON.parse(x);this.mbBlockReloadOnResize=m.hasOwnProperty(Matrix3.Const.BLOCK_RELOAD_ON_RESIZE);if(m.hasOwnProperty(Matrix3.Const.MIN_RES_WIDTH)){ResizeMgr.GetInstance().SetMinScreenWidth(m[Matrix3.Const.MIN_RES_WIDTH])}if(m.hasOwnProperty(Matrix3.Const.RESOLUTION_VALIDITY_BOUNDARIES)){var n=m[Matrix3.Const.RESOLUTION_VALIDITY_BOUNDARIES][0];var v=m[Matrix3.Const.RESOLUTION_VALIDITY_BOUNDARIES][1];var j=Utils.GetViewportWidth();var h=Utils.GetViewportHeight();var c=((n[0]!=-1&&j<n[0])||(n[1]!=-1&&h<n[1])||(v[0]!=-1&&j>v[0])||(v[1]!=-1&&h>v[1]));if(c){var f={success:function(){window.location.reload()},failure:null,scope:this};$.ajax({type:"GET",url:"htm/Resolution.aspx?W="+Utils.GetViewportWidth()+"&H="+Utils.GetViewportHeight()+"&dummy="+new Date().getTime(),success:function(){if(!Matrix3.mbBlockReloadOnResize){window.location.reload()}},context:this});if(!Matrix3.mbBlockReloadOnResize){var o=document.createElement("div");o.id="ReloadingMask";document.getElementById(Matrix3.Const.ID_FORM).appendChild(o);$SetStyle(o,"background-color","#FFF");$SetStyle(o,"width",Utils.GetViewportWidth()+"px");$SetStyle(o,"height",Utils.GetViewportHeight()+"px")}}}var u=m[Matrix3.Const.TRIGGER_LIST];if(u!=null){var p=new TriggerTable();for(var g=0,k=u.length;g<k;g++){var r=u[g];var t=new TriggerItem(r[TriggerItem.Const.SOURCE_VFORM],r[TriggerItem.Const.SOURCE_EVENT],r[TriggerItem.Const.TARGET_VFORM],r[TriggerItem.Const.TARGET_EVENT],r[TriggerItem.Const.TARGET_TYPE],r[TriggerItem.Const.COMMON_PROPERTY]);p.AddTriggerItem(t)}this.moTriggerTable.Merge(p)}var w=m[Matrix3.Const.VFORM_TABLE];if(w!=null){q=new Object();for(var y in w){this.moVFormTable[y]=w[y];if(VFormInfoItem.Const.FIELD_ACTIONLIST in w[y]){q[y]=new Object();q[y][VFormInfoItem.Const.FIELD_ACTIONLIST]=w[y][VFormInfoItem.Const.FIELD_ACTIONLIST];q[y][VFormInfoItem.Const.ACTIONLIST_EFFECT]=w[y][VFormInfoItem.Const.ACTIONLIST_EFFECT];q[y][VFormInfoItem.Const.ACTIONLIST_VIRTUALID]=Utils.TransformVirtualID(w[y][VFormInfoItem.Const.ACTIONLIST_VIRTUALID])}}}if(Matrix3.Const.VERSION in m){this.miVersion=m[Matrix3.Const.VERSION]}if(Matrix3.Const.URL in m){this.msURL=m[Matrix3.Const.URL];FramesMgr.GetInstance().SetURL(decodeURIComponent(this.msURL))}if(Matrix3.Const.EURL in m){HistoryMgr.GetInstance().UpdateHash(m[Matrix3.Const.EURL])}if("PGT" in m){this.mdServerPageTime=parseFloat(m.PGT);if("PGD" in m){this.msServerTimeSplit=m.PGD}}if(Matrix3.Const.AJAX_TOKEN_CLIENT_INFO_FIELD in m){this.msAjaxToken=m[Matrix3.Const.AJAX_TOKEN_CLIENT_INFO_FIELD]}if(Matrix3.Const.COLLECTION in m){for(var z in m[Matrix3.Const.COLLECTION]){if(m[Matrix3.Const.COLLECTION][z] instanceof Array){var b=m[Matrix3.Const.COLLECTION][z];for(var g=0,l=b.length;g<l;g++){this.moCollection.Add(z,b[g])}}}}}return q},GetVFormInsertionDepth:function(a,b){var c=0;var f=ControlMgr.GetInstance().GetPositionItem(a);if(f!=null){c=f.miDeep}else{if(b!=null){var d=ControlMgr.GetInstance().GetPositionItem(b);if(d!=null){c=d.miDeep+1}}}return c},LogSlowRequest:function(a,b){var c="Data request is taking longer than "+Matrix3.Const.SLOW_REQ_LOG_THRESHOLD/1000+"s.\nRequest summary: \nUrl: "+encodeURIComponent(this.msURL)+"\nParameters: "+encodeURIComponent(b)+"\n";Matrix3.LogWarning(c)},LogError:function(a){var d="";try{d="Message: "+a;var g="";try{g=a.stack;d+=". Stack: "+g}catch(b){}}catch(b){d=a.ToString()}if(typeof(Storage)!=="undefined"){if(localStorage.MatrixTrace){d+=" Matrix JS trace="+encodeURIComponent(localStorage.MatrixTrace)}if(!localStorage.EnableMatrixTraceUntil){var c=+new Date();localStorage.EnableMatrixTrackingUntil=c+5*60000;localStorage.MatrixTrace=""}}var f="RM=Javascript2&EM="+d;$.ajax({type:"POST",url:"htm/LogError.aspx",data:f});setTimeout("document.location = 'C.aspx?VP3=ErrorPage';",100)},LogWarning:function(a){var b="RM=Javascript2&WM="+a;$.ajax({type:"POST",url:"htm/LogError.aspx",data:b})},RefreshDebugLogVForm:function(){var a=ControlMgr.GetInstance().GetReference(Matrix3.Const.DEBUGLOG_FLASHID);if(!a){return false}else{var b=a.GetVFormId();if(b&&typeof b=="string"&&b!=""){Matrix3.AddEvent(b,Matrix3.Const.DEBUGLOG_REFRESH_EVENT,Matrix3.Const.RETURNTYPE_VIEWSTATE,Matrix3.Const.DELAY_IMMEDIAT)}}},SuspendResponseHandling:function(a){this.miSuspendResponsesUntil=new Date().getTime()+a},IsParameterPage:function(){this.mbIsParameterPage=true}};Matrix3.Const={DELAY_BUFFERED:"B",DELAY_IMMEDIAT:"I",RETURNTYPE_FULL:"F",RETURNTYPE_VIEWSTATE:"VS",SEPARATOR_HIERARCHY:".",TRIGGER_LIST:"TL",VFORM_TABLE:"VFT",RESOLUTION_VALIDITY_BOUNDARIES:"RVB",MIN_RES_WIDTH:"MRW",BLOCK_RELOAD_ON_RESIZE:"BRR",URL:"URL",EURL:"EURL",VERSION:"V",SEPARATOR_CONTROL:":",HIDDENFIELDS:"HIDDENFIELDS",DIRECT_POPUP_CONTAINER:"DirectPopups",PRELOAD_IMAGES:"PRELOAD_IMAGES",LOADING_PANEL_ID:"LoadingPopupID",LOADING_MASK_ID:"LoadingPopupMask",POSITIONING_MASK_ID:"PositioningMask",RETURN_VALIDMARKER:'<input type="hidden" name="HIDDENFIELDS" id="HIDDENFIELDS" value="',POPUP_LAYER_ID:"PopupLayer",SUFFIX_POPUP:"_Popup",COLLECTION:"CL",ARGUMENTS:"ARGS",AJAX_MARKER:"_AJAX_",AJAX_TOKEN_MARKER:"_AJTOK_",AJAX_TOKEN_CLIENT_INFO_FIELD:"AJTOK",DOPOSTBACK_MARKER:"_PB_",COMMAND_MULTIPLE_SELECT_VS:"GroupSelectionVS",COMMAND_MULTIPLE_SELECT_F:"GroupSelectionFULL",COMMAND_DROP_VS:"DropVS",COMMAND_DROP_F:"DropFULL",EVENT_DROP:"DROP",EVENT_DRAG:"DRAG",EVENT_SELECT:"SELECT",ARG_VFORMID:"V",ARG_CONTROL:"C",ARG_PANEL:"Pnl",ARG_GROUPS:"G",ARG_POSITION:"P",ARG_NEXT_VFORMID:"N",ARG_PREVIOUS_VFORMID:"PVF",ARG_COORDX:"X",ARG_COORDY:"Y",COMMAND_EVENT:"ET",COMMAND_ARGS:"A",COMMAND_REORDER:"Reorder",EVENT_REORDER:"REORDER",REDIRECT_MARKER:"REDIRECT=",LOADING_BORDER:10,FORM:"Form1",PRELOAD_MARKER:"_PRELOAD_",VIRTUALID_MARKER:"_VI_",MARKER_RESOLUTION_WIDTH:"RW",MARKER_RESOLUTION_HEIGHT:"RH",FIELD_PRELOAD:"P",FIELD_VIRTUALID:"VI",EVENT_FROM_PRELOAD:"P",EVENT_FROM_USER:"U",SEPARATOR_EFFECT:",",SEPARATOR_EFFECT_FUNCTION:":",SEPARATOR_VIRTUALID:";",LAYER_VFORMS:"LAYERVFORMS",RETRY_DELAY:200,SLOW_REQ_LOG_THRESHOLD:15000,POST_RENDER_FUNCTION:"PostRenderMgr.GetInstance().AddFunction(function(){",ID_PANEL_MAIN:"BodyContent",CONTROL_REFERENCE:"Ref",CLASS_DONOTFOLLOW:"DoNotFollow",ID_WAIT_MSG:"WaitMsg",ID_WAIT_MSG_CLOSE:"WaitMsgClose",ID_WAIT_MSG_CONTENT:"WaitMsgContent",ID_FORM:"Form1",WAITMSG_MODE_MOUSE:"mouse",WAITMSG_MODE_POSTBACK:"postback",PROPERTY_HTTPS_VFORM:"Https",CLASS_PNG:"png",ID_CONSOLE:"Console",SAFARI_HIDE_MSG_DELAY:3000,INFO_IMAGE_BASE:"Info_ImageBase",CHILD_VFORM:"CVF",LOAD_CSS_AJAX_RESPONSE_REGEX:/##LOADCSS:([^#]*)##/,VFORM_PROPERTY_SKIN_FAMILY_ALIAS:"sfa",POPUP_CLASS_SKIN_FAMILY_SET:"SFA",PLEASEWAITMSG_OPTION_SHOW_CLOSE:"ShowClose",DEBUGLOG_FLASHID:"DEBUGLOG_VFORM",DEBUGLOG_REFRESH_EVENT:"REFRESH"};var sLocH=window.location.hash;if(sLocH!=""&&sLocH.substring(0,2)=="#/"){window.location.href=HistoryMgr.GetURLFromH(sLocH.substring(2));throw""}Matrix3.moMgrCache=new Object();Matrix3.moReferences=new Object();Matrix3.mbDebug=true;$(document).ready(function(){Matrix3.Init()});PreloadMgr=function(){};PreloadMgr.Register=function(a){if(!PreloadMgr.aoPreloadStack){PreloadMgr.aoPreloadStack=new Array();PreloadMgr.oPresenceHash=new Object()}var c=a.GetProperty("PID");if(!PreloadMgr.oPresenceHash.hasOwnProperty(c)){if(PreloadMgr.aoPreloadStack.length>2){var b=PreloadMgr.aoPreloadStack[0].msPreloadID;PreloadMgr.aoPreloadStack.unshift();delete PreloadMgr.oPresenceHash[b]}PreloadMgr.aoPreloadStack.push({msResponse:null,moPreloadControl:a,msPreloadID:c});PreloadMgr.oPresenceHash[c]=true}};PreloadMgr.LaunchPreloadCall=function(){if(PreloadMgr.moInProgress==null&&PreloadMgr.aoPreloadStack){for(var b=0,c=PreloadMgr.aoPreloadStack.length;b<c;b++){var d=PreloadMgr.aoPreloadStack[b];if(d.msPreloadID!=null&&d.msResponse==null){PreloadMgr.moInProgress=d;Matrix3.mbPreloading=true;var a=d.moPreloadControl.GetNode().getElementsByTagName("a");if(a.length>0){if($.browser.msie){a[0].click()}else{a[0].onclick()}}Matrix3.mbPreloading=false;break}}}};PreloadMgr.SetResponse=function(a){if(PreloadMgr.moInProgress!=null){PreloadMgr.moInProgress.msResponse=a;var j=document.createElement("DIV");j.innerHTML='<span style="display:none;"><br /></span>'+a;var g=j.childNodes;var h=g[g.length-1];if(h.id==Matrix3.Const.PRELOAD_IMAGES&&h.value){var b=h.value.split("\n");for(var c=0,f=b.length;c<f;c++){var d=new Image();d.src=b[c]}}PreloadMgr.moInProgress=null}};PreloadMgr.GetConfigIndex=function(a){var c=null;if(PreloadMgr.oPresenceHash&&PreloadMgr.oPresenceHash.hasOwnProperty(a)){for(var b=0,d=PreloadMgr.aoPreloadStack.length;b<d;b++){if(PreloadMgr.aoPreloadStack[b].msPreloadID==a){c=b;break}}}return c};PreloadMgr.GetEventResponse=function(a){var d=null;var c=a.GetProperty("PID");if(PreloadMgr.oPresenceHash&&PreloadMgr.oPresenceHash.hasOwnProperty(c)){var b=PreloadMgr.GetConfigIndex(c);d=PreloadMgr.aoPreloadStack[b].msResponse;PreloadMgr.aoPreloadStack.splice(b,1);delete PreloadMgr.oPresenceHash[c]}return d};function TriggerItem(c,b,g,d,f,a){if(Utils.IsString(c)){this.msSourceVForm=c}else{this.msSourceVForm=null}if(Utils.IsString(b)||b==null){this.msSourceEvent=b}else{this.msSourceEvent=null}if(Utils.IsString(g)){this.msTargetVForm=g}else{this.msTargetVForm=null}if(Utils.IsString(d)||d==null){this.msTargetEvent=d}else{this.msTargetEvent=null}if(Utils.IsString(f)&&(f==Matrix3.Const.RETURNTYPE_FULL||f==Matrix3.Const.RETURNTYPE_VIEWSTATE)){this.msTargetType=f}else{this.msTargetType=null}if(Utils.IsString(a)||a==null){this.msCommonTriggingProperty=a}else{this.msCommonTriggingProperty=null}this.msID=TriggerItem.CreateID(this.msSourceVForm,this.msSourceEvent,this.msTargetVForm,this.msTargetEvent)}TriggerItem.Const={SEPARATOR:"|",SOURCE_VFORM:"SVF",SOURCE_EVENT:"SE",TARGET_VFORM:"TVF",TARGET_EVENT:"TE",TARGET_TYPE:"TRT",DELAY:"D",COMMON_PROPERTY:"CP"};TriggerItem.CreateID=function(b,a,d,c){var f=new StringBuilder();f.append(b);if(a!=null){f.append(TriggerItem.Const.SEPARATOR);f.append(a)}if(d!=null){f.append(TriggerItem.Const.SEPARATOR);f.append(d)}if(c!=null){f.append(TriggerItem.Const.SEPARATOR);f.append(c)}return f.toString()};TriggerItem.prototype={GetID:function(){return this.msID},GetSourceVForm:function(){return this.msSourceVForm},GetSourceEvent:function(){return this.msSourceEvent},GetTargetVForm:function(){return this.msTargetVForm},GetTargetEvent:function(){return this.msTargetEvent},GetTargetType:function(){return this.msTargetType},CommonTriggingProperty:function(){return this.msCommonTriggingProperty}};function TriggerTable(){this.moTriggerList=new Array();this.moTriggerTable=new Object()}TriggerTable.Const={MAX_RECURSE:50,VFORM_NOT_MATCH:-2,VFORM_MATCH:-1};TriggerTable.prototype={AddTriggerItem:function(a){var b=false;if(a instanceof TriggerItem&&!(a.GetID() in this.moTriggerTable)){this.moTriggerList.push(a);this.moTriggerTable[a.GetID()]=this.moTriggerList.length-1;b=true}else{}return b},GetTriggerList:function(){return this.moTriggerList},Merge:function(a){var b=false;if(a instanceof TriggerTable){var h=a.GetTriggerList();for(var c=0,f=h.length;c<f;c++){var g=h[c];if(g.GetID() in this.moTriggerTable){this.moTriggerList.splice(this.moTriggerTable[g.GetID()],1);for(var d=0;d<this.moTriggerList.length;d++){this.moTriggerTable[this.moTriggerList[d].GetID()]=d}}this.moTriggerList.push(g)}for(var c=0,f=this.moTriggerList.length;c<f;c++){this.moTriggerTable[this.moTriggerList[c].GetID()]=c}}else{}return b},CheckMatchingVForm:function(c,b,a){var j=TriggerTable.Const.VFORM_NOT_MATCH;var g=true;if((c==null)||(!Utils.IsString(c))||(c.indexOf("[")>=0)){g=false}if(!Utils.IsString(b)){g=false}if((a!=null)&&(!a instanceof Collection)){g=false}if(g){var p=Matrix3.Const.SEPARATOR_HIERARCHY;var d=b.split(p);var m=null;var k=b.indexOf("{*}");if((k>=0)&&(k<d[0].length)){m=b.substr(0,k)}else{}if(m!=null){if(a!=null){var f=a.GetVFormList(m);if(f!=null){var n=b.substr(d[0].length);for(var h=0,l=f.length;(j<0)&&(h<l);h++){var o=f[h]+n;if(o.indexOf("[*]")!=-1){o=o.replace(/\./g,"\\.");o=o.replace(/\[\*]/g,"\\.[0-9a-zA-Z]+");o="^"+o+"$";if(new RegExp(o,"g").test(c)){j=h}}else{if(o==c){j=h}}}}else{}}else{}}else{var o=b;if(o.indexOf("[*]")!=-1){o=o.replace(/\./g,"\\.");o=o.replace(/\[\*]/g,"\\.[0-9a-zA-Z]+");o="^"+o+"$";if(new RegExp(o,"g").test(c)){j=TriggerTable.Const.VFORM_MATCH}}else{if(o==c){j=TriggerTable.Const.VFORM_MATCH}}}}return j},FindAllIndex:function(c,b,a){var d=new Array();if((c==null)||(!Utils.IsString(c))||(c.indexOf("[")>=0)){}else{if((b!=null)&&(!Utils.IsString(b))){}else{if((a!=null)&&(!a instanceof Collection)){}else{if(Utils.IsUndefined(b)){b=null}for(var f=0,k=this.moTriggerList.length;f<k;f++){var l=this.moTriggerList[f];var n=l.GetSourceVForm();var m=l.GetSourceEvent();var j=this.CheckMatchingVForm(c,n,a);if((j>=TriggerTable.Const.VFORM_MATCH)&&((b==m)||(m==null))){var h=null;var g=f;if(j>=0){h=j}d.push(new Array(g,h))}}}}}return d},GetEventTable:function(k,h,g,f,c,d,a,b){var u=new EventTable();if(Utils.IsUndefined(b)){b=0}if(!Utils.IsBoolean(a)){a=true}if(!(c instanceof Collection)){c=new Collection()}if(!Utils.IsString(k)||!$Elt(k)){}else{if(!Utils.IsString(h)&&h!=null){}else{if(b>TriggerTable.Const.MAX_RECURSE){}else{if(Utils.IsString(k)&&(f==Matrix3.Const.DELAY_BUFFERED||f==Matrix3.Const.DELAY_IMMEDIAT)&&(g==Matrix3.Const.RETURNTYPE_FULL||g==Matrix3.Const.RETURNTYPE_VIEWSTATE)){var t;if(f==Matrix3.Const.DELAY_IMMEDIAT){var l=this.FindAllIndex(k,h,c);for(var n=0,p=l.length;n<p;n++){var y=this.moTriggerList[l[n][0]];var m=this.GetComponents(y.GetTargetVForm(),c,l[n][1]);if(m!=null){var x=new EventTable();var B=y.CommonTriggingProperty();var A=null;if(B){var w=$E(k).data("trigprops");if(w){A=w[B]}}for(var o=0,q=m.length;o<q;o++){if($Elt(m[o])){var z=null;if(B){var r=$E(m[o]).data("trigprops");if(r){z=r[B]}}if(!B||z===A){t=new EventItem(k,h,g,m[o],y.GetTargetEvent(),y.GetTargetType(),Matrix3.Const.DELAY_IMMEDIAT,d);u.AddEventItem(t);var v=this.GetEventTable(m[o],y.GetTargetEvent(),y.GetTargetType(),f,c,d,false,b+1);x.Merge(v)}}}u.Merge(x)}else{}}}if(a&&(u.moEventList.length==0)){t=new EventItem(k,h,g,null,null,null,f,d);u.AddEventItem(t)}}}}}return u},GetComponents:function(c,b,a){var j=true;var f=null;if(!Utils.IsString(c)){j=false}if(!(b instanceof Collection)){j=false}if(!Utils.IsNumber(a)){a=null}if(j){f=new Array();var k=false;var p=new RegExp("^([^\\]{[*#}]*)([{[][*#][\\]}])(.*)$");if(c.match(p)){var h=p.exec(c);var m=h[1].lastIndexOf(Matrix3.Const.SEPARATOR_HIERARCHY);if(m>0){sStart=h[1].substr(0,m);sIdentifier=h[1].substring(m+1,h[1].length)}else{sStart="";sIdentifier=h[1]}var q=h[2];var r=h[3];var g=null;switch(q){case"{*}":if(sStart==""){g=b.GetVFormList(sIdentifier);k=true}break;case"[*]":g=this.GetChilds(sIdentifier);if(g!=null){k=true}break;case"{#}":if(a!=null){var o=b.GetVFormList(sIdentifier)[a];if(Utils.IsString(o)){g=new Array(o);k=true}}break;case"[#]":if(a!=null){var o=this.GetChilds(sIdentifier)[a];if(Utils.IsString(o)){g=new Array(o);k=true}}break}if(k&&g!=null){for(var l=0,n=g.length;l<n;l++){var t=g[l]+r;var d=this.GetComponents(t,b);if(d!=null){f=f.concat(d)}else{k=false}}}}else{if(c.match("^[^\\]{[*#}]*$")){f.push(c);k=true}}if(!k){f=null}}return f},GetChilds:function(a){var c=true;var b=null;if(!Utils.IsString(a)){c=false}if(c){var g=$Elt(a);if(g!=null&&(g.id!=null&&g.id!=undefined&&g.id!="")){var h=g.childNodes;b=new Array();for(var d=0,f=h.length;d<f;d++){if(h[d]!=null&&(h[d].id!=null&&h[d].id!=undefined&&h[d].id!="")){b.push(h[d].id)}}}}return b}};function VFormInfoItem(b,f,a,d,c){if(Utils.IsString(b)){this.msVFormID=b}else{this.msVFormID=null}if(Utils.IsString(f)||f==null){this.msSubID=f}else{this.msSubID=null}if(Utils.IsString(a)||a==null){this.msPersistant=a}else{this.msPersistant=null}if(Utils.IsString(d)||d==null){this.msVFormParent=d}else{this.msVFormParent=null}if(Utils.IsString(c)||c==null){this.msVFormPanel=c}else{this.msVFormPanel=null}}VFormInfoItem.Const={FIELD_PERSISTANT:"VS",FIELD_ACTIONLIST:"AL",FIELD_COLLECTIONLIST:"CL",ACTIONLIST_PARENT:"P",FIELD_VFORMPARENT:"PV",FIELD_VFORMPANEL:"PP",ACTIONLIST_NEXTVFORM:"N",ACTIONLIST_ACTION:"A",ACTIONLIST_ACTION_ADD:"A",ACTIONLIST_ACTION_REMOVE:"R",ACTIONLIST_LAYOUT:"L",ACTIONLIST_LAYOUT_INLINE:"I",ACTIONLIST_LAYOUT_POPUP:"P",ACTIONLIST_ID:"ID",ACTIONLIST_EFFECT:"E",ACTIONLIST_VIRTUALID:"VI",FIELD_DEFAULTACTION:"DA",FIELD_REFRESHLIST:"RL",FIELD_XMLCONTENT:"X",FIELD_SUB_ID:"S"};VFormInfoItem.prototype={GetObjectToSerialize:function(){var a=new Object();a[VFormInfoItem.Const.FIELD_PERSISTANT]=this.msPersistant;a[VFormInfoItem.Const.FIELD_SUB_ID]=this.msSubID;a[VFormInfoItem.Const.FIELD_VFORMPARENT]=this.msVFormParent;a[VFormInfoItem.Const.FIELD_VFORMPANEL]=this.msVFormPanel;a[VFormInfoItem.Const.FIELD_COLLECTIONLIST]=Matrix3.moCollection.GetVFormIndexes(this.msVFormID);return a},GetID:function(){return this.msVFormID},GetSubID:function(){return this.msSubID},GetVFormPanel:function(){return this.msVFormPanel},GetSubID:function(){return this.msSubID},GetPersistant:function(){return this.msPersistant},GetVFormParent:function(){return this.msVFormParent}};function VFormInfoTable(){this.moVFormInfoTable=new Object()}VFormInfoTable.prototype={AddVFormInfoItem:function(a){var b=false;if(a instanceof VFormInfoItem){this.moVFormInfoTable[a.GetID()]=a;b=true}return b},Serialize:function(){var a=new Object();for(var b in this.moVFormInfoTable){a[b]=this.moVFormInfoTable[b].GetObjectToSerialize()}var c=JSON.stringify(a);return c}};(function(a,c){var b=0;a.widget("ui.autocomplete",{version:"1.9.2",defaultElement:"<input>",options:{appendTo:"body",autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var g,h,f;this.isMultiLine=this._isMultiLine();this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"];this.isNewMenu=true;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off");this._on(this.element,{keydown:function(i){if(this.element.prop("readOnly")){g=true;f=true;h=true;return}g=false;f=false;h=false;var j=a.ui.keyCode;switch(i.keyCode){case j.PAGE_UP:g=true;this._move("previousPage",i);break;case j.PAGE_DOWN:g=true;this._move("nextPage",i);break;case j.UP:g=true;this._keyEvent("previous",i);break;case j.DOWN:g=true;this._keyEvent("next",i);break;case j.ENTER:case j.NUMPAD_ENTER:if(this.menu.active){g=true;i.preventDefault();this.menu.select(i)}break;case j.TAB:if(this.menu.active){this.menu.select(i)}break;case j.ESCAPE:if(this.menu.element.is(":visible")){this._value(this.term);this.close(i);i.preventDefault()}break;default:h=true;this._searchTimeout(i);break}},keypress:function(i){if(g){g=false;i.preventDefault();return}if(h){return}var j=a.ui.keyCode;switch(i.keyCode){case j.PAGE_UP:this._move("previousPage",i);break;case j.PAGE_DOWN:this._move("nextPage",i);break;case j.UP:this._keyEvent("previous",i);break;case j.DOWN:this._keyEvent("next",i);break}},input:function(i){if(f){f=false;i.preventDefault();return}this._searchTimeout(i)},focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(i){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching);this.close(i);this._change(i)}});this._initSource();this.menu=a("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:a(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu");var d;if(this.options.appendTo){d=this.options.appendTo}else{d=this.menu.element}this._on(d,{mousedown:function(i){i.preventDefault();this.cancelBlur=true;this._delay(function(){delete this.cancelBlur});var j=this.menu.element[0];if(!a(i.target).closest(".ui-menu-item").length){this._delay(function(){var k=this;this.document.one("mousedown",function(l){if(l.target!==k.element[0]&&l.target!==j&&!a.contains(j,l.target)){k.close()}})})}},menufocus:function(i,k){if(this.isNewMenu){this.isNewMenu=false;if(i.originalEvent&&/^mouse/.test(i.originalEvent.type)){this.menu.blur();this.document.one("mousemove",function(){a(i.target).trigger(i.originalEvent)});return}}var j=k.item.data("ui-autocomplete-item")||k.item.data("item.autocomplete");if(false!==this._trigger("focus",i,{item:j})){if(i.originalEvent&&/^key/.test(i.originalEvent.type)){this._value(j.value)}}else{this.liveRegion.text(j.value)}},menuselect:function(i,l){var j=l.item.data("ui-autocomplete-item")||l.item.data("item.autocomplete"),k=this.previous;if(this.element[0]!==this.document[0].activeElement){this.element.focus();this.previous=k;this._delay(function(){this.previous=k;this.selectedItem=j})}if(false!==this._trigger("select",i,{item:j})){this._value(j.value)}this.term=this._value();this.close(i);this.selectedItem=j}});this.liveRegion=a("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element);if(a.fn.bgiframe){this.menu.element.bgiframe()}this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(d,f){this._super(d,f);if(d==="source"){this._initSource()}if(d==="appendTo"){this.menu.element.appendTo(this.document.find(f||"body")[0])}if(d==="disabled"&&f&&this.xhr){this.xhr.abort()}},_isMultiLine:function(){if(this.element.is("textarea")){return true}if(this.element.is("input")){return false}return this.element.prop("isContentEditable")},_initSource:function(){var d,g,f=this;if(a.isArray(this.options.source)){d=this.options.source;this.source=function(h,i){i(a.ui.autocomplete.filter(d,h.term))}}else{if(typeof this.options.source==="string"){g=this.options.source;this.source=function(h,i){if(f.xhr){f.xhr.abort()}f.xhr=a.ajax({url:g,data:h,dataType:"json",success:function(j){i(j)},error:function(){i([])}})}}else{this.source=this.options.source}}},_searchTimeout:function(d){clearTimeout(this.searching);this.searching=this._delay(function(){if(this.term!==this._value()){this.selectedItem=null;this.search(null,d)}},this.options.delay)},search:function(f,d){f=f!=null?f:this._value();this.term=this._value();if(f.length<this.options.minLength){return this.close(d)}if(this._trigger("search",d)===false){return}return this._search(f)},_search:function(d){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=false;this.source({term:d},this._response())},_response:function(){var f=this,d=++b;return function(g){if(d===b){f.__response(g)}f.pending--;if(!f.pending){f.element.removeClass("ui-autocomplete-loading")}}},__response:function(d){if(d){d=this._normalize(d)}this._trigger("response",null,{content:d});if(!this.options.disabled&&d&&d.length&&!this.cancelSearch){this._suggest(d);this._trigger("open")}else{this._close()}},close:function(d){this.cancelSearch=true;this._close(d)},_close:function(d){if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.blur();this.isNewMenu=true;this._trigger("close",d)}},_change:function(d){if(this.previous!==this._value()){this._trigger("change",d,{item:this.selectedItem})}},_normalize:function(d){if(d.length&&d[0].label&&d[0].value){return d}return a.map(d,function(f){if(typeof f==="string"){return{label:f,value:f}}return a.extend({label:f.label||f.value,value:f.value||f.label},f)})},_suggest:function(d){var f=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(f,d);this.menu.refresh();f.show();this._resizeMenu();f.position(a.extend({of:this.element},this.options.position));if(this.options.autoFocus){this.menu.next()}},_resizeMenu:function(){var d=this.menu.element;d.outerWidth(Math.max(d.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(g,d){var f=this;a.each(d,function(h,i){f._renderItemData(g,i)})},_renderItemData:function(f,d){return this._renderItem(f,d).data("ui-autocomplete-item",d)},_renderItem:function(f,d){return a("<li>").append(a("<a>").text(d.label)).appendTo(f)},_move:function(d,f){if(!this.menu.element.is(":visible")){this.search(null,f);return}if(this.menu.isFirstItem()&&/^previous/.test(d)||this.menu.isLastItem()&&/^next/.test(d)){this._value(this.term);this.menu.blur();return}this.menu[d](f)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(f,d){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(f,d);d.preventDefault()}}});a.extend(a.ui.autocomplete,{escapeRegex:function(d){return d.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(d,g){var f=new RegExp(a.ui.autocomplete.escapeRegex(g),"i");return a.grep(d,function(h){return f.test(h.label||h.value||h)})}});a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(d){return d+(d>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(d){var f;this._superApply(arguments);if(this.options.disabled||this.cancelSearch){return}if(d&&d.length){f=this.options.messages.results(d.length)}else{f=this.options.messages.noResults}this.liveRegion.text(f)}})}(jQuery));(function(a,c){var b=false;a.widget("ui.menu",{version:"1.9.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,a.proxy(function(d){if(this.options.disabled){d.preventDefault()}},this));if(this.options.disabled){this.element.addClass("ui-state-disabled").attr("aria-disabled","true")}this._on({"mousedown .ui-menu-item > a":function(d){d.preventDefault()},"click .ui-state-disabled > a":function(d){d.preventDefault()},"click .ui-menu-item:has(a)":function(d){var f=a(d.target).closest(".ui-menu-item");if(!b&&f.not(".ui-state-disabled").length){b=true;this.select(d);if(f.has(".ui-menu").length){this.expand(d)}else{if(!this.element.is(":focus")){this.element.trigger("focus",[true]);if(this.active&&this.active.parents(".ui-menu").length===1){clearTimeout(this.timer)}}}}},"mouseenter .ui-menu-item":function(d){var f=a(d.currentTarget);f.siblings().children(".ui-state-active").removeClass("ui-state-active");this.focus(d,f)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(d,g){var f=this.active||this.element.children(".ui-menu-item").eq(0);if(!g){this.focus(d,f)}},blur:function(d){this._delay(function(){if(!a.contains(this.element[0],this.document[0].activeElement)){this.collapseAll(d)}})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(d){if(!a(d.target).closest(".ui-menu").length){this.collapseAll(d)}b=false}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var d=a(this);if(d.data("ui-menu-submenu-carat")){d.remove()}});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(g){var h,i,d,l,k,j=true;function f(m){return m.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}switch(g.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(g);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(g);break;case a.ui.keyCode.HOME:this._move("first","first",g);break;case a.ui.keyCode.END:this._move("last","last",g);break;case a.ui.keyCode.UP:this.previous(g);break;case a.ui.keyCode.DOWN:this.next(g);break;case a.ui.keyCode.LEFT:this.collapse(g);break;case a.ui.keyCode.RIGHT:if(this.active&&!this.active.is(".ui-state-disabled")){this.expand(g)}break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(g);break;case a.ui.keyCode.ESCAPE:this.collapse(g);break;default:j=false;i=this.previousFilter||"";d=String.fromCharCode(g.keyCode);l=false;clearTimeout(this.filterTimer);if(d===i){l=true}else{d=i+d}k=new RegExp("^"+f(d),"i");h=this.activeMenu.children(".ui-menu-item").filter(function(){return k.test(a(this).children("a").text())});h=l&&h.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):h;if(!h.length){d=String.fromCharCode(g.keyCode);k=new RegExp("^"+f(d),"i");h=this.activeMenu.children(".ui-menu-item").filter(function(){return k.test(a(this).children("a").text())})}if(h.length){this.focus(g,h);if(h.length>1){this.previousFilter=d;this.filterTimer=this._delay(function(){delete this.previousFilter},1000)}else{delete this.previousFilter}}else{delete this.previousFilter}}if(j){g.preventDefault()}},_activate:function(d){if(!this.active.is(".ui-state-disabled")){if(this.active.children("a[aria-haspopup='true']").length){this.expand(d)}else{this.select(d)}}},refresh:function(){var f,d=this.options.icons.submenu,g=this.element.find(this.options.menus);g.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var i=a(this),h=i.prev("a"),j=a("<span>").addClass("ui-menu-icon ui-icon "+d).data("ui-menu-submenu-carat",true);h.attr("aria-haspopup","true").prepend(j);i.attr("aria-labelledby",h.attr("id"))});f=g.add(this.element);f.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()});f.children(":not(.ui-menu-item)").each(function(){var h=a(this);if(!/[^\-—–\s]/.test(h.text())){h.addClass("ui-widget-content ui-menu-divider")}});f.children(".ui-state-disabled").attr("aria-disabled","true");if(this.active&&!a.contains(this.element[0],this.active[0])){this.blur()}},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(d,g){var h,f;this.blur(d,d&&d.type==="focus");this._scrollIntoView(g);this.active=g.first();f=this.active.children("a").addClass("ui-state-focus");if(this.options.role){this.element.attr("aria-activedescendant",f.attr("id"))}this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active");if(d&&d.type==="keydown"){this._close()}else{this.timer=this._delay(function(){this._close()},this.delay)}h=g.children(".ui-menu");if(h.length&&(/^mouse/.test(d.type))){this._startOpening(h)}this.activeMenu=g.parent();this._trigger("focus",d,{item:g})},_scrollIntoView:function(g){var d,j,i,k,f,h;if(this._hasScroll()){d=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0;j=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0;i=g.offset().top-this.activeMenu.offset().top-d-j;k=this.activeMenu.scrollTop();f=this.activeMenu.height();h=g.height();if(i<0){this.activeMenu.scrollTop(k+i)}else{if(i+h>f){this.activeMenu.scrollTop(k+i-f+h)}}}},blur:function(d,f){if(!f){clearTimeout(this.timer)}if(!this.active){return}this.active.children("a").removeClass("ui-state-focus");this.active=null;this._trigger("blur",d,{item:this.active})},_startOpening:function(d){clearTimeout(this.timer);if(d.attr("aria-hidden")!=="true"){return}this.timer=this._delay(function(){this._close();this._open(d)},this.delay)},_open:function(f){var d=a.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(f.parents(".ui-menu")).hide().attr("aria-hidden","true");f.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(d)},collapseAll:function(f,d){clearTimeout(this.timer);this.timer=this._delay(function(){var g=d?this.element:a(f&&f.target).closest(this.element.find(".ui-menu"));if(!g.length){g=this.element}this._close(g);this.blur(f);this.activeMenu=g},this.delay)},_close:function(d){if(!d){d=this.active?this.active.parent():this.element}d.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(d){var f=this.active&&this.active.parent().closest(".ui-menu-item",this.element);if(f&&f.length){this._close();this.focus(d,f)}},expand:function(d){var f=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();if(f&&f.length){this._open(f.parent());this._delay(function(){this.focus(d,f)})}},next:function(d){this._move("next","first",d)},previous:function(d){this._move("prev","last",d)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(d,g,f){var h;if(this.active){if(d==="first"||d==="last"){h=this.active[d==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1)}else{h=this.active[d+"All"](".ui-menu-item").eq(0)}}if(!h||!h.length||!this.active){h=this.activeMenu.children(".ui-menu-item")[g]()}this.focus(f,h)},nextPage:function(f){var h,d,g;if(!this.active){this.next(f);return}if(this.isLastItem()){return}if(this._hasScroll()){d=this.active.offset().top;g=this.element.height();this.active.nextAll(".ui-menu-item").each(function(){h=a(this);return h.offset().top-d-g<0});this.focus(f,h)}else{this.focus(f,this.activeMenu.children(".ui-menu-item")[!this.active?"first":"last"]())}},previousPage:function(f){var h,d,g;if(!this.active){this.next(f);return}if(this.isFirstItem()){return}if(this._hasScroll()){d=this.active.offset().top;g=this.element.height();this.active.prevAll(".ui-menu-item").each(function(){h=a(this);return h.offset().top-d+g>0});this.focus(f,h)}else{this.focus(f,this.activeMenu.children(".ui-menu-item").first())}},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(d){this.active=this.active||a(d.target).closest(".ui-menu-item");var f={item:this.active};if(!this.active.has(".ui-menu").length){this.collapseAll(d,true)}this._trigger("select",d,f)}})}(jQuery));var AviariHelper={Const:{EVENT_ERROR:"ERROR",EVENT_SAVE:"SAVE",EVENT_CLOSE_WITHOUT_SAVE:"CLOSE_WITHOUT_SAVE",EVENT_CLOSE_POPUP:"CLOSE_POPUP"},moInstances:new Object(),Init:function(d,a,b,c){Matrix3.AddLoading();Utils.LoadScript("http://feather.aviary.com/js/feather.js",function(){b.appendTo="Form1";b.onSaveButtonClicked=function(g){var f=document.getElementById("avpw_canvas_element");if(!Utils.IsIE8()&&f){var h=new Object();h.url="";h.base64=escape(f.toDataURL("image/jpeg"));Matrix3.AddEvent(d,AviariHelper.Const.EVENT_SAVE,Matrix3.Const.RETURNTYPE_FULL,Matrix3.Const.DELAY_IMMEDIAT,JSON.stringify(h));AviariHelper.moInstances[a].close();return false}},b.onSave=function(f,g){var h=new Object();h.url=g;h.base64="";Matrix3.AddEvent(d,AviariHelper.Const.EVENT_SAVE,Matrix3.Const.RETURNTYPE_FULL,Matrix3.Const.DELAY_IMMEDIAT,JSON.stringify(h));AviariHelper.moInstances[a].close()};b.onError=function(f){alert(f.message);Matrix3.AddEvent(d,AviariHelper.Const.EVENT_ERROR,Matrix3.Const.RETURNTYPE_FULL,Matrix3.Const.DELAY_IMMEDIAT,"");AviariHelper.moInstances[a].close()};b.onClose=function(g){$("#avpw_holder").hide();if(g==true){var f=new Array();Matrix3.AddEvent(d,AviariHelper.Const.EVENT_CLOSE_WITHOUT_SAVE,Matrix3.Const.RETURNTYPE_FULL,Matrix3.Const.DELAY_IMMEDIAT,JSON.stringify(f))}};b.onLoad=function(){AviariHelper.Launch(a,"aviari_img_"+a,c);Matrix3.RemoveLoading()};b.fileFormat="jpg";AviariHelper.moInstances[a]=new Aviary.Feather(b)})},Launch:function(b,a,c){if(this.moInstances[b]){this.moInstances[b].launch({image:a,url:c});$("#avpw_holder").show()}return false}};(function(a,b){a.widget("ui.draggable",a.ui.mouse,{version:"1.9.2",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper=="original"&&!(/^(?:r|a|f)/).test(this.element.css("position"))){this.element[0].style.position="relative"}(this.options.addClasses&&this.element.addClass("ui-draggable"));(this.options.disabled&&this.element.addClass("ui-draggable-disabled"));this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(c){var d=this.options;if(this.helper||d.disabled||a(c.target).is(".ui-resizable-handle")){return false}this.handle=this._getHandle(c);if(!this.handle){return false}a(d.iframeFix===true?"iframe":d.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(a(this).offset()).appendTo("body")});return true},_mouseStart:function(c){var d=this.options;this.helper=this._createHelper(c);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();if(a.ui.ddmanager){a.ui.ddmanager.current=this}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:c.pageX-this.offset.left,top:c.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(c);this.originalPageX=c.pageX;this.originalPageY=c.pageY;(d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt));if(d.containment){this._setContainment()}if(this._trigger("start",c)===false){this._clear();return false}this._cacheHelperProportions();if(a.ui.ddmanager&&!d.dropBehaviour){a.ui.ddmanager.prepareOffsets(this,c)}this._mouseDrag(c,true);if(a.ui.ddmanager){a.ui.ddmanager.dragStart(this,c)}return true},_mouseDrag:function(c,d){this.position=this._generatePosition(c);this.positionAbs=this._convertPositionTo("absolute");if(!d){var f=this._uiHash();if(this._trigger("drag",c,f)===false){this._mouseUp({});return false}this.position=f.position}if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}if(a.ui.ddmanager){a.ui.ddmanager.drag(this,c)}return false},_mouseStop:function(g){var c=false;if(a.ui.ddmanager&&!this.options.dropBehaviour){c=a.ui.ddmanager.drop(this,g)}if(this.dropped){c=this.dropped;this.dropped=false}var d=this.element[0],f=false;while(d&&(d=d.parentNode)){if(d==document){f=true}}if(!f&&this.options.helper==="original"){return false}if((this.options.revert=="invalid"&&!c)||(this.options.revert=="valid"&&c)||this.options.revert===true||(a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c))){var h=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(h._trigger("stop",g)!==false){h._clear()}})}else{if(this._trigger("stop",g)!==false){this._clear()}}return false},_mouseUp:function(c){a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});if(a.ui.ddmanager){a.ui.ddmanager.dragStop(this,c)}return a.ui.mouse.prototype._mouseUp.call(this,c)},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp({})}else{this._clear()}return this},_getHandle:function(c){var d=!this.options.handle||!a(this.options.handle,this.element).length?true:false;a(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==c.target){d=true}});return d},_createHelper:function(c){var f=this.options;var d=a.isFunction(f.helper)?a(f.helper.apply(this.element[0],[c])):(f.helper=="clone"?this.element.clone().removeAttr("id"):this.element);if(!d.parents("body").length){d.appendTo((f.appendTo=="parent"?this.element[0].parentNode:f.appendTo))}if(d[0]!=this.element[0]&&!(/(fixed|absolute)/).test(d.css("position"))){d.css("position","absolute")}return d},_adjustOffsetFromHelper:function(c){if(typeof c=="string"){c=c.split(" ")}if(a.isArray(c)){c={left:+c[0],top:+c[1]||0}}if("left" in c){this.offset.click.left=c.left+this.margins.left}if("right" in c){this.offset.click.left=this.helperProportions.width-c.right+this.margins.left}if("top" in c){this.offset.click.top=c.top+this.margins.top}if("bottom" in c){this.offset.click.top=this.helperProportions.height-c.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var c=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])){c.left+=this.scrollParent.scrollLeft();c.top+=this.scrollParent.scrollTop()}if((this.offsetParent[0]==document.body)||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.ui.ie)){c={top:0,left:0}}return{top:c.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:c.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var c=this.element.position();return{top:c.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:c.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:(parseInt(this.element.css("marginLeft"),10)||0),top:(parseInt(this.element.css("marginTop"),10)||0),right:(parseInt(this.element.css("marginRight"),10)||0),bottom:(parseInt(this.element.css("marginBottom"),10)||0)}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var h=this.options;if(h.containment=="parent"){h.containment=this.helper[0].parentNode}if(h.containment=="document"||h.containment=="window"){this.containment=[h.containment=="document"?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,h.containment=="document"?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(h.containment=="document"?0:a(window).scrollLeft())+a(h.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(h.containment=="document"?0:a(window).scrollTop())+(a(h.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!(/^(document|window|parent)$/).test(h.containment)&&h.containment.constructor!=Array){var d=a(h.containment);var f=d[0];if(!f){return}var g=d.offset();var i=(a(f).css("overflow")!="hidden");this.containment=[(parseInt(a(f).css("borderLeftWidth"),10)||0)+(parseInt(a(f).css("paddingLeft"),10)||0),(parseInt(a(f).css("borderTopWidth"),10)||0)+(parseInt(a(f).css("paddingTop"),10)||0),(i?Math.max(f.scrollWidth,f.offsetWidth):f.offsetWidth)-(parseInt(a(f).css("borderLeftWidth"),10)||0)-(parseInt(a(f).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(i?Math.max(f.scrollHeight,f.offsetHeight):f.offsetHeight)-(parseInt(a(f).css("borderTopWidth"),10)||0)-(parseInt(a(f).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=d}else{if(h.containment.constructor==Array){this.containment=h.containment}}},_convertPositionTo:function(c,h){if(!h){h=this.position}var f=c=="absolute"?1:-1;var g=this.options,i=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,j=(/(html|body)/i).test(i[0].tagName);return{top:(h.top+this.offset.relative.top*f+this.offset.parent.top*f-((this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(j?0:i.scrollTop()))*f)),left:(h.left+this.offset.relative.left*f+this.offset.parent.left*f-((this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():j?0:i.scrollLeft())*f))}},_generatePosition:function(f){var h=this.options,k=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,l=(/(html|body)/i).test(k[0].tagName);var i=f.pageX;var j=f.pageY;if(this.originalPosition){var d;if(this.containment){if(this.relative_container){var c=this.relative_container.offset();d=[this.containment[0]+c.left,this.containment[1]+c.top,this.containment[2]+c.left,this.containment[3]+c.top]}else{d=this.containment}if(f.pageX-this.offset.click.left<d[0]){i=d[0]+this.offset.click.left}if(f.pageY-this.offset.click.top<d[1]){j=d[1]+this.offset.click.top}if(f.pageX-this.offset.click.left>d[2]){i=d[2]+this.offset.click.left}if(f.pageY-this.offset.click.top>d[3]){j=d[3]+this.offset.click.top}}if(h.grid){var m=h.grid[1]?this.originalPageY+Math.round((j-this.originalPageY)/h.grid[1])*h.grid[1]:this.originalPageY;j=d?(!(m-this.offset.click.top<d[1]||m-this.offset.click.top>d[3])?m:(!(m-this.offset.click.top<d[1])?m-h.grid[1]:m+h.grid[1])):m;var g=h.grid[0]?this.originalPageX+Math.round((i-this.originalPageX)/h.grid[0])*h.grid[0]:this.originalPageX;i=d?(!(g-this.offset.click.left<d[0]||g-this.offset.click.left>d[2])?g:(!(g-this.offset.click.left<d[0])?g-h.grid[0]:g+h.grid[0])):g}}return{top:(j-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+((this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(l?0:k.scrollTop())))),left:(i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+((this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():l?0:k.scrollLeft())))}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");if(this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval){this.helper.remove()}this.helper=null;this.cancelHelperRemoval=false},_trigger:function(d,c,f){f=f||this._uiHash();a.ui.plugin.call(this,d,[c,f]);if(d=="drag"){this.positionAbs=this._convertPositionTo("absolute")}return a.Widget.prototype._trigger.call(this,d,c,f)},plugins:{},_uiHash:function(c){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.ui.plugin.add("draggable","connectToSortable",{start:function(c,g){var d=a(this).data("draggable"),f=d.options,h=a.extend({},g,{item:d.element});d.sortables=[];a(f.connectToSortable).each(function(){var i=a.data(this,"sortable");if(i&&!i.options.disabled){d.sortables.push({instance:i,shouldRevert:i.options.revert});i.refreshPositions();i._trigger("activate",c,h)}})},stop:function(c,f){var d=a(this).data("draggable"),g=a.extend({},f,{item:d.element});a.each(d.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;d.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert){this.instance.options.revert=true}this.instance._mouseStop(c);this.instance.options.helper=this.instance.options._helper;if(d.options.helper=="original"){this.instance.currentItem.css({top:"auto",left:"auto"})}}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",c,g)}})},drag:function(d,h){var f=a(this).data("draggable"),g=this;var c=function(r){var j=this.offset.click.top,i=this.offset.click.left;var l=this.positionAbs.top,k=this.positionAbs.left;var m=r.height,q=r.width;var p=r.top,n=r.left;return a.ui.isOver(l+j,k+i,p,n,m,q)};a.each(f.sortables,function(j){var k=false;var l=this;this.instance.positionAbs=f.positionAbs;this.instance.helperProportions=f.helperProportions;this.instance.offset.click=f.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){k=true;a.each(f.sortables,function(){this.instance.positionAbs=f.positionAbs;this.instance.helperProportions=f.helperProportions;this.instance.offset.click=f.offset.click;if(this!=l&&this.instance._intersectsWith(this.instance.containerCache)&&a.ui.contains(l.instance.element[0],this.instance.element[0])){k=false}return k})}if(k){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=a(g).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return h.helper[0]};d.target=this.instance.currentItem[0];this.instance._mouseCapture(d,true);this.instance._mouseStart(d,true,true);this.instance.offset.click.top=f.offset.click.top;this.instance.offset.click.left=f.offset.click.left;this.instance.offset.parent.left-=f.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=f.offset.parent.top-this.instance.offset.parent.top;f._trigger("toSortable",d);f.dropped=this.instance.element;f.currentItem=f.element;this.instance.fromOutside=f}if(this.instance.currentItem){this.instance._mouseDrag(d)}}else{if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",d,this.instance._uiHash(this.instance));this.instance._mouseStop(d,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();if(this.instance.placeholder){this.instance.placeholder.remove()}f._trigger("fromSortable",d);f.dropped=false}}})}});a.ui.plugin.add("draggable","cursor",{start:function(c,g){var f=a("body"),d=a(this).data("draggable").options;if(f.css("cursor")){d._cursor=f.css("cursor")}f.css("cursor",d.cursor)},stop:function(c,f){var d=a(this).data("draggable").options;if(d._cursor){a("body").css("cursor",d._cursor)}}});a.ui.plugin.add("draggable","opacity",{start:function(c,g){var f=a(g.helper),d=a(this).data("draggable").options;if(f.css("opacity")){d._opacity=f.css("opacity")}f.css("opacity",d.opacity)},stop:function(c,f){var d=a(this).data("draggable").options;if(d._opacity){a(f.helper).css("opacity",d._opacity)}}});a.ui.plugin.add("draggable","scroll",{start:function(c,f){var d=a(this).data("draggable");if(d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"){d.overflowOffset=d.scrollParent.offset()}},drag:function(c,h){var d=a(this).data("draggable"),f=d.options,g=false;if(d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"){if(!f.axis||f.axis!="x"){if((d.overflowOffset.top+d.scrollParent[0].offsetHeight)-c.pageY<f.scrollSensitivity){d.scrollParent[0].scrollTop=g=d.scrollParent[0].scrollTop+f.scrollSpeed}else{if(c.pageY-d.overflowOffset.top<f.scrollSensitivity){d.scrollParent[0].scrollTop=g=d.scrollParent[0].scrollTop-f.scrollSpeed}}}if(!f.axis||f.axis!="y"){if((d.overflowOffset.left+d.scrollParent[0].offsetWidth)-c.pageX<f.scrollSensitivity){d.scrollParent[0].scrollLeft=g=d.scrollParent[0].scrollLeft+f.scrollSpeed}else{if(c.pageX-d.overflowOffset.left<f.scrollSensitivity){d.scrollParent[0].scrollLeft=g=d.scrollParent[0].scrollLeft-f.scrollSpeed}}}}else{if(!f.axis||f.axis!="x"){if(c.pageY-a(document).scrollTop()<f.scrollSensitivity){g=a(document).scrollTop(a(document).scrollTop()-f.scrollSpeed)}else{if(a(window).height()-(c.pageY-a(document).scrollTop())<f.scrollSensitivity){g=a(document).scrollTop(a(document).scrollTop()+f.scrollSpeed)}}}if(!f.axis||f.axis!="y"){if(c.pageX-a(document).scrollLeft()<f.scrollSensitivity){g=a(document).scrollLeft(a(document).scrollLeft()-f.scrollSpeed)}else{if(a(window).width()-(c.pageX-a(document).scrollLeft())<f.scrollSensitivity){g=a(document).scrollLeft(a(document).scrollLeft()+f.scrollSpeed)}}}}if(g!==false&&a.ui.ddmanager&&!f.dropBehaviour){a.ui.ddmanager.prepareOffsets(d,c)}}});a.ui.plugin.add("draggable","snap",{start:function(c,g){var d=a(this).data("draggable"),f=d.options;d.snapElements=[];a(f.snap.constructor!=String?(f.snap.items||":data(draggable)"):f.snap).each(function(){var i=a(this);var h=i.offset();if(this!=d.element[0]){d.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:h.top,left:h.left})}})},drag:function(h,y){var m=a(this).data("draggable"),q=m.options;var g=q.snapTolerance;var z=y.offset.left,A=z+m.helperProportions.width,B=y.offset.top,C=B+m.helperProportions.height;for(var k=m.snapElements.length-1;k>=0;k--){var n=m.snapElements[k].left,u=n+m.snapElements[k].width,w=m.snapElements[k].top,c=w+m.snapElements[k].height;if(!((n-g<z&&z<u+g&&w-g<B&&B<c+g)||(n-g<z&&z<u+g&&w-g<C&&C<c+g)||(n-g<A&&A<u+g&&w-g<B&&B<c+g)||(n-g<A&&A<u+g&&w-g<C&&C<c+g))){if(m.snapElements[k].snapping){(m.options.snap.release&&m.options.snap.release.call(m.element,h,a.extend(m._uiHash(),{snapItem:m.snapElements[k].item})))}m.snapElements[k].snapping=false;continue}if(q.snapMode!="inner"){var x=Math.abs(w-C)<=g;var f=Math.abs(c-B)<=g;var p=Math.abs(n-A)<=g;var v=Math.abs(u-z)<=g;if(x){y.position.top=m._convertPositionTo("relative",{top:w-m.helperProportions.height,left:0}).top-m.margins.top}if(f){y.position.top=m._convertPositionTo("relative",{top:c,left:0}).top-m.margins.top}if(p){y.position.left=m._convertPositionTo("relative",{top:0,left:n-m.helperProportions.width}).left-m.margins.left}if(v){y.position.left=m._convertPositionTo("relative",{top:0,left:u}).left-m.margins.left}}var j=(x||f||p||v);if(q.snapMode!="outer"){var x=Math.abs(w-B)<=g;var f=Math.abs(c-C)<=g;var p=Math.abs(n-z)<=g;var v=Math.abs(u-A)<=g;if(x){y.position.top=m._convertPositionTo("relative",{top:w,left:0}).top-m.margins.top}if(f){y.position.top=m._convertPositionTo("relative",{top:c-m.helperProportions.height,left:0}).top-m.margins.top}if(p){y.position.left=m._convertPositionTo("relative",{top:0,left:n}).left-m.margins.left}if(v){y.position.left=m._convertPositionTo("relative",{top:0,left:u-m.helperProportions.width}).left-m.margins.left}}if(!m.snapElements[k].snapping&&(x||f||p||v||j)){(m.options.snap.snap&&m.options.snap.snap.call(m.element,h,a.extend(m._uiHash(),{snapItem:m.snapElements[k].item})))}m.snapElements[k].snapping=(x||f||p||v||j)}}});a.ui.plugin.add("draggable","stack",{start:function(c,h){var g=a(this).data("draggable").options;var d=a.makeArray(a(g.stack)).sort(function(i,j){return(parseInt(a(i).css("zIndex"),10)||0)-(parseInt(a(j).css("zIndex"),10)||0)});if(!d.length){return}var f=parseInt(d[0].style.zIndex)||0;a(d).each(function(j){this.style.zIndex=f+j});this[0].style.zIndex=f+d.length}});a.ui.plugin.add("draggable","zIndex",{start:function(c,g){var f=a(g.helper),d=a(this).data("draggable").options;if(f.css("zIndex")){d._zIndex=f.css("zIndex")}f.css("zIndex",d.zIndex)},stop:function(c,f){var d=a(this).data("draggable").options;if(d._zIndex){a(f.helper).css("zIndex",d._zIndex)}}})})(jQuery);(function(a,b){a.widget("ui.droppable",{version:"1.9.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect"},_create:function(){var d=this.options,c=d.accept;this.isover=0;this.isout=1;this.accept=a.isFunction(c)?c:function(f){return f.is(c)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};a.ui.ddmanager.droppables[d.scope]=a.ui.ddmanager.droppables[d.scope]||[];a.ui.ddmanager.droppables[d.scope].push(this);(d.addClasses&&this.element.addClass("ui-droppable"))},_destroy:function(){var c=a.ui.ddmanager.droppables[this.options.scope];for(var d=0;d<c.length;d++){if(c[d]==this){c.splice(d,1)}}this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(c,d){if(c=="accept"){this.accept=a.isFunction(d)?d:function(f){return f.is(d)}}a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(d){var c=a.ui.ddmanager.current;if(this.options.activeClass){this.element.addClass(this.options.activeClass)}(c&&this._trigger("activate",d,this.ui(c)))},_deactivate:function(d){var c=a.ui.ddmanager.current;if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}(c&&this._trigger("deactivate",d,this.ui(c)))},_over:function(d){var c=a.ui.ddmanager.current;if(!c||(c.currentItem||c.element)[0]==this.element[0]){return}if(this.accept.call(this.element[0],(c.currentItem||c.element))){if(this.options.hoverClass){this.element.addClass(this.options.hoverClass)}this._trigger("over",d,this.ui(c))}},_out:function(d){var c=a.ui.ddmanager.current;if(!c||(c.currentItem||c.element)[0]==this.element[0]){return}if(this.accept.call(this.element[0],(c.currentItem||c.element))){if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("out",d,this.ui(c))}},_drop:function(g,d){var f=d||a.ui.ddmanager.current;if(!f||(f.currentItem||f.element)[0]==this.element[0]){return false}var c=false;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var h=a.data(this,"droppable");if(h.options.greedy&&!h.options.disabled&&h.options.scope==f.options.scope&&h.accept.call(h.element[0],(f.currentItem||f.element))&&a.ui.intersect(f,a.extend(h,{offset:h.element.offset()}),h.options.tolerance)){c=true;return false}});if(c){return false}if(this.accept.call(this.element[0],(f.currentItem||f.element))){if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("drop",g,this.ui(f));return this.element}return false},ui:function(d){return{draggable:(d.currentItem||d.element),helper:d.helper,position:d.position,offset:d.positionAbs}}});a.ui.intersect=function(d,h,n){if(!h.offset){return false}var o=(d.positionAbs||d.position.absolute).left,p=o+d.helperProportions.width,q=(d.positionAbs||d.position.absolute).top,u=q+d.helperProportions.height;var j=h.offset.left,k=j+h.proportions.width,m=h.offset.top,c=m+h.proportions.height;switch(n){case"fit":return(j<=o&&p<=k&&m<=q&&u<=c);break;case"intersect":return(j<o+(d.helperProportions.width/2)&&p-(d.helperProportions.width/2)<k&&m<q+(d.helperProportions.height/2)&&u-(d.helperProportions.height/2)<c);break;case"pointer":var f=((d.positionAbs||d.position.absolute).left+(d.clickOffset||d.offset.click).left),g=((d.positionAbs||d.position.absolute).top+(d.clickOffset||d.offset.click).top),i=a.ui.isOver(g,f,m,j,h.proportions.height,h.proportions.width);return i;break;case"touch":return((q>=m&&q<=c)||(u>=m&&u<=c)||(q<m&&u>c))&&((o>=j&&o<=k)||(p>=j&&p<=k)||(o<j&&p>k));break;default:return false;break}};a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(k,c){var h=a.ui.ddmanager.droppables[k.options.scope]||[];var l=c?c.type:null;var g=(k.currentItem||k.element).find(":data(droppable)").andSelf();droppablesLoop:for(var d=0;d<h.length;d++){if(h[d].options.disabled||(k&&!h[d].accept.call(h[d].element[0],(k.currentItem||k.element)))){continue}for(var f=0;f<g.length;f++){if(g[f]==h[d].element[0]){h[d].proportions.height=0;continue droppablesLoop}}h[d].visible=h[d].element.css("display")!="none";if(!h[d].visible){continue}if(l=="mousedown"){h[d]._activate.call(h[d],c)}h[d].offset=h[d].element.offset();h[d].proportions={width:h[d].element[0].offsetWidth,height:h[d].element[0].offsetHeight}}},drop:function(c,f){var d=false;a.each(a.ui.ddmanager.droppables[c.options.scope]||[],function(){if(!this.options){return}if(!this.options.disabled&&this.visible&&a.ui.intersect(c,this,this.options.tolerance)){d=this._drop.call(this,f)||d}if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],(c.currentItem||c.element))){this.isout=1;this.isover=0;this._deactivate.call(this,f)}});return d},dragStart:function(c,d){c.element.parentsUntil("body").bind("scroll.droppable",function(){if(!c.options.refreshPositions){a.ui.ddmanager.prepareOffsets(c,d)}})},drag:function(c,d){if(c.options.refreshPositions){a.ui.ddmanager.prepareOffsets(c,d)}a.each(a.ui.ddmanager.droppables[c.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var g=a.ui.intersect(c,this,this.options.tolerance);var f=!g&&this.isover==1?"isout":(g&&this.isover==0?"isover":null);if(!f){return}var i;if(this.options.greedy){var j=this.options.scope;var h=this.element.parents(":data(droppable)").filter(function(){return a.data(this,"droppable").options.scope===j});if(h.length){i=a.data(h[0],"droppable");i.greedyChild=(f=="isover"?1:0)}}if(i&&f=="isover"){i.isover=0;i.isout=1;i._out.call(i,d)}this[f]=1;this[f=="isout"?"isover":"isout"]=0;this[f=="isover"?"_over":"_out"].call(this,d);if(i&&f=="isout"){i.isout=0;i.isover=1;i._over.call(i,d)}})},dragStop:function(c,d){c.element.parentsUntil("body").unbind("scroll.droppable");if(!c.options.refreshPositions){a.ui.ddmanager.prepareOffsets(c,d)}}}})(jQuery);
/* http://mths.be/placeholder v2.0.7 by @mathias 
*
* An event on the window unload was deleted for Orange logic version
*/
(function(m,d,a){var g="placeholder" in d.createElement("input"),h="placeholder" in d.createElement("textarea"),j=a.fn,l=a.valHooks,f,i;if(g&&h){i=j.placeholder=function(){return this};i.input=i.textarea=true}else{i=j.placeholder=function(){var n=this;n.filter((g?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":c,"blur.placeholder":k}).data("placeholder-enabled",true).trigger("blur.placeholder");return n};i.input=g;i.textarea=h;f={get:function(o){var n=a(o);return n.data("placeholder-enabled")&&n.hasClass("placeholder")?"":o.value},set:function(o,p){var n=a(o);if(!n.data("placeholder-enabled")){return o.value=p}if(p==""){o.value=p;if(o!=d.activeElement){k.call(o)}}else{if(n.hasClass("placeholder")){c.call(o,true,p)||(o.value=p)}else{o.value=p}}return n}};g||(l.input=f);h||(l.textarea=f);a(function(){a(d).delegate("form","submit.placeholder",function(){var n=a(".placeholder",this).each(c);setTimeout(function(){n.each(k)},10)})})}function b(n){var o={},p=/^jQuery\d+$/;a.each(n.attributes,function(r,q){if(q.specified&&!p.test(q.name)){o[q.name]=q.value}});return o}function c(o,q){var p=this,n=a(p);if(p.value==n.attr("placeholder")&&n.hasClass("placeholder")){if(n.data("placeholder-password")){n=n.hide().next().show().attr("id",n.removeAttr("id").data("placeholder-id"));if(o===true){return n[0].value=q}n.focus()}else{p.value="";n.removeClass("placeholder");p==d.activeElement&&p.select()}}}function k(){var p,t=this,n=a(t),o=n,r=this.id;if(t.value==""){if(t.type=="password"){if(!n.data("placeholder-textinput")){try{p=n.clone().attr({type:"text"})}catch(q){p=a("<input>").attr(a.extend(b(this),{type:"text"}))}p.removeAttr("name").data({"placeholder-password":true,"placeholder-id":r}).bind("focus.placeholder",c);n.data({"placeholder-textinput":p,"placeholder-id":r}).before(p)}n=n.removeAttr("id").hide().prev().attr("id",r).show()}n.addClass("placeholder");n[0].value=n.attr("placeholder")}else{n.removeClass("placeholder")}}}(this,document,jQuery));var DragDropMgr={moDraggablesInstances:new Array(),moDroppablesInstances:new Array(),mbIsDropped:false,msLastDroppableID:"",masRulers:new Array(),moCurrentHRuler:null,moCurrentVRuler:null,moDDObjects:new Object(),DraggableSubscribe:function(b,a){this.moDraggablesInstances[b]=a},DroppableSubscribe:function(b,a){this.moDroppablesInstances[b]=a},GetGroupsClass:function(a){var d=new Array();if(Utils.IsUndefined(a)||!Utils.IsObject(a)||a.length==0){d.push(DragDropMgr.Const.GROUP_CLASS_ALL);return d}for(var b=0,c=a.length;b<c;b++){d.push(DragDropMgr.Const.GROUP_CLASS_PREFIX+a[b])}return d},IsDrag:function(){return this.mbIsDrag},SetDrag:function(a){this.mbIsDrag=a},RefreshCache:function(){this.RefreshParams()},RefreshParams:function(){DragDropMgr.mbIsDropped=false;DragDropMgr.msLastDroppableID=""},RefreshNode:function(a){DragDropMgr.RefreshParams()},AddRuler:function(c,b,a){if(b.toLowerCase()=="horizontal"){var f=Utils.GetY(a)+parseInt(c);this.masRulers.push(new Array(f,b,a))}else{var d=Utils.GetX(a)+parseInt(c);this.masRulers.push(new Array(d,b,a))}},GetCurrentVRuler:function(){return this.moCurrentVRuler},GetCurrentHRuler:function(){return this.moCurrentHRuler},ClearRulers:function(){this.masRulers=new Array()},CleanCurrentHRuler:function(){if(this.moCurrentHRuler){$RemoveClass(this.moCurrentHRuler[2],DragDropMgr.Const.CLASS_HRULER_OVER);this.moCurrentHRuler=null}},CleanCurrentVRuler:function(){if(this.moCurrentVRuler){$RemoveClass(this.moCurrentVRuler[2],DragDropMgr.Const.CLASS_VRULER_OVER);this.moCurrentVRuler=null}},GetRulers:function(){return this.masRulers},UpdateHRuler:function(a){var b=false;if(this.moCurrentHRuler!=a){if(this.moCurrentHRuler){$RemoveClass(this.moCurrentHRuler[2],DragDropMgr.Const.CLASS_HRULER_OVER)}$AddClass(a[2],DragDropMgr.Const.CLASS_HRULER_OVER);b=true;this.moCurrentHRuler=a}return b},UpdateVRuler:function(a){var b=false;if(this.moCurrentVRuler!=a){if(this.moCurrentVRuler){$RemoveClass(this.moCurrentVRuler[2],DragDropMgr.Const.CLASS_VRULER_OVER)}$AddClass(a[2],DragDropMgr.Const.CLASS_VRULER_OVER);b=true;this.moCurrentVRuler=a}return b},AddDDObject:function(a){this.moDDObjects[a]=a},GetDDObject:function(a){return this.moDDObjects[a]}};DragDropMgr.Const={MGR_NAME:"DragDropMgr",GROUP_CLASS_PREFIX:"DDMGroup_",GROUP_CLASS_ALL:"DDMGroupALL",SUFFIX_PROXY:"_Proxy",FEEDBACK_CLASS:"DragDrop_Feedback",FEEDBACK_INVALID_CLASS:"DragDrop_FeedbackInvalid",PROXY_CLASS:"DragDrop_Proxy",DRAGELEMENT_ID:"DragDrop_DragElement",ISDRAG_CLASS:"DragDrop_IsDrag",KEY_NEXT_VFORM_ID:"NextVFormID",KEY_PREVIOUS_VFORM_ID:"PreviousVFormID",INSERT_AFTER_CLASS:"InsertAfter",INSERT_PREVIOUS_CLASS:"InsertBefore",CONTROL_IMAGEPANEL:"ImagePanel",CLASS_OVERTARGET:"OverTarget",CLASS_DRAG_DROP_HORIZONTAL:"DragDrop_Feedback_H",CLASS_DRAG_DROP_VERTICAL:"DragDrop_Feedback_V",PROXY_IMAGE_SIZE:100,PROXY_MODE_IMAGE:"Image",CLASS_PROXY:"Proxy",ID_PROXY_MESSAGE:"DragProxyMessage",REORDER_MODE_VERTICAL:"vertical"};var DragDropReorderMgr={moDroppableVForm:null,msLastInsertID:"",mbInsertBefore:true,miLastX:0,miLastY:0};DragDropReorderMgr.Const={INSERT_AFTER_CLASS:"InsertAfter",INSERT_PREVIOUS_CLASS:"InsertBefore",REORDER_MODE_VERTICAL:"vertical",CLASS_DRAG_DROP_HORIZONTAL:"DragDrop_Feedback_H",CLASS_DRAG_DROP_VERTICAL:"DragDrop_Feedback_V"};DraggableItem.Const={SUFFIX_PROXY:"_Proxy",FEEDBACK_CLASS:"DragDrop_Feedback",FEEDBACK_INVALID_CLASS:"DragDrop_FeedbackInvalid",PROXY_CLASS:"DragDrop_Proxy",DRAGELEMENT_ID:"DragDrop_DragElement",ISDRAG_CLASS:"DragDrop_IsDrag",KEY_NEXT_VFORM_ID:"NextVFormID",KEY_PREVIOUS_VFORM_ID:"PreviousVFormID",INSERT_AFTER_CLASS:"InsertAfter",INSERT_PREVIOUS_CLASS:"InsertBefore",CONTROL_IMAGEPANEL:"ImagePanel",CLASS_OVERTARGET:"OverTarget",CLASS_DRAG_DROP_HORIZONTAL:"DragDrop_Feedback_H",CLASS_DRAG_DROP_VERTICAL:"DragDrop_Feedback_V",PROXY_IMAGE_SIZE:100,PROXY_MODE_IMAGE:"Image",CLASS_PROXY:"Proxy",ID_PROXY_MESSAGE:"DragProxyMessage",REORDER_MODE_VERTICAL:"vertical"};DraggableItem.DefaultOptions={ReturnType:Matrix3.Const.COMMAND_DROP_VS,VFormEffects:"",PleaseWaitMsg:"",PageVirtualID:"",ProxyMode:DraggableItem.Const.PROXY_MODE_IMAGE,ProxyMessage:"",ProxyOpacity:0.8,CursorAtOfHelper:{left:0,top:0},CursorType:"pointer",RevertMode:"invalid",RevertDuration:250,ReorderMode:"",DontMoveWhenReorder:false};DraggableItem.DefaultHelper=null;function DraggableItem(c,a,b){if(typeof(b)!=="object"){b={}}this.moOptions=$.extend(DraggableItem.DefaultOptions,b);this.msID=c;this.maDragGroups=a;this.msGroupsStringList=a.join(Utils.Const.GROUP_SEPARATOR);this.masMultiSelectionGroup=new Array();DragDropMgr.DraggableSubscribe(this.msID,this);this.oDragItem=$E(this.msID);this.mbIsReorder=false;this._SetDraggableProperty()}DraggableItem.prototype._SetDraggableProperty=function(){var a=this;this.oDragItem.draggable({scroll:true,refreshPositions:function(){if(Utils.IsIE8()){return false}return true},appendTo:"body",opacity:a.moOptions.ProxyOpacity,zIndex:99999,cursorAt:a.moOptions.CursorAtOfHelper,helper:function(){return a.GetHelper()},revert:a.moOptions.RevertMode,revertDuration:a.moOptions.RevertDuration,cursor:a.moOptions.CursorType,create:function(b,c){a.SpecificCreate(b,c,$(this))},start:function(d,h){a.Clean();var b=MultipleSelectionMgr.GetInstance().GetItemsFromGroupsIn(a.msID);a.masMultiSelectionGroup=new Array();var c=false;if(b!=null&&b.length>0){for(var f=0,g=b.length;f<g;f++){if(b[f].GetID()==a.msID){c=true}a.masMultiSelectionGroup.push(b[f].GetID());$E(b[f].GetID()).addClass(DragDropMgr.Const.ISDRAG_CLASS)}}if(!c){a.masMultiSelectionGroup.push(a.msID)}$(this).addClass(DragDropMgr.Const.ISDRAG_CLASS);h.helper.addClass(DragDropMgr.Const.FEEDBACK_INVALID_CLASS+" "+DragDropMgr.Const.FEEDBACK_CLASS);if($Control(a.msID,PanelAdvancedCtrl.Const.CONTROL_NAME).Event_StartDrag){$Control(a.msID,PanelAdvancedCtrl.Const.CONTROL_NAME).Event_StartDrag.Fire()}a.SpecificStart(d,h,$(this))},drag:function(b,c){if($("."+DragDropMgr.Const.CLASS_OVERTARGET).length==0){c.helper.addClass(DragDropMgr.Const.FEEDBACK_INVALID_CLASS)}if(a.mbIsReorder){a.SpecificDragReorder(b,c,$(this))}a.SpecificDrag(b,c,$(this))},stop:function(b,g){for(var c=0,d=a.masMultiSelectionGroup.length;c<d;c++){$E(a.masMultiSelectionGroup[c]).removeClass(DragDropMgr.Const.ISDRAG_CLASS);$E(a.masMultiSelectionGroup[c]).removeClass(MultipleSelectionMgr.Const.ITEM_OVER_CLASS)}$(this).removeClass(DragDropMgr.Const.ISDRAG_CLASS);if(DragDropMgr.mbIsDropped&&DragDropMgr.msLastDroppableID!=null&&DragDropMgr.msLastDroppableID!=""){var f=DragDropMgr.moDroppablesInstances[DragDropMgr.msLastDroppableID];a.ExecuteDrop(b,g,f)}if(DragDropReorderMgr.moDroppableVForm){DragDropReorderMgr.moDroppableVForm.removeClass(DragDropReorderMgr.Const.INSERT_PREVIOUS_CLASS+" "+DragDropReorderMgr.Const.INSERT_AFTER_CLASS)}if($Control(a.msID,PanelAdvancedCtrl.Const.CONTROL_NAME).Event_EndDrag){if(isNaN($Control(a.msID,PanelAdvancedCtrl.Const.CONTROL_NAME).Event_EndDrag.miDelay)){$Control(a.msID,PanelAdvancedCtrl.Const.CONTROL_NAME).Event_EndDrag.Fire()}else{window.setTimeout(function(){if(!DragDropMgr.IsDrag()&&$Control(a.msID,PanelAdvancedCtrl.Const.CONTROL_NAME).Event_EndDrag){$Control(a.msID,PanelAdvancedCtrl.Const.CONTROL_NAME).Event_EndDrag.Fire()}},$Control(a.msID,PanelAdvancedCtrl.Const.CONTROL_NAME).Event_EndDrag.miDelay)}}a.SpecificStop(b,g,$(this))}})};DraggableItem.prototype.Clean=function(){this.masMultiSelectionGroup=new Array();DragDropMgr.RefreshParams()};DraggableItem.prototype.AddDragGroups=function(a){if(this.msGroupsStringList!=""){this.msGroupsStringList+=Utils.Const.GROUP_SEPARATOR}this.msGroupsStringList+=a.join(Utils.Const.GROUP_SEPARATOR);this.maDragGroups=this.maDragGroups.concat(a);this.RefreshDragClasses()};DraggableItem.prototype.RefreshDragClasses=function(){var a=DragDropMgr.GetGroupsClass(this.maDragGroups);for(var b=0,c=a.length;b<c;b++){if(!this.oDragItem.hasClass(a[b])){this.oDragItem.addClass(a[b])}}};DraggableItem.prototype.ExecuteDrop=function(a,c,b){if(this.mbIsReorder){this.ExecuteDropReorder(a,c,b)}else{this.SimpleDrop(a,c,b)}};DraggableItem.prototype.SimpleDrop=function(g,A,p){var b=new Array();var c=new Array();var w=false;var x=p.GetID().split(Matrix3.Const.SEPARATOR_CONTROL)[1];for(var h=0,n=this.masMultiSelectionGroup.length;h<n;h++){var q=$E(this.masMultiSelectionGroup[h]);if(q!=null){var f=this.masMultiSelectionGroup[h].split(Matrix3.Const.SEPARATOR_CONTROL);var o=new Object();o[Matrix3.Const.ARG_VFORMID]=f[0];o[Matrix3.Const.ARG_PANEL]=x;c.push(f[0]);if(f.length>=1){o[Matrix3.Const.ARG_CONTROL]=f[1]}var d=new Array();o[Matrix3.Const.ARG_GROUPS]=this.msGroupsStringList;var a=Utils.GetMousePosition(g);var j=Utils.GetX(p.GetID());var k=Utils.GetY(p.GetID());var l=(a[0]-j);var m=(a[1]-k);o[Matrix3.Const.ARG_COORDX]=""+Math.round(l);o[Matrix3.Const.ARG_COORDY]=""+Math.round(m);var u=$E(p.GetID().split(Matrix3.Const.SEPARATOR_CONTROL)[0]);var v=(u.next())?u.next().attr("id"):null;o[Matrix3.Const.ARG_NEXT_VFORMID]=v;var y=(u.prev())?u.prev().attr("id"):null;o[Matrix3.Const.ARG_PREVIOUS_VFORMID]=y;var r=MultipleSelectionMgr.GetInstance().GetSelectedItemByID(this.masMultiSelectionGroup[h]);if(r!=null){if(!r.IsKeepSelected()){r.DeselectItem()}o[Matrix3.Const.ARG_POSITION]=""+r.GetIndex()}b.push(o)}}var z;if(w){z=w}else{var f=p.GetID().split(Matrix3.Const.SEPARATOR_CONTROL);z=f[0]}var t=this.moOptions.ReturnType==Matrix3.Const.RETURNTYPE_FULL?Matrix3.Const.COMMAND_DROP_F:Matrix3.Const.COMMAND_DROP_VS;Matrix3.AddEvent(z,Matrix3.Const.EVENT_DROP,Matrix3.Const.RETURNTYPE_FULL,Matrix3.Const.DELAY_IMMEDIAT,JSON.stringify(b),t,c,this.moOptions.VirtualID,"",this.moOptions.VFormEffects,false,this.moOptions.PleaseWaitMsg,false,this.moOptions.PageVirtualID)};DraggableItem.prototype.GetID=function(){return this.msID};DraggableItem.prototype.GetHelper=function(){if(this.moOptions.ProxyMode==DraggableItem.Const.PROXY_MODE_IMAGE){return $("img",this.oDragItem).first().clone()}if(DraggableItem.DefaultHelper==null){DraggableItem.DefaultHelper=$('<div class="'+DragDropMgr.Const.FEEDBACK_CLASS+" "+DragDropMgr.Const.FEEDBACK_INVALID_CLASS+'"></div>').css({width:"22px",height:"25px"})}return DraggableItem.DefaultHelper};DraggableItem.prototype.SpecificCreate=function(b,c,a){};DraggableItem.prototype.SpecificStart=function(b,c,a){};DraggableItem.prototype.SpecificDrag=function(b,c,a){};DraggableItem.prototype.SpecificStop=function(b,c,a){};DraggableItem.prototype.SpecificDragReorder=function(c,l,b){if(DragDropReorderMgr.msLastInsertID){if(DragDropReorderMgr.mbInsertBefore){DragDropReorderMgr.moDroppableVForm.removeClass(DragDropReorderMgr.Const.INSERT_AFTER_CLASS);DragDropReorderMgr.moDroppableVForm.addClass(DragDropReorderMgr.Const.INSERT_PREVIOUS_CLASS)}else{DragDropReorderMgr.moDroppableVForm.addClass(DragDropReorderMgr.Const.INSERT_AFTER_CLASS);DragDropReorderMgr.moDroppableVForm.removeClass(DragDropReorderMgr.Const.INSERT_PREVIOUS_CLASS)}}c=$.event.fix(c);var f=c.pageX;var g=c.pageY;if(this.moOptions.ReorderMode==DragDropReorderMgr.Const.REORDER_MODE_VERTICAL){if(Math.abs(g-DragDropReorderMgr.miLastY)>1){DragDropReorderMgr.mbInsertBefore=(g<DragDropReorderMgr.miLastY);DragDropReorderMgr.miLastY=g}}else{if(Math.abs(f-DragDropReorderMgr.miLastX)>5){DragDropReorderMgr.mbInsertBefore=(f<DragDropReorderMgr.miLastX);DragDropReorderMgr.miLastX=f}}var a=DragDropMgr.GetRulers();var j=false;var k=false;for(var d=0,h=a.length;d<h;d++){if(!j&&a[d][1].toLowerCase()=="horizontal"&&g>a[d][0]&&g<(a[d][0]+DragDropMgr.Const.RULER_ATTRACTION)){if(DragDropMgr.UpdateHRuler(a[d],DragDropMgr.Const.CLASS_HRULER_OVER)){l.helper.addClass(DragDropReorderMgr.Const.CLASS_DRAG_DROP_HORIZONTAL)}l.helper.css("top",(a[d][0]-19)+"px");j=true}if(!k&&a[d][1].toLowerCase()=="vertical"&&f>a[d][0]&&f<(a[d][0]+DragDropMgr.Const.RULER_ATTRACTION)){if(DragDropMgr.UpdateVRuler(a[d],DragDropMgr.Const.CLASS_VRULER_OVER)){l.helper.addClass(DragDropReorderMgr.Const.CLASS_DRAG_DROP_VERTICAL)}l.helper.css("left",(a[d][0]-19)+"px");k=true}}if(!j){DragDropMgr.CleanCurrentHRuler();l.helper.removeClass(DragDropReorderMgr.Const.CLASS_DRAG_DROP_HORIZONTAL)}if(!k){DragDropMgr.CleanCurrentVRuler();l.helper.removeClass(DragDropReorderMgr.Const.CLASS_DRAG_DROP_VERTICAL)}};DraggableItem.prototype.ExecuteDropReorder=function(a,c,b){if(typeof DragDropReorderMgr.moDroppableVForm=="undefined"||DragDropReorderMgr.moDroppableVForm==null){this.SimpleDrop(a,c,b)}else{this.ReorderDrop(a,c,b)}};DraggableItem.prototype.ReorderDrop=function(f,q,k){var a=new Array();this.masMultiSelectionGroup=MultipleSelectionMgr.GetInstance().Sort(this.masMultiSelectionGroup,DragDropReorderMgr.msLastInsertID,DragDropReorderMgr.mbInsertBefore,true);var b=new Array();var o=(DragDropReorderMgr.mbInsertBefore)?DragDropReorderMgr.moDroppableVForm[0]:DragDropReorderMgr.moDroppableVForm[0].nextSibling;var d=true;for(var g=0,h=this.masMultiSelectionGroup.length;g<h;g++){var c=this.masMultiSelectionGroup[g].split(Matrix3.Const.SEPARATOR_CONTROL);b.push(c[0]);var n=MultipleSelectionMgr.GetInstance().GetSelectedItemByID(this.masMultiSelectionGroup[g]);n.DeselectItem();var m=new Object();m.msVFormID=c[0];m.miPosition=n.GetIndex();m.msParentVFormID=DragDropReorderMgr.moDroppableVForm.attr("id").substring(0,DragDropReorderMgr.moDroppableVForm.attr("id").lastIndexOf(Matrix3.Const.SEPARATOR_HIERARCHY));m.msBeforeVFormID=(o==null)?null:o.id;a.push(m);if(!this.moOptions.DontMoveWhenReorder){var j=$E(c[0]);if(typeof j[0]!="undefined"&&typeof j.parent().get(0)!="undefined"&&j.parent().get(0)){if(o!=null&&!Utils.IsUndefined(o)){if(j[0].id!=o.id){j.insertBefore($E(o.id))}else{d=false;break}}else{DragDropReorderMgr.moDroppableVForm.parent().append(j)}if(Utils.IsIE8()){var l=$PI(j.parent().attr("id"));l.AddControl($PI(j.attr("id")),$PI(j.attr("id")),$PI($(o).attr("id")))}else{j.parent().get(0).AddControl(j.get(0),j.get(0),o)}o=j.get(0).nextSibling}else{d=false}}}if(!d){return false}var p=$PI(DragDropReorderMgr.moDroppableVForm.parent().attr("id"));PositionMgr.GetInstance().AddToDirtyXList(p);PositionMgr.GetInstance().AddToDirtyYList(p);p.ForceHasChanged();PositionMgr.GetInstance().CalculatePosition();DragDropReorderMgr.moDroppableVForm.removeClass(DragDropReorderMgr.Const.INSERT_PREVIOUS_CLASS);DragDropReorderMgr.moDroppableVForm.removeClass(DragDropReorderMgr.Const.INSERT_AFTER_CLASS);Matrix3.AddEvent("reorder",Matrix3.Const.EVENT_REORDER,Matrix3.Const.RETURNTYPE_FULL,Matrix3.Const.DELAY_IMMEDIAT,JSON.stringify(a),Matrix3.Const.COMMAND_REORDER,b,this.moOptions.VirtualID,"",this.moOptions.VFormEffects,false,this.moOptions.PleaseWaitMsg,false,this.moOptions.PageVirtualID)};function DroppableItem(c,a,b){this.msID=c;DragDropMgr.DroppableSubscribe(this.msID,this);this.oDropItem=$E(this.msID);this.mbIsReorder=false;this.maGroups=a;this.moPI=$PI(this.msID);this.mbIsDroppable=null;if(Utils.IsIE8()==false){this._BindMouseMoveOnParent()}else{this._SetDroppableProperty()}}DroppableItem.prototype._BindMouseMoveOnParent=function(){var b=this;var a=$(this.moPI.moParent);a.bind("mouseover",function(){b._EnableDroppableProperty()})};DroppableItem.prototype._EnableDroppableProperty=function(){if(this.mbIsDroppable==null){this._SetDroppableProperty()}else{if(this.mbIsDroppable===false){this.oDropItem.droppable("enable");this.mbIsDroppable=true}}};DroppableItem.prototype._DisableDroppableProperty=function(){if(this.mbIsDroppable===true){this.oDropItem.droppable("disable");this.mbIsDroppable=false}};DroppableItem.prototype._SetDroppableProperty=function(){var a=this;this.mbIsDroppable=true;this.oDropItem.droppable({hoverClass:DragDropMgr.Const.CLASS_OVERTARGET,tolerance:"pointer",accept:a.GetAcceptGroups(a.maGroups),over:function(b,c){c.helper.removeClass(DragDropMgr.Const.FEEDBACK_INVALID_CLASS);if(a.mbIsReorder){a.SpecificOverReorder(b,c,$(this))}a.SpecificOver(b,c,$(this))},out:function(b,c){if(a.mbIsReorder){a.SpecificOutReorder(b,c,$(this))}a.SpecificOut(b,c,$(this));if(Utils.IsIE8()==false){a._DisableDroppableProperty()}},drop:function(b,c){DragDropMgr.mbIsDropped=true;DragDropMgr.msLastDroppableID=a.msID}})};DroppableItem.prototype.GetAcceptGroups=function(a){if(typeof(a)!="object"||a.length==0){return"*"}var d=DragDropMgr.GetGroupsClass(a);var f="";for(var b=0,c=d.length;b<c;b++){if(b>0){f+=","}f+="."+d[b]}return f};DraggableItem.prototype.AddDropGroups=function(a){this.maGroups=this.maGroups.concat(a);this.oDropItem.droppable("option","accept",this.GetAcceptGroups(this.maGroups))};DroppableItem.prototype.GetID=function(){return this.msID};DroppableItem.prototype.SpecificCreate=function(b,c,a){};DroppableItem.prototype.SpecificActivate=function(b,c,a){};DroppableItem.prototype.SpecificDesactivate=function(b,c,a){};DroppableItem.prototype.SpecificOver=function(b,c,a){};DroppableItem.prototype.SpecificOut=function(b,c,a){};DroppableItem.prototype.SpecificDrop=function(b,c,a){};DroppableItem.prototype.SpecificOverReorder=function(c,g,b){var a=b.attr("id").split(Matrix3.Const.SEPARATOR_CONTROL);var f=$E(a[0]);var d=f.parent();if(d){if(DragDropReorderMgr.moDroppableVForm){DragDropReorderMgr.moDroppableVForm.removeClass(DragDropReorderMgr.Const.INSERT_AFTER_CLASS);DragDropReorderMgr.moDroppableVForm.removeClass(DragDropReorderMgr.Const.INSERT_PREVIOUS_CLASS)}DragDropReorderMgr.msLastInsertID=b.attr("id");DragDropReorderMgr.moDroppableVForm=f;if(DragDropReorderMgr.mbInsertBefore){DragDropReorderMgr.moDroppableVForm.removeClass(DragDropReorderMgr.Const.INSERT_AFTER_CLASS);DragDropReorderMgr.moDroppableVForm.addClass(DragDropReorderMgr.Const.INSERT_PREVIOUS_CLASS)}else{DragDropReorderMgr.moDroppableVForm.addClass(DragDropReorderMgr.Const.INSERT_AFTER_CLASS);DragDropReorderMgr.moDroppableVForm.removeClass(DragDropReorderMgr.Const.INSERT_PREVIOUS_CLASS)}}};DroppableItem.prototype.SpecificOutReorder=function(c,d,b){var a=b.attr("id").split(Matrix3.Const.SEPARATOR_CONTROL);if(DragDropReorderMgr.moDroppableVForm&&DragDropReorderMgr.moDroppableVForm.attr("id")==a[0]){DragDropReorderMgr.moDroppableVForm.removeClass(DragDropReorderMgr.Const.INSERT_PREVIOUS_CLASS);DragDropReorderMgr.moDroppableVForm.removeClass(DragDropReorderMgr.Const.INSERT_AFTER_CLASS);DragDropReorderMgr.msLastInsertID=null;DragDropReorderMgr.moDroppableVForm=null}};var TranslationMode={Start:function(){$.contextMenu({selector:"."+TranslationMode.Const.CLASS,callback:function(a,b){var f=$(this[0]);var c=f.attr("data-vf");var d=f.attr("data-vc");window.open("C.aspx?VP3=ParamTranslate&M="+c+"&PO=true&P="+d,"Translate",config="height=600, width=1150, toolbar=no, menubar=no, scrollbars=yes, resizable=yes, location=no, directories=no, status=no")},items:{translate:{name:"Translate",icon:"translate"}}})}};TranslationMode.Const={CLASS:"TT"};var addthis_share={url_transforms:{shorten:{twitter:"bitly"}},shorteners:{bitly:{}}};var Effect={Pulse:function(c,b,a){var f=$Elt(c,true);var d=null;if(Utils.IsIPad()){b=0}if(isNaN(b)){b=Effect.Const.DEFAULT_DURATION}if(f!=null&&$S(f,"display")=="block"){oElt=$E(c);function g(){oElt.fadeTo(b*1000,0.5).fadeTo(b*1000,1,g)}g()}return f},Fade:function(c,b,a){if(Utils.IsIPad()){b=0}if(b==null||isNaN(b)){b=Effect.Const.DEFAULT_DURATION}oElt=$E(c);oElt.stop().fadeOut(b*1000,a);return oElt},Appear:function(c,b,a){var d=null;if(typeof c==="string"){d=$E(c)}else{d=$(c)}if(Utils.IsIPad()){b=0}if(b==null||isNaN(b)){b=Effect.Const.DEFAULT_DURATION}d.removeClass(StyleMgr.Const.CLASS_INVISIBLE);d.stop().fadeTo(0,0).fadeTo(b*1000,1,a);return d},Highlight:function(c,a,b){},Show:function(a){$SetStyle(a,"display","block")},Hide:function(a){$SetStyle(a,"display","none")},SlideBottom:function(b,a){}};Effect.Const={EFFECT_NONE:"None",SEPARATOR_DURATION:"|",DEFAULT_DURATION:1};function FramesMgr(){this.moFrames=new Object()}FramesMgr.Const={FRAME_PARAMETER_START:"&FRM=",FRAME_PARAMETER_END:"&",FRAME_PAIR_SEPARATOR:",",FRAME_NAME_CONTENT_SEPARATOR:":"};FramesMgr.moSingleton=null;FramesMgr.GetInstance=function(){if(!FramesMgr.moSingleton){FramesMgr.moSingleton=new FramesMgr()}return FramesMgr.moSingleton};FramesMgr.prototype={SetURL:function(a){this.moFrames=new Object();var g=a.indexOf(FramesMgr.Const.FRAME_PARAMETER_START);if(g!=-1){var k=a.substr(g+FramesMgr.Const.FRAME_PARAMETER_START.length);var f=k.indexOf(FramesMgr.Const.FRAME_PARAMETER_END);if(f!=-1){k=k.substr(0,f)}var c=k.split(FramesMgr.Const.FRAME_PAIR_SEPARATOR);for(var d=0,h=c.length;d<h;d++){var j=c[d];var b=j.split(FramesMgr.Const.FRAME_NAME_CONTENT_SEPARATOR);if(b.length==2){this.moFrames[b[0]]=b[1]}}}},GetFrameContent:function(a){var b=null;if(this.moFrames.hasOwnProperty(a)){b=this.moFrames[a]}return b},CurrentFramesString:function(){var b=new StringBuilder();var d="";var a=false;if(this.moFrames!=null){b.append(FramesMgr.Const.FRAME_PARAMETER_START);for(var c in this.moFrames){a=true;b.append(c);b.append(FramesMgr.Const.FRAME_NAME_CONTENT_SEPARATOR);b.append(this.moFrames[c]);b.append(FramesMgr.Const.FRAME_PAIR_SEPARATOR)}}if(a){d=b.toString();d=d.substr(0,d.length-1)}return d}};if(typeof JSON!=="object"){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());function MultipleSelectionMgr(){this.moCollectionObjects=new Object();this.moSelectionItemGroups=new Object();this.moSelectionItems=new Object();this.moLastElements=new Object()}MultipleSelectionMgr.Const={MGR_NAME:"MultipleSelection",FLAG_NONE:0,FLAG_NOT_SELECT:1,FLAG_SELECTED:16,FLAG_ALL:17,ITEM_OVER_CLASS:"Over",DOUBLE_CLICK_INTERVAL:500};MultipleSelectionMgr.moSingleton=null;MultipleSelectionMgr.GetInstance=function(a){if(!MultipleSelectionMgr.moSingleton){MultipleSelectionMgr.moSingleton=new MultipleSelectionMgr()}return MultipleSelectionMgr.moSingleton};MultipleSelectionMgr.miTimer=0;MultipleSelectionMgr.miLastID="";MultipleSelectionMgr.Click=function(b,a){var d=a.GetID();if(d!=null){MultipleSelectionMgr.GetInstance().ClickOn(a,b.ctrlKey||b.metaKey,b.shiftKey);var c=new Date().getTime();if(a.moSrcObj.Event_DoubleClick&&c-MultipleSelectionMgr.miTimer<=MultipleSelectionMgr.Const.DOUBLE_CLICK_INTERVAL&&MultipleSelectionMgr.miLastID==a.msID){a.moSrcObj.Event_DoubleClick.Fire()}MultipleSelectionMgr.miTimer=c;MultipleSelectionMgr.miLastID=a.msID}};MultipleSelectionMgr.Over=function(b,a){if(DragDropMgr.IsDrag()){return}if(this.moLastOver){$RemoveClass(this.moLastOver,MultipleSelectionMgr.Const.ITEM_OVER_CLASS)}$AddClass(a.GetID(),MultipleSelectionMgr.Const.ITEM_OVER_CLASS);this.moLastOver=a.GetID()};MultipleSelectionMgr.Out=function(b,a){$RemoveClass(a.GetID(),MultipleSelectionMgr.Const.ITEM_OVER_CLASS)};MultipleSelectionMgr.prototype={Add:function(b,a){var c=true;var d=false;if(!Utils.IsString(b)){c=false}if(!(a instanceof SelectionItem)){c=false}if(c){if(!(b in this.moCollectionObjects)){this.moCollectionObjects[b]=new FastArray()}if(!(a in this.moSelectionItemGroups)){this.moSelectionItemGroups[a]=new FastArray()}d=(this.moCollectionObjects[b].Push(a)&&this.moSelectionItemGroups[a].Push(b));Matrix3.RegisterInCache(a.toString(),MultipleSelectionMgr);this.moSelectionItems[a.toString()]=a;if(parseFloat(a.GetIndex())&&a.GetIndex()!=-1){var h=this.moLastElements[b];if(h!=null){if((h instanceof SelectionItem)&&h.miIndex<a.GetIndex()){h.miNextItem=a;a.miPreviousItem=h;this.moLastElements[b]=a}else{var i=h;var j=h.miPreviousItem;while(j!=null&&j.GetIndex()>a.GetIndex()){i=j;j=j.miPreviousItem}if(j!=null&&j.GetIndex()==a.GetIndex()){if(j.miNextItem!=null){j.miNextItem.miPreviousItem=a}if(j.miPreviousItem!=null){j.miPreviousItem.miNextItem=a}}else{i.miPreviousItem=a;a.miNextItem=i;if(j!=null){a.miPreviousItem=j;j.miNextItem=a}}}}else{this.moLastElements[b]=a}a.DebugTools_DisplayPosition()}var f=$PI(a.GetID());var k=f.GetProperty(ConstProperties.Const.HANDLE);if(k!=null){var g=$PI(f.GetBrotherId(k));if(g!=null){f=g}}Utils.AddEvent(f,"click",function(l){MultipleSelectionMgr.Click(l,a)});Utils.AddEvent(f,"mouseover",function(l){MultipleSelectionMgr.Over(l,a)});Utils.AddEvent(f,"mouseout",function(l){MultipleSelectionMgr.Out(l,a)})}return d},ClickOn:function(c,a,b){if(c in this.moSelectionItemGroups){var g=false;var d=this.moSelectionItemGroups[c].GetArray();for(var h=0,r=d.length;h<r;h++){if(b){var o=-1;var u=null;var f=this.moCollectionObjects[d[h]].GetArray();for(var p=0,t=f.length;(o<0)&&(p<t);p++){if(f[p].IsSelected()){o=p;u=d[h]}}if(o>=0){this.DeselectAll(u);var n=this.moCollectionObjects[d[h]].moHash[c];if(n>=0){var l=o;var m=n;if(o>n){l=n;m=o}for(var q=l;q<=m;q++){f[q].SelectItem()}}g=true}}if(!g){if(!a&&c.IsForceControl()){this.DeselectGroup(d[h],c)}else{c.ChangeState()}}}}},DeselectGroup:function(b,a){var d=true;var f=false;if(!Utils.IsString(b)||!(b in this.moCollectionObjects)){d=false}if(!(a instanceof SelectionItem)&&a!=null){d=false}if(d){var c=this.moCollectionObjects[b].GetArray();var h=0;for(var g=0,j=c.length;g<j;g++){if(a!=c[g]&&c[g].IsSelected()){c[g].DeselectItem();h++}}if(a!=null){if(!a.IsSelected()){a.SelectItem()}else{if(h==0&&a.IsSelected()){a.DeselectItem()}}}f=true}return f},Remove:function(b,a){var c=true;var d=false;if(!Utils.IsString(b)){c=false}if(!(a instanceof SelectionItem)){c=false}if(c){if((b in this.moCollectionObjects)&&(a in this.moSelectionItemGroups)){d=this.moCollectionObjects[b].Remove(a)&&this.moSelectionItemGroups[a].Remove(b);if(this.moCollectionObjects[b].GetSize()==0){delete (this.moCollectionObjects[b]);delete (this.moLastElements[b])}if(this.moSelectionItemGroups[a].GetSize()==0){delete (this.moSelectionItemGroups[a])}delete (this.moSelectionItems[a.toString()])}}return d},GetObjects:function(a,c,b){var g=true;var d=null;if(!Utils.IsString(a)){g=false}if(!Utils.IsNumber(c)){c=MultipleSelectionMgr.Const.FLAG_ALL}if(g){d=new Array();if(a in this.moCollectionObjects){var f=this.moCollectionObjects[a].GetArray();for(var h=0,j=f.length;h<j;h++){var k=f[h];if(b==k.GetID()){d.push(k)}else{if(((c&MultipleSelectionMgr.Const.FLAG_SELECTED)==MultipleSelectionMgr.Const.FLAG_SELECTED)&&k.IsSelected()){d.push(k)}else{if(((c&MultipleSelectionMgr.Const.FLAG_NOT_SELECT)==MultipleSelectionMgr.Const.FLAG_NOT_SELECT)&&!k.IsSelected()){d.push(k)}}}}}}return d},GetItemsFromGroupsIn:function(a){var f=true;var c=null;if(!Utils.IsString(a)){f=false}if(f){c=new Array();if(a in this.moSelectionItemGroups){var d=this.moSelectionItemGroups[a].GetArray();for(var g=0,h=d.length;g<h;g++){var b=this.GetObjects(d[g],MultipleSelectionMgr.Const.FLAG_SELECTED,a);if(b!=null){c=c.concat(b)}}}}return c},Contains:function(b,a){var c=true;var d=false;if(!Utils.IsString(b)){c=false}if(!(a instanceof SelectionItem)){c=false}if(c){if(b in this.moCollectionObjects&&this.moCollectionObjects[b].Exists(a)){d=true}}return d},SelectAll:function(a){var c=true;var d=false;if(!Utils.IsString(a)){c=false}if(c){var b=this.GetObjects(a,MultipleSelectionMgr.Const.FLAG_NOT_SELECT);if(b!=null){for(var f=0,g=b.length;f<g;f++){b[f].SelectItem()}d=true}}return d},DeselectAll:function(a){var c=true;var d=false;if(!Utils.IsString(a)){c=false}if(c){var b=this.GetObjects(a,MultipleSelectionMgr.Const.FLAG_SELECTED);if(b!=null){for(var f=0,g=b.length;f<g;f++){b[f].DeselectItem()}d=true}else{}}return d},InvertAll:function(a){var c=true;var d=false;if(!Utils.IsString(a)){c=false}if(c){var b=this.GetObjects(a,MultipleSelectionMgr.Const.FLAG_ALL);if(b!=null){for(var f=0,g=b.length;f<g;f++){b[f].ChangeState()}d=true}else{}}return d},RefreshNode:function(a){var d=this.moSelectionItemGroups[a].GetArray();for(var b=0,c=d.length;b<c;b++){this.Remove(d[b],this.moSelectionItems[a])}},GetSelectedItemByID:function(a){return this.moSelectionItems[a]},Sort:function(a,d,b,c){var p=this.GetSelectedItemByID(d);var k=0;var j;var q;var m;if(p&&p.miIndex>=0){if(b){j=p.miIndex;m=p;k=(p.miPreviousItem)?p.miPreviousItem.miIndex:0;q=p.miPreviousItem}else{j=(p.miNextItem)?p.miNextItem.miIndex:(p.miIndex+2);m=p.miNextItem;k=p.miIndex;q=p}var f=(j-k)/(a.length+1);for(var g=0,l=a.length;g<l;g++){var o=this.GetSelectedItemByID(a[g]);if(o&&o!=q){o.miIndex=k+(f*(g+1));if(c){if(o!=m){if(o.miPreviousItem){o.miPreviousItem.miNextItem=o.miNextItem}if(o.miNextItem){o.miNextItem.miPreviousItem=o.miPreviousItem}o.miPreviousItem=q;o.miNextItem=m;if(q){q.miNextItem=o}if(o.miNextItem){o.miNextItem.miPreviousItem=o}q=o}else{if((g+1)<a.length){q=m;m=m.miNextItem}}}o.DebugTools_DisplayPosition()}}var r=(k+f)+"";r=r.substring(0,15);var t=k+"";t=t.substring(0,15);if(parseFloat(r)==parseFloat(t)){var n=p;while(n.miPreviousItem){n=n.miPreviousItem}a=new Array();var h=1;do{n.miIndex=h;n.DebugTools_DisplayPosition();h+=1;a.push(n.GetID());n=n.miNextItem}while(n)}for(var u in this.moCollectionObjects){this.moCollectionObjects[u].Sort(this.SortByIndex)}}return a},Refresh:function(){},SortByIndex:function(c,d){if(!isNaN(c.miIndex)&&!isNaN(d.miIndex)){return c.miIndex-d.miIndex}else{return 0}}};function SelectionItem(d,a,f,g,c,h,b){if(Utils.IsString(d)){this.msID=d;if(g&&(g.toUpperCase()=="TRUE"||g=="1")){this.SelectItem()}else{this.mbIsSelected=false}}this.moSrcObj=b;if(Utils.IsBoolean(a)){this.mbForceCtrl=a}else{this.mbForceCtrl=false}if(Utils.Trim(h)==""||h=="0"){this.mbKeepSelected=false}else{this.mbKeepSelected=true}if(c&&c!=""){this.mbDeactivateSelection=true}var i=parseFloat(f);if(isNaN(i)){i=-1}if(i||f==0){this.miIndex=i}this.DebugTools_DisplayPosition();if(!Matrix3.mbDebug){$PI(d).onselectstart=function(){return false}}}SelectionItem.Const={CLASS_SELECTED:"Selected"};SelectionItem.prototype={IsSelected:function(){return this.mbIsSelected},IsForceControl:function(){return this.mbForceCtrl},IsKeepSelected:function(){return this.mbKeepSelected},ChangeState:function(a){if(this.mbIsSelected){this.DeselectItem(a)}else{this.SelectItem(a)}},GetID:function(){return this.msID},SelectItem:function(a){if(this.mbDeactivateSelection){return}$AddClass(this.GetID(),SelectionItem.Const.CLASS_SELECTED);if(!a&&$Control(this.GetID(),PanelAdvancedCtrl.Const.CONTROL_NAME).Event_SelectionChange){ClipboardProperties.msCache="1";$Control(this.GetID(),PanelAdvancedCtrl.Const.CONTROL_NAME).Event_SelectionChange.Fire()}this.mbIsSelected=true},DeselectItem:function(a){$RemoveClass(this.GetID(),SelectionItem.Const.CLASS_SELECTED);if(!a&&$Control(this.GetID(),PanelAdvancedCtrl.Const.CONTROL_NAME).Event_SelectionChange){ClipboardProperties.msCache="0";$Control(this.GetID(),PanelAdvancedCtrl.Const.CONTROL_NAME).Event_SelectionChange.Fire()}this.mbIsSelected=false},GetIndex:function(){return this.miIndex},toString:function(){return this.msID},DebugTools_DisplayPosition:function(a){if(ControlMgr.GetInstance().GetReference("DebugSummary")&&!Matrix3.moCMS){var b="Position = "+this.miIndex;$E(this.GetID()).find(".debug").remove();$E(this.GetID()).append("<div class='debug' style='color:green; word-wrap:break-word; background-color: rgba(255,255,255,0.7); font-size:10px; '>Debug info:<br/>"+b+"</div>");if(a==null){if(this.miPreviousItem){this.miPreviousItem.DebugTools_DisplayPosition(true)}if(this.miNextItem){this.miNextItem.DebugTools_DisplayPosition(true)}}}}};var SimpleTooltip={moElements:new Array,moOptions:new Array,Subscribe:function(a,b){if(!Utils.IsIPad()&&!Utils.IsAndroid()){this.moElements.push(a);this.moOptions.push(b)}},Setup:function(){this.DestroyAll();var b=this.moElements.length;for(var a=0;a<b;a++){if(this.moElements[a]&&this.moElements[a].tipsy){this.moElements[a].tipsy(this.moOptions[a])}}},DestroyAll:function(){var a=$(".tipsy");if(typeof a!="undefined"&&a!=null&&a){a.remove()}}};function StackMgr(){this.miIndex=StackMgr.Const.START_INDEX}StackMgr.moSingleton=null;StackMgr.GetInstance=function(){if(!StackMgr.moSingleton){StackMgr.moSingleton=new StackMgr()}return StackMgr.moSingleton};StackMgr.Const={START_INDEX:100,INDEX_INCREMENT:5};StackMgr.prototype={GetIndex:function(){this.miIndex+=StackMgr.Const.INDEX_INCREMENT;return this.miIndex}};function StringBuilder(a){this.strings=new Array("");this.append(a)}StringBuilder.prototype.append=function(a){if(a){this.strings.push(a)}};StringBuilder.prototype.clear=function(){this.strings.length=1};StringBuilder.prototype.toString=function(){return this.strings.join("")};String.prototype.endsWith=function(b){var a=this.lastIndexOf(b);return(a!=-1)&&(a+b.length==this.length)};function StyleMgr(){this.mbIsActive=true;this.moStyleCache=new Object();this.moClassCache=new Object();if(document.defaultView&&document.defaultView.getComputedStyle){this._GetStyle=function(b,c){var d=null;if(c=="float"){c="cssFloat"}d=b.style[c];if(!d){var a=document.defaultView.getComputedStyle(b,"");if(a){d=a[c]}}return d}}else{if(document.documentElement.currentStyle&&Utils.IsIE()){this._GetStyle=function(b,c){switch(c){case"opacity":var d=100;try{d=b.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(a){try{d=b.filters("alpha").opacity}catch(a){}}return d/100;case"float":c="styleFloat";default:var f=b.currentStyle?b.currentStyle[c]:null;return(b.style[c]||f)}}}else{this._GetStyle=function(a,b){var c=a.style[b];return c}}}if(Utils.IsIE()){this._SetStyle=function(a,b,c){switch(b){case"opacity":if(Utils.IsString(a.style.filter)){a.style.filter="alpha(opacity="+c*100+")";if(!a.currentStyle||!a.currentStyle.hasLayout){a.style.zoom=1}}break;case"float":b="styleFloat";default:if(c==""){a.style[b]=""}else{a.style[b]=c}}}}else{this._SetStyle=function(a,b,c){if(b=="float"){b="cssFloat"}if(c==""){a.style[b]=""}else{a.style[b]=c}}}}StyleMgr.moSingleton=null;StyleMgr.GetInstance=function(){if(!StyleMgr.moSingleton){StyleMgr.moSingleton=new StyleMgr()}return StyleMgr.moSingleton};StyleMgr.Const={CLASS_INVISIBLE:"InvisibleC",CLASS_WARNING:"Warn",MGR_NAME:"Style"};StyleMgr.prototype={HasClass:function(a,b){a=$Elt(a);var c=false;if(a){var d=null;if(b in this.moClassCache){d=this.moClassCache[b]}else{d=new RegExp("(?:^|\\s+)"+b+"(?:\\s+|$)");this.moClassCache[b]=d}c=d.test(a.className)}return c},AddClass:function(a,b){a=$Elt(a);if(a&&!this.HasClass(a,b)){a.className=a.className+" "+b}},SwitchClass:function(a,b){if($HasClass(a,b)){$RemoveClass(a,b)}else{$AddClass(a,b)}},RemoveClass:function(a,b){a=$Elt(a);if(a&&this.HasClass(a,b)){a.className=a.className.replace(this.moClassCache[b]," ");a.className=Utils.Trim(a.className)}},ReplaceClass:function(a,c,b){this.RemoveClass(a,c);this.AddClass(a,b)},GetStyle:function(b,c,a){var d=$Elt(b);if(!d){return null}var f="";if(d.id&&this.mbIsActive&&!a){if(!(d.id in this.moStyleCache)||!(c in this.moStyleCache[d.id])){if(!(d.id in this.moStyleCache)){this.moStyleCache[d.id]=new Object();Matrix3.RegisterInCache(d.id,StyleMgr)}this.moStyleCache[d.id][c]=this._GetStyle(d,c)}f=this.moStyleCache[d.id][c]}else{f=this._GetStyle(d,c)}return f},RefreshNode:function(a){delete (this.moStyleCache[a])},SetStyle:function(a,b,c){var d=$Elt(a);if(!d){return}if(d.id&&this.mbIsActive){if(!(d.id in this.moStyleCache)){this.moStyleCache[d.id]=new Object();Matrix3.RegisterInCache(d.id,StyleMgr)}if(c!=""){this.moStyleCache[d.id][b]=c}else{delete (this.moStyleCache[d.id][b])}}this._SetStyle(d,b,c)},Refresh:function(){this.moStyleCache=new Object()}};var swfobject=function(){var ae="undefined",aG="object",aJ="Shockwave Flash",aR="ShockwaveFlash.ShockwaveFlash",aE="application/x-shockwave-flash",aH="SWFObjectExprInst",aS="onreadystatechange",aB=window,ap=document,aK=navigator,aL=false,aN=[al],aA=[],az=[],ao=[],au,aF,ag,aa,aq=false,X=false,ay,ak,aw=true,ax=function(){var a=typeof ap.getElementById!=ae&&typeof ap.getElementsByTagName!=ae&&typeof ap.createElement!=ae,i=aK.userAgent.toLowerCase(),k=aK.platform.toLowerCase(),f=k?/win/.test(k):/win/.test(i),c=k?/mac/.test(k):/mac/.test(i),g=/webkit/.test(i)?parseFloat(i.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,j=!+"\v1",h=[0,0,0],b=null;if(typeof aK.plugins!=ae&&typeof aK.plugins[aJ]==aG){b=aK.plugins[aJ].description;if(b&&!(typeof aK.mimeTypes!=ae&&aK.mimeTypes[aE]&&!aK.mimeTypes[aE].enabledPlugin)){aL=true;j=false;b=b.replace(/^.*\s+(\S+\s+\S+$)/,"$1");h[0]=parseInt(b.replace(/^(.*)\..*$/,"$1"),10);h[1]=parseInt(b.replace(/^.*\.(.*)\s.*$/,"$1"),10);h[2]=/[a-zA-Z]/.test(b)?parseInt(b.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof aB.ActiveXObject!=ae){try{var d=new ActiveXObject(aR);if(d){b=d.GetVariable("$version");if(b){j=true;b=b.split(" ")[1].split(",");h=[parseInt(b[0],10),parseInt(b[1],10),parseInt(b[2],10)]}}}catch(l){}}}return{w3:a,pv:h,wk:g,ie:j,win:f,mac:c}}(),ar=function(){if(!ax.w3){return}if((typeof ap.readyState!=ae&&ap.readyState=="complete")||(typeof ap.readyState==ae&&(ap.getElementsByTagName("body")[0]||ap.body))){ah()}if(!aq){if(typeof ap.addEventListener!=ae){ap.addEventListener("DOMContentLoaded",ah,false)}if(ax.ie&&ax.win){ap.attachEvent(aS,function(){if(ap.readyState=="complete"){ap.detachEvent(aS,arguments.callee);ah()}});if(aB==top){(function(){if(aq){return}try{ap.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}ah()})()}}if(ax.wk){(function(){if(aq){return}if(!/loaded|complete/.test(ap.readyState)){setTimeout(arguments.callee,0);return}ah()})()}aI(ah)}}();function ah(){if(aq){return}try{var d=ap.getElementsByTagName("body")[0].appendChild(ac("span"));d.parentNode.removeChild(d)}catch(a){return}aq=true;var b=aN.length;for(var c=0;c<b;c++){aN[c]()}}function at(a){if(aq){a()}else{aN[aN.length]=a}}function aI(b){if(typeof aB.addEventListener!=ae){aB.addEventListener("load",b,false)}else{if(typeof ap.addEventListener!=ae){ap.addEventListener("load",b,false)}else{if(typeof aB.attachEvent!=ae){an(aB,"onload",b)}else{if(typeof aB.onload=="function"){var a=aB.onload;aB.onload=function(){a();b()}}else{aB.onload=b}}}}}function al(){if(aL){aP()}else{am()}}function aP(){var b=ap.getElementsByTagName("body")[0];var a=ac(aG);a.setAttribute("type",aE);var d=b.appendChild(a);if(d){var c=0;(function(){if(typeof d.GetVariable!=ae){var f=d.GetVariable("$version");if(f){f=f.split(" ")[1].split(",");ax.pv=[parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10)]}}else{if(c<10){c++;setTimeout(arguments.callee,10);return}}b.removeChild(a);d=null;am()})()}else{am()}}function am(){var h=aA.length;if(h>0){for(var g=0;g<h;g++){var l=aA[g].id;var b=aA[g].callbackFn;var a={success:false,id:l};if(ax.pv[0]>0){var f=ab(l);if(f){if(ai(aA[g].swfVersion)&&!(ax.wk&&ax.wk<312)){aQ(l,true);if(b){a.success=true;a.ref=aU(l);b(a)}}else{if(aA[g].expressInstall&&Y()){var j={};j.data=aA[g].expressInstall;j.width=f.getAttribute("width")||"0";j.height=f.getAttribute("height")||"0";if(f.getAttribute("class")){j.styleclass=f.getAttribute("class")}if(f.getAttribute("align")){j.align=f.getAttribute("align")}var i={};var k=f.getElementsByTagName("param");var c=k.length;for(var d=0;d<c;d++){if(k[d].getAttribute("name").toLowerCase()!="movie"){i[k[d].getAttribute("name")]=k[d].getAttribute("value")}}aD(j,i,l,b)}else{aC(f);if(b){b(a)}}}}}else{aQ(l,true);if(b){var m=aU(l);if(m&&typeof m.SetVariable!=ae){a.success=true;a.ref=m}b(a)}}}}}function aU(a){var b=null;var c=ab(a);if(c&&c.nodeName=="OBJECT"){if(typeof c.SetVariable!=ae){b=c}else{var d=c.getElementsByTagName(aG)[0];if(d){b=d}}}return b}function Y(){return !X&&ai("6.0.65")&&(ax.win||ax.mac)&&!(ax.wk&&ax.wk<312)}function aD(a,b,g,i){X=true;ag=i||null;aa={success:false,id:g};var f=ab(g);if(f){if(f.nodeName=="OBJECT"){au=aj(f);aF=null}else{au=f;aF=g}a.id=aH;if(typeof a.width==ae||(!/%$/.test(a.width)&&parseInt(a.width,10)<310)){a.width="310"}if(typeof a.height==ae||(!/%$/.test(a.height)&&parseInt(a.height,10)<137)){a.height="137"}ap.title=ap.title.slice(0,47)+" - Flash Player Installation";var d=ax.ie&&ax.win?"ActiveX":"PlugIn",c="MMredirectURL="+aB.location.toString().replace(/&/g,"%26")+"&MMplayerType="+d+"&MMdoctitle="+ap.title;if(typeof b.flashvars!=ae){b.flashvars+="&"+c}else{b.flashvars=c}if(ax.ie&&ax.win&&f.readyState!=4){var h=ac("div");g+="SWFObjectNew";h.setAttribute("id",g);f.parentNode.insertBefore(h,f);f.style.display="none";(function(){if(f.readyState==4){f.parentNode.removeChild(f)}else{setTimeout(arguments.callee,10)}})()}aM(a,b,g)}}function aC(b){if(ax.ie&&ax.win&&b.readyState!=4){var a=ac("div");b.parentNode.insertBefore(a,b);a.parentNode.replaceChild(aj(b),a);b.style.display="none";(function(){if(b.readyState==4){b.parentNode.removeChild(b)}else{setTimeout(arguments.callee,10)}})()}else{b.parentNode.replaceChild(aj(b),b)}}function aj(b){var a=ac("div");if(ax.win&&ax.ie){a.innerHTML=b.innerHTML}else{var f=b.getElementsByTagName(aG)[0];if(f){var c=f.childNodes;if(c){var d=c.length;for(var g=0;g<d;g++){if(!(c[g].nodeType==1&&c[g].nodeName=="PARAM")&&!(c[g].nodeType==8)){a.appendChild(c[g].cloneNode(true))}}}}}return a}function aM(j,h,l){var k,a=ab(l);if(ax.wk&&ax.wk<312){return k}if(a){if(typeof j.id==ae){j.id=l}if(ax.ie&&ax.win){var i="";for(var f in j){if(j[f]!=Object.prototype[f]){if(f.toLowerCase()=="data"){h.movie=j[f]}else{if(f.toLowerCase()=="styleclass"){i+=' class="'+j[f]+'"'}else{if(f.toLowerCase()!="classid"){i+=" "+f+'="'+j[f]+'"'}}}}}var g="";for(var d in h){if(h[d]!=Object.prototype[d]){g+='<param name="'+d+'" value="'+h[d]+'" />'}}a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+i+">"+g+"</object>";az[az.length]=j.id;k=ab(j.id)}else{var m=ac(aG);m.setAttribute("type",aE);for(var c in j){if(j[c]!=Object.prototype[c]){if(c.toLowerCase()=="styleclass"){m.setAttribute("class",j[c])}else{if(c.toLowerCase()!="classid"){m.setAttribute(c,j[c])}}}}for(var b in h){if(h[b]!=Object.prototype[b]&&b.toLowerCase()!="movie"){af(m,b,h[b])}}a.parentNode.replaceChild(m,a);k=m}}return k}function af(d,b,c){var a=ac("param");a.setAttribute("name",b);a.setAttribute("value",c);d.appendChild(a)}function aT(b){var a=ab(b);if(a&&a.nodeName=="OBJECT"){if(ax.ie&&ax.win){a.style.display="none";(function(){if(a.readyState==4){Z(b)}else{setTimeout(arguments.callee,10)}})()}else{a.parentNode.removeChild(a)}}}function Z(c){var b=ab(c);if(b){for(var a in b){if(typeof b[a]=="function"){b[a]=null}}b.parentNode.removeChild(b)}}function ab(c){var a=null;try{a=ap.getElementById(c)}catch(b){}return a}function ac(a){return ap.createElement(a)}function an(c,a,b){c.attachEvent(a,b);ao[ao.length]=[c,a,b]}function ai(c){var b=ax.pv,a=c.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return(b[0]>a[0]||(b[0]==a[0]&&b[1]>a[1])||(b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]))?true:false}function aO(c,g,d,b){if(ax.ie&&ax.mac){return}var a=ap.getElementsByTagName("head")[0];if(!a){return}var f=(d&&typeof d=="string")?d:"screen";if(b){ay=null;ak=null}if(!ay||ak!=f){var h=ac("style");h.setAttribute("type","text/css");h.setAttribute("media",f);ay=a.appendChild(h);if(ax.ie&&ax.win&&typeof ap.styleSheets!=ae&&ap.styleSheets.length>0){ay=ap.styleSheets[ap.styleSheets.length-1]}ak=f}if(ax.ie&&ax.win){if(ay&&typeof ay.addRule==aG){ay.addRule(c,g)}}else{if(ay&&typeof ap.createTextNode!=ae){ay.appendChild(ap.createTextNode(c+" {"+g+"}"))}}}function aQ(c,a){if(!aw){return}var b=a?"visible":"hidden";if(aq&&ab(c)){ab(c).style.visibility=b}else{aO("#"+c,"visibility:"+b)}}function av(b){var c=/[\\\"<>\.;]/;var a=c.exec(b)!=null;return a&&typeof encodeURIComponent!=ae?encodeURIComponent(b):b}var ad=function(){if(ax.ie&&ax.win){window.attachEvent("onunload",function(){var c=ao.length;for(var b=0;b<c;b++){ao[b][0].detachEvent(ao[b][1],ao[b][2])}var g=az.length;for(var a=0;a<g;a++){aT(az[a])}for(var f in ax){ax[f]=null}ax=null;for(var d in swfobject){swfobject[d]=null}swfobject=null})}}();return{registerObject:function(b,c,a,f){if(ax.w3&&b&&c){var d={};d.id=b;d.swfVersion=c;d.expressInstall=a;d.callbackFn=f;aA[aA.length]=d;aQ(b,false)}else{if(f){f({success:false,id:b})}}},getObjectById:function(a){if(ax.w3){return aU(a)}},embedSWF:function(b,i,f,h,k,a,l,d,g,c){var j={success:false,id:i};if(ax.w3&&!(ax.wk&&ax.wk<312)&&b&&i&&f&&h&&k){aQ(i,false);at(function(){f+="";h+="";var n={};if(g&&typeof g===aG){for(var p in g){n[p]=g[p]}}n.data=b;n.width=f;n.height=h;var q={};if(d&&typeof d===aG){for(var o in d){q[o]=d[o]}}if(l&&typeof l===aG){for(var m in l){if(typeof q.flashvars!=ae){q.flashvars+="&"+m+"="+l[m]}else{q.flashvars=m+"="+l[m]}}}if(ai(k)){var r=aM(n,q,i);if(n.id==i){aQ(i,true)}j.success=true;j.ref=r}else{if(a&&Y()){n.data=a;aD(n,q,i,c);return}else{aQ(i,true)}}if(c){c(j)}})}else{if(c){c(j)}}},switchOffAutoHideShow:function(){aw=false},ua:ax,getFlashPlayerVersion:function(){return{major:ax.pv[0],minor:ax.pv[1],release:ax.pv[2]}},hasFlashPlayerVersion:ai,createSWF:function(c,b,a){if(ax.w3){return aM(c,b,a)}else{return undefined}},showExpressInstall:function(d,a,b,c){if(ax.w3&&Y()){aD(d,a,b,c)}},removeSWF:function(a){if(ax.w3){aT(a)}},createCSS:function(a,d,c,b){if(ax.w3){aO(a,d,c,b)}},addDomLoadEvent:at,addLoadEvent:aI,getQueryParamValue:function(a){var d=ap.location.search||ap.location.hash;if(d){if(/\?/.test(d)){d=d.split("?")[1]}if(a==null){return av(d)}var c=d.split("&");for(var b=0;b<c.length;b++){if(c[b].substring(0,c[b].indexOf("="))==a){return av(c[b].substring((c[b].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(X){var a=ab(aH);if(a&&au){a.parentNode.replaceChild(au,a);if(aF){aQ(aF,true);if(ax.ie&&ax.win){au.style.display="block"}}if(ag){ag(aa)}}X=false}}}}();var VFormEffects={SlideRight:function(a,b){$SetStyle(b.firstChild,"width",Utils.GetWidth(b,true)+"px");$SetStyle(b.firstChild,"float","left");$SetStyle(b.parentNode,"width",Utils.GetWidth(b,true)+"px");$SetStyle(b.parentNode,"overflow","hidden");$SetStyle(a,"width",Utils.GetWidth(b,true)+"px");$SetStyle(a,"float","left");$SetStyle(b,"width",Utils.GetWidth(b,true)*2+"px");b.insertBefore(a,b.firstChild);b.parentNode.scrollLeft=Utils.GetWidth(b.parentNode,true);$E(b.parentNode.id).animate({scrollTop:a.scrollTop,scrollLeft:0},{duration:VFormEffects.Const.DEFAULT_ANIMATION_LENGTH*100,complete:function(){VFormEffects._RemoveVForms(b,a.id);Matrix3.EvalScript(a);$SetStyle(b,"width",Utils.GetWidth(b,true)/2+"px");$SetStyle(b.parentNode,"width","auto");$SetStyle(b,"width","auto");$SetStyle(b.firstChild,"width","100%");window.setTimeout("Matrix3.FinishLoad()",Matrix3.Const.FINISH_LOAD_DELAY)}})},SlideLeft:function(a,b){$SetStyle(b.firstChild,"width",Utils.GetWidth(b,true)+"px");$SetStyle(b.firstChild,"float","left");$SetStyle(b.parentNode,"width",Utils.GetWidth(b,true)+"px");$SetStyle(b.parentNode,"overflow","hidden");$SetStyle(a,"width",Utils.GetWidth(b,true)+"px");$SetStyle(a,"float","left");$SetStyle(b,"width",Utils.GetWidth(b,true)*2+"px");b.appendChild(a);$E(b.parentNode.id).animate({scrollTop:a.scrollTop,scrollLeft:Utils.GetWidth(b.parentNode,true)},{duration:VFormEffects.Const.DEFAULT_ANIMATION_LENGTH*100,complete:function(){VFormEffects._RemoveVForms(b,a.id);b.parentNode.scrollLeft=0;Matrix3.EvalScript(a);$SetStyle(b.parentNode,"width","auto");$SetStyle(b,"width","auto");$SetStyle(b.firstChild,"width","100%");window.setTimeout("Matrix3.FinishLoad()",Matrix3.Const.FINISH_LOAD_DELAY)}})},SlideTop:function(a,b){var c=Utils.GetPageHeight()-Utils.GetY(b);$SetStyle(b.firstChild,"height",c+"px");$SetStyle(b.parentNode,"height",c+"px");$SetStyle(b.parentNode,"overflow","hidden");$SetStyle(a,"height",c+"px");$SetStyle(b,"height",c*2+"px");b.appendChild(a);$E(b.parentNode.id).animate({scrollTop:c,scrollLeft:a.scrollLeft},{duration:VFormEffects.Const.DEFAULT_ANIMATION_LENGTH*100,complete:function(){VFormEffects._RemoveVForms(b,a.id);b.parentNode.scrollTop=0;Matrix3.EvalScript(a);$SetStyle(b.parentNode,"height","100%");$SetStyle(b,"height","100%");$SetStyle(b.firstChild,"height","100%");window.setTimeout("Matrix3.FinishLoad()",Matrix3.Const.FINISH_LOAD_DELAY)}})},SlideBottom:function(a,b){var c=Utils.GetPageHeight()-Utils.GetY(b);$SetStyle(b.firstChild,"height",c+"px");$SetStyle(b.parentNode,"height",c+"px");$SetStyle(b.parentNode,"overflow","hidden");$SetStyle(a,"height",c+"px");$SetStyle(b,"height",c*2+"px");b.insertBefore(a,b.firstChild);b.parentNode.scrollTop=c;$E(b.parentNode.id).animate({scrollTop:0,scrollLeft:a.scrollLeft},{duration:VFormEffects.Const.DEFAULT_ANIMATION_LENGTH*100,complete:function(){VFormEffects._RemoveVForms(b,a.id);Matrix3.EvalScript(a);$SetStyle(b.parentNode,"height","100%");$SetStyle(b,"height","100%");$SetStyle(b.firstChild,"height","100%");window.setTimeout("Matrix3.FinishLoad()",Matrix3.Const.FINISH_LOAD_DELAY)}})},Replace:function(a,b){VFormEffects._RemoveVForms(b);b.appendChild(a);Matrix3.EvalScript(a);window.setTimeout("Matrix3.FinishLoad()",Matrix3.Const.FINISH_LOAD_DELAY)},None:function(b,c,a){if(!a){c.appendChild(b)}else{c.insertBefore(b,a)}Matrix3.EvalScript(b);window.setTimeout("Matrix3.FinishLoad()",Matrix3.Const.FINISH_LOAD_DELAY)},_RemoveVForms:function(a,b){var f=a.childNodes;for(var c=0,d=f.length;c<d;c++){if(f[c].id&&b!=f[c].id){Matrix3.RemoveVForm(f[c].id,null,null,true)}}}};VFormEffects.Const={EFFECT_NONE:"None",EFFECT_REPLACE:"Replace",DEFAULT_ANIMATION_LENGTH:0.3};var WysiwygManager={mbHasConfigs:false,moWysiwygConfigs:{},moEditors:{},Subscribe:function(b,a){if((b in this.moWysiwygConfigs)===false){this.moWysiwygConfigs[b]=a;this.mbHasConfigs=true}},Setup:function(){if(this.mbHasConfigs===true){var a=this;if(typeof tinymce==="undefined"){Utils.LoadScript("Include/Vendors/tinymce/tinymce.min.js",function(){a.InitAll()})}else{a.InitAll()}}else{this.DestroyAll();this.moWysiwygConfigs={}}},InitAll:function(){this.DestroyAll();for(var c in this.moWysiwygConfigs){var a=this.moWysiwygConfigs[c];if(typeof a!=="object"){a={}}var b=$PI(c);if(b){tinymce.baseURL="Include/Vendors/tinymce/";tinymce.dom.Event.domLoaded=true;tinymce.suffix=".min";if("width" in a===false){a.width=b.miWidth}if("height" in a===false){a.height=b.miHeight}a.selector="#"+c.replace(/\./gi,"\\.").replace(/:/gi,"\\:");a.theme_advanced_fonts="Arial=arial,helvetica,sans-serif;Courier New=courier new,courier,monospace;AkrutiKndPadmini=Akpdmi-n";$E(c).tinymce(a);this.moEditors.push(c)}}this.mbHasConfigs=false;this.moWysiwygConfigs={}},SetValueOnRealTextareas:function(){var f={};if(typeof this.moEditors==="object"&&typeof tinymce!=="undefined"){for(var a=0,b=this.moEditors.length;a<b;a++){var g=this.moEditors[a];var c=$E(g);if(c&&typeof c.tinymce!=="undefined"&&typeof c.tinymce()!=="undefined"){CacheMgr.GetInstance().RefreshNode(g);var d=document.getElementById(g);if(d){var h=c.tinymce().getContent();d.value=h;f[g]=h}CacheMgr.GetInstance().RefreshNode(g)}}}return f},DestroyAll:function(){for(var a=0,b=this.moEditors.length;a<b;a++){var d=this.moEditors[a];var c=$E(d);if(c&&typeof c==="object"&&c.length===1&&c.tinymce!=="undefined"&&typeof c.tinymce()!=="undefined"){CacheMgr.GetInstance().RefreshNode(d);var f=document.getElementById(d).value;c.tinymce().remove();c.val(f);CacheMgr.GetInstance().RefreshNode(d)}}this.moEditors=[]}};function ClearAction(){}ClearAction.prototype={Action_Clear:function(){$Elt(this.msControlID).value=""}};function CloseWindowAction(){}CloseWindowAction.prototype={Action_CloseWindow:function(){window.close()}};function RefreshMgrAction(){}RefreshMgrAction.prototype={Action_RefreshDragDropMgr:function(){DragDropMgr.RefreshCache()},Action_RefreshCacheResolution:function(){PreloadMgr.GetInstance().ClearResolutionCache()},Action_UpdateUploadStatus:function(a){var b=a.split(Utils.Const.SEPARATOR_VALUE);parent.document.getElementById(b[0]+UploadCtrl.Const.SUFFIX_PATH).value=b[1];parent.document.getElementById(b[0]+UploadCtrl.Const.SUFFIX_NAME).value=b[2];parent.$AddClass(b[0]+UploadFieldCtrl.Const.SUFFIX_LOADING,StyleMgr.Const.CLASS_INVISIBLE);parent.$AddClass(b[0]+UploadCtrl.Const.SUFFIX_CANCEL,StyleMgr.Const.CLASS_INVISIBLE);parent.$RemoveClass(b[0]+UploadCtrl.Const.SUFFIX_IFRAME,UploadCtrl.Const.CLASS_IFRAME_CLOSED);if(parent.UploadCtrl.miUploadInProgress>0){parent.UploadCtrl.miUploadInProgress--;parent.$Control(b[0],UploadCtrl.Const.CONTROL_NAME).Event_UploadCompleted.Fire()}}};function BlurEvent(){}BlurEvent.prototype={Event_Blur_Setup:function(){this.Event_Blur=new CtrlEvent(this,function(){Utils.AddEvent(this.msID,"blur",this.Event_Blur.Fire,this.Event_Blur)})}};function ChangeEvent(){}ChangeEvent.Const={OPTION_DELAY:"delay"};ChangeEvent.prototype={Event_Change_Setup:function(a){this.moEventChangeOption=Utils.GetOptions(a);this.Event_Change=new CtrlEvent(this,function(){Utils.AddEvent(this.msControlID,"keyup",this.KeyUpEvent,this)})},KeyUpEvent:function(){window.clearTimeout(this.miEventChangeDeferredID);var a=0;if(this.moEventChangeOption[ChangeEvent.Const.OPTION_DELAY]!=null){a=parseInt(this.moEventChangeOption[ChangeEvent.Const.OPTION_DELAY])}var b=this;this.miEventChangeDeferredID=window.setTimeout(function(){b.ConfirmKeyUpEvent()},a)},ConfirmKeyUpEvent:function(){this.Event_Change.Fire()}};function ClickDeferredMgr(){this.moClickDeferreds=new Object()}ClickDeferredMgr.moSingleton=null;ClickDeferredMgr.Const={DELAY:2000,SEPARATOR_DELAY:","};ClickDeferredMgr.GetInstance=function(){if(!ClickDeferredMgr.moSingleton){ClickDeferredMgr.moSingleton=new ClickDeferredMgr()}return ClickDeferredMgr.moSingleton};ClickDeferredMgr.prototype={Add:function(b,a){var c=b.split(ClickDeferredMgr.Const.SEPARATOR_DELAY);if(c.length!=2){throw"ClickDeferred must be use with arguments 'group,delay'"}if(c[0] in this.moClickDeferreds){window.clearTimeout(this.moClickDeferreds[c[0]])}this.moClickDeferreds[c[0]]=window.setTimeout(function(){a.Fire()},parseInt(c[1]))}};function ClickDeferredEvent(){}ClickDeferredEvent.prototype={Event_ClickDeferred_Setup:function(a){this.Event_ClickDeferred=new CtrlEvent(this,function(){Utils.AddEvent(this.msControlID,"click",function(){ClickDeferredMgr.GetInstance().Add(a,this)},this.Event_ClickDeferred)})}};function ClickEvent(){}ClickEvent.Const={ARG_NO_MODIFIER:"NoModifier"};ClickEvent.prototype={Event_Click_Setup:function(a){if(!this.Event_ClickEventArgs){this.Event_ClickEventArgs=new Array()}this.Event_ClickEventArgs.push(a);if(!this.Event_Click){this.Event_Click=new Array()}var b=this.Event_Click.length;this.Event_Click.push(new CtrlEvent(this,function(){var c=this;if(!$Elt(this.msControlID)){this.msControlID=this.msID}Utils.AddEvent(this.msControlID,"click",function(d){c.Click(d,b)},this.Event_Click[b])}))},Click:function(b,a){if((this.Event_ClickEventArgs[a]==ClickEvent.Const.ARG_NO_MODIFIER&&!(b.ctrlKey||b.metaKey)&&!b.shiftKey)||!this.Event_ClickEventArgs[a]){this.Event_Click[a].Fire()}}};function MouseDownEvent(){}MouseDownEvent.prototype={Event_MouseDown_Setup:function(){this.Event_MouseDown=new CtrlEvent(this,function(){Utils.AddEvent(this.msID,"mousedown",this.Event_MouseDown.Fire,this.Event_MouseDown)})}};function OutEvent(){}OutEvent.prototype={Event_Out_Setup:function(){this.Event_Out=new CtrlEvent(this,function(){var a=this;Utils.AddEvent(this.msID,"mouseout",function(b){if(Utils.IsMouseLeaveOrEnter(b,$Elt(a.msID))){a.Event_Out.Fire()}},this.Event_Out)})}};function OverEvent(){}OverEvent.prototype={Event_Over_Setup:function(a){if(a&&Utils.Trim(a)!=""){this.msOverCondition=a}this.Event_Over=new CtrlEvent(this,function(){Utils.AddEvent(this.msID,"mouseover",this.Event_Over_Fire,this)})},Event_Over_Fire:function(){var a=true;if(this.msOverCondition){if(!DragDropMgr.mbIsDrag||this.msOverCondition!=ClipboardProperties.msCache){a=false}}if(a){this.Event_Over.Fire()}},Event_OverAndDrag_Setup:function(a){this.Event_OverAndDrag=new CtrlEvent(this,function(){var b=this;this.miOverAndDragDelay=parseInt(a);if(!isNaN(this.miOverAndDragDelay)){Utils.AddEvent(this.msID,"mouseout",function(){window.clearTimeout(b.moTimeoutOverAndDragDelay)},b)}Utils.AddEvent(this.msID,"mouseover",function(){if(DragDropMgr.mbIsDrag){if(isNaN(this.miOverAndDragDelay)){c.Event_OverAndDrag.Fire()}else{var c=this;this.moTimeoutOverAndDragDelay=window.setTimeout(function(){if(DragDropMgr.mbIsDrag){c.Event_OverAndDrag.Fire()}},c.miOverAndDragDelay)}}},this)})},Event_OverDelay_Setup:function(a){this.miOverDelay=parseInt(a);this.Event_OverDelay=new CtrlEvent(this,function(){var b=this;Utils.AddEvent(this.msID,"mouseover",b.Event_OverDelay_Fire,b);Utils.AddEvent(this.msID,"mouseout",function(){window.clearTimeout(b.moTimeoutOverDelay)},b)})},Event_OverDelay_Fire:function(){var a=this;this.moTimeoutOverDelay=window.setTimeout(function(){a.Event_OverDelay.Fire()},a.miOverDelay)}};function ShortcutEvent(){}ShortcutEvent.Const={SEPARATOR:"|"};ShortcutEvent.prototype={Event_Shortcut_Setup:function(a){var c=this;if(!this.moShortcuts){this.moShortcuts=new Object()}var b=a.split(ShortcutEvent.Const.SEPARATOR);var d=new Array();d.push((b.length>1&&b[1]=="1"));d.push((b.length>2&&b[2]=="1"));d.push((b.length>3&&b[3]=="1"));d.push((b.length>4&&b[4]=="1"));this.moShortcuts[b[0]]=d;this.Event_Shortcut=new CtrlEvent(this,function(){Utils.AddEvent(document,"keydown",c.Shortcut,c)})},Shortcut:function(a){if(!$Elt(this.msID)||$S(this.msID,"visibility",true)=="hidden"||$S(this.msID,"display",true)=="none"){return}var c;if(a.keyCode){c=a.keyCode}else{if(a.which){c=a.which}}var b;if(a.target){b=a.target}else{if(a.srcElement){b=a.srcElement}}if(c in this.moShortcuts){var d=this.moShortcuts[c];if(((!d[0]&&!(a.ctrlKey||a.metaKey))||(d[0]&&(a.ctrlKey||a.metaKey)))&&((!d[1]&&!a.shiftKey)||(d[1]&&a.shiftKey))&&((!d[2]&&!a.altKey)||(d[2]&&a.altKey))&&(d[3]||(b.nodeName.toLowerCase()!="input"&&b.nodeName.toLowerCase!="textarea"))){if(Matrix3.maPopupStack.length>0&&(typeof Matrix3.moCMS==="undefined"||Matrix3.moCMS==null)){var f=Matrix3.maPopupStack[Matrix3.maPopupStack.length-1];if(Utils.StartsWith(this.msID,f)){this.Event_Shortcut.Fire()}}else{this.Event_Shortcut.Fire()}}}}};function ShowEvent(){}ShowEvent.Const={PROPERTY_DELAY:"delay"};ShowEvent.prototype={Event_Show_Setup:function(a){var b=Utils.GetOptions(a);var c=this;if(!this.Event_Shows){this.Event_Shows=new Object()}if(!this.Event_ShowTimers){this.Event_ShowTimers=new Object()}this.Event_Show=new CtrlEvent(this,function(){var d=1;if(ShowEvent.Const.PROPERTY_DELAY in b){d=parseInt(b[ShowEvent.Const.PROPERTY_DELAY])}c.Event_ShowTimers[a]=window.setTimeout(function(){c.Event_Shows[a].Fire()},d)});this.Event_Shows[a]=this.Event_Show}};function WindowExitEvent(){}WindowExitEvent.msControlID=null;WindowExitEvent.RefreshNode=function(a){window.onbeforeunload=function(){}};WindowExitEvent.Const={MGR_NAME:"WindowExitEvent"};WindowExitEvent.prototype={Event_WindowExit_Setup:function(a){WindowExitEvent.msControlID=this.msID;Matrix3.RegisterInCache(this.msID,WindowExitEvent);this.Event_WindowExit=new CtrlEvent(this,function(){var b=this;window.onbeforeunload=function(){if(!Matrix3.mbClick){b.Event_WindowExit.Fire();return a}}})}};function WindowResizeEvent(){}WindowResizeEvent.Const={DELAY:1000,CLEAR_CACHE:"ClearCache",SEPARATOR_RESOLUTION:"x",SEPARATOR_VALUE:","};WindowResizeEvent.prototype={Event_WindowResize_Setup:function(a){var i=-1;var g=-1;var h=-1;var f=-1;if(a&&Utils.Trim(a)!=""){a=a.toLowerCase();var d=a.split(WindowResizeEvent.Const.SEPARATOR_VALUE);if(d.length==2){var c=d[0].split(WindowResizeEvent.Const.SEPARATOR_RESOLUTION);i=parseInt(c[0]);h=parseInt(c[1]);var b=d[1].split(WindowResizeEvent.Const.SEPARATOR_RESOLUTION);g=parseInt(b[0]);f=parseInt(b[1])}}this.Action_CheckResize=function(){this._CheckWindowResize(null,true,i,g,h,f)};this.Event_WindowResize=new CtrlEvent(this,function(){Utils.AddEvent(window,"resize",function(j){this._CheckWindowResize(j,false,i,g,h,f)},this)})},_CheckWindowResize:function(g,a,f,c,d,b){window.clearTimeout(this.WindowResizeEventTimeout);if(!a){var l=this;this.WindowResizeEventTimeout=window.setTimeout(function(){l._CheckWindowResize(g,true,f,c,d,b)},WindowResizeEvent.Const.DELAY)}else{var i=true;var h=true;if(f>=0||c>=0){var k=Utils.GetViewportWidth();if(f>=0&&k<f){i=false}if(c>=0&&k>c){i=false}}if(d>=0||b>=0){var j=Utils.GetViewportHeight();if(d>=0&&j<d){h=false}if(b>=0&&j>b){h=false}}if(i&&h){this.Event_WindowResize.Fire()}}}};function AutoCompContainer(a,b){if(typeof a=="string"&&a!=""){this.msControlID=a}else{throw"AutoCompContainer Error : Try to init an autocomp container with a control id null or empty."}this.msContainerID=this.msControlID+AutoCompContainer.Const.ID_SUFFIX;this.moControl=$E(this.msControlID);this.moRootNode=null;this.moContainer=null;this.mbIsDisplayed=false;this.miMinWidth="auto";this.miMaxWidth="auto";this.miForceWidth="auto";this.msSpecificClass=this._GenerateContainerClass(b);this.mbLastDisplayIsOver=false;this._Create()}AutoCompContainer.Const={ID_SUFFIX:"_Mirror",CLASS_SUFFIX:"ACC",GLOBAL_CLASS:"AutoCompACC",SCREEN_MIN_DISTANCE_HEIGHT:50,SCREEN_MIN_DISTANCE_WIDTH:20,MIN_HEIGHT:150};AutoCompContainer.prototype={GetID:function(){return this.msContainerID},GetObj:function(){return this.moContainer},Show:function(){this._RefreshPositionIfOver();if(Utils.IsIE()){this.moContainer.addClass(AutoCompContainer.Const.GLOBAL_CLASS)}this.moContainer.css("visibility","visible");this.mbIsDisplayed=true},Hide:function(){if(Utils.IsIE()){this.moContainer.removeClass(AutoCompContainer.Const.GLOBAL_CLASS)}this.moContainer.css("visibility","hidden");this.mbIsDisplayed=false},IsDisplayed:function(){return this.mbIsDisplayed},IsHidden:function(){return !this.mbIsDisplayed},Refresh:function(){this._RefreshPosition()},SetForceWidth:function(a){if(typeof a!="number"||(typeof a=="number"&&a<10)){this.miForceWidth="auto"}else{this.miForceWidth=a}},SetMinWidth:function(a){if(typeof a!="number"||(typeof a=="number"&&a<10)){this.miMinWidth="auto"}else{this.miMinWidth=a}},SetMaxWidth:function(a){if(typeof a!="number"||(typeof a=="number"&&a<10)){this.miMaxWidth="auto"}else{this.miMaxWidth=a}},_RefreshPosition:function(){this.mbLastDisplayIsOver=false;var c=this._GetControlPosition();this.moContainer.css({top:c.bottom+"px",left:c.left+"px",width:"auto",height:"auto"});var a=this._ResizeHeight(c);var b=this._ResizeWidth();this._MoveOnX(c.onscreen.left,b)},_RefreshPositionIfOver:function(){if(this.mbLastDisplayIsOver==true){this.moContainer.css("visibility","hidden");var k=$("."+AutoCompletionProperties.Const.HEADER_CLASS,this.moContainer);var j=$("."+AutoCompletionProperties.Const.FOOTER_CLASS,this.moContainer);var f=0;var d=0;if(Utils.IsIE7()==true){if(k&&k.length>0){f=k.height()}if(j&&j.length>0){d=j.height()}}else{if(k&&k.length>0){f=k.outerHeight()}if(j&&j.length>0){d=j.outerHeight()}}var g=this.moContainer.offset().top-f-d+Utils.GetDocument().scrollTop;var b=0;if(Utils.IsIE7()==true){b=this.moContainer.height()}else{b=this.moContainer.outerHeight()}var i=this._GetControlPosition();var h=i.onscreen.top;var a=g+b;if(a!=h){var c=h-a;if(c>0){g+=c}else{g-=c}}if(this.moRootNode.attr("id")&&this.moRootNode.attr("id").match(/:_Popup$/)){g-=this.moRootNode.offset().top+Utils.GetDocument().scrollTop}this.moContainer.css({top:g+"px",visibility:"visible"})}},_ResizeHeight:function(a){var j=this.moControl.autocomplete("widget");j.css("height","auto");if(Utils.IsIE7()==true){iContainerHeight=this.moContainer.height()}else{iContainerHeight=this.moContainer.outerHeight()}var d=iContainerHeight;var i=this._CalculateHeightOverAndUnderControl(a);if(i.under>=i.over||i.under>AutoCompContainer.Const.MIN_HEIGHT||iContainerHeight<=i.under){var b=a.onscreen.bottom+iContainerHeight;var c=$(window).scrollTop()+$(window).height()-AutoCompContainer.Const.SCREEN_MIN_DISTANCE_HEIGHT;if(b>c){d=c-a.onscreen.bottom;if(d<AutoCompContainer.Const.MIN_HEIGHT&&iContainerHeight>d){d=Math.min(iContainerHeight,AutoCompContainer.Const.MIN_HEIGHT)}if(Utils.IsIE7()==true){j.height(d)}else{j.outerHeight(d)}}}else{var f=a.onscreen.top;if(this.moRootNode.attr("id")&&this.moRootNode.attr("id").match(/:_Popup$/)){f=a.top}var g=a.onscreen.top-iContainerHeight;var h=$(window).scrollTop()+AutoCompContainer.Const.SCREEN_MIN_DISTANCE_HEIGHT;if(g<h){d=a.onscreen.top-h;if(d<AutoCompContainer.Const.MIN_HEIGHT&&iContainerHeight>d){d=Math.min(iContainerHeight,AutoCompContainer.Const.MIN_HEIGHT)}if(Utils.IsIE7()==true){j.height(d)}else{j.outerHeight(d)}this.moContainer.css("top",(f-d)+"px")}else{this.moContainer.css("top",(f-iContainerHeight)+"px")}this.mbLastDisplayIsOver=true}return d},_CalculateHeightOverAndUnderControl:function(a){var d=Utils.GetDocument().scrollTop;var c=$(window).height()+Utils.GetDocument().scrollTop;var b=a.onscreen.top-d;var f=c-a.onscreen.bottom;return{over:b,under:f}},_ResizeWidth:function(){var c=this.moControl.autocomplete("widget");var a=null;if(Utils.IsIE7()==true){a=c.width()}else{a=c.outerWidth()}var b=a;if(this.miMaxWidth=="auto"&&this.miForceWidth=="auto"&&this.miMinWidth=="auto"){return a}if(typeof this.miForceWidth=="number"){b=this.miForceWidth}else{if(typeof this.miMinWidth=="number"){if(a<this.miMinWidth){b=this.miMinWidth}}if(typeof this.miMaxWidth=="number"){if(a>this.miMaxWidth){b=this.miMaxWidth}}}if(typeof b=="number"){if(Utils.IsIE7()==true){c.width(b)}else{c.outerWidth(b)}}return b},_MoveOnX:function(a,b){var g=$(window).width()+$(window).scrollLeft();var f=a+b;var c=g-AutoCompContainer.Const.SCREEN_MIN_DISTANCE_WIDTH;if(f>c){var d=c-b;if(this.moRootNode.attr("id")&&this.moRootNode.attr("id").match(/:_Popup$/)){d-=this.moRootNode.offset().left+Utils.GetDocument().scrollLeft}this.moContainer.css("left",d)}},_GetControlPosition:function(){var i=0;var d=0;var k=0;var c=0;var a=0;var g=0;var j=0;var f=0;var b=0;var h=0;var l=this.moControl.offset();i=l.top+Utils.GetDocument().scrollTop;d=l.left+Utils.GetDocument().scrollLeft;j=i;f=d;if(this.moRootNode.attr("id")&&this.moRootNode.attr("id").match(/:_Popup$/)){i-=this.moRootNode.offset().top+Utils.GetDocument().scrollTop;d-=this.moRootNode.offset().left+Utils.GetDocument().scrollLeft}if(Utils.IsIE7()==true){k=this.moControl.width();c=this.moControl.height()}else{k=this.moControl.outerWidth();c=this.moControl.outerHeight()}g=d+k;a=i+c;h=f+k;b=j+c;return{top:i,left:d,width:k,height:c,bottom:a,right:g,onscreen:{top:j,left:f,right:h,bottom:b}}},_GetRootNode:function(){var a=$PI(this.msControlID);while(a.moParent){a=a.moParent}return $(a.GetNode())},_Create:function(){this.moRootNode=this._GetRootNode();this.moContainer=$E(this.msContainerID);if(this.moContainer.length>0){this.moContainer.remove()}this.moContainer=$('<div id="'+this.msContainerID+'"></div>');this.moRootNode.append(this.moContainer);this.moContainer.addClass("ClearFixC");this.moContainer.addClass(AutoCompContainer.Const.GLOBAL_CLASS);if(this.msSpecificClass&&this.msSpecificClass!=""){this.moContainer.addClass(this.msSpecificClass)}this.moContainer.css({position:"absolute",visibility:"hidden",width:"auto",height:"auto",overflow:"visible"})},_GenerateContainerClass:function(a){if(typeof a==="string"){a=Utils.Trim(a);if(a!=""){a+AutoCompContainer.Const.CLASS_SUFFIX;var b=new RegExp(" ","");a=a.replace(b,AutoCompContainer.Const.CLASS_SUFFIX+" ");if(a==AutoCompContainer.Const.GLOBAL_CLASS){a=""}return a}}return""}};var AutoCompletionMgr={oControls:new Object(),Setup:function(b,a){if(b&&b!=""){this.oControls[b]=new AutoCompletionProperties(b);this.oControls[b].Setup(a)}},Get:function(a){if(a&&a!=""){if(this.oControls[a]){return this.oControls[a]}if(this.oControls[a+"_Value"]){return this.oControls[a+"_Value"]}}return null},DisableAll:function(){for(var a in this.oControls){this.oControls[a].Disable()}},EnableAll:function(){for(var a in this.oControls){this.oControls[a].Enable()}}};function AutoCompletionProperties(a){if(typeof a=="string"&&a!=""){this.msID=a}else{throw"AutoCompletionProperties Error : Try to init an autocompletion property with a control id null or empty."}this.mbIsEnabled=false;this.moAutoComp=$E(this.msID);this.moFieldValue=null;this.moContainer=null;this.moEvents=new Object();this.moMatrixCtrl=ControlMgr.GetInstance().GetControl(this.msID,AutoCompletionCtrl.Const.CONTROL_NAME);this.moBaseDefaultOptions={sIDFieldValue:null,bForceSelection:true,iMaxResults:300,iMinLength:2,iQueryDelay:300,iQueryTimeout:60000,sNoItemMessage:null,bAutoFocus:false,bDropDown:false,bSuggestEmpty:false,sEmptyRowText:null,bAllowCreation:false,sContainerClass:"AutoComp",bPreSelectFirstValue:false,bHideLoaderImage:false,bHideColumnTitle:false,bRequestAllOnClick:true,bSelectAllOnClick:false,bEnableHTML:false,iMinWidth:null,iMaxWidth:null,iForceWidth:null,oStaticSource:null,bStaticSourceEmpty:false,bSmartSearchOrder:false,sQueryFile:null,sQueryFilterFile:null,sQuerySearchField:"",sQueryTextboxFields:"",sQueryAdditionals:"",sQueryProperties:"",sQueryViewState:"",sEventTrackingCode:"",sPageTrackingCode:"",bAllowMultiEntry:false,sMultiEntrySeparator:" ",bAllowMultiEntryDuplicate:false,sChildQueryFile:null,sChildQueryFilterFile:null,sOption:null,bAddDetails:false,bEnlargeTextarea:true,iMaxHeightTextarea:150};this.mbIsStaticSource=false;this.mbFirstLineIsAnEmptyLine=false;this.moStaticSourceKeys=[];this.moStaticSource=null;this.moStaticSourceColors=null;this.moStaticSourceIcons=null;this.miNumberRealItems=0;this.miLineCounter=0;this.moLastLiFocused=null;this.mbItemSelected=false;this.msDefaultItemLabel="";this.msDefaultItemValue="";this.msOriginalItemLabel="";this.msOriginalItemValue="";this.mbComplexAutoComp=false;this.moComplexAutoComp=null;this.mbAutoCompTextarea=false;this.moAutoCompTextarea=null;this.mbAutoCompMultiEntry=false;this.moAutoCompMultiEntry=null;this.miContainerWidthTotal;this.miNbColumns=1;this.mbLastSearchNoResult=false;this.msLastSearch="";this.moCache={};this.moLastXhr;this.mbHasDebugQuery=false;this.moLoader=null;this.mbUseChildQuery=false}AutoCompletionProperties.Const={KEYS_SELECTORS:[13,9,39],DEFAULT_VALUE_FIELD_SUFFIX:"_Value",URL:"htm/AutoCompletion.aspx",QUERYVALUE:"V",QUERYFILE:"Q",QUERYSEARCH:"S",FILTERFILE:"F",ADDITIONALS:"A",FLASH_MODE:"FL",MAXRESULTS:"M",PROPERTIES:"P",VIEWSTATE:"VS",TEXTBOXFIELDS:"C",USE_CHILD_QUERY:"CQ",JSON_MAXCOUNT:"M",JSON_HEADER:"H",JSON_COL_NAME:"N",JSON_COL_WIDTH:"W",JSON_SPECIFIC_CLASS:"Z",JSON_QUERY:"Q",JSON_SHOW_CHILDREN:"SC",MAX_RESULTS_COMPLEXE_AUTOCOMP_IE:100,MAX_RESULTS_COMPLEXE_AUTOCOMP_OTHERS:null,MAX_RESULTS_IE8:40,EMPTY_LIST_TEXT:"EL",EMPTY_VALUE:"[EMPTY]",REQUEST_ALL_QUERY:"   ",CLEARFIX_CLASS:"ACClearFix",LOADER_CLASS:"ACLoader",LOADER_IMAGE_CLASS:"img",LOADER_JQUERY_CLASS:"ui-autocomplete-loading",HEADER_CLASS:"HeaderRow",FOOTER_CLASS:"FooterRow",EMPTY_ROW_CLASS:"EmptyRow",NO_ITEM_MESSAGE_CLASS:"NoItemMessage",LI_CLASS_FOR_TEXTAREA:"textarea",PROPERTY_AC_CREATION_LINE_TEMPLATE:"ACCL",CREATE_ENTRY_TAG_TEXT:"##TEXT##",CREATE_ENTRY_RESERVED_VALUE:"%CREATE_ENTRY%",SCROLLBAR_WIDTH:35,DEFAULT_COLUMN_WIDTH:200,NO_LIMIT_KEYWORD:"NoLimit",PROPERTY_AC_BLANK_PLACEHOLDER:"ACBPH",EVENT_LINE_DETAILS:"AUTOCOMP_LINE_DETAILS",SUFFIX_DROP_DOWN:"_DD"};AutoCompletionProperties.prototype={Setup:function(a){if(typeof(a)!=="object"){a={}}this.moOptions=$.extend(this.moBaseDefaultOptions,a);if(document.getElementById(this.msID)&&this._CheckOptions()){this._CleanOptions();this._InitContainer();this._CheckComplexAutoComp();this._CheckAutoCompMultiEntry();this._CheckAutoCompTextarea();this._CreateLoader();this._BindAutoCompEvent()}else{}},SetEvent:function(a,i,g,h,f,d,b,c){this.moEvents[a]={name:g,vform_id:i,type:h,delay:f,args:d,comm:b,commargs:c}},SetEventSelect:function(h,f,g,d,c,a,b){this.SetEvent("select",h,f,g,d,c,a,b)},SetEventOption:function(h,f,g,d,c,a,b){this.SetEvent("option",h,f,g,d,c,a,b)},Enable:function(){this.mbIsEnabled=true;if(document.getElementById(this.msId)){this.moAutoComp.autocomplete("enable")}},Disable:function(){if(this.mbHasDebugQuery==false&&document.getElementById(this.msId)){this.mbIsEnabled=false;this._HideLoader();this.moAutoComp.autocomplete("close");this.moAutoComp.autocomplete("disable");this.moContainer.Hide()}},RequestAll:function(){var a=this.moAutoComp.attr("disabled");var b=this.moAutoComp.attr("readonly");if((typeof a==="undefined"||a===false)&&(typeof b==="undefined"||b===false)){if(this.moContainer.IsDisplayed()){this.moAutoComp.autocomplete("close")}else{this.moCache={};if(this.mbComplexAutoComp===true){this.moComplexAutoComp.reset()}this.moAutoComp.focus();this._DisableQueryDelay();this.moAutoComp.autocomplete("search",AutoCompletionProperties.Const.REQUEST_ALL_QUERY);this.moAutoComp.select()}}},GetFieldValueID:function(){if(!this.moOptions.sIDFieldValue||this.moOptions.sIDFieldValue==null){return this.msID+AutoCompletionProperties.Const.DEFAULT_VALUE_FIELD_SUFFIX}return this.moOptions.sIDFieldValue},Action_SelectIndex:function(a){},_CheckOptions:function(){if(!this.moOptions.sQueryFile||this.moOptions.sQueryFile==null||Utils.IsString(this.moOptions.sQueryFile)==false||!this.moOptions.sQueryFilterFile||this.moOptions.sQueryFilterFile==null||Utils.IsString(this.moOptions.sQueryFilterFile)==false){if(this.moOptions.oStaticSource==null||this.moOptions.oStaticSourceKeys==null){return false}this.mbIsStaticSource=true;this.moStaticSource=this.moOptions.oStaticSource;this.moStaticSourceKeys=this.moOptions.oStaticSourceKeys;this.moStaticSourceIcons=this.moOptions.oStaticSourceIcons}return true},_InitContainer:function(){this.moContainer=new AutoCompContainer(this.msID,this.moOptions.sContainerClass);if(this.moStaticSourceIcons){this.moContainer.moContainer.addClass("IC")}},_CheckComplexAutoComp:function(){if((this.moOptions.sChildQueryFile&&this.moOptions.sChildQueryFile!=null&&this.moOptions.sChildQueryFile!="")||(this.moOptions.sOption&&this.moOptions.sOption!=null&&this.moOptions.sOption!="")||(this.moOptions.bAddDetails&&this.moOptions.bAddDetails!=null&&this.moOptions.bAddDetails!="")){this._ActivComplexAutoComp()}},_ActivComplexAutoComp:function(){if(this.mbComplexAutoComp==false){this.mbComplexAutoComp=true;this.moComplexAutoComp=new ComplexAutoCompProperties(this,this.moOptions);if(Utils.IsIE()&&this.moOptions.iMaxResults>AutoCompletionProperties.Const.MAX_RESULTS_COMPLEXE_AUTOCOMP_IE){this.moOptions.iMaxResults=AutoCompletionProperties.Const.MAX_RESULTS_COMPLEXE_AUTOCOMP_IE}}},_CheckAutoCompTextarea:function(){if(this.moAutoComp.get(0).tagName.toLowerCase()=="textarea"){this._ActiveAutoCompTextarea()}},_ActiveAutoCompTextarea:function(){if(this.mbAutoCompTextarea==false){this.mbAutoCompTextarea=true;this.moAutoCompTextarea=new AutoCompTextarea(this)}},_CheckAutoCompMultiEntry:function(){if(this.moOptions.bAllowMultiEntry==true&&this.moOptions.sMultiEntrySeparator&&this.moOptions.sMultiEntrySeparator.length>0){this._ActiveAutoCompMultiEntry()}},_ActiveAutoCompMultiEntry:function(){if(this.mbAutoCompMultiEntry==false){this.mbAutoCompMultiEntry=true;this.moAutoCompMultiEntry=new AutoCompMultiEntry(this)}},_CleanOptions:function(){if(this.moOptions.sIDFieldValue==null){this.moOptions.sIDFieldValue=this.msID+AutoCompletionProperties.Const.VALUEFIELD}else{this.moOptions.sIDFieldValue=Utils.Trim(this.moOptions.sIDFieldValue)}this.moFieldValue=$E(this.moOptions.sIDFieldValue);this.moOptions.bForceSelection=Utils.ParseBool(this.moOptions.bForceSelection);if(this.moOptions.iMaxResults!=AutoCompletionProperties.Const.NO_LIMIT_KEYWORD){if(parseInt(this.moOptions.iMaxResults)>0){this.moOptions.iMaxResults=parseInt(this.moOptions.iMaxResults)}}if(Utils.IsIE8()&&this.mbIsStaticSource==false){this.moOptions.iMaxResults=AutoCompletionProperties.Const.MAX_RESULTS_IE8}this.moOptions.iMinLength=parseInt(this.moOptions.iMinLength);this.moOptions.iQueryDelay=parseInt(this.moOptions.iQueryDelay);this.moOptions.bAllowCreation=Utils.ParseBool(this.moOptions.bAllowCreation);this.moOptions.bSuggestEmpty=Utils.ParseBool(this.moOptions.bSuggestEmpty);this.moOptions.bAddDetails=Utils.ParseBool(this.moOptions.bAddDetails);this.moOptions.bDropDown=Utils.ParseBool(this.moOptions.bDropDown);this.moOptions.bAllowMultiEntry=Utils.ParseBool(this.moOptions.bAllowMultiEntry);this.moOptions.bPreSelectFirstValue=Utils.ParseBool(this.moOptions.bPreSelectFirstValue);this.moOptions.bHideColumnTitle=Utils.ParseBool(this.moOptions.bHideColumnTitle);this.moOptions.bHideLoaderImage=Utils.ParseBool(this.moOptions.bHideLoaderImage);this.moOptions.bAllowMultiEntryDuplicate=Utils.ParseBool(this.moOptions.bAllowMultiEntryDuplicate);this.moOptions.bAutoFocus=Utils.ParseBool(this.moOptions.bAutoFocus);this.moOptions.bEnlargeTextarea=Utils.ParseBool(this.moOptions.bEnlargeTextarea);this.moOptions.iMaxHeightTextarea=parseInt(this.moOptions.iMaxHeightTextarea);this.moOptions.bRequestAllOnClick=Utils.ParseBool(this.moOptions.bRequestAllOnClick);this.moOptions.bSelectAllOnClick=Utils.ParseBool(this.moOptions.bSelectAllOnClick);this.moOptions.bStaticSourceEmpty=Utils.ParseBool(this.moOptions.bStaticSourceEmpty);this.moOptions.bSmartSearchOrder=Utils.ParseBool(this.moOptions.bSmartSearchOrder);this.moOptions.bEnableHTML=Utils.ParseBool(this.moOptions.bEnableHTML);if(this.mbIsStaticSource==true){this.moOptions.bRequestAllOnClick=true}if(this.moOptions.oStaticSource==null){this.moOptions.bPreSelectFirstValue=false}this.moOptions.sMultiEntrySeparator=String(this.moOptions.sMultiEntrySeparator);if(this.moOptions.sOneColumnTemplate!=null){this.moOptions.sOneColumnTemplate=Utils.Trim(String(this.moOptions.sOneColumnTemplate));if(this.moOptions.sOneColumnTemplate!=""){this.moOptions.bUseOneColumnTemplate=true}else{this.moOptions.sOneColumnTemplate=null}}if(this.moOptions.iMinWidth!=null){this.moOptions.iMinWidth=parseInt(this.moOptions.iMinWidth)}if(this.moOptions.iMaxWidth!=null){this.moOptions.iMaxWidth=parseInt(this.moOptions.iMaxWidth)}if(this.moOptions.iForceWidth!=null){this.moOptions.iForceWidth=parseInt(this.moOptions.iForceWidth)}if(this.mbIsStaticSource==true){this.moOptions.iMinLength=0}if(typeof this.moOptions.sChildQueryFile==="string"&&this.moOptions.sChildQueryFile!=""){this.mbUseChildQuery=true}},_BindAutoCompEvent:function(){var a=this;this._SelectDefaultValueStaticSource();this._BindKeyDownForFocus();this.msDefaultItemLabel=this.moAutoComp.val();this.msDefaultItemValue=this.moFieldValue.val();this.msOriginalItemLabel=this.msDefaultItemLabel;this.msOriginalItemValue=this.msDefaultItemValue;this._BindOnClick();this._BindOnKeyUp();this._BindOnFocusOut();this.moAutoComp.autocomplete({minLength:a.moOptions.iMinLength,appendTo:"[id='"+a.moContainer.GetID()+"']",delay:a.moOptions.iQueryDelay,source:function(b,c){a._SetSourceResponse(b,c)},focus:function(b,c){if(a.moLastLiFocused!=null&&a.moLastLiFocused.length>0){a.moLastLiFocused.removeClass("focused")}a.moLastLiFocused=$(".ui-state-focus",a.moAutoComp.autocomplete("widget")).parent("li");a.moLastLiFocused.addClass("focused");if(a.mbAutoCompMultiEntry==true){return false}},search:function(b,c){a._ShowLoader();a.miLineCounter=0;a.miNumberRealItems=0;a.mbItemSelected=false},open:function(){this.mbLastSearchNoResult=false;a._HideLoader();a._RefreshPositionOfWidget();if(typeof a.moOptions.iMinWidth=="number"){a.moContainer.SetMinWidth(a.moOptions.iMinWidth)}if(typeof a.moOptions.iMaxWidth=="number"){a.moContainer.SetMaxWidth(a.moOptions.iMaxWidth)}if(typeof a.moOptions.iForceWidth=="number"){a.moContainer.SetForceWidth(a.moOptions.iForceWidth)}else{if(typeof a.miContainerWidthTotal=="number"){a.moContainer.SetForceWidth(a.miContainerWidthTotal)}}a.moContainer.Refresh();a.moContainer.Show()},close:function(){a.moContainer.Hide();a._HideLoader()},select:function(b,d){var c=d.item;if(!c||(c&&a._IsSelectableValue(c)==false)){return false}a.mbItemSelected=true;a._ItemSelectEventFire(c);a.msDefaultItemLabel=a.moAutoComp.val();b.stopImmediatePropagation();a.moAutoComp.trigger("autocomp_select",[c.bodyText,c.bodyValue]);return false}}).data("autocomplete")._renderMenu=(function(c,b){a._RenderMenu(c,b)})},_RenderMenu:function(h,a){if(!a||a.length==0){this.moAutoComp.autocomplete("close");return}if(a[0].bodyContent.length>1){this.miNbColumns=a[0].bodyContent.length;this._ActivComplexAutoComp()}else{}var c=this;var g="";var d="";var f="";$("."+AutoCompletionProperties.Const.HEADER_CLASS,this.moContainer.GetObj()).remove();$("."+AutoCompletionProperties.Const.FOOTER_CLASS,this.moContainer.GetObj()).remove();this.miNumberRealItems=this._GetNbRealItems(a);if(this.miNumberRealItems==0){if(this.moOptions.sNoItemMessage&&this.moOptions.sNoItemMessage!=null&&Utils.Trim(this.moOptions.sNoItemMessage)!=""){d+='<div class="'+AutoCompletionProperties.Const.NO_ITEM_MESSAGE_CLASS+'">'+this.moOptions.sNoItemMessage+"</div>";if(this.moEvents.option&&this.mbComplexAutoComp==true){var b=this.moComplexAutoComp.SpecificRenderMenu(h,a);h=b.ul;a=b.aoResults;g+=b.sHeader;f+=b.sFooter}}else{this.moAutoComp.autocomplete("close");return}}else{if(this.mbComplexAutoComp==true){var b=this.moComplexAutoComp.SpecificRenderMenu(h,a);h=b.ul;a=b.aoResults;g+=b.sHeader;f+=b.sFooter}}if(g&&Utils.Trim(g)!=""&&this.moOptions.bHideColumnTitle==false){this.moContainer.GetObj().prepend('<div class="ClearFixC '+AutoCompletionProperties.Const.HEADER_CLASS+'">'+g+'</div><div class="'+AutoCompletionProperties.Const.CLEARFIX_CLASS+'"></div>')}if(d&&Utils.Trim(d)!=""){h.append("<li>"+d+"</li>")}else{$.each(a,function(i,j){if(c.moOptions.iMaxResults==AutoCompletionProperties.Const.NO_LIMIT_KEYWORD||i<c.moOptions.iMaxResults){var k=c._RenderItem(h,j);if(k){k.data("item.autocomplete",j).appendTo(h)}}})}if(f&&Utils.Trim(f)!=""){this.moContainer.GetObj().append('<div class="ClearFixC '+AutoCompletionProperties.Const.FOOTER_CLASS+'">'+f+"</div>")}},_RenderItem:function(i,a){var d=false;var g=a.bodyContent[0];var h=a.bodyValue;var f="";if(g==""&&this.mbComplexAutoComp==false){g="&nbsp;";f=AutoCompletionProperties.Const.EMPTY_ROW_CLASS}if(this._IsSelectableValue(a)==true){var b=this.miLineCounter%2?"odd":"even";d='<div class="l ClearFixC '+b+' DoNotFollow">';if(this.mbComplexAutoComp==true){d+=this.moComplexAutoComp.SpecificRenderItem(i,a)}else{if(typeof a.tag=="string"){d+='<span class="tag">'+this._CleanText(a.tag)+"</span>"}if(this.moOptions.bEnableHTML==true){d+=g}else{d+=this._CleanText(g)}}d+="</div>";this.miLineCounter++}if(d){if(this.mbAutoCompTextarea==true){f+=" "+AutoCompletionProperties.Const.LI_CLASS_FOR_TEXTAREA}var c="";if(a.iconUrl){c=' style="background-image:url('+a.iconUrl+')"'}return $('<li class="'+f+'"></li>').html("<a"+c+">"+d+"</a>")}},_BindOnClick:function(){var a=this;if((this.moOptions.bRequestAllOnClick==true&&this.moOptions.bDropDown==true)||this.moOptions.bSelectAllOnClick==true){this.moAutoComp.click(function(b){if(a.moOptions.bRequestAllOnClick==true&&a.moOptions.bDropDown==true){if(a.moContainer.IsHidden()==true){a.RequestAll()}}if(a.moOptions.bSelectAllOnClick==true){a.moAutoComp.select()}})}if(this.mbAutoCompMultiEntry==true){this.moAutoComp.click(function(b){a.moAutoCompMultiEntry._SpecificOnClick(b)})}},_BindKeyDownForFocus:function(){var a=this;this.moAutoComp.bind("keydown.autocomplete",function(b){if((b.keyCode==38||b.keyCode==40)&&a.moContainer.IsDisplayed()==true){var c=$(".focused",a.moAutoComp.autocomplete("widget")).index();switch(b.keyCode){case 38:if(c==0){b.stopImmediatePropagation()}break;case 40:if(c==(a.miLineCounter-1)){b.stopImmediatePropagation()}break}}if(b.keyCode>=37&&b.keyCode<=40&&a.moContainer.IsDisplayed()==false){b.stopImmediatePropagation()}if(b.keyCode==39&&$(this).data("autocomplete").menu.active){$(".focused a",a.moAutoComp.autocomplete("widget")).trigger("click")}if(Utils.IndexOf(AutoCompletionProperties.Const.KEYS_SELECTORS,b.keyCode)>-1&&$(this).data("autocomplete").menu.active){b.preventDefault()}})},_BindOnFocusOut:function(){var a=this;if(this.moOptions.bForceSelection==true){this.moAutoComp.focusout(function(b){if(a.mbItemSelected==false&&a.moOptions.bForceSelection==true&&a.msDefaultItemLabel!=a.moAutoComp.val()){a.moAutoComp.val("");a.moFieldValue.val("")}})}},_BindOnKeyUp:function(){var a=this;this.moAutoComp.keyup(function(b){a.mbItemSelected=false;var c="";if(Utils.IndexOf(AutoCompletionProperties.Const.KEYS_SELECTORS,b.keyCode)<=-1&&a.moOptions.bForceSelection==false){a.moFieldValue.val(a.moAutoComp.val())}if(Utils.IndexOf(AutoCompletionProperties.Const.KEYS_SELECTORS,b.keyCode)>-1){a.mbItemSelected=true;a.moAutoComp.focus();a.moAutoComp.autocomplete("close")}if(a.mbItemSelected==false&&a.moOptions.bForceSelection==true){a.moFieldValue.val("")}if(Utils.Trim(a.moAutoComp.val())==""){a.moFieldValue.val("")}if(a.mbAutoCompMultiEntry==true){a.moAutoCompMultiEntry._SpecificOnKeyUp(b)}if(a.mbComplexAutoComp==true){a.moComplexAutoComp.reset()}})},_CleanText:function(a){a=a.replace(new RegExp("<b>","g"),"##B##");a=a.replace(new RegExp("</b>","g"),"##BE##");a=a.replace("<","&lt;");a=a.replace(">","&gt;");a=a.replace(new RegExp("##B##","g"),"<b>");a=a.replace(new RegExp("##BE##","g"),"</b>");return a},_CleanBodyTextForInput:function(a){a=a.replace(/<(?:.|\n)*?>/gm,"");a=a.replace("&lt;","<");a=a.replace("&gt;",">");a=a.replace("&amp;","&");return a},_RefreshPositionOfWidget:function(){this.moAutoComp.autocomplete("widget").css({top:"0px",left:"0px"})},_ShowLoader:function(){if(this.moOptions.bHideLoaderImage==true){this.moLoader.hide()}else{this.moLoader.show()}},_HideLoader:function(){this.moLoader.hide()},_CreateLoader:function(){this.moLoader=$('<div class="'+AutoCompletionProperties.Const.LOADER_CLASS+'"><div class="'+AutoCompletionProperties.Const.LOADER_IMAGE_CLASS+'"></div></div>');this.moAutoComp.parent().append(this.moLoader)},_SelectDefaultValueStaticSource:function(){var a=this;if(this.mbIsStaticSource==true){var b=this.moFieldValue.val();if(b!=""){$.each(this.moStaticSource,function(g,f){g=Utils.htmlDecode(g);if(g==b){a.moAutoComp.val(a._CleanBodyTextForInput(f));a.msDefaultItemLabel=a._CleanBodyTextForInput(f);return}})}}var d="";var c="";if(this.mbIsStaticSource==true&&!this.moOptions.bStaticSourceEmpty){if(this.moStaticSourceKeys&&this.moStaticSourceKeys.length>0){d=this.moStaticSourceKeys[0];c=this._CleanBodyTextForInput(this.moStaticSource[d])}if(this.moOptions.bPreSelectFirstValue==true&&this.moFieldValue.val()==""){this.moAutoComp.val(c);$E(this.moOptions.sIDFieldValue).val(d)}}},_SetEventSelectIfOneResult:function(a){if(a.length>1&&!this._CheckEvent("select")&&this.moOptions.bForceSelection){var f=a[0].bodyText;var b=a[0].bodyContent;var g=a[0].bodyValue;var c=a[1].bodyText;var d=a[1].bodyValue;if(Utils.Trim(f).toUpperCase()==Utils.Trim(this.moAutoComp.val()).toUpperCase()&&this._IsSelectableValue(a[0])&&g&&this._IsSelectableValue(a[1])==false){this.mbItemSelected=true;this._ItemSelectEventFire(a[0])}}},_GetQueryFileAndQueryFilterFile:function(){if(this.mbComplexAutoComp==true){return this.moComplexAutoComp.GetQueryFileAndQueryFilterFile()}return{sQueryFile:this.moOptions.sQueryFile,sQueryFilterFile:this.moOptions.sQueryFilterFile}},_GetQueryAppend:function(){var i=null;var b=this._GetQueryFileAndQueryFilterFile();var d=b.sQueryFile;var c=b.sQueryFilterFile;var a=this.moOptions.iMaxResults;var j=this.moOptions.sQueryTextboxFields;var f=this.moOptions.sQueryAdditionals;var h=this.moOptions.sQueryViewState;var g="";if(this.moOptions.sQueryProperties){g=JSON.stringify(this.moOptions.sQueryProperties)}var k="0";if(this.mbUseChildQuery===true){k="1"}i=AutoCompletionProperties.Const.FILTERFILE+"="+c+"&"+AutoCompletionProperties.Const.QUERYFILE+"="+d+"&"+AutoCompletionProperties.Const.TEXTBOXFIELDS+"="+j+"&"+AutoCompletionProperties.Const.ADDITIONALS+"="+f+"&"+AutoCompletionProperties.Const.MAXRESULTS+"="+a+"&"+AutoCompletionProperties.Const.VIEWSTATE+"="+h+"&"+AutoCompletionProperties.Const.PROPERTIES+"="+g+"&"+AutoCompletionProperties.Const.FLASH_MODE+"=1&"+AutoCompletionProperties.Const.USE_CHILD_QUERY+"="+k;if(this.moOptions.sQuerySearchField!=null){i+="&"+AutoCompletionProperties.Const.QUERYSEARCH+"="+this.moOptions.sQuerySearchField}return i},_GetResultObjectFromQueryResponse:function(a,b){var d=this;this.mbHasDebugQuery=false;var c=$.map(a.R,function(h){var g=true;var i=null;if(typeof h!="undefined"&&h.T==AutoCompletionProperties.Const.JSON_QUERY){if(Utils.IsIE()==false){d.mbHasDebugQuery=true;Matrix3.RefreshDebugLogVForm()}return}if(d.mbAutoCompMultiEntry==true){g=d.moAutoCompMultiEntry._CheckValidItem(h)}if(g==true){if(typeof h.A=="string"){i=h.A}var f=false;if(typeof h.SC!="undefined"){f=Utils.ParseBool(h.SC)}return{label:h.T,bodyText:h.T,bodyContent:h.C,bodyValue:h.V,tag:i,displayShowChildren:f}}});c=this._AddSuggestEmptyValueToTheList(c);c=this._AddSuggestAllowCreationToTheList(c);return this._CleanResultResponse(c)},_GetResultObjectFromStaticSource:function(b){var a=this.moStaticSource;if(typeof a=="object"&&a!=null&&this.moStaticSourceKeys){var p=this;var l=[];var m=[];var o=[];var n=[];var c=Utils.Trim(b)=="";if(this.moOptions.bStaticSourceEmpty==true){l[0]={label:"",bodyText:"",bodyContent:[""],bodyValue:"",tag:null};this.mbFirstLineIsAnEmptyLine=true}for(var d=0,f=this.moStaticSourceKeys.length;d<f;d++){var h=new RegExp("^"+p._RegexEscape(Utils.Trim(b))+"$","gi");var k=new RegExp("^"+p._RegexEscape(Utils.Trim(b))+"","gi");var j=new RegExp(p._RegexEscape(Utils.Trim(b)),"gi");var r=this.moStaticSourceKeys[d];var u=a[r];var v=this._CleanBodyTextForInput(u);var q=null;if(this.moStaticSourceIcons&&this.moStaticSourceIcons[r]){q=this.moStaticSourceIcons[r]}if(j.test(v)){var w=u;if(!this.moOptions.bEnableHTML){p._InjectBoldTags(u,b)}var g={label:u,bodyText:u,bodyContent:[w],bodyValue:r,iconUrl:q,tag:null};if(c===false&&p.moOptions.bSmartSearchOrder===true){if(h.test(u)){m.push(g)}else{if(k.test(u)){o.push(g)}else{n.push(g)}}}else{n.push(g)}}}function t(i,x){if(i.label>x.label){return 1}else{return -1}}if(c==false&&p.moOptions.bSmartSearchOrder===true){m.sort(t);o.sort(t);n.sort(t);l=m.concat(o).concat(n)}else{l=l.concat(n)}return this._CleanResultResponse(l)}return{}},_CleanResultResponse:function(a){var b=this._GetNbRealItems(a);if(b<=0||(b==1&&this.mbFirstLineIsAnEmptyLine)){this.mbLastSearchNoResult=true;if(typeof this.moOptions.sNoItemMessage=="string"){return[{label:"No item",bodyText:AutoCompletionProperties.Const.EMPTY_LIST_TEXT,bodyContent:["No item"],bodyValue:AutoCompletionProperties.Const.EMPTY_LIST_TEXT,tag:null}]}this._HideLoader();return{}}return a},_AddSuggestEmptyValueToTheList:function(a){if(this.moOptions.bSuggestEmpty==true&&this.moOptions.bDropDown==true){if(Utils.Trim(a[0].bodyText)!=""&&a[0].bodyValue!=AutoCompletionProperties.Const.EMPTY_VALUE){var d=a[0].bodyContent.length;var b=new Array();for(var c=0;c<d;c++){b[c]=""}if(this.moOptions.sEmptyRowText!=null&&this.moOptions.sEmptyRowText!=""){b[0]=this.moOptions.sEmptyRowText}var f=new Object();f.label="";f.bodyText="";f.bodyContent=b;f.bodyValue="[EMPTY]";a.unshift(f);this.mbFirstLineIsAnEmptyLine=true}}return a},_AddSuggestAllowCreationToTheList:function(a){var k=this.moAutoComp.val();if(this.moOptions.bAllowCreation&&k!=null&&Utils.Trim(k)!=""){var m=Utils.Trim(k.toLowerCase());var d=false;for(var f=0,h=a.length;f<h;f++){oEntry=a[f];if(typeof oEntry.label!="undefined"&&Utils.Trim(oEntry.label.toLowerCase())==m){d=true;break}}if(!d){var g=a[(a.length-1)].bodyContent.length;var c=new Array();var l=$PI(this.msID).GetProperty(AutoCompletionProperties.Const.PROPERTY_AC_CREATION_LINE_TEMPLATE);var b=new Array();for(var f=0;f<g;f++){b[f]=""}b[0]=l.replace(AutoCompletionProperties.Const.CREATE_ENTRY_TAG_TEXT,k);var j=new Object();j.bodyText=k;j.label=k;j.bodyContent=b;j.bodyValue=AutoCompletionProperties.Const.CREATE_ENTRY_RESERVED_VALUE;a.unshift(j)}}return a},_InjectBoldTags:function(b,a){var d=a.split(" ");for(var c in d){var h=Utils.Trim(d[c]);if(h!=""){var g=this._RegexEscape(h);var f=new RegExp("("+g+")","gi");b=b.replace(f,"<b>$1</b>")}}return b},_RegexEscape:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},_GetNbRealItems:function(a){if(typeof a!="object"){return 0}var d=a.length;var c=d;for(var b=(d-1);b>=0;b--){if(this._IsSelectableValue(a[b])==false){c--}else{break}}return c},_IsSelectableValue:function(a){var b=a.bodyText;var c=a.bodyValue;return(typeof b!="undefined"&&typeof c!="undefined"&&c!=null&&b!=null&&b!=AutoCompletionProperties.Const.JSON_HEADER&&b!=AutoCompletionProperties.Const.JSON_COL_NAME&&b!=AutoCompletionProperties.Const.JSON_COL_WIDTH&&b!=AutoCompletionProperties.Const.JSON_SPECIFIC_CLASS&&b!=AutoCompletionProperties.Const.JSON_MAXCOUNT&&b!=AutoCompletionProperties.Const.JSON_QUERY&&b!=AutoCompletionProperties.Const.JSON_SHOW_CHILDREN&&b!=AutoCompletionProperties.Const.EMPTY_LIST_TEXT)},_ApplyAutoFocusFirstElement:function(a){var b=false;if(typeof a!="undefined"&&typeof a.bodyText!="undefined"&&this._IsSelectableValue(a)){b=true}if(b&&this.moOptions.bAutoFocus){this.moAutoComp.autocomplete("option","autoFocus",true)}else{this.moAutoComp.autocomplete("option","autoFocus",false)}},_DisableQueryDelay:function(){this.moAutoComp.autocomplete("option","delay",0)},_EnableQueryDelay:function(){this.moAutoComp.autocomplete("option","delay",this.moOptions.iQueryDelay)},_ResetSourceResponseCache:function(){this.oCache={}},_SetSourceResponse:function(f,g){var d=this;var k=f.term;if(this.mbAutoCompMultiEntry==true){k=this.moAutoCompMultiEntry._GetLastTerm(k);if(k==""){this._HideLoader();return false}}if(k.length<this.moOptions.iMinLength){this._HideLoader();return}if(this.mbAutoCompTextarea==true){k=k.replace(" ","%")}var i=new RegExp(" ","gi");k=k.replace(i,"**SPACE**");k=encodeURIComponent(k);i=new RegExp("\\*\\*SPACE\\*\\*","gi");k=k.replace(i," ");this.msLastSearch=k;if(k in this.moCache&&typeof this.moCache[k]!="undefined"){var b=this.moCache[k];if(this.mbAutoCompMultiEntry==true){b=this.moAutoCompMultiEntry._RemoveValuesAlreadyEntered(b)}this._SetEventSelectIfOneResult(b);if(b&&b[0]){this._ApplyAutoFocusFirstElement(b[0])}this._HideLoader();g(b);return}else{if(this.mbIsStaticSource===false){var a=this._GetQueryFileAndQueryFilterFile();var j=a.sQueryFile;var h=a.sQueryFilterFile;if(typeof j!="string"||typeof h!="string"){return false}else{if(j==""||h==""){return false}}var j=AutoCompletionProperties.Const.QUERYVALUE+"="+k+"&"+this._GetQueryAppend();d.oLastXhr=$.ajax({type:"POST",dataType:"json",timeout:d.moOptions.iQueryTimeout,url:AutoCompletionProperties.Const.URL,data:j,error:function(m,n,l){d._HideLoader();d.moAutoComp.autocomplete("close")},success:function(l,n,o){var m=d._GetResultObjectFromQueryResponse(l,k);if(o===d.oLastXhr){d._SetEventSelectIfOneResult(m);if(m&&m[0]){d._ApplyAutoFocusFirstElement(m[0])}g(m)}},complete:function(){}});return}else{var c=this._GetResultObjectFromStaticSource(k);this.moCache[k]=c;d._HideLoader();g(c);return}}},_ItemSelectEventFire:function(_oItem){var sItemValue=_oItem.bodyValue;var sItemText=this._CleanBodyTextForInput(_oItem.bodyText);if(this.mbAutoCompMultiEntry==true){sItemValue=this.moAutoCompMultiEntry._SpecificItemSelectEventFire(_oItem)}else{this.moAutoComp.val(sItemText)}if(_oItem.iconUrl){this.moAutoComp.css("background-image","url("+_oItem.iconUrl+")");this.moAutoComp.parent().parent().addClass("IC")}else{this.moAutoComp.css("background-image","");this.moAutoComp.parent().parent().removeClass("IC")}if(this.GetFieldValueID()!=this.msID){if(typeof this.moFieldValue=="object"&&this.moFieldValue.length>=1){if(this.moOptions.bForceSelection==true&&this.mbItemSelected==false){this.moAutoComp.val("");this.moFieldValue.val("")}else{if(this.mbIsStaticSource==true){sItemValue=Utils.htmlDecode(sItemValue)}this.moFieldValue.val(sItemValue)}}}this.moMatrixCtrl=ControlMgr.GetInstance().GetControl(this.msID,AutoCompletionCtrl.Const.CONTROL_NAME);if(this.moMatrixCtrl.Event_Change){this.moMatrixCtrl.Event_Change.Fire()}if(this._CheckEvent("select")==true&&!(this.moOptions.bForceSelection&&!this.mbItemSelected)&&this.mbAutoCompMultiEntry==false){if(this.moOptions.sEventTrackingCode&&this.moOptions.sEventTrackingCode!=""){eval(this.msEventSelectTrackingCode)}if(this.moOptions.sPageTrackingCode&&this.moOptions.sPageTrackingCode!=""){eval(this.msPageTrackingCode)}Matrix3.AddEvent(this.moEvents.select.vform_id,this.moEvents.select.name,this.moEvents.select.type,this.moEvents.select.delay,this.moEvents.select.args,this.moEvents.select.comm,this.moEvents.select.commargs)}},_CheckEvent:function(a){if(typeof a=="string"&&this.moEvents&&this.moEvents[a]){if(this.moEvents[a].vform_id&&this.moEvents[a].name&&this.moEvents[a].type&&this.moEvents[a].delay){return true}}return false},Action_SetValue:function(a){this.moFieldValue.val(a);this._SelectDefaultValueStaticSource()},Reset:function(){this.moFieldValue=this.msOriginalItemValue;this.moAutocomp=this.msOriginalItemLabel}};function AutoCompMultiEntry(a){this.moAutoComp=a;this.moOptions=this.moAutoComp.moOptions;this.moMultiEntrySeparatorsToConvert=new Array;this._Init()}AutoCompMultiEntry.prototype={_Init:function(){if(this.moOptions.sMultiEntrySeparator.length==0){this.moOptions.sMultiEntrySeparator=","}else{var a=this.moOptions.sMultiEntrySeparator.split(" OR ");if(a.length>1){this.moMultiEntrySeparatorsToConvert=a.slice(1,a.length)}this.moOptions.sMultiEntrySeparator=a[0]+" "}this.moOptions.bAutoFocus=true},_SpecificOnClick:function(a){this.moAutoComp._ResetSourceResponseCache()},_SpecificOnKeyUp:function(a){if(a.keyCode==8){this.moAutoComp._ResetSourceResponseCache()}},_SplitTerms:function(_sValue){_sValue=Utils.Trim(_sValue);var oParts=eval("_sValue.split(/["+Utils.Trim(this.moOptions.sMultiEntrySeparator)+this.moMultiEntrySeparatorsToConvert.join("")+"]+/)");return oParts},_GetLastTerm:function(a){if(this.moOptions.sMultiEntrySeparator.length>0){var b=this._SplitTerms(a);return Utils.Trim(b.pop())}else{return Utils.Trim(a)}},_CheckValidItem:function(a){if(this.moOptions.bAllowMultiEntry==true&&this.moOptions.bAllowMultiEntryDuplicate==false&&this._IsValueAlreadyIncluded(a.V)==true){return false}return true},_IsValueAlreadyIncluded:function(a){var b=false;var c=new RegExp(this.moAutoComp._RegexEscape(a),"g");if(this.moAutoComp.moFieldValue.val().match(c)){b=true}return b},_RemoveValuesAlreadyEntered:function(a){for(var b=a.length-1;b>=0;b--){if(this._IsValueAlreadyIncluded(a[b].bodyValue)==true){a.splice(b,1)}}return a},_SpecificItemSelectEventFire:function(a){var d=a.bodyValue;var c=this.moAutoComp._CleanBodyTextForInput(a.bodyText);var g=this._SplitTerms(this.moAutoComp.moAutoComp.val());g.pop();var f=g.join(this.moOptions.sMultiEntrySeparator);if(Utils.Trim(f)!=""){this.moAutoComp.moAutoComp.val(f+this.moOptions.sMultiEntrySeparator+c+this.moOptions.sMultiEntrySeparator)}else{this.moAutoComp.moAutoComp.val(c+this.moOptions.sMultiEntrySeparator)}var b=this.moAutoComp.moFieldValue.val();var g=this._SplitTerms(b);g.pop();b=g.join(this.moOptions.sMultiEntrySeparator);if(Utils.Trim(b)!=""){sFieldValue=b+this.moOptions.sMultiEntrySeparator+d}return sFieldValue}};function AutoCompTextarea(a){this.moAutoComp=a;this.moOptions=this.moAutoComp.moOptions;this.miLineWidth=0;this.miCharWidth=0;this.miMinHeight=20;this.miMaxRows=8;this.miCurrentRows=1;this._Init()}AutoCompTextarea.prototype={_Init:function(){if(typeof this.moOptions.iMaxHeightTextarea=="number"){this.moOptions.iMaxHeightTextarea=parseInt(this.moOptions.iMaxHeightTextarea);if(this.moOptions.iMaxHeightTextarea<10){this.moOptions.iMaxHeightTextarea=null}}else{this.moOptions.iMaxHeightTextarea=null}if(this.moOptions.iQueryDelay<=300){this.moAutoComp.moOptions.iQueryDelay=500}this.miLineWidth=this.moAutoComp.moAutoComp.width();this.miCharWidth=parseInt(this.moAutoComp.moAutoComp.css("font-size"));if(this.moOptions.bEnlargeTextarea==true&&typeof this.miCharWidth=="number"&&this.miCharWidth>5){this.moAutoComp.moAutoComp.css("height","auto");this.moAutoComp.moAutoComp.attr("rows",1);this.miMinHeight=this.moAutoComp.moAutoComp.outerHeight();this.miCurrentRows=1;if(this.moOptions.iMaxHeightTextarea!=null){this.miMaxRows=Math.ceil(this.moOptions.iMaxHeightTextarea/this.miMinHeight)}this._BindOnKeyUpEvent();this._CalculateSize()}},_BindScrollEvent:function(){var a=this;this.moAutoComp.moAutoComp.scroll(function(){a._CalculateSize()})},_BindOnKeyUpEvent:function(){var a=this;this.moAutoComp.moAutoComp.keyup(function(){if(a.miCurrentRows!=a._CalculateNbRows()&&a.miCurrentRows<a.miMaxRows){a._CalculateSize()}})},_CalculateNbRows:function(){var a=this.moAutoComp.moAutoComp.val().length;var b=Math.ceil((a*this.miCharWidth)/(this.miLineWidth));if(b<=0){b=1}return b},_ScrollToBottom:function(){var a=this.moAutoComp.moAutoComp.getSelection().getRangeAt(0).startOffset;if(a>=this.moAutoComp.moAutoComp.val().length-3){this.moAutoComp.moAutoComp.scrollTop(this.moAutoComp.moAutoComp.outerHeight())}},_CalculateSize:function(){var a=this._CalculateNbRows();if(a>this.miMaxRows){this.moAutoComp.moAutoComp.attr("rows",this.miMaxRows);this.miCurrentRows=this.miMaxRows}else{this.moAutoComp.moAutoComp.attr("rows",a);this.miCurrentRows=a}PositionMgr.GetInstance().AddToDirtyYList($PI(this.moAutoComp.msID));PositionMgr.GetInstance().CalculatePosition()}};function ComplexAutoCompProperties(a){this.moAutoComp=a;this.msLastSearch="";this.masSearchLevel=[];this.masColWidth;this.miScrollBarWidth=AutoCompletionProperties.Const.SCROLLBAR_WIDTH;this.miDefaultColumnWidth=AutoCompletionProperties.Const.DEFAULT_COLUMN_WIDTH;this.miTotalWidth;this.msVFormID;this.msOptionEventName;this.msOptionEventType;this.msOptionEventDelay;this.msOptionEventArgs}ComplexAutoCompProperties.prototype.SpecificRenderMenu=function(u,a){var n=this;var q="";if(this.moAutoComp.mbUseChildQuery==true){q='<div class="Col" style="width:'+ComplexAutoCompProperties.Const.WIDTH_PREVIOUS_NEXT_BUTTON+'px;"></div>'}var p="";var h=a.length-1;var d=true;for(var g=h;g>=0;g--){if(d==false){break}switch(a[g].bodyText){case AutoCompletionProperties.Const.JSON_MAXCOUNT:case AutoCompletionProperties.Const.JSON_SPECIFIC_CLASS:break;case AutoCompletionProperties.Const.JSON_COL_WIDTH:this.masColWidth=a[g].bodyContent;var k=0;if(this.masColWidth.length>1){for(var l=0;l<this.masColWidth.length;l++){if(parseInt(this.masColWidth[l])){k+=parseInt(this.masColWidth[l])}else{k+=this.miDefaultColumnWidth}}k+=this.miScrollBarWidth;this.moAutoComp.miContainerWidthTotal=k}break;case AutoCompletionProperties.Const.JSON_HEADER:var b=a[g].bodyContent;if(b.length>1){for(var l=0,m=b.length;l<m;l++){var r=b[l];if(typeof r=="undefined"||r==null||Utils.Trim(r)==""){break}var o=this.miDefaultColumnWidth;if(this.masColWidth){o=this.masColWidth[l]}q+='<div class="Col c'+l+'" style="width:'+o+'px;">'+r+"</div>"}}break;case AutoCompletionProperties.Const.JSON_COL_NAME:var c=a[g].bodyContent;this.moAutoComp.moColumnName=new Array();if(c.length>1){for(var l=0,m=c.length;l<m;l++){if(c[l]!=null){this.moAutoComp.moColumnName.push(c[l])}}}break;default:bContinune=false;break}}if(this.moAutoComp.moOptions.sOption&&this.moAutoComp.moOptions.sOption!=null&&this.moAutoComp._CheckEvent("option")){var t="";var f=this.moAutoComp.moEvents.option;if(this.moAutoComp.moOptions.sEventTrackingCode!=""&&this.moAutoComp.moOptions.sPageTrackingCode!=""){t+=this.moAutoComp.moOptions.sEventTrackingCode.replace('"',"'")+this.moAutoComp.moOptions.sPageTrackingCode.replace('"',"'")}t+="Matrix3.AddEvent('"+f.vform_id+"', '"+f.name+"', '"+f.type+"', '"+f.delay+"', '"+f.args+"');";p+='<div><a href="javascript:Matrix3.mbClick=false;void(0);" onclick="'+t+'">'+this.moAutoComp.moOptions.sOption+"</a></div>"}if(this.moAutoComp.mbUseChildQuery==true){q+='<div class="Col" style="width:'+ComplexAutoCompProperties.Const.WIDTH_PREVIOUS_NEXT_BUTTON+'px;"></div>';this.moAutoComp.miContainerWidthTotal+=ComplexAutoCompProperties.Const.WIDTH_PREVIOUS_NEXT_BUTTON*2}return{ul:u,aoResults:a,sHeader:q,sFooter:p}};ComplexAutoCompProperties.prototype.SpecificRenderItem=function(q,a){var g=this;var m="";var b=a.bodyContent;var o=a.bodyValue;var p=this.moAutoComp.msID.split(Matrix3.Const.SEPARATOR_CONTROL)[0];var f=new Array();if(this.moAutoComp.mbUseChildQuery==true){m+='<div class="ColClass" style="width:'+ComplexAutoCompProperties.Const.WIDTH_PREVIOUS_NEXT_BUTTON+'px">';if(this.moAutoComp.moOptions.sChildQueryFile!=""&&this.masSearchLevel.length>0){var l="AutoCompletionMgr.Get('"+this.moAutoComp.msID+"').moComplexAutoComp.PreviousSearch();Utils.StopPropagation(event);";m+='<span class="ACPreviousSearchBtn" href="javascript:void(0);" onclick="'+l+'" title="Back to previous results" class="AutoCompGoOutSideClass" onclick="'+l+'"></span>'}m+="</div>"}for(var c=0,d=b.length;c<d;c++){var j=this.moAutoComp.msID+this.moAutoComp.miLineCounter;var n=b[c];if(Utils.Trim(n)==""){n="&nbsp;"}m+='<div class="c'+c+' ColClass" ';if(b.length>1){var h=this.miDefaultColumnWidth;if(this.masColWidth){h=this.masColWidth[c]}m+='style="width: '+h+'px;">'}m+='<div class="t" style="word-wrap: break-word;">'+this.moAutoComp._CleanText(n)+"</div>";m+="</div>"}if(this.moAutoComp.mbUseChildQuery==true){m+='<div class="ColClass" style="width:'+ComplexAutoCompProperties.Const.WIDTH_PREVIOUS_NEXT_BUTTON+'px">';if(a.displayShowChildren==true){var k="AutoCompletionMgr.Get('"+this.moAutoComp.msID+"').moComplexAutoComp.NextSearch('"+o+"');Utils.StopPropagation(event);";m+='<span class="ACNextSearchBtn" href="javascript:void(0);" onclick="'+k+'" title="Show children" class="AutoCompGoInsideClass" onclick="'+k+'"></span>'}m+="</div>"}return m};ComplexAutoCompProperties.prototype.GetQueryFileAndQueryFilterFile=function(){if(this.masSearchLevel.length>0){return{sQueryFile:this.moAutoComp.moOptions.sChildQueryFile,sQueryFilterFile:this.moAutoComp.moOptions.sChildQueryFilterFile}}else{return{sQueryFile:this.moAutoComp.moOptions.sQueryFile,sQueryFilterFile:this.moAutoComp.moOptions.sQueryFilterFile}}};ComplexAutoCompProperties.prototype.NextSearch=function(a){var b=this.msLastSearch;if(!b){var b=$E(this.moAutoComp.msID).val();if(!b){b="%%"}}this.masSearchLevel.push(b);this.msLastSearch=a;$E(this.moAutoComp.msID).autocomplete("search",a)};ComplexAutoCompProperties.prototype.PreviousSearch=function(){var a=this.masSearchLevel.pop();this.msLastSearch=a;$E(this.moAutoComp.msID).autocomplete("search",a)};ComplexAutoCompProperties.prototype.reset=function(){this.msLastSearch="";this.masSearchLevel=[]};ComplexAutoCompProperties.Const={WIDTH_PREVIOUS_NEXT_BUTTON:"20"};function AutoScaleProperties(){}AutoScaleProperties.Const={PROPERTY_POLICY:"AutoScalePolicy",PROPERTY_H_ALIGN:"AutoScaleHorizontalAlign",PROPERTY_V_ALIGN:"AutoScaleVerticalAlign",VALUE_CENTER:"center",VALUE_LEFT:"left",VALUE_RIGHT:"right",VALUE_TOP:"top",VALUE_BOTTOM:"bottom",VALUE_STRETCH:"stretch",VALUE_FILL:"fill",VALUE_FIT:"fit",VALUE_FIT_WIDTH:"fitwidth",VALUE_FIT_HEIGHT:"fitheight",VALUE_NONE:"none"};AutoScaleProperties.Apply=function(a){if(a.moLinkedImage){var h;var g;if(Utils.GetNaturalWidth(a.moLinkedImage)){h=Utils.GetNaturalWidth(a.moLinkedImage);g=Utils.GetNaturalHeight(a.moLinkedImage)}else{h=a.GetProperty("DocumentWidth");g=a.GetProperty("DocumentHeight")}if(h>0&&g>0){var f=a.GetWidth();var d=a.GetHeight();if(a.GetOriginalWidth()==-1){f=Infinity}if(a.GetOriginalHeight()==-1){d=Infinity}var b=1;switch(a.GetProperty(AutoScaleProperties.Const.PROPERTY_POLICY)){case AutoScaleProperties.Const.VALUE_FILL:b=Math.max(d/g,f/h);break;case AutoScaleProperties.Const.VALUE_FIT:b=Math.min(d/g,f/h);break;case AutoScaleProperties.Const.VALUE_FIT_WIDTH:b=f/h;break;case AutoScaleProperties.Const.VALUE_FIT_HEIGHT:b=d/g;break;default:b=1;break}if(a.GetOriginalWidth()==-1){f=Math.round(h*b);PositionMgr.GetInstance().AddToDirtyXList(a)}if(a.GetOriginalHeight()==-1){d=Math.round(g*b);PositionMgr.GetInstance().AddToDirtyYList(a)}if(a.GetProperty(AutoScaleProperties.Const.PROPERTY_POLICY)==AutoScaleProperties.Const.VALUE_STRETCH){h=f;g=d}else{h=Math.round(h*b);g=Math.round(g*b)}if(!a.moLinkedImage.mdCurrentScale||b!=a.moLinkedImage.mdCurrentScale||a.GetProperty(AutoScaleProperties.Const.PROPERTY_POLICY)==AutoScaleProperties.Const.VALUE_STRETCH){DOMChangesQueue.GetInstance().QueueSetCss(a.moLinkedImage,"width",h+"px");DOMChangesQueue.GetInstance().QueueSetCss(a.moLinkedImage,"height",g+"px")}var i=0;var j=0;var k=a.GetProperty(AutoScaleProperties.Const.PROPERTY_V_ALIGN);if(k==AutoScaleProperties.Const.VALUE_CENTER){j=Math.floor((d-g)/2)}else{if(k==AutoScaleProperties.Const.VALUE_BOTTOM){j=d-g}}var c=a.GetProperty(AutoScaleProperties.Const.PROPERTY_H_ALIGN);if(c==AutoScaleProperties.Const.VALUE_CENTER){i=Math.floor((f-h)/2)}else{if(c==AutoScaleProperties.Const.VALUE_RIGHT){i=f-h}}if($(a.moLinkedImage).css("left")!=i||$(a.moLinkedImage).css("top")!=j){DOMChangesQueue.GetInstance().QueueSetCss(a.moLinkedImage,"left",i+"px");DOMChangesQueue.GetInstance().QueueSetCss(a.moLinkedImage,"top",j+"px");DOMChangesQueue.GetInstance().QueueSetCss(a.moLinkedImage,"visibility","")}a.moLinkedImage.mdCurrentScale=b}}};function AutoScroll(b,a){this.msID=b;this.mdOffset=0;this.mdSpeed=a;if(Utils.IsIE8()==false){var d=$Elt(b);var c=d.GetContainerForChildren();if(c&&c.length>0){this.moTarget=c[0];this.mdLastTime=new Date().getTime();var f=this;this.miTimer=setInterval(function(){var g=new Date().getTime();f.mdOffset-=(g-f.mdLastTime)*f.mdSpeed/1000;f.mdLastTime=g;f.moTarget.style.webkitTransform="translate("+Math.round(f.mdOffset)+"px, 0)";f.moTarget.style.MozTransform="translate("+Math.round(f.mdOffset)+"px, 0)"},20)}}}AutoScroll.prototype={Refresh:function(){if(this.moTarget&&this.moTarget.style){this.moTarget.style.webkitTransform="translate("+Math.round(this.mdOffset)+"px, 0)";this.moTarget.style.MozTransform="translate("+Math.round(this.mdOffset)+"px, 0)"}}};AutoScroll.moTable=new Object();AutoScroll.Activate=function(b,a){AutoScroll.moTable[b]=new AutoScroll(b,a)};AutoScroll.IsActive=function(a){return AutoScroll.moTable.hasOwnProperty(a)};AutoScroll.SetOffset=function(b,a){if(AutoScroll.moTable.hasOwnProperty(b)){AutoScroll.moTable[b].mdOffset=a}};AutoScroll.GetAutoscrollProps=function(a){var b=null;if(AutoScroll.moTable.hasOwnProperty(a)){b=AutoScroll.moTable[a]}return b};AutoScroll.RefreshNode=function(a){if(AutoScroll.moTable.hasOwnProperty(a)){oResult=AutoScroll.moTable[a];clearInterval(oResult.miTimer);delete AutoScroll.moTable[a]}};function ClassProperties(){}ClassProperties.prototype={Action_AddClass:function(a){var c=$PI(this.msID).GetNode();$AddClass(c,a);var b=document.createTextNode(" ");c.appendChild(b);setTimeout(function(){c.removeChild(b)},0)},Action_RemoveClass:function(a){var c=$PI(this.msID).GetNode();$RemoveClass(c,a);var b=document.createTextNode(" ");c.appendChild(b);setTimeout(function(){c.removeChild(b)},0)}};function ClearCacheProperties(){}ClearCacheProperties.prototype={Action_ClearCache:function(){PreloadMgr.GetInstance().ResetCache()}};function ClipboardProperties(){}ClipboardProperties.Const={ID_CLIPBOARD:"Clipboard",COMMAND_APPEND:"append"};ClipboardProperties.msCache="";ClipboardProperties.prototype={Action_CopyValueToClipboard:function(a){var c="";if(a&&Utils.Trim(a)!=""){c=a}else{if(this.msControlID&&$Elt(this.msControlID).value!=null&&$Elt(this.msControlID).value!=""){c=$Elt(this.msControlID).value}else{try{c=$Control(this.msID,LabelCtrl.Const.CONTROL_NAME).GetValue()}catch(b){}}}ClipboardProperties.msCache=c;if(this.Event_ValueCopiedInClipboard){this.Event_ValueCopiedInClipboard.Fire()}},Event_ValueCopiedInClipboard_Setup:function(){this.Event_ValueCopiedInClipboard=new CtrlEvent(this)},Event_ValueExtractedFromClipboard_Setup:function(){this.Event_ValueExtractedFromClipboard=new CtrlEvent(this)},Action_GetValueFromClipboard:function(a){sValueTemp=ClipboardProperties.msCache;if(this.msControlID&&$Elt(this.msControlID)){if(a==ClipboardProperties.Const.COMMAND_APPEND){var c=($Elt(this.msControlID).value!="")?"\n":"";sValueTemp=$Elt(this.msControlID).value+c+sValueTemp}$Elt(this.msControlID).value=sValueTemp}else{try{if(a==ClipboardProperties.Const.COMMAND_APPEND){var c=($Control(this.msID,LabelCtrl.Const.CONTROL_NAME).GetValue()!="")?"\n":"";sValueTemp=$Control(this.msID,LabelCtrl.Const.CONTROL_NAME).GetValue()+c+sValueTemp}$Control(this.msID,LabelCtrl.Const.CONTROL_NAME).SetValue(sValueTemp)}catch(b){}}if(this.Event_ValueExtractedFromClipboard){this.Event_ValueExtractedFromClipboard.Fire()}}};function CommandProperties(){}CommandProperties.Const={COMMAND_TRIGGER_LIST:"TriggerList",CLASS_HIGHLIGHT:"HighlightC"};CommandProperties.prototype={ActiveCommand:function(a){switch(a){case CommandProperties.Const.COMMAND_TRIGGER_LIST:this.ActiveTriggerList();break}},ActiveTriggerList:function(){var f='<table style="width: 100%;"><tr style="width:100%; font-weight: bold;"><td style="width:20%;">Source VForm</td><td style="width:20%;">Source Event</td><td style="width:20%;">Target VForm</td><td style="width:20%;">Target Event</td><td style="width:20%;">Trigger Type</td></tr>';var d=Matrix3.GetTriggerTable();if(d instanceof TriggerTable){var a=d.GetTriggerList();for(var b=0,c=a.length;b<c;b++){f+='<tr style="border-top: solid 1px gray;">';f+='<td style="padding: 5px;"><a href="javascript:$SwitchClass(\''+a[b].GetSourceVForm()+"', '"+CommandProperties.Const.CLASS_HIGHLIGHT+"');\" >"+a[b].GetSourceVForm()+"</a></td>";f+='<td style="padding: 5px;">'+a[b].GetSourceEvent()+"</td>";f+='<td style="padding: 5px;"><a href="javascript:$SwitchClass(\''+a[b].GetTargetVForm()+"', '"+CommandProperties.Const.CLASS_HIGHLIGHT+"');\">"+a[b].GetTargetVForm()+"</a></td>";f+='<td style="padding: 5px;">'+a[b].GetTargetEvent()+"</td>";f+='<td style="padding: 5px;">'+a[b].GetTargetType()+"</td>";f+="</tr>"}}f+="</table>";this.SetValue(f,true)},Action_ExecuteScript:function(_sArgs){eval(_sArgs)}};M5ContextMenuHander=function(a,c){var b=c.items[a];var d=c.$trigger[0].id;if(b.e){Matrix3.AddEvent(d,b.e,Matrix3.Const.RETURNTYPE_FULL,Matrix3.Const.DELAY_IMMEDIAT,b.ea)}if(b.pbe){Matrix3.DoPostBack(d,b.pbe,b.pbea)}if(b.h){HyperlinkProperties.OpenLinkWithTarget(b.h,b.t,$PI(d))}};function CustomScrollbarProperties(){}CustomScrollbarProperties.prototype={ActiveCustomScrollbar:function(a){this.msCustomScrollbarWaitMsg=a;Utils.AddEvent(this.msID,"scroll",this.ScrollEvent,this)},ScrollEvent:function(b,a){window.clearTimeout(this.moScrollEventTimeout);if(a){if(this.msCustomScrollbarWaitMsg&&this.msCustomScrollbarWaitMsg!=""){Matrix3.ShowWaitMsg(this.msCustomScrollbarWaitMsg)}window.setTimeout(function(){DragDropMgr.RefreshCache();Matrix3.HideWaitMsg()},10)}else{var c=this;this.moScrollEventTimeout=window.setTimeout(function(){c.ScrollEvent(null,true)},500)}}};function DeactivateBackProperties(){}DeactivateBackProperties.moObjects=new Array();DeactivateBackProperties.IsDeactivate=function(){var a=false;for(var b=0,c=DeactivateBackProperties.moObjects.length;b<c;b++){if($Elt(DeactivateBackProperties.moObjects[b])){a=true}}return a};DeactivateBackProperties.prototype={DeactivateBack:function(){DeactivateBackProperties.moObjects.push(this.msID)}};function DefaultActionProperties(){}DefaultActionProperties.moDefaultActions=new Object();DefaultActionProperties.ExecuteDefaultAction=function(a){var b=false;if(a in this.moDefaultActions){this.moDefaultActions[a].call();b=true}return b};DefaultActionProperties.prototype={Event_DefaultAction_Setup:function(){this.Event_DefaultAction=new CtrlEvent(this);var b=this.msID.split(Matrix3.Const.SEPARATOR_CONTROL)[0];var a=this;DefaultActionProperties.moDefaultActions[b]=function(){a.Event_DefaultAction.Fire()}}};function DragProperties(){}DragProperties.prototype={ActiveDrag:function(f,d,o,c,h,l,p,j,k,q,i,g,n,m,b){var r=this.msID+((o)?o:"");if(!this.moDraggableItem){var a=f.split(Utils.Const.GROUP_SEPARATOR);this.moDraggableItem=new DraggableItem(r,a,{ReturnType:n,VFormEffects:p,PleaseWaitMsg:j,PageVirtualID:i,ProxyMode:l,ProxyMessage:k});DragDropMgr.AddDDObject(this.moDraggableItem);Matrix3.RegisterInCache(this.msID,DragDropMgr)}},Event_StartDrag_Setup:function(){this.Event_StartDrag=new CtrlEvent()}};function DropProperties(){}DropProperties.prototype={ActiveDrop:function(b,f,d,c){var g=this.msID+((f)?f:"");if(!this.moDroppableItem){var a=b.split(Utils.Const.GROUP_SEPARATOR);this.moDroppableItem=new DroppableItem(g,a);DragDropMgr.AddDDObject(this.moDroppableItem);Matrix3.RegisterInCache(this.msID,DragDropMgr)}},Event_EndDrag_Setup:function(a){this.Event_EndDrag=new CtrlEvent();this.Event_EndDrag.miDelay=parseInt(a)}};DynamicTemplatesMgr={ListContextualizedControls:function(a){var b=new Array();var c=new Array();c.push(a);var f;while(c.length>0){f=c.pop();if(f.moContainerForChildrens&&(!f.IsVForm()||f==a)&&f.moContainerForChildrens.length>0){var d;for(d=0;d<f.moContainerForChildrens.length;d++){c.push(f.moContainerForChildrens[d])}}else{if(DynamicTemplatesMgr.ControlNeedContextualization(f)){b.push(f)}}}a.SetProperty(TooltipProperties.Const.PROPERTY_TEMPLATED_CONTROLS,b)},ControlNeedContextualization:function(a){var d=false;if(a.moLinkedImage!=null&&a.moLinkedImage.attributes){var l=a.moLinkedImage.attributes.getNamedItem("srctemplate");if(l!=null&&DynamicTemplatesMgr.PropertyNeedContextualization(l.value)){d=true;a.SetProperty("src"+TooltipProperties.Const.ORGINIAL_SUFFIX,l.value)}}var j=new Array();j.push(a.GetNode());var c=new Array();var b=new Array();while(j.length>0){var h=j.pop();if(h.nodeType==3){if(DynamicTemplatesMgr.PropertyNeedContextualization(h.nodeValue)){var k=h.parentNode;if(Utils.IndexOf(c,k)==-1){c.push(k);k.msBaseValue=k.innerHTML;d=true}}}else{if(h.nodeType==1){if(h.attributes){if(h.attributes.href&&DynamicTemplatesMgr.PropertyNeedContextualization(h.attributes.href.value)){h.msBaseLink=h.attributes.href.value;b.push(h);d=true}if(h.attributes.onclick&&DynamicTemplatesMgr.PropertyNeedContextualization(h.attributes.onclick.value)){h.msBaseEvent=decodeURIComponent(h.attributes.onclick.value);b.push(h);d=true}}}}var g=h.childNodes;if(g){for(var i in g){var f=g[i];var m=f.id;if(!m||m.lastIndexOf(Matrix3.Const.SEPARATOR_CONTROL)!=-1){j.push(f)}}}}if(c.length>0){a.SetProperty("TemplatedTextNodes",c)}if(b.length>0){a.SetProperty("TemplatedLinkNodes",b)}return d},PropertyNeedContextualization:function(a){var b=false;if(a!=null&&a!=""){if(a.indexOf(TooltipProperties.Const.LEFTMARKUP)!=-1&&a.indexOf(TooltipProperties.Const.RIGHTMARKUP)!=-1){b=true}}return b},FillContextualization:function(a,b,d){var h=a;a=$PI(a.id);if(a==null||typeof a=="undefined"){a=h}if(!a.HasProperty(TooltipProperties.Const.PROPERTY_TEMPLATED_CONTROLS)){DynamicTemplatesMgr.ListContextualizedControls(a)}var c=a.GetProperty(TooltipProperties.Const.PROPERTY_TEMPLATED_CONTROLS);if(c!=null&&b!=null){var f;var g;for(f=0;f<c.length;f++){g=c[f];if(DynamicTemplatesMgr.FillControlContextualization(c[f],b)){d=true;g.ForceHasChanged();PositionMgr.GetInstance().AddToDirtyXList(g);PositionMgr.GetInstance().AddToDirtyYList(g)}}if(b.hasOwnProperty(TooltipProperties.Const.KEY_TOOLTIP_IMAGE_CONTROL_SIZE)){d=DynamicTemplatesMgr.SetContextualizedSize(a,b)||d}if(d){PositionMgr.GetInstance().CalculatePosition()}}},SetContextualizedSize:function(b,a){var d=false;var c=a[TooltipProperties.Const.KEY_TOOLTIP_IMAGE_CONTROL_SIZE].split(":");if(c.length==3){var i=c[0];var g=parseInt(c[1]);var f=parseInt(c[2]);var h;if(a.hasOwnProperty(TooltipProperties.Const.PROPERTY_TEMP_IMG)){h=$PI(a[TooltipProperties.Const.PROPERTY_TEMP_IMG])}else{h=$PI(b.GetBrotherId(i))}if(h!=null&&(h.miWidth!=g||h.miHeight!=f)){h.miWidth=g;h.miHeight=f;PositionMgr.GetInstance().AddToDirtyXList(h);PositionMgr.GetInstance().AddToDirtyYList(h);h.ForceHasChanged();d=true}}return d},FillControlContextualization:function(a,b){var f=false;if(a.HasProperty("src"+TooltipProperties.Const.ORGINIAL_SUFFIX)){var i=a.moLinkedImage.attributes.getNamedItem("src");if(i!=null){var j=DynamicTemplatesMgr.ReplaceMetaText(a.GetProperty("src"+TooltipProperties.Const.ORGINIAL_SUFFIX),b);if(i.value!=j){i.value=j;a.moLinkedImage.style.visibility="hidden";Utils.AddEvent(a.moLinkedImage,"load",function(){a.moLinkedImage.style.visibility="visible"},this)}f=a.miOriginalWidth==-1||a.miOriginalHeight==-1}}var d=a.GetProperty("TemplatedTextNodes");var g;var h;if(d!=null){for(g=0;g<d.length;g++){h=d[g];h.innerHTML=DynamicTemplatesMgr.ReplaceMetaText(h.msBaseValue,b);f=a.miOriginalWidth==-1||a.miOriginalHeight==-1}}var c=a.GetProperty("TemplatedLinkNodes");if(c!=null){for(g=0;g<c.length;g++){h=c[g];if(h.msBaseLink){h.attributes.href.value=DynamicTemplatesMgr.ReplaceMetaText(h.msBaseLink,b)}if(h.msBaseEvent){h.attributes.onclick.value=DynamicTemplatesMgr.ReplaceMetaText(h.msBaseEvent,b)}}}return f},ReplaceMetaText:function(b,a){var c=new Array();if(b!=null&&b!=""){var g=b.split(TooltipProperties.Const.LEFTMARKUP);c.push(g[0]);var d;var h;for(d=0;d<g.length;d++){h=g[d];if(h.indexOf(TooltipProperties.Const.RIGHTMARKUP)!=-1){var f=h.indexOf(TooltipProperties.Const.RIGHTMARKUP);var i=h.substring(0,f);if(a.hasOwnProperty(i)){c.push(a[i])}c.push(h.substr(f+1))}}}return c.join("")}};function EffectProperties(){}EffectProperties.Const={FADE:"Fade",APPEAR:"Appear",SEPARATOR_VALUE:"|"};EffectProperties.prototype={ActiveEffect:function(f,a,d,c,b){var g=parseFloat(a);var h=parseFloat(d);if(!Utils.IsNumber(h)){h=0.1}if(this.moActiveEffect){this.moActiveEffect.stop(false)}this.moActiveEffect=Effect[f].call(this,this.msID,h,c,b);if(this.moActiveEffect){var i=this.moActiveEffect;this.moCurrentEffectTimer=window.setTimeout(function(){i.animate()},g)}},Action_CancelEffect:function(){window.clearTimeout(this.moCurrentEffectTimer)},Action_ActiveEffect:function(a){if(!a){return}var b=a.split(EffectProperties.Const.SEPARATOR_VALUE);var f=b[0];var d=(b.length>1)?b[1]:null;var c=(b.length>2)?b[2]:null;this.ActiveEffect(f,"1",d,c)}};function FileNameOnDropProperties(){}FileNameOnDropProperties.prototype={SetFileNameOnDrop:function(a){var b=this;$($E(this.msID)).children("a").bind("dragstart",function(c){b.msHrefBackup=$(this).attr("href");$(this).attr("href",JSON.parse(a)).bind("drag",function(d){$(this).attr("href",b.msHrefBackup).unbind("drag")})})}};function FixedPos(){}FixedPos.Cache={maItemsWithScrollbarWidthDeduced:[],maItemsWithScrollbarHeightDeduced:[],moHandlers:{}};FixedPos.Const={MGR_NAME:"FixedPos"};FixedPos.Activate=function(g,f,d,c,b,a){var i=$PI(g);var j=i.msId;if(i){Matrix3.RegisterInCache(g,FixedPos);var h=function(){var r=i.localToGlobal(new Point(0,0));var v=r.y-($(document).scrollTop()+$("#Form1").scrollTop());var n=(f!=null&&v<f)||(d!=null&&v+i.GetHeight()>Utils.GetViewportHeight()-d);var m=false;var q=0;if(c){q=i.moParent.localToGlobal(new Point(0,0)).y-($(document).scrollTop()+$("#Form1").scrollTop());m=(f!=null&&q+i.moParent.GetHeight()<i.GetHeight()+f)||(d!=null&&(Utils.GetViewportHeight()-q)<i.GetHeight()+d)}if(n!=i.mbPosFixed){if(n){$E(g).css({position:"fixed"});i.miFixedX=r.x;if((b||a)&&$.inArray(j,FixedPos.Cache.maItemsWithScrollbarWidthDeduced)==-1&&$.inArray(j,FixedPos.Cache.maItemsWithScrollbarHeightDeduced)==-1){var w=Utils.GetScrollBarSize();var u=w.width;var t=w.height;if(a){i.miHeight-=t;FixedPos.Cache.maItemsWithScrollbarHeightDeduced.push(j)}if(b){i.miWidth-=u;FixedPos.Cache.maItemsWithScrollbarWidthDeduced.push(j)}}if(f!=null&&v<f){i.miFixedY=f}else{if(d!=null&&v+i.GetHeight()>Utils.GetViewportHeight()-d){i.miFixedY=Utils.GetViewportHeight()-d-i.GetHeight()}}if(m){q=i.moParent.localToGlobal(new Point(0,0)).y-($(document).scrollTop()+$("#Form1").scrollTop());if(d!=null){i.miFixedY=Math.max(q,i.miFixedY)}if(f!=null){i.miFixedY=Math.min(q+i.moParent.GetHeight()-i.GetHeight()-f,i.miFixedY)}}}else{$E(g).css({position:"absolute"});if((b||a)){var p=$.inArray(j,FixedPos.Cache.maItemsWithScrollbarWidthDeduced);var o=$.inArray(j,FixedPos.Cache.maItemsWithScrollbarHeightDeduced);var l=p>-1;var k=o>-1;if(k||l){var w=Utils.GetScrollBarSize();var u=w.width;var t=w.height;if(l==true){i.miWidth+=u;FixedPos.Cache.maItemsWithScrollbarWidthDeduced.splice(p,1)}if(k==true){i.miHeight+=t;FixedPos.Cache.maItemsWithScrollbarHeightDeduced.splice(o,1)}}}}i.mbPosFixed=n;i.TransferPositioningToDOM()}};$E(g).parents().add(window).bind("scroll",h);$(document).bind("touchmove",h);$(window).bind("resize",h);FixedPos.Cache.moHandlers[g]=h;h()}FixedPos.RefreshNode=function(k){var m=$PI(g);if(m){var n=m.msId;var l=FixedPos.Cache.moHandlers[g];$E(g).parents().add(window).unbind("scroll",l);$(document).unbind("touchmove",l);$(window).unbind("resize",l)}}};function FixedProperties(){}FixedProperties.prototype={ActiveFixed:function(){$SetStyle(this.msID,"position","absolute");Utils.AddEvent(window,"scroll",this.FixedControl,this)},FixedControl:function(b,a){window.clearTimeout(this.moFixedThread);if(!a){var c=this;this.moFixedThread=window.setTimeout(function(){c.FixedControl(null,true)},500)}else{$SetStyle(this.msID,"top",document.body.scrollTop);DragDropMgr.RefreshCache()}}};function FocusProperties(){}FocusProperties.prototype={ActiveFocus:function(){try{if(typeof $E(this.msControlID).attr("disabled")==="undefined"&&typeof $E(this.msControlID).attr("readonly")==="undefined"){$Elt(this.msControlID).focus();if(!(this instanceof TextAreaCtrl)){$Elt(this.msControlID).select()}else{var b=$Elt(this.msControlID).value.length;if($Elt(this.msControlID).setSelectionRange){$Elt(this.msControlID).setSelectionRange(b,b)}else{if($Elt(this.msControlID).createTextRange){var c=$Elt(this.msControlID).createTextRange();c.collapse(true);c.moveStart("character",b);c.moveEnd("character",b);c.select()}}}}}catch(a){}},Action_Focus:function(){this.ActiveFocus()}};function FoldProperties(){this.msMode;this.msTitleOpen="";this.msTitleClosed="";this.miMinCloseSize=0;this.moCtrlTitle=null;this.msTitleCtrlId="";this.msBtnSkinFold=null;this.msBtnSkinUnfold=null}FoldProperties.Const={OPEN:"open",CLOSE:"close",TITLE_SUFFIX:"_h",ARROW_SUFFIX:"_a",TITLE_DIV_SUFFIX:"_t",CONTAINER_SUFFIX:"_c",ANIMATION_LENGTH:0.2,MODE_SUFFIX_CLASS:"FoldMode",CONTAINER_CLASS:"FoldContainer",SUFFIX_STATE:"_s",ORIENTATION_LEFT:"left",ORIENTATION_RIGHT:"right",ORIENTATION_TOP:"top",ORIENTATION_BOTTOM:"bottom",ID_HIDDEN_DIV:"FoldProperties_HiddenDiv"};FoldProperties.prototype={ActiveFold:function(f,j,i,b,c,k,d,a,g,h){this.msMode=f;this.msTitleCtrlId=this.msID+FoldProperties.Const.TITLE_SUFFIX;if(Utils.Trim(j)!=""){this.msTitleOpen=j}if(Utils.Trim(i)!=""){this.msTitleClosed=i}else{this.msTitleClosed=this.msTitleOpen}this.miCloseSize=0;if(d!=""){var l=parseInt(d);if(!isNaN(l)){this.miMinCloseSize=l}}this.Event_CloseFold=new CtrlEvent(this);this.Event_OpenFold=new CtrlEvent(this);if(typeof this.msTitleClosed==="string"&&this.msTitleClosed!=""){this.moCtrlTitle=$E(this.msTitleCtrlId);var o=this.moCtrlTitle.outerHeight();var n=parseInt(this.moCtrlTitle.css("padding-top"));var m=parseInt(this.moCtrlTitle.css("padding-bottom"));this.moCtrlTitle.css("left","0px");this.moCtrlTitle.css("top","0px");if(typeof g==="string"){this.msBtnSkinFold=g}if(typeof h==="string"){this.msBtnSkinUnfold=h}if(typeof iPaddingPanelBottom==="number"&&iPaddingPanelBottom>0){o+=iPaddingPanelBottom}if(typeof o==="number"){if(typeof n==="number"&&n>0){o+=n}if(typeof m==="number"&&m>0){o+=m}if(o>this.miCloseSize){this.miCloseSize=o}}var p=this;this.moCtrlTitle.bind("click",function(){p.ClickFold()})}},ClickFold:function(a){if(this.msMode==FoldProperties.Const.OPEN){this.msMode=FoldProperties.Const.CLOSE;this.Event_CloseFold.Fire()}else{this.msMode=FoldProperties.Const.OPEN;this.Event_OpenFold.Fire()}var b=$PI(this.msID);b.SetProperty("Fold",this.msMode);PositionMgr.GetInstance().AddToDirtyXList(b);PositionMgr.GetInstance().AddToDirtyYList(b);b.ForceHasChanged();PositionMgr.GetInstance().CalculatePosition();if(this.msMode==FoldProperties.Const.CLOSE){$(b.GetNode()).css("padding","0px");if(this.msBtnSkinUnfold){this.moCtrlTitle.removeClass(this.msBtnSkinUnfold);if(this.msBtnSkinFold){this.moCtrlTitle.addClass(this.msBtnSkinFold)}}}else{$(b.GetNode()).css("padding","");if(this.msBtnSkinFold){this.moCtrlTitle.removeClass(this.msBtnSkinFold);if(this.msBtnSkinUnfold){this.moCtrlTitle.addClass(this.msBtnSkinUnfold)}}}if(b.HasProperty("FoldStateSessionName")){$.ajax({type:"GET",url:"htm/AlterSession.aspx?FSID="+b.GetProperty("FoldStateSessionName")+"&FST="+this.msMode})}this.moCtrlTitle.css("left","0px");this.moCtrlTitle.css("top","0px")},Action_OpenFold:function(a){if(this.msMode==FoldProperties.Const.CLOSE){this.ClickFold(a)}},Action_CloseFold:function(a){if(this.msMode==FoldProperties.Const.OPEN){this.ClickFold(a)}},Action_ToggleFold:function(a){this.ClickFold(a)}};FoldProperties.GetFoldHeight=function(a){var b=a.GetProperty("FoldMinSize");if(typeof b==="string"){b=parseInt(b)}if(typeof b!=="number"){b=0}var g=$E(a.msId+FoldProperties.Const.TITLE_SUFFIX);var f=g.outerHeight();var d=parseInt(g.css("padding-top"));var c=parseInt(g.css("padding-bottom"));if(typeof f==="number"&&f>b){if(typeof d==="number"&&d>0){f+=d}if(typeof c==="number"&&c>0){f+=c}b=f}return b};function HyperlinkProperties(){}HyperlinkProperties.Const={EVENT_LOAD_FRAME:"LOAD_FRAME",EVENT_LOAD_POPUP:"LOAD_POPUP",FLASHID_LINK_SEPARATOR:"/"};HyperlinkProperties.OpenLink=function(a){if(a){var b=a.href;var c=a.target;HyperlinkProperties.OpenLinkWithTarget(b,c,a)}};HyperlinkProperties.OpenLinkWithTarget=function(g,h,a){if(Utils.Trim(g)!=""){switch(h){case null:case"":case"_self":document.location=g;break;case"_blank":window.open(g);break;case"_MatrixPopup":var d=a.parentNode;while(!d.id){d=d.parentNode}var b=d.id.split(Matrix3.Const.SEPARATOR_CONTROL);Matrix3.AddEvent(b[0],HyperlinkProperties.Const.EVENT_LOAD_POPUP,Matrix3.Const.RETURNTYPE_VIEWSTATE,Matrix3.Const.DELAY_IMMEDIAT,encodeURIComponent(g));break;default:var c=ControlMgr.GetInstance().GetReference(h);if(c){var f=h+HyperlinkProperties.Const.FLASHID_LINK_SEPARATOR+encodeURIComponent(g);Matrix3.AddEvent(c.GetId(),HyperlinkProperties.Const.EVENT_LOAD_FRAME,Matrix3.Const.RETURNTYPE_VIEWSTATE,Matrix3.Const.DELAY_IMMEDIAT,f)}break}}};HyperlinkProperties.prototype={Action_OpenLink:function(){var a=$Elt(this.msID).getElementsByTagName("a").item(0);HyperlinkProperties.OpenLink(a)},OpenLink:function(b,a){if(Utils.IsIE()){if(!a){a=$.event.fix(window.event)}else{a=$.event.fix(a)}}if(a&&a.which>1){return true}else{if(b){var c=$Elt(this.msID).getElementsByTagName("a").item(0);$(c).attr("href",b)}this.Action_OpenLink();return false}},Action_OpenLinkInNewWindow:function(a){var d=Utils.GetOptions(a);var p="";var o="";if(d[HyperlinkCtrl.Const.WINDOW_TITLE]){p=d[HyperlinkCtrl.Const.WINDOW_TITLE]}if(d[HyperlinkCtrl.Const.WINDOW_OPTIONS]){o=d[HyperlinkCtrl.Const.WINDOW_OPTIONS]}var r,b,t,u,m,l;r=document.body.clientWidth;b=document.body.clientHeight;t=Utils.IsIE()?window.screenLeft:window.screenX;u=Utils.IsIE()?window.screenTop:window.screenY;var i=new RegExp(/width( )*=( )*([0-9]+)/i);var g=o.match(i);if(g!=null&&g.length>0){m=parseInt(g[3])}var i=new RegExp(/height( )*=( )*([0-9]+)/i);var f=o.match(i);if(f!=null&&f.length>0){l=parseInt(f[3])}if(m){var c=((r-m)/2)+t;o+=", left="+c}if(l){var q=((b-l)/2)+u+150;o+=", top="+q}var n=$Elt(this.msID).getElementsByTagName("a").item(0).href;if(Utils.Trim(n)!=""){var k=window.open(n,"popup",o);var j=this;k.onbeforeunload=function(){if(j.Event_TargetWindowClosed){j.Event_TargetWindowClosed.Fire()}}}},Event_TargetWindowClosed_Setup:function(){this.Event_TargetWindowClosed=new CtrlEvent(this)}};function InPlaceEditorProperties(){}InPlaceEditorProperties.Const={TEXTSWAP_LABEL_SUFFIX:"_LblV",TEXTSWAP_DEFAULTVALUE_SUFFIX:"_DV"};InPlaceEditorProperties.prototype={Action_TextSwap:function(){var b=$Elt(this.msID);var c=$Elt(this.msID+InPlaceEditorProperties.Const.TEXTSWAP_LABEL_SUFFIX);var a=$Elt(this.msID+InPlaceEditorProperties.Const.TEXTSWAP_DEFAULTVALUE_SUFFIX);if((b!=null)&&(c!=null)){if($S(b,"display")!="none"){$SetStyle(b,"display","none");$SetStyle(c,"display","block");var d=b.value;c.innerHTML=d;if(a!=null&&(d==null||Utils.Trim(d)=="")){c.innerHTML=a.innerHTML}}else{$SetStyle(b,"display","block");b.focus();$SetStyle(c,"display","none")}}}};function LoadingAjaxMgr(){this.aoLoadings=new Array()}LoadingAjaxMgr.moSingleton=null;LoadingAjaxMgr.GetInstance=function(){if(!LoadingAjaxMgr.moSingleton){LoadingAjaxMgr.moSingleton=new LoadingAjaxMgr()}return LoadingAjaxMgr.moSingleton};LoadingAjaxMgr.prototype={Add:function(a){this.aoLoadings.push(a)},DisplayAll:function(){for(var a=0,b=this.aoLoadings.length;a<b;a++){this.aoLoadings[a].Display()}},HideAll:function(){for(var a=0,b=this.aoLoadings.length;a<b;a++){this.aoLoadings[a].Hide()}}};function LoadingAjaxProperties(){}LoadingAjaxProperties.Const={SUFFIX_MASK:"_Mask",CLASS_MASK:"LoadingMask"};LoadingAjaxProperties.prototype={ActiveLoadingAjax:function(){LoadingAjaxMgr.GetInstance().Add(this);var a=document.createElement("div");a.className=LoadingAjaxProperties.Const.CLASS_MASK;a.id=this.msID+LoadingAjaxProperties.Const.SUFFIX_MASK;$SetStyle(a,"display","none");document.body.appendChild(a)},Display:function(){var a=this;var b=a.msID+LoadingAjaxProperties.Const.SUFFIX_MASK;$SetStyle(b,"width","100%");$SetStyle(b,"height","100%");window.setTimeout('$SetStyle("'+b+'", "width", Utils.GetPageWidth() + "px");$SetStyle("'+b+'", "height", Utils.GetPageHeight() + "px");',1);$SetStyle(a.msID,"display","block");$SetStyle(b,"display","block")},Hide:function(){$SetStyle(this.msID,"display","none");$SetStyle(this.msID+LoadingAjaxProperties.Const.SUFFIX_MASK,"display","none")}};function LoadingPostBackMgr(){this.aoLoadings=new Object()}LoadingPostBackMgr.moSingleton=null;LoadingPostBackMgr.GetInstance=function(){if(!LoadingPostBackMgr.moSingleton){LoadingPostBackMgr.moSingleton=new LoadingPostBackMgr()}return LoadingPostBackMgr.moSingleton};LoadingPostBackMgr.Const={MGR_NAME:"LoadingPostBack"};LoadingPostBackMgr.prototype={Add:function(a){this.aoLoadings[a.msID]=a;Matrix3.RegisterInCache(a.msID,LoadingPostBackMgr)},DisplayAll:function(){for(var a in this.aoLoadings){this.aoLoadings[a].Display()}},HideAll:function(){for(var a in this.aoLoadings){this.aoLoadings[a].Hide()}},RefreshNode:function(a){this.aoLoadings[a].Remove();delete (this.aoLoadings[a])}};function LoadingPostBackProperties(){}LoadingPostBackProperties.Const={SUFFIX_MASK:"_Mask",CLASS_MASK:"LoadingMask"};LoadingPostBackProperties.prototype={ActiveLoadingPostBack:function(){LoadingPostBackMgr.GetInstance().Add(this);var a=document.createElement("div");a.className=LoadingPostBackProperties.Const.CLASS_MASK;a.id=this.msID+LoadingPostBackProperties.Const.SUFFIX_MASK;$SetStyle(a,"display","none");document.body.appendChild(a)},Display:function(){var a=this;var b=a.msID+LoadingPostBackProperties.Const.SUFFIX_MASK;$SetStyle(b,"width","100%");$SetStyle(b,"height","100%");window.setTimeout('$SetStyle("'+b+'", "width", Utils.GetPageWidth() + "px");$SetStyle("'+b+'", "height", Utils.GetPageHeight() + "px");',1);$SetStyle(a.msID,"display","block");$SetStyle(b,"display","block")},Hide:function(){$SetStyle(this.msID,"display","none");$SetStyle(this.msID+LoadingPostBackProperties.Const.SUFFIX_MASK,"display","none")},Remove:function(){var a=this.msID+LoadingPostBackProperties.Const.SUFFIX_MASK;$Elt(a).parentNode.removeChild($Elt(a))}};function LoadingProperties(){}LoadingProperties.Const={SUFFIX_MASK:"_Mask"};LoadingProperties.prototype={ActiveLoading:function(){var a=this;var b=a.msID+LoadingProperties.Const.SUFFIX_MASK;$SetStyle(b,"width","100%");$SetStyle(b,"height","100%");window.setTimeout('$SetStyle("'+b+'", "width", Utils.GetPageWidth() + "px");$SetStyle("'+b+'", "height", Utils.GetPageHeight() + "px");',1);window.setTimeout(function(){$SetStyle(a.msID,"display","none");$SetStyle(b,"display","none")},500)},DisplayLoading:function(){var a=this;var b=a.msID+LoadingProperties.Const.SUFFIX_MASK;$SetStyle(b,"width","100%");$SetStyle(b,"height","100%");window.setTimeout('$SetStyle("'+b+'", "width", Utils.GetPageWidth() + "px");$SetStyle("'+b+'", "height", Utils.GetPageHeight() + "px");',1);$SetStyle(a.msID,"display","block");$SetStyle(b,"display","block")},Action_DisplayLoading:function(){this.DisplayLoading()}};function MatrixEventProperties(){}MatrixEventProperties.Const={SEPARATOR:";"};MatrixEventProperties.prototype={SendEvent:function(l,g,h,f,b,c,d,m,j,k,a,n,i,o){if(this.Event_SendEvent){this.Event_SendEvent.Fire()}var v=null;if(!Matrix3.mbPreloading){var t=$PI(this.msID);if(t!=null&&t.HasProperty("PID")){v=PreloadMgr.GetEventResponse(t)}}if(v==null){var p;if(g=="$EXIT_POPUP$"){var q=$Elt(this.msID).parentNode;while(q!=null){var u=ControlMgr.GetInstance().GetPositionItem(q.id);if(u&&u.msCtrlType==PositionItem.Const.CONTROL_TYPE_POPUP){p=true;Matrix3.RemovePopup(q.id.substring(0,q.id.length-Popup.Const.CONTAINER_SUFFIX.length))}q=q.parentNode}}if(!p){b=Utils.RestoreEncodingEventArgsIE(b);Matrix3.AddEvent(l,g,h,f,b,c,d,m,j,k,a,n,false,i,o)}}else{var r=new Object();r.responseText=v;Matrix3.AjaxSuccess(v,null,r)}},SendPostBack:function(d,b,a,c){if(this.Event_SendPostBack){this.Event_SendPostBack.Fire()}a=Utils.RestoreEncodingEventArgsIE(a);Matrix3.DoPostBack(d,b,a,c)},Action_SendEvent:function(_sArgs){if(_sArgs&&_sArgs!=""&&!(_sArgs.indexOf("delay")===0||_sArgs.indexOf("modal")===0)){var asArgs=_sArgs.split(MatrixEventProperties.Const.SEPARATOR);var sVFormID=this.msID.split(Matrix3.Const.SEPARATOR_CONTROL)[0];var sEventName=(asArgs.length>0)?asArgs[0]:"";var sEventType=(asArgs.length>1&&asArgs[1]!="")?asArgs[1]:Matrix3.Const.RETURNTYPE_FULL;var sEventDelay=(asArgs.length>2&&asArgs[2]!="")?asArgs[2]:Matrix3.Const.DELAY_IMMEDIAT;var sEventArgs=(asArgs.length>3)?asArgs[3]:"";var sEventCommand=(asArgs.length>4)?asArgs[4]:"";var sEventCommandArgs=(asArgs.length>5)?asArgs[5]:"";var sEffects=(asArgs.length>6)?asArgs[6]:"";this.SendEvent(sVFormID,sEventName,sEventType,sEventDelay,sEventArgs,sEventCommand,sEventCommandArgs,null,null,sEffects)}else{var oElement=$Elt(this.msID).getElementsByTagName("a").item(0);var sAction=oElement.getAttribute("onclick");eval(sAction);sAction=oElement.getAttribute("href");if(Utils.IsIE6()){sAction=unescape(sAction)}eval(sAction)}},Action_SendPostBack:function(_sArgs){if(_sArgs&&_sArgs!=""){var asArgs=_sArgs.split(MatrixEventProperties.Const.SEPARATOR);var sVFormID=this.msID.split(Matrix3.Const.SEPARATOR_CONTROL)[0];var sEventName=(asArgs.length>0)?asArgs[0]:"";var sEventArgs=(asArgs.length>1)?asArgs[1]:"";this.SendPostBack(sVFormID,sEventName,sEventArgs)}else{var oElement=$Elt(this.msID).getElementsByTagName("a").item(0);var sAction=oElement.getAttribute("onclick");eval(sAction);sAction=oElement.getAttribute("href");if(Utils.IsIE6()){sAction=unescape(sAction)}eval(sAction)}},Event_SendEvent_Setup:function(){this.Event_SendEvent=new CtrlEvent(this)},Event_SendPostBack_Setup:function(){this.Event_SendPostBack=new CtrlEvent(this)},Active_ReloadInterval:function(a){var b=this;window.setInterval(function(){if(!Matrix3.mbEvent){b.Action_SendEvent()}},parseInt(a))}};function MenuProperties(){}function MenuGroupMgr(){}MenuProperties.Const={PROPERTY_MENUGROUP:"MenuGroup",PROPERTY_SUBMENU_PANEL:"SubMenuPanel",PROPERTY_OPEN_TRIGGER:"OpenTrigger",PROPERTY_CLOSE_ON_MOUSE_OUT:"CloseOnMouseOut",OPTION_GROUPID:"groupid",OPTION_LEVEL:"level",PROPERTY_ACTIVE_SKIN:"ActiveSkin",PROPERTY_CLOSE_ON_CLICK_OUT:"CloseOnClickOut",PROPERTY_PERSISTANT_STATE:"PersistantState",OPEN_TRIGGER_V_CLICK:"click",OPEN_TRIGGER_V_OVER:"over"};MenuGroupMgr.moMenuGroups=new Object();MenuGroupMgr.ConfigureMenuControl=function(a){if(a.GetProperty(MenuProperties.Const.PROPERTY_CLOSE_ON_CLICK_OUT,false)){}var c=a.GetProperty(MenuProperties.Const.PROPERTY_PERSISTANT_STATE,true);var b=a.GetContainerForChildren();var d;for(var f in b){d=b[f];if(!d.IsContainer()){MenuGroupMgr.ApplyMenuGroupToChild(d,0,a.msId,c)}}};MenuGroupMgr.ApplyMenuGroupToChild=function(c,b,d,a){var g;var i=$Elt(c.msId);var k=new MenuProperties();k.ActivateMenuGroupProperties(c,d,b,c.GetProperty(MenuProperties.Const.PROPERTY_OPEN_TRIGGER,MenuProperties.Const.OPEN_TRIGGER_V_CLICK),c.GetProperty(MenuProperties.Const.PROPERTY_CLOSE_ON_MOUSE_OUT,false),a);g=k.IsOpened();var j=k.GetLinkedPanel();if(j!=null){var f=j.GetContainerForChildren();var h;for(var l in f){h=f[l];if(!h.IsContainer()){g=MenuGroupMgr.ApplyMenuGroupToChild(h,b+1,d,a)||g}}}if(g){MenuGroupMgr.ApplyActiveClassAndOpenSubPanel(k)}return g};MenuGroupMgr.RegisterControl=function(b,a){if(!MenuGroupMgr.moMenuGroups.hasOwnProperty(b)){MenuGroupMgr.moMenuGroups[b]=new Array()}(MenuGroupMgr.moMenuGroups[b]).push(a)};MenuGroupMgr.UnregisterControl=function(b,a){if(MenuGroupMgr.moMenuGroups.hasOwnProperty(b)){var c=MenuGroupMgr.moMenuGroups[b];c.splice(Utils.IndexOf(c,a),1)}};MenuGroupMgr.MakeControlActive=function(b,a){var g=MenuGroupMgr.moMenuGroups[b];var d=-1;if(a!=null){d=a.GetLevel()}var j;var c=false;var i;var k;for(k in g){i=g[k];if(i.GetLevel()==d){var f=i.moPosItem;var h=i.GetLinkedPanel();if(i==a){j=f.GetProperty(ConstProperties.URL,null);c=j!=null;if(f.HasProperty(MenuProperties.Const.PROPERTY_ACTIVE_SKIN)){$AddClass(f.msId,f.GetProperty(MenuProperties.Const.PROPERTY_ACTIVE_SKIN))}if(h!=null){MenuGroupMgr.UpdatePanelState(h,true)}}else{if(f.HasProperty(MenuProperties.Const.PROPERTY_ACTIVE_SKIN)){$RemoveClass(f.msId,f.GetProperty(MenuProperties.Const.PROPERTY_ACTIVE_SKIN))}if(h!=null){MenuGroupMgr.UpdatePanelState(h,false)}}}if(i.GetLevel()>d){var f=i.moPosItem;var h=i.GetLinkedPanel();if(c&&f.GetProperty(ConstProperties.URL)==j){if(f.HasProperty(MenuProperties.Const.PROPERTY_ACTIVE_SKIN)){$AddClass(f.msId,f.GetProperty(MenuProperties.Const.PROPERTY_ACTIVE_SKIN))}}else{if(f.HasProperty(MenuProperties.Const.PROPERTY_ACTIVE_SKIN)){$RemoveClass(f.msId,f.GetProperty(MenuProperties.Const.PROPERTY_ACTIVE_SKIN))}if(h!=null){MenuGroupMgr.UpdatePanelState(h,false)}}}}PositionMgr.GetInstance().CalculatePosition()};MenuGroupMgr.CloseAllIfMouseOutMenu=function(a){var g=MenuGroupMgr.moMenuGroups[a];var b=true;var c=FlashMatrix3.GetInstance().GetStage().mouseX;var d=FlashMatrix3.GetInstance().GetStage().mouseY;var i;var j;for(j in g){i=g[j];if(i.moPosItem.hitTestPoint(c,d)){b=false;break}}if(b){var i;var j;for(j in g){i=g[j];var f=i.moPosItem;var h=i.GetLinkedPanel();if(f.hasOwnProperty(MenuProperties.Const.PROPERTY_ACTIVE_SKIN)){$RemoveClass(f.msId,f.GetProperty(MenuProperties.Const.PROPERTY_ACTIVE_SKIN))}if(h!=null){MenuGroupMgr.UpdatePanelState(h,false)}}}PositionMgr.GetInstance().CalculatePosition()};MenuGroupMgr.CloseAll=function(a){var c=MenuGroupMgr.moMenuGroups[a];var f;var g;for(g in c){f=c[g];var b=f.moPosItem;var d=f.GetLinkedPanel();if(b.hasOwnProperty(MenuProperties.Const.PROPERTY_ACTIVE_SKIN)){$RemoveClass(b.msId,b.GetProperty(MenuProperties.Const.PROPERTY_ACTIVE_SKIN))}if(d!=null){MenuGroupMgr.UpdatePanelState(d,false)}}};MenuGroupMgr.UpdatePanelState=function(b,a){if(b.moProperties&&b.moProperties.hasOwnProperty("Fold")){if(a){b.moProperties.Fold=FoldProperties.Const.OPEN}else{if(!a){b.moProperties.Fold=FoldProperties.Const.CLOSE}}PositionMgr.GetInstance().AddToDirtyYList(b);b.ForceHasChanged()}};MenuGroupMgr.ApplyActiveClassAndOpenSubPanel=function(a){var b=a.moPosItem;var c=a.GetLinkedPanel();if(b.HasProperty(MenuProperties.Const.PROPERTY_ACTIVE_SKIN)){$AddClass(b.msId,b.GetProperty(MenuProperties.Const.PROPERTY_ACTIVE_SKIN))}if(c!=null){MenuGroupMgr.UpdatePanelState(c,true)}};MenuProperties.prototype={ActivateMenuGroupProperties:function(d,f,c,g,a,b){if(g==undefined){g=MenuProperties.Const.OPEN_TRIGGER_V_CLICK}if(a==undefined){a=false}this.moPosItem=d;this.msGroupID=f;this.miLevel=parseInt(c);this.msOpenTrigger=g;this.mbCloseSubPanelOnMouseOut=a;this.mbLinkedPanelResolved=false;this.mbOpened=false;MenuGroupMgr.RegisterControl(this.msGroupID,this);if(this.mbCloseSubPanelOnMouseOut){this.GetLinkedPanel();if(this.moLinkedPanel!=null){Utils.AddEvent(this.moPosItem,"mouseout",this.MouseOutItemHandler,this);Utils.AddEvent(this.moLinkedPanel,"mouseout",this.MouseOutSubMenuHandler,this)}}switch(this.msOpenTrigger){case MenuProperties.Const.OPEN_TRIGGER_V_CLICK:Utils.AddEvent(this.moPosItem,"click",this.ClickHandler,this);break;case MenuProperties.Const.OPEN_TRIGGER_V_OVER:Utils.AddEvent(this.moPosItem,"mouseover",this.ClickHandler,this);break}if(b){var u=null;var t=null;for(var j=0,m=this.moPosItem.GetChildNodes().length;j<m;j++){var n=this.moPosItem.GetChildNodes()[j];if(n.nodeType==1&&n.tagName.toUpperCase()=="A"){if(n.attributes.href){u=n.attributes.href.value}if(n.attributes.target){t=n.attributes.target.value}else{t="_self"}break}}if(u!=null&&t!=null){if(t!="_self"){var o=FramesMgr.GetInstance().GetFrameContent(t);if(o!=null){if((u.indexOf("C.aspx?VP3=CMS3")!=-1||u.indexOf("CS.aspx?VP3=CMS3")!=-1)&&(u.indexOf("VF="+o)!=-1)){var l=u.indexOf("VF="+o);u=u.substring(l+o.length+3);if(u.length==0||u.charAt(0)=="&"||u.indexOf("_VForm")==0){this.mbOpened=true;if(u.indexOf("&")!=-1){var p=Matrix3.msURL;var h=u.split("&");for(var j=0,m=h.length;j<m;j++){var q=h[j];var k=q.indexOf("=");if(k!=-1){var r=q.substring(0,k);if(p.indexOf(r+"=")!=-1){if(p.indexOf(q)==-1){this.mbOpened=false}}}}}}}}}else{var p=Matrix3.msURL;this.mbOpened=u.length>0&&p.endsWith(u)}}}},GetLevel:function(){return this.miLevel},IsOpened:function(){return this.mbOpened},GetLinkedPanel:function(){if(!this.mbLinkedPanelResolved){this.moLinkedPanel=null;var a=this.moPosItem.GetProperty(MenuProperties.Const.PROPERTY_SUBMENU_PANEL);if(Utils.IsStringFilled(a)){var b=this.moPosItem.GetBrotherId(a);this.moLinkedPanel=$PI(b)}this.mbLinkedPanelResolved=true}return this.moLinkedPanel},ClickHandler:function(a){var b=$PI(this.msGroupID);if(this.moLinkedPanel==null&&b!=null&&!b.GetProperty(MenuProperties.Const.PROPERTY_PERSISTANT_STATE,true)){MenuGroupMgr.CloseAll(this.msGroupID)}else{MenuGroupMgr.MakeControlActive(this.msGroupID,this)}},MouseOutItemHandler:function(a){if(this.mbCloseSubPanelOnMouseOut&&this.moLinkedPanel!=null){if(!this.moPosItem.IsUnderMouse(a)&&!this.moLinkedPanel.IsUnderMouse(a,true)){MenuGroupMgr.UpdatePanelState(this.moLinkedPanel,false);PositionMgr.GetInstance().CalculatePosition()}}},MouseOutSubMenuHandler:function(a){if(this.mbCloseSubPanelOnMouseOut&&this.moLinkedPanel!=null){if(!this.moLinkedPanel.IsUnderMouse(a)&&!this.moPosItem.IsUnderMouse(a,true)){var c=true;var b=this.moLinkedPanel.GetContainerForChildren();var f=b.length;for(var d=0;d<f;d++){var g=b[d];c=c&&!g.IsUnderMouse(a,false)}if(c){MenuGroupMgr.UpdatePanelState(this.moLinkedPanel,false);var h=this.moPosItem.moParent;while(h!=null&&h.msCtrlType!=PositionItem.Const.CONTROL_TYPE_MENU){if(h.moProperties&&h.moProperties.hasOwnProperty("Fold")){if(h.moProperties.Fold==FoldProperties.Const.OPEN&&!h.IsUnderMouse(a,true)){h.moProperties.Fold=FoldProperties.Const.CLOSE;PositionMgr.GetInstance().AddToDirtyYList(h)}else{break}}h=h.moParent}PositionMgr.GetInstance().CalculatePosition()}}}}};function MountMgr(){this.maoFunctions=new Array();this.MountChange=new CtrlEvent(this);this.mbIsMountActive=false}MountMgr.moSingleton=null;MountMgr.GetInstance=function(){if(!MountMgr.moSingleton){MountMgr.moSingleton=new MountMgr()}return MountMgr.moSingleton};MountMgr.Const={CLASS_MOUNT:"MountC",DEFAULT_BACKGROUND:"#000000"};MountMgr.prototype={ActiveMount:function(a){if(!this.mbIsMountActive){$AddClass(Matrix3.Const.ID_PANEL_MAIN,MountMgr.Const.CLASS_MOUNT);if(document.body.style.backgroundColor){this.msBodyBackground=document.body.style.backgroundColor}else{this.msBodyBackground="#ffffff"}if(!a){a=MountMgr.Const.DEFAULT_BACKGROUND}document.body.style.backgroundColor=a;this.mbIsMountActive=true;this.MountChange.Fire()}},EndMount:function(){if(this.mbIsMountActive){$RemoveClass(Matrix3.Const.ID_PANEL_MAIN,MountMgr.Const.CLASS_MOUNT);document.body.style.backgroundColor=this.msBodyBackground;this.mbIsMountActive=false;this.MountChange.Fire()}},IsActive:function(){return this.mbIsMountActive}};function MountProperties(){}MountProperties.prototype={Action_ActiveMount:function(a){MountMgr.GetInstance().ActiveMount(a)},Action_EndMount:function(){MountMgr.GetInstance().EndMount()},Action_InvertMount:function(a){if(MountMgr.GetInstance().IsActive()){MountMgr.GetInstance().EndMount()}else{MountMgr.GetInstance().ActiveMount(a)}}};function MultipleSourcesProperties(){}MultipleSourcesProperties.Const={PROPERTY_MULTIPLE_SOURCE:"MultipleSources",PROPERTY_MULTIPLE_SOURCE_MODE:"MultipleSourcesMode",SEPARATOR_ELEMENTS:";",SEPARATOR_VALUES:",",SEPARATOR_DIMENSIONS:"*",MODE_RESIZE_WIDTH:"ResizeWidth",MODE_RESIZE_HEIGHT:"ResizeHeight",MODE_RESIZE_RATIO:"ResizeRatio",MODE_DEFAULT:"Default",MODE_MOUNT:"Mount"};HTMLElement.prototype.ActiveMultipleSources=function(){this.moMultSourceTable=this.GetMultipleSources(this.GetProperty(MultipleSourcesProperties.Const.PROPERTY_MULTIPLE_SOURCE));this.msMultSrcMode=this.GetProperty(MultipleSourcesProperties.Const.PROPERTY_MULTIPLE_SOURCE_MODE,MultipleSourcesProperties.Const.MODE_DEFAULT);this.msMultSrcCurrentPath=null};HTMLElement.prototype.ApplyMultipleSources=function(){var o=null;switch(this.msMultSrcMode){case MultipleSourcesProperties.Const.MODE_RESIZE_RATIO:var h=parseFloat(this.GetWidth());var g=parseFloat(this.GetHeight());var a=new Array();for(var p in this.moMultSourceTable){var b=p.split(MultipleSourcesProperties.Const.SEPARATOR_DIMENSIONS);if(b.length==2){var k=parseFloat(b[0]);var j=parseFloat(b[1]);var d=Math.min((k/h),(j/g));var m=new Object();m.covereage=d;m.path=this.moMultSourceTable[p];a.push(m)}}function q(i,r){return i.covereage-r.covereage}a.sort(q);for(var f=0,l=a.length;f<l;f++){var n=a[f];var c=n.covereage;if(c>1){o=n.path;break}}if(o==null&&a.length>0){o=a[a.length-1].path}break;case MultipleSourcesProperties.Const.MODE_MOUNT:break;case MultipleSourcesProperties.Const.MODE_DEFAULT:break}if(o!=null&&o!=this.msMultSrcCurrentPath){this.msMultSrcCurrentPath=o;ImageMgr.GetInstance().Push(this.moLinkedImage,this);this.moLinkedImage.src=o}};HTMLElement.prototype.GetMultipleSources=function(a){var f=new Object();if(a!=null&&a!=""){var d=a.split(MultipleSourcesProperties.Const.SEPARATOR_ELEMENTS);for(var b=0,c=d.length;b<c;b++){var g=d[b].split(MultipleSourcesProperties.Const.SEPARATOR_VALUES);f[g[0]]=g[1]}}return f};function PositionGroupProperties(){}PositionGroupProperties.moGroups=new Object();PositionGroupProperties.moRevertGroups=new Object();PositionGroupProperties.Const={UNIT_DIAMETER:10,ID_POSITION_GROUP_CIRCLE:"PositionGroupCircle",ANIMATION_DELAY:0.2,MGR_NAME:"PositionGroup",OPTION_DISPATCH:"dispatch"};PositionGroupProperties.ReinitPositionGroup=function(b){var h=Utils.GetAbsoluteWidth(PositionGroupProperties.Const.ID_POSITION_GROUP_CIRCLE);var d=Utils.GetAbsoluteHeight(PositionGroupProperties.Const.ID_POSITION_GROUP_CIRCLE);var g=Utils.GetY($Elt(PositionGroupProperties.Const.ID_POSITION_GROUP_CIRCLE));var f=Utils.GetX($Elt(PositionGroupProperties.Const.ID_POSITION_GROUP_CIRCLE));var l=Utils.GetMousePosition(b);if(!(l[0]>f&&l[0]<f+h&&l[1]>g&&l[1]<g+d)){var a=new Array();for(var n in PositionGroupProperties.moGroups){for(var c=0,j=PositionGroupProperties.moGroups[n].length;c<j;c++){var m=PositionGroupProperties.moGroups[n][c];var k={top:{to:m.miPositionGroupOriginalY},left:{to:m.miPositionGroupOriginalX}};$E(m.msID).animate({top:m.miPositionGroupOriginalY,left:m.miPositionGroupOriginalX},PositionGroupProperties.Const.ANIMATION_DELAY*100,function(){DragDropMgr.RefreshCache()});$SetStyle(m.msID,"zIndex",90);m.mbPositionedItem=false}}$SetStyle(PositionGroupProperties.Const.ID_POSITION_GROUP_CIRCLE,"display","none")}};PositionGroupProperties.RefreshNode=function(a){for(var b=0,d=PositionGroupProperties.moRevertGroups[a].length;b<d;b++){var g=PositionGroupProperties.moGroups[PositionGroupProperties.moRevertGroups[a]];for(var c=0,f=g.length;c<f;c++){if(g[c].msID==a){g.splice(c,1);break}}}delete PositionGroupProperties.moRevertGroups[a]};PositionGroupProperties.GetSuitableDisplayHost=function(b,a){sRefPosItem=b.moParent;while(sRefPosItem!=null&&sRefPosItem.msCtrlType!=PositionItem.Const.CONTROL_TYPE_POPUP&&($(sRefPosItem.GetNode()).css("overflow")=="hidden"||$(sRefPosItem.GetNode()).css("overflow")=="visible"||a)){sRefPosItem=sRefPosItem.moParent}if(sRefPosItem==null){sRefPosItem=ControlMgr.GetInstance().GetRootPositionItem()}return sRefPosItem};PositionGroupProperties.prototype={ActivePositionGroup:function(b,a){var d=ControlMgr.GetInstance().GetReference(b);if(d!=undefined||b=="screen"||b=="popup"||b=="popuptitlebar"||b=="notification"){Utils.CreateReference(this.msID);var c=$PI(this.msID);if(b=="screen"){d=ControlMgr.GetInstance().GetRootPositionItem()}else{if(b=="notification"){d=ControlMgr.GetInstance().GetRootPositionItem();$SetStyle(c.GetNode(),"zIndex",StackMgr.GetInstance().GetIndex())}else{if(b=="popup"){d=PositionGroupProperties.GetSuitableDisplayHost(c)}else{if(b=="popuptitlebar"){d=c;while(d!=null&&d.msCtrlType!=PositionItem.Const.CONTROL_TYPE_POPUP){d=d.moParent}if(d==null){d=ControlMgr.GetInstance().GetRootPositionItem()}}}}}c.moFloatingParent=d;if(d.GetNode){d.GetNode().appendChild(c.GetNode())}else{d.appendChild(c.GetNode())}c.CalculateXPosition();c.CalculateYPosition();c.TransferPositioningToDOM()}},PositionGroupOver:function(){if(this.mbPositionedItem){return}this.mbPositionedItem=true;var t=Utils.GetAbsoluteWidth(this.msID);var g=Utils.GetAbsoluteHeight(this.msID);var m=this.miPositionGroupOriginalX;var n=this.miPositionGroupOriginalY;var A=new Array();for(var b=0,w=PositionGroupProperties.moGroups[this.msPositionGroupParent].length;b<w;b++){var z=PositionGroupProperties.moGroups[this.msPositionGroupParent][b];var p=Utils.GetAbsoluteWidth(z.msID);var o=Utils.GetAbsoluteHeight(z.msID);var q=z.miPositionGroupOriginalX;var r=z.miPositionGroupOriginalY;if(Math.max(n,r)<=Math.min(n+g,r+o)&&Math.max(m,q)<=Math.min(m+t,q+p)){A.push(z)}}if(A.length>1){var f=PositionGroupProperties.Const.UNIT_DIAMETER*A.length;var d=Math.PI/2;var k=2*Math.PI;var l=0;if(m-f<0){k=k/2;l-=d}if(n-f<0){k=k/2;if(l==0){l-=Math.PI}}var c=k/A.length;l+=c/2;var j=0;var h=0;var a=new Array();for(var b=0,w=A.length;b<w;b++){var t=Utils.GetAbsoluteWidth(A[b].msID);var g=Utils.GetAbsoluteHeight(A[b].msID);if(t>j){j=t}if(g>h){h=g}var u=m+f*Math.cos(c*b+l)-t/2;var v=n-f*Math.sin(c*b+l)-g/2;var x={top:{to:v},left:{to:u}};$E(A[b].msID).animate({top:v,left:u},PositionGroupProperties.Const.ANIMATION_DELAY*100,function(){DragDropMgr.RefreshCache()});$SetStyle(A[b].msID,"zIndex",92);A[b].mbPositionedItem=true}var B=PositionGroupProperties.Const.ID_POSITION_GROUP_CIRCLE;if(!$Elt(B)){var y=document.createElement("div");y.id=B;$Elt(this.msPositionGroupParent).GetNode().appendChild(y);Utils.AddEvent(y,"mouseout",PositionGroupProperties.ReinitPositionGroup)}$SetStyle(PositionGroupProperties.Const.ID_POSITION_GROUP_CIRCLE,"display","block");$SetStyle(B,"top",n-f-h);$SetStyle(B,"left",m-f-j);$SetStyle(B,"width",2*f+j*2);$SetStyle(B,"height",2*f+h*2)}}};function RelativeProperties(){}RelativeProperties.Const={LEFT:"LEFT",RIGHT:"RIGHT",BOTTOM:"BOTTOM",TOP:"TOP",TARGET:"Target",HPOS:"hpos",VPOS:"vpos",VSIDE:"vside",HSIDE:"hside"};RelativeProperties.prototype={ActiveRelative:function(a){var b=Utils.GetOptions(a);this.miRelativeHPos=parseInt(b[RelativeProperties.Const.HPOS]);this.miRelativeVPos=parseInt(b[RelativeProperties.Const.VPOS]);this.msRelativeHSide=b[RelativeProperties.Const.HSIDE];this.msRelativeVSide=b[RelativeProperties.Const.VSIDE];this.msRelativeTarget=b[RelativeProperties.Const.TARGET];if(isNaN(this.miRelativeHPos)){this.miRelativeHPos=0}if(isNaN(this.miRelativeVPos)){this.miRelativeVPos=0}$SetStyle(this.msID,"position","absolute");this.Relative()},Relative:function(){var g=this.msID.split(Matrix3.Const.SEPARATOR_CONTROL)[0];var f=$Elt(g+Matrix3.Const.SEPARATOR_CONTROL+this.msRelativeTarget);var c=Utils.GetX(f);var d=Utils.GetY(f);var a=c+this.miRelativeHPos;if(this.msRelativeHSide==RelativeProperties.Const.RIGHT){a+=Utils.GetAbsoluteWidth(f)}$SetStyle(this.msID,"left",a+"px");var b=d+this.miRelativeVPos;if(this.msRelativeVSide==RelativeProperties.Const.BOTTOM){b+=Utils.GetAbsoluteHeight(f)}$SetStyle(this.msID,"top",b+"px");$RemoveClass(this.msID,StyleMgr.Const.CLASS_INVISIBLE)}};function ReorderProperties(){}ReorderProperties.prototype={ActiveReorder:function(f,c,g,k,n,i,j,o,h,d,m,l,b){var a=f.split(Utils.Const.GROUP_SEPARATOR);if(!this.moDraggableItem){this.moDraggableItem=new DraggableItem(this.msID,a,{ReturnType:m,VFormEffects:n,PleaseWaitMsg:i,PageVirtualID:h,ProxyMode:k,ReorderMode:l,DontMoveWhenReorder:b});this.moDraggableItem.mbIsReorder=true}else{this.moDraggableItem.mbIsReorder=true;this.moDraggableItem.AddDragGroups(a)}if(!this.moDroppableItem){this.moDroppableItem=new DroppableItem(this.msID,a,{});this.moDroppableItem.mbIsReorder=true}else{this.moDroppableItem.AddDropGroups(a)}},Event_StartDrag_Setup:function(){this.Event_StartDrag=new CtrlEvent()},Event_EndDrag_Setup:function(){this.Event_EndDrag=new CtrlEvent()}};function ResizableProperties(){}ResizableProperties.Const={EVENT_RESIZE:"RESIZE",SEPARATOR_SIZE:",",RESIZABLE_ANCHOR_SUFFIX:"_ResizableAnchor"};ResizableProperties.prototype={ActiveResizable:function(){var a=$Elt(this.msID+ResizableProperties.Const.RESIZABLE_ANCHOR_SUFFIX);var b=this;$E(a.id).draggable({drag:function(){var h=Event.getPageX(e);var j=Event.getPageY(e);var f=Utils.GetX(b.msID);var g=Utils.GetY(b.msID);var n=$Elt(b.msID).parentNode;if(n.nodeName.toLowerCase()=="td"){var p=n;var d=0;while(p.previousSibling){d++;p=p.previousSibling}var m=n.parentNode.parentNode.rows;for(var c=0,k=m.length;c<k;c++){var o=m[c].childNodes[d];o.width=(h-f)}var l=$Elt(b.msID).parentNode.parentNode.childNodes;for(var c=0,k=l.length;c<k;c++){var o=l[c];o.height=(j-g)}}else{$SetStyle(b.msID,"width",(h-f)+"px");$SetStyle(b.msID,"height",(j-g)+"px")}$SetStyle(a,"left","auto");$SetStyle(a,"top","auto");$SetStyle(a,"right","0px");$SetStyle(a,"bottom","0px")},stop:function(){if(b.Event_ResizeEnd){b.Event_ResizeEnd.Fire()}var h=b.msID.split(Matrix3.Const.SEPARATOR_CONTROL)[0];var d,c;var f=$Elt(b.msID).parentNode;if(f.nodeName.toLowerCase()=="td"){d=Utils.GetWidth(f,true);c=Utils.GetHeight(f,true)}else{d=Utils.GetWidth(b.msID,true);c=Utils.GetHeight(b.msID,true)}var g=d+ResizableProperties.Const.SEPARATOR_SIZE+c+ResizableProperties.Const.SEPARATOR_SIZE+b.msID.split(Matrix3.Const.SEPARATOR_CONTROL)[1];Matrix3.AddEvent(h,ResizableProperties.Const.EVENT_RESIZE,Matrix3.Const.RETURNTYPE_FULL,Matrix3.Const.DELAY_IMMEDIAT,g)}})},Event_ResizeEnd_Setup:function(){this.Event_ResizeEnd=new CtrlEvent(this)}};function ResizeProperties(){}ResizeProperties.Const={LEFT:"LEFT",BOTTOM:"BOTTOM",ALL:"ALL",PROPERTY_SEPARATOR:";"};ResizeProperties.prototype={ActiveResize:function(h,g,c,b,f,d,a){this.miResizeWidth=parseInt(h);this.miResizeHeight=parseInt(g);this.miMaxResizeWidth=parseInt(c);this.miMaxResizeHeight=parseInt(b);this.miMinResizeWidth=parseInt(f);this.miMinResizeHeight=parseInt(d);this.miRatio=-1;if(a){this.miRatio=this.miMaxResizeWidth/this.miMaxResizeHeight}if(isNaN(this.miResizeHeight)){this.miResizeHeight=-1}if(isNaN(this.miMaxResizeHeight)){this.miMaxResizeHeight=-1}if(isNaN(this.miMinResizeHeight)){this.miMinResizeHeight=-1}if(isNaN(this.miResizeWidth)){this.miResizeWidth=-1}if(isNaN(this.miMaxResizeWidth)){this.miMaxResizeWidth=-1}if(isNaN(this.miMinResizeWidth)){this.miMinResizeWidth=-1}this.Resize();Utils.AddEvent(window,"resize",this.Resize,this)},Resize:function(){var a=Utils.GetViewportHeight();var f=Utils.GetViewportWidth();var c=-1;var b=-1;if(this.miResizeHeight>=0&&this.miResizeHeight<a){b=(a-this.miResizeHeight);if(this.miMaxResizeHeight>0&&this.miMaxResizeHeight<b){b=this.miMaxResizeHeight}if(this.miMinResizeHeight>0&&this.miMinResizeHeight>b){b=this.miMinResizeHeight}}if(this.miResizeWidth>=0&&this.miResizeWidth<f){c=(f-this.miResizeWidth);if(this.miMaxResizeWidth>0&&this.miMaxResizeWidth<c){c=this.miMaxResizeWidth}if(this.miMinResizeWidth>0&&this.miMinResizeWidth>c){c=this.miMinResizeWidth}}if(this.miRatio!=-1){var d=c/this.miRatio;if(d>b){c=b*this.miRatio}else{b=d}}if(b!=-1){$SetStyle(this.msID,"height",b+"px")}if(c!=-1){$SetStyle(this.msID,"width",c+"px")}}};function RulerProperties(){}RulerProperties.prototype={ActiveRuler:function(b,a){var c=this;window.setTimeout(function(){DragDropMgr.AddRuler(b,a,$Elt(c.msID).parentNode)},200)},Action_ClearRulers:function(){DragDropMgr.ClearRulers()}};function ScrollProperties(){}ScrollProperties.prototype={ActiveScroll:function(a){var d=$Elt(this.msID);this.mbScrollLeftToRight=false;var b=(parseInt(a));if(isNaN(b)){b=5}var c=null;if(isNaN(a)){a=Effect.Const.DEFAULT_DURATION}this.ReleaseScroll();this.mbScrollPause=false;this.mbInvert=true;var f=this;window.setTimeout(function(){f.EffectScroll()},50)},EffectScroll:function(){if(this.mbScrollPause){return}if(!this.mbScrollLeftToRight){$Elt(this.msID).scrollLeft=$Elt(this.msID).scrollLeft+this.miScrollStep}else{$Elt(this.msID).scrollLeft=$Elt(this.msID).scrollLeft-this.miScrollStep}if(this.mbInvert&&($Elt(this.msID).scrollLeft<=0||$Elt(this.msID).scrollLeft>=Utils.GetWidth($Elt(this.msID).firstChild,true)-Utils.GetWidth(this.msID,true))){this.mbScrollLeftToRight=!this.mbScrollLeftToRight}var a=this;window.setTimeout(function(){a.EffectScroll()},50)},ScrollPause:function(){this.mbScrollPause=!this.mbScrollPause;if(!this.mbScrollPause){var a=this;window.setTimeout(function(){a.EffectScroll()},50)}},ScrollToLeft:function(){this.mbScrollLeftToRight=false;this.mbInvert=false;this.miScrollStep=10;if(this.mbScrollPause){this.ScrollPause()}},ScrollToRight:function(){this.mbScrollLeftToRight=true;this.mbInvert=false;this.miScrollStep=10;if(this.mbScrollPause){this.ScrollPause()}},ReleaseScroll:function(){this.mbInvert=true;this.miScrollStep=2},ActiveSaveScrollPosition:function(a,b){if(a){if(this.msID in ScrollbarMgr.moScrollPosition){var h=ScrollbarMgr.moScrollPosition[this.msID][0];var g=ScrollbarMgr.moScrollPosition[this.msID][1];if(h>0){var c=$E(this.msID).height();var f=ScrollbarMgr.moScrollPosition[this.msID][3];if(c<f){h=h+(f/2)}}if(g>0){var d=$E(this.msID).width();var i=ScrollbarMgr.moScrollPosition[this.msID][2];if(d<i){g=g+(i/2)}}$Elt(this.msID).scrollTop=h;$Elt(this.msID).scrollLeft=g;if(b){var j=$Elt(this.msID);ScrollTargetMgr.RefreshVisibility(b,j.scrollTop>0,j.scrollLeft+j.clientWidth<j.scrollWidth,j.scrollTop+j.clientHeight<j.scrollHeight,j.scrollLeft>0)}}Utils.AddEvent(this.msID,"scroll",this.SaveScrollPosition,this)}else{delete ScrollbarMgr.moScrollPosition[this.msID];$Elt(this.msID).scrollTop=0;$Elt(this.msID).scrollLeft=0}},SaveScrollPosition:function(){ScrollbarMgr.moScrollPosition[this.msID]=[$Elt(this.msID).scrollTop,$Elt(this.msID).scrollLeft,$E(this.msID).width(),$E(this.msID).height()]},ActiveScrollToBottom:function(){$Elt(this.msID).scrollTop=$Elt(this.msID).scrollHeight},ActiveScrollToTop:function(){$Elt(this.msID).scrollTop=0}};function ScrollbarMgr(){this.moScrollbars=new FastArray()}ScrollbarMgr.moSingleton=null;ScrollbarMgr.Const={MGR_NAME:"Scrollbar"};ScrollbarMgr.moScrollPosition=new Object();ScrollbarMgr.GetInstance=function(){if(!ScrollbarMgr.moSingleton){ScrollbarMgr.moSingleton=new ScrollbarMgr()}return ScrollbarMgr.moSingleton};ScrollbarMgr.prototype={Add:function(a){this.moScrollbars.PushIfNotExists(a);Matrix3.RegisterInCache(a,ScrollbarMgr)},RefreshNode:function(a){this.moScrollbars.Remove(this.moScrollbars.GetIndex(a))},RefreshScrollbars:function(){for(var b=0,c=this.moScrollbars.GetSize();b<c;b++){try{$Elt(this.moScrollbars.Get(b)).scrollUpdate()}catch(a){}}},ReloadScrollPos:function(){for(var b in ScrollbarMgr.moScrollPosition){try{$Elt(b).scrollTop=ScrollbarMgr.moScrollPosition[b][0];$Elt(b).scrollLeft=ScrollbarMgr.moScrollPosition[b][1]}catch(a){}}}};function ScrollTargetProperties(a){this.msTarget=a.GetProperty(ScrollTargetProperties.Const.PROPERTY_TARGET);this.msDirection=a.GetProperty(ScrollTargetProperties.Const.PROPERTY_DIRECTION,ScrollTargetProperties.Const.DIRECTION_DOWN);this.msStep=a.GetProperty(ScrollTargetProperties.Const.PROPERTY_SCROLL_STEP,"64");this.moCtrl=a;ScrollTargetMgr.Register(this);var b=this;Utils.AddEvent(this.moCtrl,"mousedown",function(){b.MouseDownHandler()},this)}ScrollTargetProperties.Const={PROPERTY_TARGET:"ScrollTarget",PROPERTY_DIRECTION:"ScrollDirection",PROPERTY_SCROLL_STEP:"ScrollStep",DIRECTION_UP:"up",DIRECTION_RIGHT:"right",DIRECTION_DOWN:"down",DIRECTION_LEFT:"left"};ScrollTargetProperties.prototype={MouseDownHandler:function(){if(this.moCtrl!=null&&!this.moCtrl.GetProperty(ConstProperties.Const.DISABLED,false)){var d=ControlMgr.GetInstance().GetReference(this.msTarget);if(d!=null){var a;var c;if(this.msStep[this.msStep.length-1]=="%"){var b=parseInt(this.msStep);switch(this.msDirection.toLowerCase()){case ScrollTargetProperties.Const.DIRECTION_RIGHT:case ScrollTargetProperties.Const.DIRECTION_LEFT:c=d.miWidth*b/100;break;case ScrollTargetProperties.Const.DIRECTION_UP:case ScrollTargetProperties.Const.DIRECTION_DOWN:c=d.miHeight*b/100;break}}else{c=parseInt(this.msStep)}switch(this.msDirection.toLowerCase()){case ScrollTargetProperties.Const.DIRECTION_RIGHT:$(d.GetNode()).animate({scrollLeft:(d.GetNode().scrollLeft+c)},500);a=[c,0];break;case ScrollTargetProperties.Const.DIRECTION_UP:$(d.GetNode()).animate({scrollTop:(d.GetNode().scrollTop-c)},500);a=[0,-c];break;case ScrollTargetProperties.Const.DIRECTION_DOWN:$(d.GetNode()).animate({scrollTop:(d.GetNode().scrollTop+c)},500);a=[0,c];break;case ScrollTargetProperties.Const.DIRECTION_LEFT:$(d.GetNode()).animate({scrollLeft:(d.GetNode().scrollLeft-c)},500);a=[-c,0];break}ScrollTargetMgr.RefreshVisibility(this.msTarget,d.GetNode().scrollTop+a[1]>0,d.GetNode().scrollLeft+a[0]+d.GetNode().clientWidth<d.GetNode().scrollWidth,d.GetNode().scrollTop+a[1]+d.GetNode().clientHeight<d.GetNode().scrollHeight,d.GetNode().scrollLeft+a[0]>0)}}}};function ScrollTargetMgr(){this.moTargetsArray}ScrollTargetMgr.Register=function(a){if(this.moTargetsArray==null){this.moTargetsArray=new Object()}var b=a.msTarget;if(!this.moTargetsArray.hasOwnProperty(b)){this.moTargetsArray[b]=new Array()}this.moTargetsArray[b].push(a)};ScrollTargetMgr.RefreshAllVisibility=function(){if(this.moTargetsArray!=null){for(var b in this.moTargetsArray){var a=ControlMgr.GetInstance().GetReference(b);if(a!=null){ScrollTargetMgr.RefreshVisibility(b,a.scrollTop>0,a.scrollLeft+a.clientWidth<a.scrollWidth,a.scrollTop+a.clientHeight<a.scrollHeight,a.scrollLeft>0)}}}};ScrollTargetMgr.RefreshVisibility=function(f,d,c,a,b){if(this.moTargetsArray!=null){if(this.moTargetsArray.hasOwnProperty(f)){var k=this.moTargetsArray[f];for(var h=0,j=k.length;h<j;h++){var l=k[h];var g=false;switch(l.msDirection){case ScrollTargetProperties.Const.DIRECTION_UP:g=d;break;case ScrollTargetProperties.Const.DIRECTION_RIGHT:g=c;break;case ScrollTargetProperties.Const.DIRECTION_DOWN:g=a;break;case ScrollTargetProperties.Const.DIRECTION_LEFT:g=b;break}if(!g){$AddClass(l.moCtrl,"Disabled")}else{$RemoveClass(l.moCtrl,"Disabled")}}}}};function SelectAllProperties(){}SelectAllProperties.Const={CLASS_SELECT_ALL_CHECKBOX:"SelectAllChkClass",SUFFIX_SELECT_ALL:"_SelectAll",MODE_SELECT_WHEN_ALL_SELECTED:"SelectWhenAllSelected",MODE_SELECT_WHEN_NO_SELECTED:"SelectWhenNoSelected",OPTION_MODE:"mode",OPTION_IMAGE_ON:"imageon",OPTION_IMAGE_OFF:"imageoff",OPTION_CAN_INTERACT:"caninteract"};SelectAllProperties.prototype={ActiveSelectAll:function(a){this.moSelectAllChk=document.createElement("img");this.moSelectAllChk.style.position="absolute";this.moSelectAllChk.id=this.msID+SelectAllProperties.Const.SUFFIX_SELECT_ALL;this.moSelectAllChk.className=SelectAllProperties.Const.CLASS_SELECT_ALL_CHECKBOX;var h=Utils.GetOptions(a);this.msSelectAllMode=h[SelectAllProperties.Const.OPTION_MODE];this.msSelectAllImageOn=$Elt(Matrix3.Const.INFO_IMAGE_BASE).value+h[SelectAllProperties.Const.OPTION_IMAGE_ON];this.msSelectAllImageOff=$Elt(Matrix3.Const.INFO_IMAGE_BASE).value+h[SelectAllProperties.Const.OPTION_IMAGE_OFF];this.msbCanInteract=(!(SelectAllProperties.Const.OPTION_CAN_INTERACT in h)||h[SelectAllProperties.Const.OPTION_CAN_INTERACT]=="0")?false:true;this.mbSelectAllChecked=false;if(this.msbCanInteract){Utils.AddEvent(this.moSelectAllChk,"click",this.SelectAllChk,this)}var g=$Elt(this.msID).getElementsByTagName("input");for(var b=0,c=g.length;b<c;b++){var f=g.item(b);if(f.type=="checkbox"){var j=this;var d=$Control(f.id,CheckBoxCtrl.Const.CONTROL_NAME);if(!d.Event_Change){d.Event_Change_Setup()}d.Event_Change.Subscribe(function(){j.UpdateSelectAllCheckbox()})}}$Elt(this.msID).appendChild(this.moSelectAllChk);this.UpdateSelectAllCheckbox()},UpdateSelectAllCheckbox:function(){var h=$Elt(this.msID).getElementsByTagName("input");var a=true;var b=true;for(var d=0,f=h.length;d<f;d++){var g=h.item(d);if(g.type=="checkbox"&&g.id!=this.msID+SelectAllProperties.Const.SUFFIX_SELECT_ALL){if(g.checked){b=false}else{a=false}}}var c=false;if(a||(b&&this.msSelectAllMode==SelectAllProperties.Const.MODE_SELECT_WHEN_NO_SELECTED)){c=true}this.moSelectAllChk.src=(c)?this.msSelectAllImageOn:this.msSelectAllImageOff;this.mbSelectAllChecked=c},SelectAllChk:function(){var a=!(this.mbSelectAllChecked);this.moSelectAllChk.src=(a)?this.msSelectAllImageOn:this.msSelectAllImageOff;this.mbSelectAllChecked=a;if(this.msSelectAllMode==SelectAllProperties.Const.MODE_SELECT_WHEN_NO_SELECTED){a=!a}if(this.msSelectAllMode==SelectAllProperties.Const.MODE_SELECT_WHEN_ALL_SELECTED||!a){var f=$Elt(this.msID).getElementsByTagName("input");for(var b=0,c=f.length;b<c;b++){var d=f.item(b);if(d.type=="checkbox"&&d.id!=this.msID+SelectAllProperties.Const.SUFFIX_SELECT_ALL){$Control(d.id,CheckBoxCtrl.Const.CONTROL_NAME).SetChecked(a)}}}}};function SelectionProperties(){}SelectionProperties.prototype={ActiveSelection:function(g,a,c,d,h,b,f){var i=this.msID+((h)?h:"");this.moSelectionItem=new SelectionItem(i,a,c,d,b,f,this);MultipleSelectionMgr.GetInstance().Add(g,this.moSelectionItem)},Event_SelectionChange_Setup:function(){this.Event_SelectionChange=new CtrlEvent(this)},Action_InvertSelectionItem:function(a){this.moSelectionItem.ChangeState(a)},Event_DoubleClick_Setup:function(){this.Event_DoubleClick=new CtrlEvent(this)}};function SequenceLoadingProperties(a){this.msID=a.GetVFormId();this.moControl=a;this.iLowestAskedIndex=Number.MAX_VALUE;this.iHightestAskedIndex=Number.MIN_VALUE;this.miPrepositioningOffset=null;this.miSelectedTemplateIndex=null;this.moScrollTween=null;this.moCoveringItemTween=null;this.moTLMaskTween=null;this.moBRMaskTween=null;this.miListOffset=0;SequenceLoadingMgr.GetInstance().Register(this.msID,this);Matrix3.RegisterInCache(this.msID,SequenceLoadingMgr);var b=a.GetProperty(ConstProperties.Const.PROPERTY_VALUE_HORIZONTAL,ConstProperties.Const.PROPERTY_VALUE_HORIZONTAL)==ConstProperties.Const.PROPERTY_VALUE_HORIZONTAL;this.mbIsHorizontal=(b&&a.GetOriginalWidth()==-1)||(!b&&a.miHeight!=-1);this.mbCoverEnabled=a.GetProperty(SequenceLoadingProperties.Const.PROPERTY_SEQUENCE_LOADING_COVER_EFFECT);this.mbShowMask=a.GetProperty(SequenceLoadingProperties.Const.PROPERTY_SEQUENCE_LOADING_SHOW_MASK);Utils.AddEvent(window,"keydown",this.KeyDownHandler,this);Utils.AddEvent(this.moControl,"touchstart",this.TouchStart,this);Utils.AddEvent(this.moControl,"touchmove",this.TouchMove,this);Utils.AddEvent(this.moControl,"touchend",this.TouchEnd,this);if(this.mbShowMask){this.moTopLeftMask=document.createElement("div");$AddClass(this.moTopLeftMask,"ABS");$SetStyle(this.moTopLeftMask,"left",0+"px");$SetStyle(this.moTopLeftMask,"top",0+"px");$SetStyle(this.moTopLeftMask,"width",100+"px");$SetStyle(this.moTopLeftMask,"height",100+"px");var d=a.GetProperty(SequenceLoadingProperties.Const.PROPERTY_SEQUENCE_LOADING_MASK_SKIN);if(d&&d!=""){$AddClass(this.moTopLeftMask,d)}var c=document.createElement("div");$AddClass(c,"BG");this.moTopLeftMask.appendChild(c);this.moBotRightMask=this.moTopLeftMask.cloneNode(true);a.moParent.GetNode().appendChild(this.moTopLeftMask);a.moParent.GetNode().appendChild(this.moBotRightMask);Utils.AddEvent(this.moTopLeftMask,"click",this.PrevClickHandler,this);Utils.AddEvent(this.moBotRightMask,"click",this.NextClickHandler,this)}this.mdAutoScrollSpeed=a.GetProperty("AutoscrollSpeed");this.moAutoScroll=null;this.mbAutoPlay=a.GetProperty(SlideshowCtrl.Const.PROPERTY_AUTO_PLAY,false);this.miAutoPlayDelay=a.GetProperty(SlideshowCtrl.Const.PROPERTY_DELAY,4000);this.moAutoPlay=null}function SequenceLoadingMgr(){this.moTable=new Object();this.moPrevBtnTable=new Object();this.moNextBtnTable=new Object();this.miPreloadProgrammed=0}SequenceLoadingMgr.Const={MGR_NAME:"SequenceLoading"};SequenceLoadingMgr.GetInstance=function(){if(SequenceLoadingMgr.moInstance==null){SequenceLoadingMgr.moInstance=new SequenceLoadingMgr()}return SequenceLoadingMgr.moInstance};SequenceLoadingMgr.prototype={Register:function(b,a){this.moTable[b]=a},Unregister:function(a){if(this.moTable.hasOwnProperty(a)){delete this.moTable[a]}},Get:function(a){if(this.moTable.hasOwnProperty(a)){return this.moTable[a]}else{return null}},RegisterButton:function(a){var c=a.GetVFormId();if(a.HasProperty(ConstProperties.Const.SEQUENCE_LOADING_PREV)){var b=ControlMgr.GetInstance().GetReference(a.GetProperty(ConstProperties.Const.SEQUENCE_LOADING_PREV));if(b==null){this.moPrevBtnTable[c]=a}}else{var b=ControlMgr.GetInstance().GetReference(a.GetProperty(ConstProperties.Const.SEQUENCE_LOADING_NEXT));if(b==null){this.moNextBtnTable[c]=a}}this.UpdateNavButtonVisibility(c)},UpdateNavButtonVisibility:function(a){var c=this.moPrevBtnTable[a];var b=this.moNextBtnTable[a];var d=this.moTable[a];if(d!=null){if(c!=null){if(d.HasPotentialPreviousItem()){$RemoveClass(c,"InvisibleC")}else{$AddClass(c,"InvisibleC")}}if(b!=null){if(d.HasPotentialNextItem()){$RemoveClass(b,"InvisibleC")}else{$AddClass(b,"InvisibleC")}}}},PrePositioning:function(){for(var b in this.moTable){var a=this.moTable[b];a.PrePositioning()}},RefreshNode:function(a){if(a&&this.moTable.hasOwnProperty(a)){this.moTable[a].Recycle();delete this.moTable[a]}},NavigateSequence:function(a,b){var d=this.moTable[b];if(d==null){var c=b.lastIndexOf(Matrix3.Const.SEPARATOR_HIERARCHY);if(c!=-1){this.NavigateSequence(a,b.substr(0,c))}}else{if(a){d.NextClickHandler()}else{d.PrevClickHandler()}}},PostPositioning:function(){for(var b in this.moTable){var a=this.moTable[b];a.ScrollToSelectedIndex(!a.UsingTransition())}if(this.miPreloadProgrammed!=0){clearTimeout(this.miPreloadProgrammed)}this.miPreloadProgrammed=setTimeout("SequenceLoadingMgr.GetInstance().PrivateLaunchPreloadCalls()",500)},PrivateLaunchPreloadCalls:function(){this.miPreloadProgrammed=0;for(var b in this.moTable){var a=this.moTable[b];if(a.LaunchPreloadCalls()){break}}}};SequenceLoadingProperties.Const={PROPERTY_SEQUENCE_LOADING:"SL",PROPERTY_SEQUENCE_LOADING_PRELOAD_SIZE:"SLPS",PROPERTY_SEQUENCE_LOADING_UNLOAD_SIZE:"SLUS",PROPERTY_SEQUENCE_LOADING_SELECTED:"SLS",PROPERTY_SEQUENCE_LOADING_FIRST:"SLF",PROPERTY_SEQUENCE_LOADING_LAST:"SLL",PROPERTY_SEQUENCE_LOADING_INDEX:"SLI",PROPERTY_SEQUENCE_LOADING_SHOW_MASK:"SLSM",PROPERTY_SEQUENCE_LOADING_COVER_EFFECT:"SLCE",PROPERTY_SEQUENCE_LOADING_MASK_SKIN:"SLMS",EVENT_LOAD:"LOAD"};SequenceLoadingProperties.ConfigureControl=function(a){if(a.HasProperty(SequenceLoadingProperties.Const.PROPERTY_SEQUENCE_LOADING)){new SequenceLoadingProperties(a)}else{if(a.HasProperty(SequenceLoadingProperties.Const.PROPERTY_SEQUENCE_LOADING_SELECTED)){var c=SequenceLoadingMgr.GetInstance().Get(a.GetVFormId());if(c!=null){c.SetSelectedIndex(parseInt(a.GetProperty(SequenceLoadingProperties.Const.PROPERTY_SEQUENCE_LOADING_INDEX)))}}if(a.HasProperty(SequenceLoadingProperties.Const.PROPERTY_SEQUENCE_LOADING_FIRST)){var c=SequenceLoadingMgr.GetInstance().Get(a.GetVFormId());if(c!=null){c.SetFirstIndex(parseInt(a.GetProperty(SequenceLoadingProperties.Const.PROPERTY_SEQUENCE_LOADING_INDEX)))}}if(a.HasProperty(SequenceLoadingProperties.Const.PROPERTY_SEQUENCE_LOADING_LAST)){var c=SequenceLoadingMgr.GetInstance().Get(a.GetVFormId());if(c!=null){c.SetLastIndex(parseInt(a.GetProperty(SequenceLoadingProperties.Const.PROPERTY_SEQUENCE_LOADING_INDEX)))}}if(a.HasProperty(SequenceLoadingProperties.Const.PROPERTY_SEQUENCE_LOADING_INDEX)){var c=SequenceLoadingMgr.GetInstance().Get(a.GetVFormId());var b=parseInt(a.GetProperty(SequenceLoadingProperties.Const.PROPERTY_SEQUENCE_LOADING_INDEX));if(c.HasASelectedIndex()&&c.GetSelectedIndex()==b){setTimeout(function(){c.ScrollToSelectedIndex(!c.UsingTransition())},0)}}}};SequenceLoadingProperties.prototype={SetSelectedIndex:function(a){var b=!this.mbSelectedIndexKnown;this.mbSelectedIndexKnown=true;this.miSelectedIndex=a;this.ScrollToSelectedIndex(b);SequenceLoadingMgr.GetInstance().UpdateNavButtonVisibility(this.msID)},SetFirstIndex:function(a){this.mbFirstIndexKnown=true;this.miFirstIndex=a;SequenceLoadingMgr.GetInstance().UpdateNavButtonVisibility(this.msID)},SetLastIndex:function(a){this.mbLastIndexKnown=true;this.miLastIndex=a;SequenceLoadingMgr.GetInstance().UpdateNavButtonVisibility(this.msID)},GetSelectedIndex:function(){return this.miSelectedIndex},HasASelectedIndex:function(){return this.mbSelectedIndexKnown},HasPotentialItemsBefore:function(a){return !this.mbFirstIndexKnown||this.mbFirstIndexKnown&&a>this.miFirstIndex},HasPotentialItemsAfter:function(a){return !this.mbLastIndexKnown||this.mbLastIndexKnown&&a<this.miLastIndex},HasPotentialPreviousItem:function(){if(this.mbSelectedIndexKnown){return this.HasPotentialItemsBefore(this.miSelectedIndex)}else{return false}},HasPotentialNextItem:function(){if(this.mbSelectedIndexKnown){return this.HasPotentialItemsAfter(this.miSelectedIndex)}else{return false}},LaunchPreloadCalls:function(){var c=false;if(Matrix3.mbEvent){c=true}else{var r=this.moControl;var t=r.moParent;if(this.mbIsHorizontal){this.miControlSize=t.miWidth}else{this.miControlSize=t.miHeight}this.miScrollOffset=this.GetScrollOffset();var m=parseInt(r.GetProperty(SequenceLoadingProperties.Const.PROPERTY_SEQUENCE_LOADING_PRELOAD_SIZE,this.miControlSize*2));var n=parseInt(r.GetProperty(SequenceLoadingProperties.Const.PROPERTY_SEQUENCE_LOADING_UNLOAD_SIZE,m*4));var a=r.GetContainerForChildren();if(a.length>0&&!Matrix3.mbEvent){var q=(a[0]);var u=(a[a.length-1]);var d=q.GetProperty(SequenceLoadingProperties.Const.PROPERTY_SEQUENCE_LOADING_INDEX);var i=u.GetProperty(SequenceLoadingProperties.Const.PROPERTY_SEQUENCE_LOADING_INDEX);var l=0;var k;var f;if(this.mbIsHorizontal){k=q.miXOff-l;f=u.miXOff+u.miWidth-l}else{k=q.miYOff-l;f=u.miYOff+u.miHeight-l}this.miScrollOffset-=l;var v;if(k>(this.miScrollOffset-m)&&this.HasPotentialItemsBefore(d)&&d-1<this.iLowestAskedIndex){c=true;v="<"+d.toString();this.iLowestAskedIndex=d-1}if(f<(this.miScrollOffset+this.miControlSize+m)&&this.HasPotentialItemsAfter(i)&&i+1>this.iHightestAskedIndex){if(c){v+=";>"+i.toString()}else{c=true;v=">"+i.toString()}this.iHightestAskedIndex=i+1}if(c){Matrix3.mbModal=false;Matrix3.mbInhibitPositioning=true;Matrix3.AddEvent(this.moControl.GetVFormId(),SequenceLoadingProperties.Const.EVENT_LOAD,Matrix3.Const.RETURNTYPE_VIEWSTATE,Matrix3.Const.DELAY_IMMEDIAT,v,null,null,false)}var j=this.miScrollOffset-n;var g=this.miScrollOffset+this.miControlSize+n;var b=new Array();for(var h=0,o=a.length;h<o;h++){var p=a[h];if(p.miXOff<j){this.iLowestAskedIndex=Math.max(this.iLowestAskedIndex,p.GetProperty(SequenceLoadingProperties.Const.PROPERTY_SEQUENCE_LOADING_INDEX)+2);this.miSelectedIndex=Math.max(this.miSelectedIndex,p.GetProperty(SequenceLoadingProperties.Const.PROPERTY_SEQUENCE_LOADING_INDEX)+1);b.push(p.msId);this.miPrepositioningOffset=null}if(p.miXOff>g){this.iHightestAskedIndex=Math.min(this.iHightestAskedIndex,p.GetProperty(SequenceLoadingProperties.Const.PROPERTY_SEQUENCE_LOADING_INDEX)-2);this.miSelectedIndex=Math.min(this.miSelectedIndex,p.GetProperty(SequenceLoadingProperties.Const.PROPERTY_SEQUENCE_LOADING_INDEX)-1);b.push(p.msId);this.miPrepositioningOffset=null}}for(var h=0,o=b.length;h<o;h++){Matrix3.RemoveVForm(b[h])}}}return c},UsingTransition:function(){return this.mbSlideWithTransition},PrePositioning:function(){var h=this.moControl;var i=h.moParent;if(this.moScrollTween){this.moScrollTween.stop()}this.miPrepositioningOffset=null;if(this.mbSelectedIndexKnown){var b;var a=h.GetContainerForChildren();if(a.length>0){var g=(a[0]);var j=(a[a.length-1]);var d=g.GetProperty(SequenceLoadingProperties.Const.PROPERTY_SEQUENCE_LOADING_INDEX);var f=j.GetProperty(SequenceLoadingProperties.Const.PROPERTY_SEQUENCE_LOADING_INDEX);b=this.miSelectedIndex>=d&&this.miSelectedIndex<=f;if(b){var k=a[this.miSelectedIndex-d];if(k.miWidth!=-1&&k.miHeight!=-1){var c;if(this.mbIsHorizontal){c=k.miXOff+k.miWidth/2-i.miWidth/2}else{c=k.miYOff+k.miHeight/2-i.miHeight/2}this.miPrepositioningOffset=c-this.GetScrollOffset()}}}}},SetScrollOffset:function(b,a){if(!this.moAutoScroll){this.miListOffset=b;var c=this.moControl;this.SlideItem(c.GetNode(),-b,a)}},GetScrollOffset:function(){if(this.moAutoScroll){return(-this.moAutoScroll.mdOffset)}else{return this.miListOffset}},SlideItem:function(c,b,a){if(Utils.IsIE()){if(this.mbIsHorizontal){$(c).css("left",b+"px")}else{$(c).css("top",b+"px")}}else{if(a){var d=this.moControl.GetProperty(SlideshowCtrl.Const.PROPERTY_TRANSITION_DURATION,500)/1000;if(Utils.IsIPad()){c.style.webkitTransition="-webkit-transform "+d+"s ease-out"}else{if(this.mbIsHorizontal){c.style.webkitTransition="left "+d+"s ease-out";c.style.MozTransition="left "+d+"s ease-out"}else{c.style.webkitTransition="top "+d+"s ease-out";c.style.MozTransition="top "+d+"s ease-out"}}if(Matrix3.maPopupStack.length>0){var f=Matrix3.maPopupStack[Matrix3.maPopupStack.length-1];if(Utils.StartsWith(this.msID,f)){Matrix3.SuspendResponseHandling(d*1000)}}else{Matrix3.SuspendResponseHandling(d*1000)}}else{c.style.webkitTransition=null;c.style.MozTransition=null}if(this.mbIsHorizontal){if(Utils.IsIPad()){c.style.webkitTransform="translate3D("+b+"px, 0, 0)"}else{$(c).css("left",b+"px")}}else{if(Utils.IsIPad()){c.style.webkitTransform="translate3D(0, "+b+"px, 0)"}else{$(c).css("top",b+"px")}}}},ScrollToSelectedIndex:function(a){this.mbSlideWithTransition=!a;var k=this.moControl;var l=k.moParent;if(this.mbSelectedIndexKnown){var c;var b=k.GetContainerForChildren();if(b.length>0){var j=(b[0]);var m=(b[b.length-1]);var g=j.GetProperty(SequenceLoadingProperties.Const.PROPERTY_SEQUENCE_LOADING_INDEX);var h=m.GetProperty(SequenceLoadingProperties.Const.PROPERTY_SEQUENCE_LOADING_INDEX);c=this.miSelectedIndex>=g&&this.miSelectedIndex<=h;if(c){var p=b[this.miSelectedIndex-g];if(this.miSelectedTemplateIndex!=this.miSelectedIndex){this.miSelectedTemplateIndex=this.miSelectedIndex;if(p.HasProperty(ConstProperties.Const.SEQUENCE_LOADING_CONTEXTUAL_TABLE)){DynamicTemplatesMgr.FillContextualization($PI(p.GetVFormId()),p.GetProperty(ConstProperties.Const.SEQUENCE_LOADING_CONTEXTUAL_TABLE))}if(this.moControl.HasProperty("SLPCE")){if(this.miPageChangeProgrammed){clearTimeout(this.miPageChangeProgrammed)}var r=this;this.miPageChangeProgrammed=setTimeout(function(){Matrix3.mbModal=false;Matrix3.mbInhibitPositioning=true;Matrix3.AddEvent(r.moControl.GetVFormId(),"PAGE_CHANGE",Matrix3.Const.RETURNTYPE_VIEWSTATE,Matrix3.Const.DELAY_IMMEDIAT,r.miSelectedTemplateIndex.toString(),null,null,false)},k.GetProperty(SlideshowCtrl.Const.PROPERTY_TRANSITION_DURATION,500))}}var d;if(this.mbIsHorizontal){d=p.miXOff+p.miWidth/2-l.miWidth/2}else{d=p.miYOff+p.miHeight/2-l.miHeight/2}var i=k.GetProperty(SlideshowCtrl.Const.PROPERTY_TRANSITION_DURATION,500);if(!this.mbSlideWithTransition){i=0}if(this.miPrepositioningOffset!=null){var f=this.GetScrollOffset()-(d-this.miPrepositioningOffset);if(!this.moAutoScroll){this.SetScrollOffset(d-this.miPrepositioningOffset,false)}else{this.moAutoScroll.mdOffset=this.miPrepositioningOffset-d;this.moAutoScroll.Refresh()}}if(i==0||this.mbCoverEnabled){if(this.mbCoverEnabled&&i>0){var f=this.GetScrollOffset()-d;var n=null;if(f<0){n=p;this.SlideItem(n,-f,false);if(this.miSelectedIndex-1>=g&&this.miSelectedIndex-1<=h){var o=b[this.miSelectedIndex-1-g];this.SlideItem(o,-f,false)}}else{if(f>0){this.SlideItem(p,0,false);if(this.miSelectedIndex+1>=g&&this.miSelectedIndex+1<=h){n=b[this.miSelectedIndex+1-g];this.SlideItem(n,-f,false)}}}if(n!=null){var r=this;setTimeout(function(){r.SlideItem(n,0,true)},0)}}this.SetScrollOffset(d,false);if(this.mdAutoScrollSpeed&&!this.moAutoScroll){AutoScroll.Activate(this.moControl.moParent.msId,this.mdAutoScrollSpeed);this.moAutoScroll=AutoScroll.GetAutoscrollProps(this.moControl.moParent.msId);var t=this;this.miPreloadTimer=setInterval(function(){t.ScrollToSelectedIndex()},2000);this.moAutoScroll.mdOffset=-d;this.moAutoScroll.Refresh()}if(this.mbAutoPlay&&!this.moAutoPlay){var t=this;this.moAutoPlay=setInterval(function(){t.SetSelectedIndex(t.GetSelectedIndex()+1)},this.miAutoPlayDelay)}}else{var r=this;setTimeout(function(){r.SetScrollOffset(d,true)},0)}if(this.mbShowMask){if(this.moTLMaskTween){this.moTLMaskTween.stop(true);this.moBRMaskTween.stop(true)}$SetStyle(this.moTopLeftMask,"width",l.miWidth+"px");$SetStyle(this.moTopLeftMask,"height",k.miHeight+"px");$SetStyle(this.moBotRightMask,"width",l.miWidth+"px");$SetStyle(this.moBotRightMask,"height",k.miHeight+"px");this.SlideItem(this.moTopLeftMask,p.miXOff-d-l.miWidth,!a);this.SlideItem(this.moBotRightMask,p.miXOff-d+p.miWidth,!a)}var q=this;setTimeout(function(){q.LaunchPreloadCalls()},i)}else{this.LaunchPreloadCalls()}}}this.miPrepositioningOffset=null},SelectedItemLoaded:function(){var b=false;if(this.mbSelectedIndexKnown){var g=(this.moControl);var a=g.GetContainerForChildren();if(a.length>0){var f=(a[0]);var h=(a[a.length-1]);var c=f.GetProperty(SequenceLoadingProperties.Const.PROPERTY_SEQUENCE_LOADING_INDEX);var d=h.GetProperty(SequenceLoadingProperties.Const.PROPERTY_SEQUENCE_LOADING_INDEX);b=this.miSelectedIndex>=c&&this.miSelectedIndex<=d}}return b},PrevClickHandler:function(){if(this.HasPotentialPreviousItem()&&this.SelectedItemLoaded()&&!this.mdAutoScrollSpeed&&!Matrix3.mbEvent){if(this.moAutoPlay){clearTimeout(this.moAutoPlay);this.moAutoPlay=null}this.SetSelectedIndex(this.GetSelectedIndex()-1)}},NextClickHandler:function(){if(this.HasPotentialNextItem()&&this.SelectedItemLoaded()&&!this.mdAutoScrollSpeed&&!Matrix3.mbEvent){if(this.moAutoPlay){clearTimeout(this.moAutoPlay);this.moAutoPlay=null}this.SetSelectedIndex(this.GetSelectedIndex()+1)}},KeyDownHandler:function(a){var a=$.event.fix(a);var b=a.target;if(b!=null&&b.type!="textarea"&&b.type!="text"){if(Matrix3.maPopupStack.length>0){var c=Matrix3.maPopupStack[Matrix3.maPopupStack.length-1];if(!Utils.StartsWith(this.msID,c)){return}}switch(a.keyCode){case 37:this.PrevClickHandler();break;case 39:this.NextClickHandler();break}}},TouchStart:function(a){a.changedTouches[0]=$.event.fix(a.changedTouches[0]);this.miTouchX=this.miLastX=a.changedTouches[0].pageX;this.miTouchY=a.changedTouches[0].pageY;this.mdXSpeed=0;this.miOnTouchOffset=this.GetScrollOffset()},TouchMove:function(a){a.changedTouches[0]=$.event.fix(a.changedTouches[0]);var d=a.changedTouches[0].pageX;var b=this.miTouchX-d;var c=this.miTouchY-a.changedTouches[0].pageY;this.mdXSpeed=(this.mdXSpeed+(d-this.miLastX))/2;this.miLastX=d;this.SetScrollOffset(this.miOnTouchOffset+b,false);if(c*c<b*b&&c*c<500){Utils.StopPropagation(a)}},TouchEnd:function(a){a.changedTouches[0]=$.event.fix(a.changedTouches[0]);var b=this.miTouchX-a.changedTouches[0].pageX;var d=this.miTouchY-a.changedTouches[0].pageY;var c=b*b;if(d*d<c){if((c>30000&&b*this.mdXSpeed>0)||(this.mdXSpeed*this.mdXSpeed)>100){if(this.mdXSpeed>0&&this.HasPotentialPreviousItem()&&this.SelectedItemLoaded()&&!this.mdAutoScrollSpeed){this.SetSelectedIndex(this.GetSelectedIndex()-1)}else{if(this.mdXSpeed<0&&this.HasPotentialNextItem()&&this.SelectedItemLoaded()&&!this.mdAutoScrollSpeed){this.NextClickHandler()}else{this.SetScrollOffset(this.miOnTouchOffset,true)}}}else{this.SetScrollOffset(this.miOnTouchOffset,true)}}else{this.SetScrollOffset(this.miOnTouchOffset,true)}},Recycle:function(){if(this.miPreloadTimer){clearTimeout(this.miPreloadTimer)}if(this.moAutoPlay){clearTimeout(this.moAutoPlay)}SequenceLoadingMgr.GetInstance().Unregister(this.msID)}};var SizeLearningMgr={KEY_SIZE_TABLE:"ST",KEY_RENDER_MODE:"RM",maRegisteredControls:null,mbTransferProgrammed:false,RegisterControl:function(a){if(!this.maRegisteredControls){this.maRegisteredControls=new Array()}this.maRegisteredControls.push(a)},PositioningFinished:function(){if(this.maRegisteredControls&&this.maRegisteredControls.length>0&&!this.mbTransferProgrammed&&ImageMgr.GetInstance().miCpt==0){SizeLearningMgr.TranferKnowledgeToServer();this.mbTransferProgrammed=true}},TranferKnowledgeToServer:function(){this.mbTransferProgrammed=false;var c=new Object();while(this.maRegisteredControls.length>0){var b=this.maRegisteredControls.pop();var a=new Array();a.push(b.GetWidth());a.push(b.GetHeight());var d=b.GetId();d+=":"+Matrix3.moVFormTable[b.GetVFormId()][VFormInfoItem.Const.FIELD_SUB_ID];c[d]=a}var f=SizeLearningMgr.KEY_SIZE_TABLE+"="+JSON.stringify(c)+"&"+SizeLearningMgr.KEY_RENDER_MODE+"=Javascript2";$.ajax({type:"POST",url:"htm/PosLearning.aspx",data:f})}};function SlideShowProperties(){}SlideShowProperties.Const={SLIDESHOW_DELAY:"slideshowdelay",ANIMATION_DELAY:"animationdelay",ID_PLAY_PAUSE:"_PlayPauseID",CLASS_PAUSE:"SlidePauseClass",DEFAULT_ANIMATION_DELAY:500,DEFAULT_SLIDESHOW_DELAY:5000};SlideShowProperties.prototype={ActiveSlideShow:function(a){this.moOptions=Utils.GetOptions(a);this.moOptions[SlideShowProperties.Const.ANIMATION_DELAY]=parseInt(this.moOptions[SlideShowProperties.Const.ANIMATION_DELAY]);this.moOptions[SlideShowProperties.Const.SLIDESHOW_DELAY]=parseInt(this.moOptions[SlideShowProperties.Const.SLIDESHOW_DELAY]);if(isNaN(this.moOptions[SlideShowProperties.Const.ANIMATION_DELAY])){this.moOptions[SlideShowProperties.Const.ANIMATION_DELAY]=SlideShowProperties.Const.DEFAULT_ANIMATION_DELAY}if(isNaN(this.moOptions[SlideShowProperties.Const.SLIDESHOW_DELAY])){this.moOptions[SlideShowProperties.Const.SLIDESHOW_DELAY]=SlideShowProperties.Const.DEFAULT_SLIDESHOW_DELAY}this.moOptions[SlideShowProperties.Const.ANIMATION_DELAY]=this.moOptions[SlideShowProperties.Const.ANIMATION_DELAY]/1000;this.moNodeList=$Elt(this.msID).childNodes;this.miCurrentItem=0;this.mbSlideShowPause=false;$SetStyle(this.msID,"position","relative");var b=this;b.Slide()},ToggleSlidePlayPause:function(){this.mbSlideShowPause=!this.mbSlideShowPause;if(this.mbSlideShowPause){$AddClass(this.msID+SlideShowProperties.Const.ID_PLAY_PAUSE,SlideShowProperties.Const.CLASS_PAUSE)}else{$RemoveClass(this.msID+SlideShowProperties.Const.ID_PLAY_PAUSE,SlideShowProperties.Const.CLASS_PAUSE)}},Slide:function(){var c=this;if(this.mbSlideShowPause){window.setTimeout(function(){c.Slide()},c.moOptions[SlideShowProperties.Const.SLIDESHOW_DELAY])}else{var a=this.moNodeList.item(this.miCurrentItem);var b=Effect.Fade(a,this.moOptions[SlideShowProperties.Const.ANIMATION_DELAY]);this.miCurrentItem++;if(this.miCurrentItem==this.moNodeList.length-1){this.miCurrentItem=0}oNextNode=this.moNodeList.item(this.miCurrentItem);$SetStyle(oNextNode,"zIndex","0");$SetStyle(a,"zIndex","1");$SetStyle(oNextNode,"opacity","1");$SetStyle(oNextNode,"display","block");b.onComplete.subscribe(function(){window.setTimeout(function(){c.Slide()},c.moOptions[SlideShowProperties.Const.SLIDESHOW_DELAY])});b.animate()}}};function TempSourceProperties(){}TempSourceProperties.prototype={ActiveTempSource:function(a){this.msTempSource=a},Action_SwitchToTempSource:function(){var b=$Elt(this.msID).getElementsByTagName("img");if(b.length>0){var a=b.item(0);if(a&&a.src!=this.msTempSource){var c=new Image();c.src=this.msTempSource;var d=this;c.onload=function(){var f=$Elt(d.msID);f.moLinkedImage=a;ImageMgr.GetInstance().Push(a,f);a.src=d.msTempSource}}}}};function TooltipProperties(c,d,b,a,f){this.moControl=c;this.msTooltipID=d;this.miHideDelay=a;this.miShowDelay=b;this.msTooltipPosition=f;this.mbTooltipInitialized=false;this.mbOverControl=false;this.mbOverTooltip=false;this.mbTooltipAsked=false;this.mbTooltipShown=false;this.mbTooltipShared=c.GetProperty(TooltipProperties.Const.PROPERTY_TOOLTIP_SHARED,false);this.oLastEvt=null;Utils.AddEvent(this.moControl,"mouseover",this.OverControl,this);Utils.AddEvent(this.moControl,"mouseout",this.OutControl,this);if(this.msTooltipPosition==TooltipProperties.Const.POSITION_FOLLOW_MOUSE){Utils.AddEvent(this.moControl,"mousemove",this.MouseMoveHandler,this)}TooltipMgr.moTable[c.GetId()]=this;Matrix3.RegisterInCache(c.GetId(),TooltipMgr)}function TooltipMgr(){this.moTable=new Object()}TooltipMgr=new TooltipMgr();TooltipMgr.Const={MGR_NAME:"Tooltips"};TooltipMgr.RefreshNode=function(a){if(a&&this.moTable.hasOwnProperty(a)){this.moTable[a].Recycle();delete this.moTable[a]}};TooltipProperties.Const={POSITION_NONE:"None",POSITION_OFFSET:"Offset",POSITION_OFFSET_NO_LIMIT:"OffsetNoLimit",POSITION_CENTER_ON_PARENT:"CenterOnParent",POSITION_ON_PARENT:"OnParent",POSITION_FOLLOW_MOUSE:"FollowMouse",POSITION_VERTICAL_OFFSET_NO_LIMIT:"VerticalOffsetNoLimit",EVENT_TOOLTIP_SHOWN:"TOOLTIP_SHOWN",PROPERTY_TOOLTIP_ID:"TooltipID",PROPERTY_SHOW_DELAY:"ShowDelay",PROPERTY_HIDE_DELAY:"HideDelay",PROPERTY_TOOLTIP_POSITION:"TooltipPosition",PROPERTY_MOUSE_OFFSET_X:"MouseOffsetX",PROPERTY_MOUSE_OFFSET_Y:"MouseOffsetY",PROPERTY_TEMP_IMG:"TooltipTempImg",PROPERTY_TOOLTIP_SHARED:"TooltipShared",PROPERTY_TOOLTIP_META_TEXT:"TTMT",PROPERTY_TOOLTIP_SHOWN_EVENT_ARG:"TSEA",PROPERTY_TEMPLATED_CONTROLS:"TemplatedCtrls",PROPERTY_TO_REFRESH_VFORM:"ToRefreshVForm",PROPERTY_VFORM_TO_HIDE:"VFormToHide",KEY_TOOLTIP_IMAGE_CONTROL_SIZE:"TTICS",PROPERTY_REFRESH_WITH_TOOLTIP:"RWT",ORGINIAL_SUFFIX:"_OriginalValue",LEFTMARKUP:"[",RIGHTMARKUP:"]"};TooltipProperties.ConfigureControl=function(a){var d=a.GetProperty(TooltipProperties.Const.PROPERTY_TOOLTIP_ID);var f=a.GetProperty(TooltipProperties.Const.PROPERTY_TOOLTIP_POSITION);if(d!=null&&d!=""&&f!=null&&f!=""){var c=a.GetProperty(TooltipProperties.Const.PROPERTY_SHOW_DELAY,0.5)*1000;var b=a.GetProperty(TooltipProperties.Const.PROPERTY_HIDE_DELAY,0)*1000;new TooltipProperties(a,d,c,b,f)}};TooltipProperties.prototype={OverControl:function(a){this.mbOverControl=true;this.UpdateState(a);if(TooltipProperties.moActiveTooltip&&TooltipProperties.moActiveTooltip.mbTooltipShown&&TooltipProperties.moActiveTooltip!=this){TooltipProperties.moActiveTooltip.HideTooltip()}},OutControl:function(a){if(this.AreContainedDropDownOpen()){}else{this.UpdateOverStates(a);this.UpdateState(a)}},OverTooltip:function(a){if(TooltipProperties.moActiveTooltip==this){this.mbOverTooltip=true;this.UpdateState(a)}},OutTooltip:function(a){if(TooltipProperties.moActiveTooltip==this){if(this.AreContainedDropDownOpen()){}else{this.UpdateOverStates(a);this.UpdateState(a)}}},UpdateOverStates:function(a){this.mbOverControl=this.moControl.IsUnderMouse(a);if(this.moTooltip!=null&&this.mbTooltipShown){this.mbOverTooltip=this.moTooltip.IsUnderMouse(a)}else{this.mbOverTooltip=false}},AreContainedDropDownOpen:function(){var a=false;return a},UpdateState:function(a){if((this.mbOverControl||this.mbOverTooltip)&&!DragDropMgr.IsDrag()){if(!this.mbTooltipShown&&!this.mbTooltipAsked){this.mbTooltipAsked=true;var b=this;this.miShowTimeoutID=setTimeout(function(){b.ShowTooltip(a)},this.miShowDelay)}clearTimeout(this.miHideTimeoutID)}else{if(this.mbTooltipShown){var b=this;this.miHideTimeoutID=setTimeout(function(){b.HideTooltip()},this.miHideDelay)}else{if(this.msTooltipPosition==TooltipProperties.Const.POSITION_FOLLOW_MOUSE){$E(this.moControl).unbind("mousemove",this.MouseMoveHandler)}}clearTimeout(this.miShowTimeoutID);this.mbTooltipAsked=false}},ShowTooltip:function(c){if(!this.mbTooltipInitialized){this.moTooltip=$PI(this.msTooltipID);if(this.moTooltip==null){if(this.mbTooltipShared){this.moTooltip=ControlMgr.GetInstance().GetReference(this.msTooltipID);if(this.moTooltip!=null){this.msTooltipID=this.moTooltip.msId}else{return}}else{return}}}if(!this.mbTooltipInitialized||this.mbTooltipShared){if(this.msTooltipPosition==TooltipProperties.Const.POSITION_CENTER_ON_PARENT||this.msTooltipPosition==TooltipProperties.Const.POSITION_OFFSET){var d=this.moControl;while(d!=null){if(d.msCtrlType==PositionItem.Const.CONTROL_TYPE_POPUP){break}var b=DragDropMgr.GetDDObject(d.msId);if(b!=null){this.oDDProperty=b;this.oCurrentDragHandle=b.handleElId;b.setOuterHandleElId(this.moTooltip.msId);break}d=d.moParent}}}if(!this.mbTooltipInitialized){Utils.CreateReference(this.moTooltip.msId);this.moTooltip.moFloatingParent=PositionGroupProperties.GetSuitableDisplayHost(this.moTooltip,true);this.moTooltip.moFloatingParent.GetNode().appendChild(this.moTooltip.GetNode());if(this.msTooltipPosition==TooltipProperties.Const.POSITION_FOLLOW_MOUSE){this.miMouseOffsetX=parseInt(this.moControl.GetProperty(TooltipProperties.ConstPROPERTY_MOUSE_OFFSET_X,10));this.miMouseOffsetY=parseInt(this.moControl.GetProperty(TooltipProperties.ConstPROPERTY_MOUSE_OFFSET_Y,10))}Utils.AddEvent(this.moTooltip,"mouseover",this.OverTooltip,this);Utils.AddEvent(this.moTooltip,"mouseout",this.OutTooltip,this);var f=(/Firefox/i.test(navigator.userAgent))?"DOMMouseScroll":"mousewheel";Utils.AddEvent(this.moTooltip,f,this.HandleMouseWheel,this);if(this.mbTooltipShared){if(!this.moTooltip.HasProperty(TooltipProperties.Const.PROPERTY_TEMPLATED_CONTROLS)){this.ListContextualizedControls()}}this.mbTooltipInitialized=true}this.moTooltip.moPosDecider=this;$RemoveClass(this.moTooltip.GetNode(),"InvisibleC");this.moTooltip.GetNode().style.display="block";if(TooltipProperties.moActiveTooltip!=null&&TooltipProperties.moActiveTooltip.moTooltip!=this.moTooltip){TooltipProperties.moActiveTooltip.HideTooltip()}TooltipProperties.moActiveTooltip=this;this.mbTooltipShown=true;if(this.msTooltipPosition==TooltipProperties.Const.POSITION_FOLLOW_MOUSE){Utils.AddEvent(this.moTooltip,"mousemove",this.MouseMoveHandler,this);if(this.oLastEvt!=null){c=this.oLastEvt}}if(this.mbTooltipShared){this.FillContextualization()}this.PlaceTooltip(c);var a=$Control(this.moControl.msId,PanelAdvancedCtrl.Const.CONTROL_NAME).Event_TooltipShown;if(a!=null){a.Fire()}$(this.moTooltip.GetNode()).stop().fadeTo(0,0).fadeTo(100,1)},HideTooltip:function(){if(TooltipProperties.moActiveTooltip!=null&&TooltipProperties.moActiveTooltip!=this&&TooltipProperties.moActiveTooltip.moTooltip==this.moTooltip){return}TooltipProperties.moActiveTooltip=null;this.mbTooltipShown=false;this.mbTooltipAsked=false;$(this.moTooltip.GetNode()).stop().fadeOut(200,this.HideAnimationOver);if(this.oDDProperty!=null){this.oDDProperty.setHandleElId(this.oCurrentDragHandle)}if(this.msTooltipPosition==TooltipProperties.Const.POSITION_FOLLOW_MOUSE){$E(this.moTooltip.GetNode()).unbind("mousemove",this.MouseMoveHandler)}var a=$Control(this.moControl.msId,PanelAdvancedCtrl.Const.CONTROL_NAME).Event_TooltipMasked;if(a!=null){a.Fire()}},HideAnimationOver:function(){if(TooltipProperties.moActiveTooltip!=null&&TooltipProperties.moActiveTooltip!=this&&TooltipProperties.moActiveTooltip.moTooltip==this.moTooltip){return}if(this.moTooltip!=null){$AddClass(this.moTooltip.GetNode(),"InvisibleC");this.moTooltip.GetNode().style.display="none"}},MouseMoveHandler:function(a){this.oLastEvt=a;if(this.mbTooltipInitialized&&this.mbTooltipShown&&this.msTooltipPosition==TooltipProperties.Const.POSITION_FOLLOW_MOUSE){this.PlaceTooltip(a)}},HandleMouseWheel:function(a){if(TooltipProperties.moActiveTooltip==this){var c=this.moControl;while(c!=null){var b=(/Firefox/i.test(navigator.userAgent))?-30*a.detail:a.wheelDelta;if((b>0&&c.scrollTop>0)||(b<0&&c.scrollTop+c.clientHeight<c.scrollHeight)){if(c.id!="BodyContent"){a.preventDefault();c.scrollTop-=b;this.PlaceTooltip(a,true)}c=null}else{c=c.parentNode}}}},CalculateFloatingPosition:function(){var a=this.moTooltip.localToGlobal(new Point(0,0));if(this.msTooltipPosition!=TooltipProperties.Const.POSITION_OFFSET_NO_LIMIT&&this.msTooltipPosition!=TooltipProperties.Const.POSITION_VERTICAL_OFFSET_NO_LIMIT){var c=Utils.GetMainParentContainerScrollTop(this.moControl.GetId());var b=Utils.GetMainParentContainerScrollLeft(this.moControl.GetId());a.x=Math.max(b,Math.min(ResizeMgr.GetInstance().GetScreenAnchor().GetWidth()+b-this.moTooltip.GetWidth(),a.x));a.y=Math.max(c,Math.min(ResizeMgr.GetInstance().GetScreenAnchor().GetHeight()+c-this.moTooltip.GetHeight(),a.y))}a=this.moTooltip.moParent.globalToLocal(a);this.moTooltip.x=a.x;this.moTooltip.y=a.y},PlaceTooltip:function(b,a){var d=this.moControl.localToGlobal(new Point(0,0));var f=Utils.GetMainParentContainerScrollTop(this.moControl.GetId());var c=Utils.GetMainParentContainerScrollLeft(this.moControl.GetId());switch(this.msTooltipPosition){case TooltipProperties.Const.POSITION_CENTER_ON_PARENT:d.x+=(this.moControl.GetWidth())/2-this.moTooltip.GetWidth()/2;d.y+=(this.moControl.GetHeight())/2-this.moTooltip.GetHeight()/2;if(!a){d.x=Math.max(c,Math.min(ResizeMgr.GetInstance().GetScreenAnchor().GetWidth()+c-this.moTooltip.GetWidth(),d.x));d.y=Math.max(f,Math.min(ResizeMgr.GetInstance().GetScreenAnchor().GetHeight()+f-this.moTooltip.GetHeight(),d.y))}break;case TooltipProperties.Const.POSITION_OFFSET:d.x+=this.moTooltip.miOriginalXOff;d.y+=this.moTooltip.miOriginalYOff;if(!a){d.x=Math.max(c,Math.min(ResizeMgr.GetInstance().GetScreenAnchor().GetWidth()+c-this.moTooltip.GetWidth(),d.x));d.y=Math.max(f,Math.min(ResizeMgr.GetInstance().GetScreenAnchor().GetHeight()+f-this.moTooltip.GetHeight(),d.y))}break;case TooltipProperties.Const.POSITION_OFFSET_NO_LIMIT:d.x+=this.moTooltip.miOriginalXOff;d.y+=this.moTooltip.miOriginalYOff;break;case TooltipProperties.Const.POSITION_VERTICAL_OFFSET_NO_LIMIT:d.x+=(this.moControl.GetWidth())/2-this.moTooltip.GetWidth()/2;d.y+=this.moTooltip.miOriginalYOff;if(!a){d.x=Math.max(c,Math.min(ResizeMgr.GetInstance().GetScreenAnchor().GetWidth()+c-this.moTooltip.GetWidth(),d.x))}break;case TooltipProperties.Const.POSITION_ON_PARENT:d.y+=(this.moControl.GetHeight());if(d.y+this.moTooltip.GetHeight()>ResizeMgr.GetInstance().GetScreenAnchor().GetHeight()+f){d.y-=(this.moControl.GetHeight())+this.moTooltip.GetHeight()}if(!a){d.x=Math.max(c,Math.min(ResizeMgr.GetInstance().GetScreenAnchor().GetWidth()+c-this.moTooltip.GetWidth(),d.x));d.y=Math.max(f,Math.min(ResizeMgr.GetInstance().GetScreenAnchor().GetHeight()+f-this.moTooltip.GetHeight(),d.y))}break;case TooltipProperties.Const.POSITION_FOLLOW_MOUSE:if(b!=null){b=$.event.fix(b);d.x=b.pageX;d.y=b.pageY;d.x-=this.moTooltip.GetNode().parentNode.offsetLeft;d.y-=this.moTooltip.GetNode().parentNode.offsetTop;d.x+=this.miMouseOffsetX;d.y+=this.miMouseOffsetY;if(!a){d.x=Math.max(c,Math.min(ResizeMgr.GetInstance().GetScreenAnchor().GetWidth()+c-this.moTooltip.GetWidth(),d.x));d.y=Math.max(f,Math.min(ResizeMgr.GetInstance().GetScreenAnchor().GetHeight()+f-this.moTooltip.GetHeight(),d.y))}}break}if(this.msTooltipPosition!=TooltipProperties.Const.POSITION_NONE){d=this.moTooltip.moParent.globalToLocal(d);this.moTooltip.x=d.x;this.moTooltip.y=d.y;this.moTooltip.TransferPositioningToDOM()}},IsVisible:function(){return this.mbTooltipShown},Event_TooltipShown_Setup:function(){this.Event_TooltipShown=new CtrlEvent(this)},Event_TooltipMasked_Setup:function(){this.Event_TooltipMasked=new CtrlEvent(this)},ListContextualizedControls:function(){var a=new Array();var g;var b=new Array();b.push(this.moTooltip);var c=new Array();var f;while(b.length>0){f=b.pop();if(f.moContainerForChildrens&&f.moContainerForChildrens.length>0){if(f.GetProperty(TooltipProperties.Const.PROPERTY_REFRESH_WITH_TOOLTIP)){g=f.msId}else{if(f.GetProperty("EOTU")){this.moTooltip.SetProperty("EOTU",f.GetProperty("EOTU"));g=f.msId}if(f.GetProperty("HOTU")){c.push(f.msId)}var d;for(d=0;d<f.moContainerForChildrens.length;d++){b.push(f.moContainerForChildrens[d])}}}else{if(f.GetProperty(TooltipProperties.Const.PROPERTY_TEMP_IMG)){this.moTooltip.moTempImgId=f.msId}}}DynamicTemplatesMgr.ListContextualizedControls(this.moTooltip);if(g){this.moTooltip.SetProperty(TooltipProperties.Const.PROPERTY_TO_REFRESH_VFORM,g)}if(c.length>0){this.moTooltip.SetProperty(TooltipProperties.Const.PROPERTY_VFORM_TO_HIDE,c)}},FillContextualization:function(a,b){var k=this.moControl.GetProperty(TooltipProperties.Const.PROPERTY_TOOLTIP_META_TEXT);if(this.moTooltip.moTempImgId&&k.hasOwnProperty(TooltipProperties.Const.KEY_TOOLTIP_IMAGE_CONTROL_SIZE)){k[TooltipProperties.Const.PROPERTY_TEMP_IMG]=this.moTooltip.moTempImgId}var c=this.moTooltip.GetProperty(TooltipProperties.Const.PROPERTY_VFORM_TO_HIDE);if(c){var f;for(f=0;f<c.length;f++){var o=c[f];oToHideVForm=$PI(o);if(oToHideVForm){oToHideVForm.GetNode().style.display="none";oToHideVForm.miWidth=0;oToHideVForm.miHeight=0;oToHideVForm.miXOff=0;oToHideVForm.miYOff=0;oToHideVForm.ForceHasChanged()}}}DynamicTemplatesMgr.FillContextualization(this.moTooltip,k);if(this.moTooltip.moTempImgId){var g=0;var h=null;$("img",$(this.moControl.moParent.GetNode())).each(function(){var i=$(this).width()*$(this).height();if(i>g){g=i;h=$(this)}});if(h){var m=this;$("img",$E(this.moTooltip.moTempImgId)).mdCurrentScale=null;$("img",$E(this.moTooltip.moTempImgId)).load(function(){$(this)[0].mdCurrentScale=null;AutoScaleProperties.Apply($PI(m.moTooltip.moTempImgId));DOMChangesQueue.GetInstance().ApplyQueue()}).attr("src",h.attr("src"));AutoScaleProperties.Apply($PI(m.moTooltip.moTempImgId));DOMChangesQueue.GetInstance().ApplyQueue();TooltipProperties.msTempImgId=this.moTooltip.moTempImgId;TooltipProperties.moLastTempImg=$PI(this.moTooltip.moTempImgId)}}var q=this.moTooltip.GetProperty(TooltipProperties.Const.PROPERTY_TO_REFRESH_VFORM);var d=false;if(q){var j=$PI(q);if(j!=null){var l=encodeURIComponent(JSON.stringify(k));var n=TooltipProperties.Const.EVENT_TOOLTIP_SHOWN;var p=Matrix3.Const.RETURNTYPE_FULL;if(this.moTooltip.GetProperty("EOTU")){n=this.moTooltip.GetProperty("EOTU");p=Matrix3.Const.RETURNTYPE_VIEWSTATE}if(this.moControl.GetProperty(TooltipProperties.Const.PROPERTY_TOOLTIP_SHOWN_EVENT_ARG)){l=this.moControl.GetProperty(TooltipProperties.Const.PROPERTY_TOOLTIP_SHOWN_EVENT_ARG)}if(!Matrix3.mbModal||!Matrix3.mbEvent){Matrix3.mbModal=false;Matrix3.AddEvent(q,n,p,Matrix3.Const.DELAY_IMMEDIAT,l)}}}},Recycle:function(){Utils.DetachEvent(this.moControl,"mouseover",this.OverControl,this);Utils.DetachEvent(this.moControl,"mouseout",this.OutControl,this);if(this.msTooltipPosition==TooltipProperties.Const.POSITION_FOLLOW_MOUSE){Utils.DetachEvent(this.moControl,"mousemove",this.MouseMoveHandler,this)}if(this.mbTooltipInitialized){Utils.DetachEvent(this.moTooltip,"mouseover",this.OverTooltip,this);Utils.DetachEvent(this.moTooltip,"mouseout",this.OutTooltip,this);var a=(/Firefox/i.test(navigator.userAgent))?"DOMMouseScroll":"mousewheel";Utils.DetachEvent(this.moTooltip,a,this.HandleMouseWheel,this)}}};TooltipProperties.HideOpenedTooltips=function(){if(TooltipProperties.moActiveTooltip!=null){TooltipProperties.moActiveTooltip.HideTooltip()}};var UserDropImagesPropertiesMgr={oInstances:new Object(),oZIndexes:new Object(),CanBeEnabled:function(a){if($E(a)&&$E(a).length>0){if($E(a).css("display")=="none"){return false}}else{return false}if(!this.oZIndexes[a]){return false}var c=this.oZIndexes[a];for(var g in this.oInstances){var f=$E(g);if(f.length>0){var d=this.oZIndexes[g];var b=(f.css("display")!="none");if(b&&d>c){return false;break}}}return true}};function UserDropImagesProperties(b,a){this.msControlId=b;this.moDefaultOptions={separator:"|",box_title:"Search by files name",box_message:"Drop images here",drop_event_vformid:"",drop_event_name:"",drop_event_returntype:"",drop_event_delay:"",drop_event_arguments:"",ctrl_type:PositionItem.constructor.CONTROL_TYPE_TEXTBOX};this.moOptions={};this.moRootNode;this.moDropZone;this.ActiveUserDropImages(a);this.moMask;this.miOffsetLeft=0;this.miOffsetTop=0}UserDropImagesProperties.Const={BOX_CLASS:"drop_images_box",BOX_CONTAINER_CLASS:"container",BOX_TITLE_CLASS:"title",BOX_MESSAGE_CLASS:"message",BOX_HOVER_CLASS:"hover",BOX_MASK_CLASS:"drop_images_mask"};UserDropImagesProperties.ConfigureControl=function(b,a){UserDropImagesPropertiesMgr.oInstances[b]=new UserDropImagesProperties(b,a)};UserDropImagesProperties.prototype={ActiveUserDropImages:function(a){var b=this;if(!Utils.IsIE()){if(typeof(a)!=="object"){a={}}b.moOptions=$.extend(b.moDefaultOptions,a);b.CreateDropZone();b.InitListeners()}},CreateDropZone:function(){var d=this;this.moMask=Utils.BuildMask(this.msControlId+"_DropImagesMask",UserDropImagesProperties.Const.BOX_MASK_CLASS);this.moMask.style.position="absolute";this.moDropZone=$('<div id="'+this.msControlId+'_DropImagesBoxZone"></div>').css({position:"absolute",display:"block","z-index":(this.moMask.GetIndex()+1),display:"none"});UserDropImagesPropertiesMgr.oZIndexes[this.msControlId]=this.moMask.GetIndex()+1;this.moDropZone.addClass(UserDropImagesProperties.Const.BOX_CLASS);var c=$PI(this.msControlId);while(c.moParent){c=c.moParent}this.moRootNode=$(c.GetNode());var a=$('<div class="'+UserDropImagesProperties.Const.BOX_CONTAINER_CLASS+'"></div>');var f=$('<div class="'+UserDropImagesProperties.Const.BOX_TITLE_CLASS+'">'+this.moOptions.box_title+"</div>");var b=$('<div class="'+UserDropImagesProperties.Const.BOX_MESSAGE_CLASS+'">'+this.moOptions.box_message+"</div>");a.append(f);a.append(b);this.moDropZone.append(a);$("body").append(this.moDropZone);this.RefreshPositionBox()},RefreshPositionBox:function(){var f=$E(this.msControlId).offset();if(f&&f!=null){var g=f.left;var h=f.top;var a=g;var b=h;var d=$(window).width()+$(window).scrollLeft();var c=this.moDropZone.outerWidth();if((a+c+10)>d){var a=(d-c-20)}this.moDropZone.css({top:b+"px",left:a+"px"});this.miOffsetLeft=a;this.miOffsetTop=b}},InitListeners:function(){var k=this;if(this.moDropZone&&this.moDropZone.length>0){function a(o){var m=false;if(o.dataTransfer.types){try{m=o.dataTransfer.types.contains("Files")}catch(n){try{m=(o.dataTransfer.types.indexOf("Files")!="-1")}catch(n){}}}return m}function h(m){if(UserDropImagesPropertiesMgr.CanBeEnabled(k.msControlId)==true){m.preventDefault();m.stopPropagation()}}function f(m){if(UserDropImagesPropertiesMgr.CanBeEnabled(k.msControlId)==true){m.preventDefault();m.stopPropagation()}}function g(m){if(UserDropImagesPropertiesMgr.CanBeEnabled(k.msControlId)==true){m.preventDefault();m.stopPropagation()}}function i(m){if(UserDropImagesPropertiesMgr.CanBeEnabled(k.msControlId)==true){m.preventDefault();m.stopPropagation();m.dataTransfer.effectAllowed="move";m.dataTransfer.dropEffect="move"}}function j(m){if(UserDropImagesPropertiesMgr.CanBeEnabled(k.msControlId)==true){m.preventDefault();m.stopPropagation();if(a(m)==true){l(m.dataTransfer.files);if(b()){Matrix3.AddEvent(k.moOptions.drop_event_vformid,k.moOptions.drop_event_name,k.moOptions.drop_event_returntype,k.moOptions.drop_event_delay,k.moOptions.drop_event_arguments)}}k.moDropZone.hide();k.moMask.Hide()}else{k.moDropZone.hide();k.moMask.Hide()}}function b(){if(UserDropImagesPropertiesMgr.CanBeEnabled(k.msControlId)==true&&k.moOptions&&k.moOptions.drop_event_vformid&&k.moOptions.drop_event_name&&k.moOptions.drop_event_returntype&&k.moOptions.drop_event_delay&&typeof k.moOptions.drop_event_vformid=="string"&&Utils.Trim(k.moOptions.drop_event_vformid)!=""){return true}return false}function l(m){var q=new Array();for(var n=0,p=m.length;n<p;n++){var o=m[n].name.lastIndexOf(".");q.push(m[n].name.substring(0,o))}if(q.length>0){var r="";if(b()==false){r=Utils.Trim($E(k.msControlId).val());if(typeof r=="string"&&r!=""){r+=k.moOptions.separator}}r+=q.join(k.moOptions.separator);if(k.moOptions.ctrl_type==PositionItem.Const.CONTROL_TYPE_AUTOCOMPLETION){$E(k.msControlId).val(r);$E(k.msControlId+AutoCompletionCtrl.Const.VALUEFIELD).val(r)}else{$E(k.msControlId).val(r)}}}function c(m){if(UserDropImagesPropertiesMgr.CanBeEnabled(k.msControlId)==false){return false}var o=10;var q=$(document).width()-o;var p=o;var r=o;var n=$(document).height()-o;var t=m.pageX+$(document).scrollLeft();var u=m.pageY+$(document).scrollTop();return(t>=p&&t<=q&&u>=r&&u<=n)}function d(m,u){if(UserDropImagesPropertiesMgr.CanBeEnabled(k.msControlId)==false){return false}var p=k.miOffsetLeft+k.moDropZone.outerWidth();var o=k.miOffsetLeft;var q=k.miOffsetTop;var n=k.miOffsetTop+k.moDropZone.outerHeight();var r=m.pageX;var t=m.pageY;return(r>=o&&r<=p&&t>=q&&t<=n)}document.body.addEventListener("dragover",function(m){if(UserDropImagesPropertiesMgr.CanBeEnabled(k.msControlId)==true){m.preventDefault();m.stopPropagation();if(c(m)){if(k.moDropZone[0].style.display=="none"&&m.dataTransfer){if(a(m)==true){k.RefreshPositionBox();k.moMask.Show();k.moDropZone[0].style.display="block"}}}}else{k.moDropZone[0].style.display="none";k.moMask.Hide()}},false);document.body.addEventListener("dragleave",function(m){if(UserDropImagesPropertiesMgr.CanBeEnabled(k.msControlId)==true){m.preventDefault();m.stopPropagation();if(c(m)==false){if(k.moDropZone[0].style.display=="block"){k.moDropZone[0].style.display="none";k.moMask.Hide()}}}else{k.moDropZone[0].style.display="none";k.moMask.Hide()}},false);document.body.addEventListener("drop",function(m){if(UserDropImagesPropertiesMgr.CanBeEnabled(k.msControlId)==true){m.preventDefault();m.stopPropagation();if(d(m)){j(m)}k.moDropZone.hide();k.moMask.Hide()}else{k.moDropZone[0].style.display="none";k.moMask.Hide()}},false);this.moDropZone[0].addEventListener("dragleave",h,true);this.moDropZone[0].addEventListener("dragenter",g,true);this.moDropZone[0].addEventListener("dragover",i,true)}}};function ZoomProperties(){}ZoomProperties.Const={SUFFIX_ZOOM_DIV:"_Zoom"};ZoomProperties.prototype={ActiveZoom:function(a){this.msZoomImagePath=a;this.miZoomLensSize=200;this.moZoomDiv=document.createElement("div");this.moZoomDiv.id=this.msID+ZoomProperties.Const.SUFFIX_ZOOM_DIV;this.moZoomImage=$Elt(this.msID).getElementsByTagName("img").item(0);$SetStyle(this.moZoomDiv,"display","none");$SetStyle(this.moZoomDiv,"position","absolute");$SetStyle(this.moZoomDiv,"width",this.miZoomLensSize+"px");$SetStyle(this.moZoomDiv,"height",this.miZoomLensSize+"px");$SetStyle(this.moZoomDiv,"backgroundRepeat","no-repeat");$SetStyle(this.moZoomDiv,"backgroundImage","url("+a+")");$SetStyle(this.moZoomDiv,"display","none");$SetStyle(this.moZoomDiv,"zIndex","10000");document.body.appendChild(this.moZoomDiv);Utils.CreateReference(this.moZoomDiv.id);this.miZoomImageX=Utils.GetX(this.moZoomImage);this.miZoomImageY=Utils.GetY(this.moZoomImage);var b=new Image();b.src=a;Matrix3.ShowWaitMsg("Loading...");var c=this;b.onload=function(){Matrix3.HideWaitMsg();var d=this.width;c.miSrcImageWidth=c.moZoomImage.width;c.miSrcImageHeight=c.moZoomImage.height;c.miZoomRatio=d/c.miSrcImageWidth;Utils.AddEvent(c.moZoomImage,"mousemove",c.ZoomOver,c);Utils.AddEvent(c.moZoomDiv,"mousemove",c.ZoomOver,c)}},ZoomOver:function(a){var c=Utils.GetMousePosition(a)[0];var d=Utils.GetMousePosition(a)[1];var f=c-this.miZoomImageX;var g=d-this.miZoomImageY;var b=this.miZoomLensSize/2;f=f*this.miZoomRatio-b;g=g*this.miZoomRatio-b;if(g<0){g=0}if(f<0){f=0}$SetStyle(this.moZoomDiv,"left",c-b);$SetStyle(this.moZoomDiv,"top",d-b);$SetStyle(this.moZoomDiv,"backgroundPosition","-"+f+"px -"+g+"px");$SetStyle(this.moZoomDiv,"display","block");if(c<this.miZoomImageX||d<this.miZoomImageY||c>this.miZoomImageX+this.miSrcImageWidth||d>this.miZoomImageY+this.miSrcImageHeight){$SetStyle(this.moZoomDiv,"display","none")}}};function AudioCtrl(a){this.msID=a}AudioCtrl.Const={CONTROL_NAME:"Audio",SUFFIX_MOVIE:"_Audio"};AudioCtrl.prototype={Setup:function(d,f,c,b,a){if(f==""){f="100%"}if(c==""){c="100%"}this.sWidth=f;this.sHeight=c;this.sSource=d;var h=this.msID+FlashCtrl.Const.SUFFIX_MOVIE;this.params={allowfullscreen:"true",allowscriptaccess:"always"};if(!a){this.params.wmode="transparent"}this.attributes={id:h,name:h};this.flashvars=new Object();var g=document.createElement("div");g.setAttribute("id",h);$Elt(this.msID).appendChild(g)},AddVariable:function(a,b){this.flashvars[a]=b},Start:function(){swfobject.embedSWF(this.sSource,this.attributes.id,this.sWidth,this.sHeight,"9.0.115",false,this.flashvars,this.params,this.attributes)}};function AutoCompletionCtrl(a){this.msID=a;this.msControlID=a}AutoCompletionCtrl.Const={CONTROL_NAME:"AutoCompletion",VALUEFIELD:"_Value"};AutoCompletionCtrl.prototype={Event_Change_Setup:function(a){this.Event_Change=new CtrlEvent(this)},Action_SetValue:function(a){var b=AutoCompletionMgr.Get(this.msControlID);if(b){b.Action_SetValue(a)}},Reset:function(){var a=AutoCompletionMgr.Get(this.msControlID);if(a){a.Reset()}}};Utils.Augment(AutoCompletionCtrl,FocusProperties);Utils.Augment(AutoCompletionCtrl,InPlaceEditorProperties);Utils.Augment(AutoCompletionCtrl,ClickEvent);Utils.Augment(AutoCompletionCtrl,ClassProperties);Utils.Augment(AutoCompletionCtrl,MatrixEventProperties);Utils.Augment(AutoCompletionCtrl,ClipboardProperties);Utils.Augment(AutoCompletionCtrl,ShortcutEvent);Utils.Augment(AutoCompletionCtrl,ChangeEvent);Utils.Augment(AutoCompletionCtrl,BlurEvent);function ButtonCtrl(a){this.msID=a;this.msControlID=a}ButtonCtrl.Const={CONTROL_NAME:"Button",ACTION_ENABLE_FAKE_SUFFIX:"_Fake"};ButtonCtrl.AutoConfigPulse=function(a){if(a.GetProperty("PulseOnEdit",false)){var c="ControlValueChanged";var b="AllControls"+a.GetVFormId();$AddAction($Control(a.msId,ButtonCtrl.Const.CONTROL_NAME),"Action_Enable",c,b,"effect:pulse");if($HasClass(a,"InvisibleC")){$AddAction($Control(a.msId,ButtonCtrl.Const.CONTROL_NAME),"Action_RemoveClass",c,b,"InvisibleC")}AddEditEvent=function(d){switch(d.msCtrlType){case AutoCompletionCtrl.Const.CONTROL_NAME:case DropDownListCtrl.Const.CONTROL_NAME:case TextBoxCtrl.Const.CONTROL_NAME:case TextBoxPasswordCtrl.Const.CONTROL_NAME:case TextAreaCtrl.Const.CONTROL_NAME:case RadioButtonListCtrl.Const.CONTROL_NAME:case CheckBoxCtrl.Const.CONTROL_NAME:$AddEvent($Control(d.msId,d.msCtrlType),"Event_Change",c,b);break;case DateCtrl.Const.CONTROL_NAME:case ButtonCtrl.Const.CONTROL_NAME:$AddEvent($Control(d.msId,d.msCtrlType),"Event_Click",c,b);break}if(d.moContainerForChildrens&&d.moContainerForChildrens.length>0){for(var f=0,g=d.moContainerForChildrens.length;f<g;f++){AddEditEvent(d.moContainerForChildrens[f])}}};AddEditEvent($Elt(a.GetVFormId()))}};ButtonCtrl.prototype={Event_Change_Setup:function(){this.Event_Change=new CtrlEvent(this,function(){if($Elt(this.msID).getElementsByTagName("a").length>0){Utils.AddEvent($Elt(this.msID).getElementsByTagName("a")[0],"click",this.Event_Change.Fire,this.Event_Change)}})},Action_Enable_Setup:function(){if(!this.Action_Enable_Setup_Ok){$SetStyle(this.msID,"display","none");var a=$Elt(this.msID).cloneNode(true);this.FakeLink=a;a.id=this.msID+ButtonCtrl.Const.ACTION_ENABLE_FAKE_SUFFIX;$AddClass(a,"Disabled ButtonDisabled ButtonDisabledClass");var b=a.getElementsByTagName("a");if(b.length>0){var f=b[0].firstChild;var c=b[0].parentNode;c.removeChild(b[0]);var d=document.createElement("span");d.appendChild(f);c.appendChild(d)}$Elt(this.msID).parentNode.insertBefore(a,$Elt(this.msID));$SetStyle(a,"display","block");this.Action_Enable_Setup_Ok=true}},Action_Enable:function(a){if($S(this.msID,"display")!="block"){$SetStyle(this.msID+ButtonCtrl.Const.ACTION_ENABLE_FAKE_SUFFIX,"display","none");$SetStyle(this.msID,"display","block");if(a!=""){var b=Effect.Pulse(this.msID,1,true);Utils.AddEvent(this.msID,"click",function(){this.FakeLink.parentNode.removeChild(this.FakeLink);this.Action_Enable_Setup_Ok=false;this.Action_Enable_Setup()},this)}}},ActiveFocus:function(){try{$Elt(this.msID).getElementsByTagName("a")[0].focus()}catch(a){}}};Utils.Augment(ButtonCtrl,MatrixEventProperties);Utils.Augment(ButtonCtrl,EffectProperties);Utils.Augment(ButtonCtrl,ClearCacheProperties);Utils.Augment(ButtonCtrl,ClassProperties);Utils.Augment(ButtonCtrl,MountProperties);Utils.Augment(ButtonCtrl,ResizeProperties);Utils.Augment(ButtonCtrl,TempSourceProperties);Utils.Augment(ButtonCtrl,CommandProperties);Utils.Augment(ButtonCtrl,ClipboardProperties);Utils.Augment(ButtonCtrl,HyperlinkProperties);Utils.Augment(ButtonCtrl,FileNameOnDropProperties);Utils.Augment(ButtonCtrl,OverEvent);Utils.Augment(ButtonCtrl,OutEvent);Utils.Augment(ButtonCtrl,RefreshMgrAction);Utils.Augment(ButtonCtrl,CloseWindowAction);Utils.Augment(ButtonCtrl,ShortcutEvent);Utils.Augment(ButtonCtrl,WindowResizeEvent);Utils.Augment(ButtonCtrl,ClickEvent);Utils.Augment(ButtonCtrl,ShowEvent);function CheckBoxCtrl(a){this.msID=a;this.msControlID=a}CheckBoxCtrl.Const={CONTROL_NAME:"CheckBox",SUFFIX_FAKE:"_Fake"};CheckBoxCtrl.prototype={Event_Change_Setup:function(){this.Event_Change=new CtrlEvent(this,function(){Utils.AddEvent(this.msControlID,"click",this.Event_Change.Fire,this.Event_Change)})},ActiveImages:function(c,b,a){this.msImageOn=c;this.msImageOff=b;$SetStyle(this.msControlID,"display","none");var d=$Elt(this.msControlID+CheckBoxCtrl.Const.SUFFIX_FAKE);if(!a){Utils.AddEvent(d,"click",this.ClickFake,this)}this.moFakeImage=d.getElementsByTagName("img").item(0)},ClickFake:function(){$Elt(this.msControlID).checked=!$Elt(this.msControlID).checked;this.moFakeImage.src=($Elt(this.msControlID).checked)?this.msImageOn:this.msImageOff;if(this.Event_Change){this.Event_Change.Fire()}},SetChecked:function(a){$Elt(this.msControlID).checked=a;if(this.moFakeImage){this.moFakeImage.src=($Elt(this.msControlID).checked)?this.msImageOn:this.msImageOff}$E(this.msControlID).attr("checked",a);var b=$Elt(this.msControlID).parentNode;if(b!=null){if($Elt(this.msControlID).checked){$AddClass(b,"Checked")}else{$RemoveClass(b,"Checked")}}},Action_InvertSelection:function(){if(this.moFakeImage){this.ClickFake()}else{$Elt(this.msControlID).checked=!$Elt(this.msControlID).checked;if(this.Event_Change){this.Event_Change.Fire()}}},Action_SelectCheckBox:function(){if(this.moFakeImage){this.SetChecked(true)}else{this.SetChecked(true);if(this.Event_Change){this.Event_Change.Fire()}}},Action_DeselectCheckBox:function(){if(this.moFakeImage){this.SetChecked(false)}else{this.SetChecked(false);if(this.Event_Change){this.Event_Change.Fire()}}},Action_GetValueFromClipboard:function(a){$Elt(this.msControlID).checked=(ClipboardProperties.msCache=="1");if(this.moFakeImage){this.moFakeImage.src=($Elt(this.msControlID).checked)?this.msImageOn:this.msImageOff;if(this.Event_Change&&!a){this.Event_Change.Fire()}}}};Utils.Augment(CheckBoxCtrl,MatrixEventProperties);Utils.Augment(CheckBoxCtrl,CommandProperties);function CropCtrl(a){this.msID=a}CropCtrl.Const={CONTROL_NAME:"Crop",SUFFIX_TOPX:"_TopX",SUFFIX_TOPY:"_TopY",SUFFIX_WIDTH:"_Width",SUFFIX_HEIGHT:"_Height"};CropCtrl.prototype={Setup:function(d,c,f,g,a,b){var j=parseInt(d);var h=parseInt(c);var k=parseInt(f);var l=parseInt(g);if(j=="NaN"||d==""){j=1}if(h=="NaN"||c==""){h=1}if(k=="NaN"||f==""){k=-1}if(l=="NaN"||g==""){l=-1}var i=(!Utils.ParseBool(a))?h/j:-1;var m=this;this.moCrop=$E(this.msID);this.moCrop.Jcrop({aspectRatio:i,setSelect:[0,0,j,h],onChange:function(n){$E(m.msID+CropCtrl.Const.SUFFIX_TOPX).val(n.x);$E(m.msID+CropCtrl.Const.SUFFIX_TOPY).val(n.y);$E(m.msID+CropCtrl.Const.SUFFIX_WIDTH).val(n.w);$E(m.msID+CropCtrl.Const.SUFFIX_HEIGHT).val(n.h)},onSelect:function(n){$E(m.msID+CropCtrl.Const.SUFFIX_TOPX).val(n.x);$E(m.msID+CropCtrl.Const.SUFFIX_TOPY).val(n.y);$E(m.msID+CropCtrl.Const.SUFFIX_WIDTH).val(n.w);$E(m.msID+CropCtrl.Const.SUFFIX_HEIGHT).val(n.h)}},function(){m.jcrop_api=this});if(b){Utils.AddEvent($E(this.msID+CropCtrl.Const.SUFFIX_TOPX),"blur",this.UpdateCropRegion,this);Utils.AddEvent($E(this.msID+CropCtrl.Const.SUFFIX_TOPY),"blur",this.UpdateCropRegion,this);Utils.AddEvent($E(this.msID+CropCtrl.Const.SUFFIX_WIDTH),"blur",this.UpdateCropRegion,this);Utils.AddEvent($E(this.msID+CropCtrl.Const.SUFFIX_HEIGHT),"blur",this.UpdateCropRegion,this)}},UpdateCropRegion:function(){this.jcrop_api.setSelect([$E(oSelf.msID+CropCtrl.Const.SUFFIX_TOPX).val(),$E(oSelf.msID+CropCtrl.Const.SUFFIX_TOPY).val(),$E(oSelf.msID+CropCtrl.Const.SUFFIX_WIDTH).val(),$E(oSelf.msID+CropCtrl.Const.SUFFIX_HEIGHT).val()])}};function DateCtrl(a){this.msID=a;this.moDefaultOptions={defaultValue:"",serverFormat:Param.DateClientFormat,clientFormat:Param.DateServerFormat,defaultPeriod:0,interval:false,defaultValueTo:"",time:false,oneField:false,nbMonthDisplayed:1,showWeek:false,selectorMonth:false,selectorYear:false,language:"English"};this.moOptions={};this.masServerFormatOrder;this.masServerFormatOrderHash;this.moFieldClient;this.moFieldClientTo;this.moEvents=new Object}DateCtrl.Const={CONTROL_NAME:"Date",FULL_DATE_FROM:"_full_date_from",FULL_DATE_TO:"_full_date_to",ANCHOR_ID_SUFFIX:"_Select",ANCHOR_ID_TO_SUFFIX:"_Select2",FIELD1_SUFFIX:"_1",FIELD2_SUFFIX:"_2",FIELD3_SUFFIX:"_3",FIELD1_TO_SUFFIX:"_4",FIELD2_TO_SUFFIX:"_5",FIELD3_TO_SUFFIX:"_6",FIELD_TIME1_SUFFIX:"_t1",FIELD_TIME2_SUFFIX:"_t2",FIELD_TIME3_SUFFIX:"_t3",FIELD_TIME1_TO_SUFFIX:"_t4",FIELD_TIME2_TO_SUFFIX:"_t5",FIELD_TIME3_TO_SUFFIX:"_t6",DESC1_SUFFIX:"_Desc1",DESC2_SUFFIX:"_Desc2",DESC3_SUFFIX:"_Desc3",DESC1_TO_SUFFIX:"_Desc4",DESC2_TO_SUFFIX:"_Desc5",DESC3_TO_SUFFIX:"_Desc6",DESC1_TIME_SUFFIX:"_DescTime1",DESC2_TIME_SUFFIX:"_DescTime2",DESC3_TIME_SUFFIX:"_DescTime3",DESC1_TO_TIME_SUFFIX:"_DescTime4",DESC2_TO_TIME_SUFFIX:"_DescTime5",DESC3_TO_TIME_SUFFIX:"_DescTime6",DAY:"dd",MONTH:"mm",YEAR:"yyyy",HOUR:"h",MINUTE:"min",SECOND:"sec",SEPARATOR:"/",SEPARATOR_TIME:":",SEPARATOR_DATE_TIME:" ",SERVER_ID_SUFFIX:"_Server",SERVER_ID_TO_SUFFIX:"_ServerTo",PERIOD_SUFFIX:"_Period",PERIOD_NONE:"NONE",PERIOD_API_URL:"API/Interface/v1.0/DatePeriod&Format=json?P=",CLEAR_SUFFIX:"_Clear"};DateCtrl.prototype={Setup:function(a){var c=this;this.InitDatas(a);this.ParseServerDateFormat();this.ParseClientDateFormat();this.InstallCalendar(false);if(this.moOptions.interval){this.InstallCalendar(true)}$('[id="'+this.msID+DateCtrl.Const.FIELD1_SUFFIX+'"],[id="'+this.msID+DateCtrl.Const.FIELD2_SUFFIX+'"],[id="'+this.msID+DateCtrl.Const.FIELD3_SUFFIX+'"]').blur(function(d){if(d.keyCode!=9){c.UpdateCalendar(false,d,this)}});if(this.moOptions.interval){$('[id="'+this.msID+DateCtrl.Const.FIELD1_TO_SUFFIX+'"],[id="'+this.msID+DateCtrl.Const.FIELD2_TO_SUFFIX+'"],[id="'+this.msID+DateCtrl.Const.FIELD3_TO_SUFFIX+'"]').blur(function(d){if(d.keyCode!=9){c.UpdateCalendar(true,d,this)}})}$('[id="'+this.msID+DateCtrl.Const.FIELD1_SUFFIX+'"],[id="'+this.msID+DateCtrl.Const.FIELD2_SUFFIX+'"],[id="'+this.msID+DateCtrl.Const.FIELD3_SUFFIX+'"]').focus(function(d){$(this).select();d.stopImmediatePropagation()});if(this.moOptions.interval){$('[id="'+this.msID+DateCtrl.Const.FIELD1_TO_SUFFIX+'"],[id="'+this.msID+DateCtrl.Const.FIELD2_TO_SUFFIX+'"],[id="'+this.msID+DateCtrl.Const.FIELD3_TO_SUFFIX+'"]').focus(function(d){$(this).select();d.stopImmediatePropagation()})}$E(this.msID+DateCtrl.Const.CLEAR_SUFFIX).click(function(){c.Clear()});$E(this.msID+DateCtrl.Const.PERIOD_SUFFIX).change(function(){c.UpdatePeriod()});var b=false;if(this.moOptions.defaultPeriod==DateCtrl.Const.PERIOD_NONE||this.moOptions.defaultPeriod=="0"){this.ParseValue(this.moOptions.defaultValue,false);if(this.moOptions.interval){this.ParseValue(this.moOptions.defaultValueTo,true)}}else{$E(this.msID+DateCtrl.Const.PERIOD_SUFFIX).val(this.moOptions.defaultPeriod);this.UpdatePeriod();b=true}if(b==false){this.UpdateCalendar(false);if(this.moOptions.interval){this.UpdateCalendar(true)}}},InstallCalendar:function(a){var b=this.moOptions.clientFormat.replace("yyyy","yy");b=b.replace("YYYY","YY");if(this.moOptions.time){this.InstallTimeCalendar(b,a);return}else{this.InstallDateCalendar(b,a);return}},InstallDateCalendar:function(b,a){var c=this;var i=this.msID+((a)?DateCtrl.Const.FULL_DATE_TO:DateCtrl.Const.FULL_DATE_FROM);var f=this.msID+((a)?DateCtrl.Const.FIELD1_TO_SUFFIX:DateCtrl.Const.FIELD1_SUFFIX);var g=this.msID+((a)?DateCtrl.Const.FIELD2_TO_SUFFIX:DateCtrl.Const.FIELD2_SUFFIX);var h=this.msID+((a)?DateCtrl.Const.FIELD3_TO_SUFFIX:DateCtrl.Const.FIELD3_SUFFIX);var d=this.msID+((a)?DateCtrl.Const.ANCHOR_ID_TO_SUFFIX:DateCtrl.Const.ANCHOR_ID_SUFFIX);$E(i).datepicker({dateFormat:b,showWeek:c.moOptions.showWeek,numberOfMonths:c.moOptions.nbMonthDisplayed,changeMonth:c.moOptions.selectorMonth,changeYear:c.moOptions.selectorYear,showOtherMonths:true,selectOtherMonths:true,onSelect:function(j){var k=j.split(DateCtrl.Const.SEPARATOR);$E(f).val(k[0]);$E(g).val(k[1]);$E(h).val(k[2]);if(!a){c.SetDate(c.moFieldClient[DateCtrl.Const.DAY].val(),c.moFieldClient[DateCtrl.Const.MONTH].val(),c.moFieldClient[DateCtrl.Const.YEAR].val(),"","","",a)}else{c.SetDate(c.moFieldClientTo[DateCtrl.Const.DAY].val(),c.moFieldClientTo[DateCtrl.Const.MONTH].val(),c.moFieldClientTo[DateCtrl.Const.YEAR].val(),"","","",a)}}});if(c.moOptions.language!="English"){if($.datepicker.regional&&$.datepicker.regional[c.moOptions.language]){$E(i).datepicker("option",$.datepicker.regional[c.moOptions.language])}}$('[id="'+d+'"]').click(function(){if($E(i).datepicker("widget").css("display")=="none"){$E(i).datepicker("show")}})},InstallTimeCalendar:function(b,a){var c=this;var l=this.msID+((a)?DateCtrl.Const.FULL_DATE_TO:DateCtrl.Const.FULL_DATE_FROM);var f=this.msID+((a)?DateCtrl.Const.FIELD1_TO_SUFFIX:DateCtrl.Const.FIELD1_SUFFIX);var g=this.msID+((a)?DateCtrl.Const.FIELD2_TO_SUFFIX:DateCtrl.Const.FIELD2_SUFFIX);var h=this.msID+((a)?DateCtrl.Const.FIELD3_TO_SUFFIX:DateCtrl.Const.FIELD3_SUFFIX);var i=this.msID+((a)?DateCtrl.Const.FIELD_TIME1_TO_SUFFIX:DateCtrl.Const.FIELD_TIME1_SUFFIX);var j=this.msID+((a)?DateCtrl.Const.FIELD_TIME2_TO_SUFFIX:DateCtrl.Const.FIELD_TIME2_SUFFIX);var k=this.msID+((a)?DateCtrl.Const.FIELD_TIME3_TO_SUFFIX:DateCtrl.Const.FIELD_TIME3_SUFFIX);var d=this.msID+((a)?DateCtrl.Const.ANCHOR_ID_TO_SUFFIX:DateCtrl.Const.ANCHOR_ID_SUFFIX);$E(l).datetimepicker({dateFormat:b,showWeek:c.moOptions.showWeek,numberOfMonths:c.moOptions.nbMonthDisplayed,changeMonth:c.moOptions.selectorMonth,changeYear:c.moOptions.selectorYear,onSelect:function(m){var o=m.split(DateCtrl.Const.SEPARATOR_DATE_TIME);var n=o[0].split(DateCtrl.Const.SEPARATOR);var p=o[1].split(DateCtrl.Const.SEPARATOR_TIME);$E(f).val(n[0]);$E(g).val(n[1]);$E(h).val(n[2]);$E(i).val(p[0]);$E(j).val(p[1]);$E(k).val(p[2]);if(!a){c.SetDate(c.moFieldClient[DateCtrl.Const.DAY].val(),c.moFieldClient[DateCtrl.Const.MONTH].val(),c.moFieldClient[DateCtrl.Const.YEAR].val(),c.moFieldClient[DateCtrl.Const.HOUR].val(),c.moFieldClient[DateCtrl.Const.MINUTE].val(),c.moFieldClient[DateCtrl.Const.SECOND].val(),a)}else{c.SetDate(c.moFieldClientTo[DateCtrl.Const.DAY].val(),c.moFieldClientTo[DateCtrl.Const.MONTH].val(),c.moFieldClientTo[DateCtrl.Const.YEAR].val(),c.moFieldClientTo[DateCtrl.Const.HOUR].val(),c.moFieldClientTo[DateCtrl.Const.MINUTE].val(),c.moFieldClientTo[DateCtrl.Const.SECOND].val(),a)}}});$('[id="'+d+'"]').click(function(){if($E(l).datetimepicker("widget").css("display")=="none"){$E(l).datetimepicker("show")}})},DateIsSelected:function(a){if(!a){if($E(this.msID+DateCtrl.Const.FIELD1_SUFFIX).val()!=""||$E(this.msID+DateCtrl.Const.FIELD2_SUFFIX).val()!=""||$E(this.msID+DateCtrl.Const.FIELD3_SUFFIX).val()!=""){return true}return false}else{if($E(this.msID+DateCtrl.Const.FIELD1_TO_SUFFIX).val()!=""||$E(this.msID+DateCtrl.Const.FIELD2_TO_SUFFIX).val()!=""||$E(this.msID+DateCtrl.Const.FIELD3_TO_SUFFIX).val()!=""){return true}return false}},Clear:function(){if(this.DateIsSelected(false)){this.ClearDate(false)}if(this.moOptions.interval&&this.DateIsSelected(true)){this.ClearDate(true)}$E(this.msID+DateCtrl.Const.PERIOD_SUFFIX).val(DateCtrl.Const.PERIOD_NONE)},UpdateCalendar:function(a,b,c){var f=this.moFieldClient;if(a==true){f=this.moFieldClientTo}var l=f[DateCtrl.Const.YEAR].val();var j=f[DateCtrl.Const.MONTH].val();var g=f[DateCtrl.Const.DAY].val();var h=(this.moOptions.time)?f[DateCtrl.Const.HOUR].val():"";var i=(this.moOptions.time)?f[DateCtrl.Const.MINUTE].val():"";var k=(this.moOptions.time)?f[DateCtrl.Const.SECOND].val():"";var d=new Date();if((!l||Utils.Trim(l)=="")&&(!j||Utils.Trim(j)=="")&&(!g||Utils.Trim(g)=="")){this.ClearDate(a)}else{if(!l||Utils.Trim(l)==""){l=d.getFullYear()}else{l=this.GetCorrectYear(l,a)}if(c&&$(c)){if(c.id==f[DateCtrl.Const.YEAR].get(0).id){if(l.length!=4){l=d.getFullYear();f[DateCtrl.Const.YEAR].val(l)}}if(c.id==f[DateCtrl.Const.MONTH].get(0).id){if(j.length==1&&parseInt(j)>0){j="0"+j;f[DateCtrl.Const.MONTH].val(j)}}if(c.id==f[DateCtrl.Const.DAY].get(0).id){if(g.length==1&&parseInt(g)>0){g="0"+g;f[DateCtrl.Const.DAY].val(g)}}}if(l.length==4){this.SetDate(g,j,l,h,i,k,a);if(this.moOptions.interval){$E(this.msID+DateCtrl.Const.PERIOD_SUFFIX).val(DateCtrl.Const.PERIOD_NONE)}if(this._CheckEvent("change")==true){Matrix3.AddEvent(this.moEvents.change.vform_id,this.moEvents.change.name,this.moEvents.change.type,this.moEvents.change.delay,this.moEvents.change.args)}if(this.Event_Change){this.Event_Change.Fire()}}}},ClearDate:function(a){this.ClearDateClient(a);this.ClearDateServer(a);this.SetDateCalendar(new Date(),a)},SetDate:function(b,f,h,c,d,g,a){if(b==""&&d==""&&h==""){this.ClearDate()}var i=false;var j=false;if(!b){i=true}if(!f){j=true}b=this.GetCorrectDay(b,a);f=this.GetCorrectMonth(f,a);h=this.GetCorrectYear(h,a);c=this.GetCorrectHour(c);d=this.GetCorrectMinOrSeconds(d);g=this.GetCorrectMinOrSeconds(g);if(parseInt(h)>1){var k=new Date();k.setUTCFullYear(parseInt(h,10));k.setDate(1);if(f!=""){k.setMonth((parseInt(f,10)-1))}if(b!=""){k.setDate(parseInt(b,10))}if(this.moOptions.time){k.setHours(parseInt(c,10));k.setMinutes(parseInt(d,10));k.setSeconds(parseInt(g,10))}this.SetDateClient(k,a,i,j);this.SetDateServer(k,a,i,j);this.SetDateCalendar(k,a);if(this._CheckEvent("change")==true){Matrix3.AddEvent(this.moEvents.change.vform_id,this.moEvents.change.name,this.moEvents.change.type,this.moEvents.change.delay,this.moEvents.change.args)}if(this.Event_Change){this.Event_Change.Fire()}}},ClearDateClient:function(a){var b=(a)?this.moFieldClientTo:this.moFieldClient;b[DateCtrl.Const.DAY].val("");b[DateCtrl.Const.MONTH].val("");b[DateCtrl.Const.YEAR].val("");if(this.moOptions.time){b[DateCtrl.Const.HOUR].val("");b[DateCtrl.Const.MINUTE].val("");b[DateCtrl.Const.SECOND].val("")}},SetDateClient:function(d,a,b,c){if(c){b=true}var f=(a)?this.moFieldClientTo:this.moFieldClient;if(!b){var g=this.GetCorrectDay(d.getDate());if(g.toString().length==1){g="0"+g}f[DateCtrl.Const.DAY].val(g)}if(!c){var h=this.GetCorrectMonth((d.getMonth()+1));if(h.toString().length==1){h="0"+h}f[DateCtrl.Const.MONTH].val(h)}f[DateCtrl.Const.YEAR].val(this.GetCorrectYear(d.getFullYear()));if(this.moOptions.time){f[DateCtrl.Const.HOUR].val(this.GetCorrectHour(d.getHours()));f[DateCtrl.Const.MINUTE].val(this.GetCorrectMinOrSeconds(d.getMinutes()));f[DateCtrl.Const.SECOND].val(this.GetCorrectMinOrSeconds(d.getSeconds()))}},ClearDateServer:function(a){var b=(a)?DateCtrl.Const.SERVER_ID_TO_SUFFIX:DateCtrl.Const.SERVER_ID_SUFFIX;$E(this.msID+b).val("")},SetDateServer:function(d,a,b,c){if(c){b=true}var g=(a)?DateCtrl.Const.SERVER_ID_TO_SUFFIX:DateCtrl.Const.SERVER_ID_SUFFIX;var f=new Object();f[DateCtrl.Const.YEAR]=this.GetCorrectYear(d.getFullYear());f[DateCtrl.Const.MONTH]=this.GetCorrectMonth((d.getMonth()+1));f[DateCtrl.Const.DAY]=this.GetCorrectDay(d.getDate());if(this.moOptions.time){f[DateCtrl.Const.HOUR]=this.GetCorrectHour(d.getHours());f[DateCtrl.Const.MINUTE]=this.GetCorrectMinOrSeconds(d.getMinutes());f[DateCtrl.Const.SECOND]=this.GetCorrectMinOrSeconds(d.getSeconds())}if(b){f[DateCtrl.Const.DAY]=""}if(c){f[DateCtrl.Const.MONTH]=""}var h=f[this.masServerFormatOrder[0]]+DateCtrl.Const.SEPARATOR+f[this.masServerFormatOrder[1]]+DateCtrl.Const.SEPARATOR+f[this.masServerFormatOrder[2]];if(this.moOptions.time){h+=DateCtrl.Const.SEPARATOR_DATE_TIME+f[DateCtrl.Const.HOUR]+DateCtrl.Const.SEPARATOR_TIME+f[DateCtrl.Const.MINUTE]+DateCtrl.Const.SEPARATOR_TIME+f[DateCtrl.Const.SECOND]}$E(this.msID+g).val(h)},SetDateCalendar:function(b,a){if(!a){$E(this.msID+DateCtrl.Const.FULL_DATE_FROM).datepicker("setDate",b)}else{$E(this.msID+DateCtrl.Const.FULL_DATE_TO).datepicker("setDate",b)}},GetCorrectDay:function(b,a){if(isNaN(parseInt(b))==true||b==""||parseInt(b,10)>31||parseInt(b,10)<1){b="1"}return b},GetCorrectMonth:function(b,a){if(isNaN(parseInt(b))==true||b==""||parseInt(b,10)>12||parseInt(b,10)<1){if(a){b="12"}else{b="1"}}return b},GetCorrectYear:function(b,a){if(typeof b!="string"){b=new String(b)}if(isNaN(parseInt(b))==true||b==""||b.length>4){var c=new Date();b=c.getFullYear()}else{if(b.length==3){b="0"+b}else{if(b.length==2){b="00"+b}else{if(b.length==1){b="000"+b}}}}if(b=="0001"){b=""}return b},GetCorrectHour:function(a){if(isNaN(parseInt(a))==true||a==""||parseInt(a,10)>24||parseInt(a,10)<0){a="00"}if(a.length==1||a<10){a="0"+a}return a},GetCorrectMinOrSeconds:function(a){if(isNaN(parseInt(a))==true||a==""||parseInt(a,10)>60||parseInt(a,10)<0){a="00"}if(a.length==1||a<10){a="0"+a}return a},IsLeapYear:function(a){if(isNaN(parseInt(a))==true){return false}return(((a&3)==0)&&((a%100!=0)||(a%400==0)))},NbDaysInMonth:function(a){var b=new Array(31,28,31,30,31,30,31,31,30,31,30,31);var c=a.getMonth();var d=a.getFullYear();if(this.IsLeapYear(d)&&c==1){return b[c]+1}else{return b[c]}},GetCurrentPeriodValue:function(){return $E(this.msID+DateCtrl.Const.PERIOD_SUFFIX).val()},UpdatePeriod:function(){var b=new Date();var c=new Date();var a=false;var d=this.GetCurrentPeriodValue();if(d===DateCtrl.Const.PERIOD_NONE||d==="0"){a=true;this.ClearDate(false);this.ClearDate(true)}else{$.ajax({type:"GET",dataType:"json",url:DateCtrl.Const.PERIOD_API_URL+d,async:false,success:function(g){var f=g.APIResponse;b=new Date(f.DateFromYear,(f.DateFromMonth-1),f.DateFromDay);c=new Date(f.DateToYear,(f.DateToMonth-1),f.DateToDay)}})}if(!a){this.SetDate(b.getDate(),b.getMonth()+1,b.getFullYear(),-1,-1,-1,false);this.SetDate(c.getDate(),c.getMonth()+1,c.getFullYear(),-1,-1,-1,true)}},ParseServerDateFormat:function(){var b=DateCtrl.Const.MONTH;var c=DateCtrl.Const.DAY;var d=DateCtrl.Const.YEAR;var f=DateCtrl.Const.HOUR;var g=DateCtrl.Const.MINUTE;var h=DateCtrl.Const.SECOND;var a=this.moOptions.serverFormat.split(DateCtrl.Const.SEPARATOR);if(a.length==3){b=a[0];c=a[1];d=a[2]}this.masServerFormatOrder=new Array();this.masServerFormatOrder[0]=b;this.masServerFormatOrder[1]=c;this.masServerFormatOrder[2]=d;this.masServerFormatOrder[3]=f;this.masServerFormatOrder[4]=g;this.masServerFormatOrder[5]=h;this.masServerFormatOrderHash=new Object();this.masServerFormatOrderHash[b]=0;this.masServerFormatOrderHash[c]=1;this.masServerFormatOrderHash[d]=2;this.masServerFormatOrderHash[f]=3;this.masServerFormatOrderHash[g]=4;this.masServerFormatOrderHash[h]=5},ParseClientDateFormat:function(){var b=DateCtrl.Const.MONTH;var c=DateCtrl.Const.DAY;var d=DateCtrl.Const.YEAR;var f=DateCtrl.Const.HOUR;var g=DateCtrl.Const.MINUTE;var h=DateCtrl.Const.SECOND;var a=this.moOptions.clientFormat.split(DateCtrl.Const.SEPARATOR);if(a.length==3){b=a[0];c=a[1];d=a[2]}$E(this.msID+DateCtrl.Const.DESC1_SUFFIX).append("<p>"+b+"</p>");$E(this.msID+DateCtrl.Const.DESC2_SUFFIX).append("<p>"+c+"</p>");$E(this.msID+DateCtrl.Const.DESC3_SUFFIX).append("<p>"+d+"</p>");if(this.moOptions.time){$E(this.msID+DateCtrl.Const.DESC1_TIME_SUFFIX).append("<p>"+f+"</p>");$E(this.msID+DateCtrl.Const.DESC2_TIME_SUFFIX).append("<p>"+g+"</p>");$E(this.msID+DateCtrl.Const.DESC3_TIME_SUFFIX).append("<p>"+h+"</p>")}this.moFieldClient=new Object();this.moFieldClient[b]=$E(this.msID+DateCtrl.Const.FIELD1_SUFFIX);this.moFieldClient[c]=$E(this.msID+DateCtrl.Const.FIELD2_SUFFIX);this.moFieldClient[d]=$E(this.msID+DateCtrl.Const.FIELD3_SUFFIX);if(this.moOptions.time){this.moFieldClient[f]=$E(this.msID+DateCtrl.Const.FIELD_TIME1_SUFFIX);this.moFieldClient[g]=$E(this.msID+DateCtrl.Const.FIELD_TIME2_SUFFIX);this.moFieldClient[h]=$E(this.msID+DateCtrl.Const.FIELD_TIME3_SUFFIX)}if(this.moOptions.interval){this.moFieldClientTo=new Object();this.moFieldClientTo[b]=$E(this.msID+DateCtrl.Const.FIELD1_TO_SUFFIX);this.moFieldClientTo[c]=$E(this.msID+DateCtrl.Const.FIELD2_TO_SUFFIX);this.moFieldClientTo[d]=$E(this.msID+DateCtrl.Const.FIELD3_TO_SUFFIX);if(this.moOptions.time){this.moFieldClientTo[f]=$E(this.msID+DateCtrl.Const.FIELD_TIME1_TO_SUFFIX);this.moFieldClientTo[g]=$E(this.msID+DateCtrl.Const.FIELD_TIME2_TO_SUFFIX);this.moFieldClientTo[h]=$E(this.msID+DateCtrl.Const.FIELD_TIME3_TO_SUFFIX)}$E(this.msID+DateCtrl.Const.DESC1_TO_SUFFIX).append("<p>"+b+"</p>");$E(this.msID+DateCtrl.Const.DESC2_TO_SUFFIX).append("<p>"+c+"</p>");$E(this.msID+DateCtrl.Const.DESC3_TO_SUFFIX).append("<p>"+d+"</p>");if(this.moOptions.time){$E(this.msID+DateCtrl.Const.DESC1_TO_TIME_SUFFIX).append("<p>"+f+"</p>");$E(this.msID+DateCtrl.Const.DESC2_TO_TIME_SUFFIX).append("<p>"+g+"</p>");$E(this.msID+DateCtrl.Const.DESC3_TO_TIME_SUFFIX).append("<p>"+h+"</p>")}}},ParseValue:function(b,a){var d=b.split(DateCtrl.Const.SEPARATOR);if(d.length==3){var g=d[this.masServerFormatOrderHash[DateCtrl.Const.DAY]];var j=d[this.masServerFormatOrderHash[DateCtrl.Const.MONTH]];var l=d[this.masServerFormatOrderHash[DateCtrl.Const.YEAR]].substring(0,4);var h="00";var i="00";var k="00";if(this.moOptions.time){var c=d[this.masServerFormatOrderHash[DateCtrl.Const.YEAR]].split(DateCtrl.Const.SEPARATOR_DATE_TIME);if(c.length>1){var f=false;if(c[2]==DateCtrl.Const.TIME_PM){f=true}c=c[1].split(DateCtrl.Const.SEPARATOR_TIME);if(c.length==3){if(!f){h=c[0]}else{h=parseInt(c[0])+12;if(h==24){h=12}}i=c[1];k=c[2]}}}this.SetDate(g,j,l,h,i,k,a)}},InitDatas:function(a){if(typeof(a)!=="object"){a={}}this.moOptions=$.extend(this.moDefaultOptions,a);this.moOptions.serverFormat=this.moOptions.serverFormat.toLowerCase();this.moOptions.clientFormat=this.moOptions.clientFormat.toLowerCase();this.moOptions.interval=Utils.ParseBool(this.moOptions.interval);this.moOptions.time=Utils.ParseBool(this.moOptions.time);this.moOptions.defaultPeriod=(this.moOptions.defaultPeriod!="")?this.moOptions.defaultPeriod:"NONE";this.moOptions.oneField=Utils.ParseBool(this.moOptions.oneField);this.moOptions.nbMonthDisplayed=(this.moOptions.nbMonthDisplayed!="")?parseInt(this.moOptions.nbMonthDisplayed):1;this.moOptions.showWeek=Utils.ParseBool(this.moOptions.showWeek);this.moOptions.selectorMonth=Utils.ParseBool(this.moOptions.selectorMonth);this.moOptions.selectorYear=Utils.ParseBool(this.moOptions.selectorYear)},SetEvent:function(a,g,d,f,c,b){this.moEvents[a]={name:d,vform_id:g,type:f,delay:c,args:b}},SetEventChange:function(f,c,d,b,a){this.SetEvent("change",f,c,d,b,a)},_CheckEvent:function(a){if(typeof a=="string"&&this.moEvents&&this.moEvents[a]){if(this.moEvents[a].vform_id&&this.moEvents[a].name&&this.moEvents[a].type&&this.moEvents[a].delay){return true}}return false},Event_Change_Setup:function(a){this.Event_Change=new CtrlEvent(this)}};Utils.Augment(DateCtrl,MatrixEventProperties);Utils.Augment(DateCtrl,ChangeEvent);function DropDownListCtrl(a){this.msID=a;this.msControlID=a}DropDownListCtrl.Const={CONTROL_NAME:"DropDownList"};DropDownListCtrl.prototype={Event_Change_Setup:function(){this.Event_Change=new CtrlEvent(this,function(){Utils.AddEvent(this.msControlID,"change",this.Event_Change.Fire,this.Event_Change)})},Action_SelectIndex:function(a){$Elt(this.msControlID).value=$Elt(this.msControlID).options[a].value},Action_SetValue:function(a){$E(this.msControlID).val(a)}};Utils.Augment(DropDownListCtrl,MatrixEventProperties);Utils.Augment(DropDownListCtrl,RulerProperties);Utils.Augment(DropDownListCtrl,FocusProperties);Utils.Augment(DropDownListCtrl,ClassProperties);function FlashCtrl(a){this.msID=a}FlashCtrl.Const={CONTROL_NAME:"Flash",SUFFIX_MOVIE:"_Movie"};FlashCtrl.SendEvent=function(b,a){var c=b.split(Matrix3.Const.SEPARATOR_CONTROL)[0];Matrix3.AddEvent(c,a,Matrix3.Const.RETURNTYPE_FULL,Matrix3.Const.DELAY_IMMEDIAT,"","","",null,null,null,false,null,false,null,null)};FlashCtrl.prototype={Setup:function(d,f,c,b,a){if(f==""){f="100%"}if(c==""){c="100%"}this.sWidth=f;this.sHeight=c;this.sSource=d;var h=this.msID+FlashCtrl.Const.SUFFIX_MOVIE;this.params={allowfullscreen:"true",allowscriptaccess:"always"};if(!a){this.params.wmode="transparent"}this.attributes={id:h,name:h};this.flashvars=new Object();var g=document.createElement("div");g.setAttribute("id",h);$Elt(this.msID).appendChild(g)},AddVariable:function(a,b){this.flashvars[a]=b},Start:function(){swfobject.embedSWF(this.sSource,this.attributes.id,this.sWidth,this.sHeight,"9.0.115",false,this.flashvars,this.params,this.attributes)}};function HiddenCtrl(a){this.msID=a;this.msControlID=a}HiddenCtrl.Const={CONTROL_NAME:"Hidden"};HiddenCtrl.prototype={RefreshPopupTitle:function(){var c=this.msID.split(Matrix3.Const.SEPARATOR_CONTROL)[0];var b=$Elt(c+Popup.Const.TITLE_SUFFIX);var a=c.lastIndexOf(Matrix3.Const.SEPARATOR_HIERARCHY);while(b==null&&a!=-1){c=c.substring(0,a);b=$Elt(c+Popup.Const.TITLE_SUFFIX);a=c.lastIndexOf(Matrix3.Const.SEPARATOR_HIERARCHY)}if(b!=null){b.innerHTML=$Elt(this.msID).value}}};function HyperlinkCtrl(a){this.msID=a}HyperlinkCtrl.Const={CONTROL_NAME:"Hyperlink",WINDOW_TITLE:"title",WINDOW_OPTIONS:"options"};Utils.Augment(HyperlinkCtrl,ClickDeferredEvent);Utils.Augment(HyperlinkCtrl,ShowEvent);Utils.Augment(HyperlinkCtrl,OverEvent);Utils.Augment(HyperlinkCtrl,OutEvent);Utils.Augment(HyperlinkCtrl,ShortcutEvent);Utils.Augment(HyperlinkCtrl,CloseWindowAction);Utils.Augment(HyperlinkCtrl,ResizeProperties);Utils.Augment(HyperlinkCtrl,EffectProperties);Utils.Augment(HyperlinkCtrl,TempSourceProperties);Utils.Augment(HyperlinkCtrl,ClassProperties);Utils.Augment(HyperlinkCtrl,HyperlinkProperties);Utils.Augment(HyperlinkCtrl,FileNameOnDropProperties);function ImageCtrl(a){this.msID=a}ImageCtrl.Const={CONTROL_NAME:"Image"};Utils.Augment(ImageCtrl,ClassProperties);Utils.Augment(ImageCtrl,ResizeProperties);Utils.Augment(ImageCtrl,TempSourceProperties);Utils.Augment(ImageCtrl,ZoomProperties);Utils.Augment(ImageCtrl,HyperlinkProperties);Utils.Augment(ImageCtrl,OverEvent);Utils.Augment(ImageCtrl,OutEvent);Utils.Augment(ImageCtrl,FileNameOnDropProperties);function LabelCtrl(a){this.msID=a;this.msControlID=a}LabelCtrl.Const={CONTROL_NAME:"Label",CLASS_VALUE:"Value",CLASS_LBL:"Lbl"};LabelCtrl.prototype={GetValue:function(){var c="";var b=$Elt(this.msID);if(b){var a=this.GetValueNode(b);if(a){c=Utils.GetTextContent(a)}}return c},SetValue:function(b,a){var d=$Elt(this.msID);if(d){var c=this.GetValueNode(d);if(c){Utils.SetTextContent(c,b,a)}}},GetValueNode:function(g){var c;var f;var d=g.childNodes;for(var a=0,b=d.length;a<b;a++){if($HasClass(d[a],LabelCtrl.Const.CLASS_LBL)){f=d[a]}if($HasClass(d[a],LabelCtrl.Const.CLASS_VALUE)){c=d[a];break}}if(!c&&f){c=f}return c}};Utils.Augment(LabelCtrl,SelectionProperties);Utils.Augment(LabelCtrl,ClassProperties);Utils.Augment(LabelCtrl,DragProperties);Utils.Augment(LabelCtrl,DropProperties);Utils.Augment(LabelCtrl,ClipboardProperties);Utils.Augment(LabelCtrl,CommandProperties);Utils.Augment(LabelCtrl,TooltipProperties);Utils.Augment(LabelCtrl,ClickEvent);Utils.Augment(LabelCtrl,MatrixEventProperties);Utils.Augment(LabelCtrl,HyperlinkProperties);function MapCtrl(a){this.msID=a}MapCtrl.Const={CONTROL_NAME:"Map",SUFFIX_MAP:"_Map",SUFFIX_MARKERS:"_Markers",MGR_NAME:"MapCtrl"};MapCtrl.moMaps=new Object();MapCtrl.UpdateInit=function(){MapCtrl.mbInit=true};MapCtrl.RefreshNode=function(a){delete (MapCtrl.moMaps[a])};MapCtrl.prototype={Action_LoadMap:function(){if(!this.mbInit){var a=this;window.setTimeout(function(){a.Setup(a.msGoogleKey,a.miLatitude,a.miLongitude,a.miZoomLvl,a.msMapType)},100)}},Setup:function(_sGoogleKey,_iLatitude,_iLongitude,_iZoomLvl,_sMapType){this.msGoogleKey=_sGoogleKey;this.miLatitude=_iLatitude;this.miLongitude=_iLongitude;this.miZoomLvl=_iZoomLvl;this.msMapType=_sMapType;var bVisible=true;var oParent=$Elt(this.msID).parentNode;while(oParent&&oParent!=document){if($S(oParent,"display")=="none"){bVisible=false;break}oParent=oParent.parentNode}if(!bVisible){return}if(!MapCtrl.mbInit){if(!MapCtrl.mbScriptInserted){var script=document.createElement("script");script.setAttribute("src","http://maps.google.com/maps?file=api&v=2&async=2&callback=MapCtrl.UpdateInit&key="+_sGoogleKey);script.setAttribute("type","text/javascript");document.documentElement.firstChild.appendChild(script);MapCtrl.mbScriptInserted=true}var oSelf=this;window.setTimeout(function(){oSelf.Setup(_sGoogleKey,_iLatitude,_iLongitude,_iZoomLvl,_sMapType)},Matrix3.Const.RETRY_DELAY);return}var iLatitude=parseFloat(_iLatitude);if(isNaN(iLatitude)){iLatitude=0}var iLongitude=parseFloat(_iLongitude);if(isNaN(iLongitude)){iLongitude=0}var iZoomLvl=parseInt(_iZoomLvl);if(isNaN(iZoomLvl)){iZoomLvl=0}this.moMap=new GMap2(document.getElementById(this.msID+MapCtrl.Const.SUFFIX_MAP));this.moMap.setCenter(new GLatLng(iLatitude,iLongitude),iZoomLvl);MapCtrl.moMaps[this.msID]=this.moMap;Matrix3.RegisterInCache(this.msID,MapCtrl);if(Utils.Trim(_sMapType)==""){_sMapType=G_NORMAL_MAP}this.moMap.setMapType(eval(_sMapType));this.moMap.addControl(new GMapTypeControl());this.moMap.addControl(new GLargeMapControl());this.moMap.enableDoubleClickZoom();this.moMap.enableContinuousZoom();this.moMap.enableGoogleBar();this.moMap.enableScrollWheelZoom();this.mbInit=true}};Utils.Augment(MapCtrl,ResizeProperties);function MapMarkerCtrl(a){this.msID=a}MapMarkerCtrl.Const={CONTROL_NAME:"MapMarker",SUFFIX_LATITUDE:"_Lat",SUFFIX_LONGITUDE:"_Lon"};MapMarkerCtrl.prototype={Setup:function(b,c,a){var i=$Elt(this.msID).parentNode.id;this.msMarkerParentID=i;i=i.substring(0,i.lastIndexOf(MapCtrl.Const.SUFFIX_MARKERS));if(!(i in MapCtrl.moMaps)){var h=this;window.setTimeout(function(){h.Setup(b,c,a)},Matrix3.Const.RETRY_DELAY);return}var f=parseFloat(b);if(isNaN(f)){f=0}var g=parseFloat(c);if(isNaN(g)){g=0}var d=(a=="1"||a.toLowerCase()=="true")?true:false;this.moMarker=new GMarker(new GLatLng(f,g),{draggable:d});MapCtrl.moMaps[i].addOverlay(this.moMarker);if(d){var h=this;GEvent.addListener(MapCtrl.moMaps[i],"click",function(k,j){if(!k){h.UpdateMarkerInformation(j)}});GEvent.addListener(this.moMarker,"dragend",function(j){h.UpdateMarkerInformation(j)})}this.moMarker.bindInfoWindowHtml($Elt(this.msID))},AddEvent:function(f,c,d,b,a){if(!this.moMarker){var g=this;window.setTimeout(function(){g.AddEvent(f,c,d,b,a)},Matrix3.Const.RETRY_DELAY);return}this.msMarkerSourceVForm=f;this.msMarkerSourceEvent=c;this.msMarkerSourceType=d;this.msMarkerEventDelay=b;this.msMarkerEventArgs=a;var g=this;GEvent.addListener(this.moMarker,"infowindowopen",function(){g.MarkerInfoOpened()})},MarkerInfoOpened:function(){if(!this.mbMarkerEventSent){this.SendEvent(this.msMarkerSourceVForm,this.msMarkerSourceEvent,this.msMarkerSourceType,this.msMarkerEventDelay,this.msMarkerEventArgs);this.mbMarkerEventSent=true;Utils.CreateReference(this.msID)}},UpdateMarkerInformation:function(a){this.moMarker.setLatLng(a);$Elt(this.msID+MapMarkerCtrl.Const.SUFFIX_LATITUDE).value=a.lat();$Elt(this.msID+MapMarkerCtrl.Const.SUFFIX_LONGITUDE).value=a.lng()}};Utils.Augment(MapMarkerCtrl,MatrixEventProperties);function MenuMgr(){this.msLastID=null}MenuMgr.moSingleton=null;MenuMgr.GetInstance=function(){if(!MenuMgr.moSingleton){MenuMgr.moSingleton=new MenuMgr()}return MenuMgr.moSingleton};MenuMgr.prototype={Register:function(a){if(this.msLastID&&this.msLastID!=a){$SetStyle(this.msLastID,"display","none")}this.msLastID=a}};function MenuCtrl(a){this.msID=a}MenuCtrl.Const={CONTROL_NAME:"Menu",SUFFIX_MENU:"_Menu",CLASS_OVERMENU:"OverMenuClass"};MenuCtrl.prototype={Setup:function(c,d,b,a){var f=0;var g=parseInt(c);if(Utils.IsNumber(g)){f=g}var i=$Elt(this.msID+MenuCtrl.Const.SUFFIX_MENU);if(!a){$SetStyle(i,"display","none")}else{$SetStyle(i,"display","block");MenuMgr.GetInstance().Register(i.id);$AddClass(this.msID,MenuCtrl.Const.CLASS_OVERMENU)}var j=this;var h=$Elt(this.msID);if(d&&d!=""){$SetStyle(h,"display","none");Utils.AddEvent(h.parentNode,"mouseover",function(k){if(DragDropMgr.IsDrag()){return}if(Utils.IsMouseLeaveOrEnter(k,this.parentNode)){$SetStyle(this,"display","block");MenuMgr.GetInstance().Register(h.id);$AddClass(j.msID,MenuCtrl.Const.CLASS_OVERMENU)}},h);if(!b){Utils.AddEvent(h.parentNode,"mouseout",function(l,k){if(Utils.IsMouseLeaveOrEnter(l,this.parentNode)){window.clearTimeout(k.moThreadDelay);$SetStyle(k,"display","none");$SetStyle(this,"display","none");$RemoveClass(j.msID,MenuCtrl.Const.CLASS_OVERMENU)}},h,i)}Utils.AddEvent(h.parentNode,"mouseup",function(l,k){if(Utils.IsMouseLeaveOrEnter(l,this.parentNode)){window.clearTimeout(k.moThreadDelay);$SetStyle(k,"display","none");$SetStyle(this,"display","none");$RemoveClass(j.msID,MenuCtrl.Const.CLASS_OVERMENU)}},h,i)}Utils.AddEvent(h,"mouseover",function(l,k){if(DragDropMgr.IsDrag()){return}if(Utils.IsMouseLeaveOrEnter(l,k)){var m=(b)?'MenuMgr.GetInstance().Register("'+this.id+'");':"";this.moThreadDelay=window.setTimeout(m+'$SetStyle("'+this.id+'", "display", "block");$AddClass("'+j.msID+'", MenuCtrl.Const.CLASS_OVERMENU);',f)}},i,h);if(!b){Utils.AddEvent(h,"mouseout",function(l,k){if(Utils.IsMouseLeaveOrEnter(l,k)){window.clearTimeout(this.moThreadDelay);$SetStyle(this,"display","none");$RemoveClass(j.msID,MenuCtrl.Const.CLASS_OVERMENU)}},i,h)}Utils.AddEvent(h,"mouseup",function(l,k){if(Utils.IsMouseLeaveOrEnter(l,k)){window.clearTimeout(this.moThreadDelay);$SetStyle(this,"display","none");$RemoveClass(j.msID,MenuCtrl.Const.CLASS_OVERMENU)}},i,h)}};function PanelAdvancedCtrl(a){this.msID=a;this.msControlID=a}function PanelCtrl(a){this.msID=a;this.msControlID=a}PanelAdvancedCtrl.Const=PanelCtrl.Const={CONTROL_NAME:"PanelAdvanced",CONTROL_NAME_SIMPLE:"Panel",AUTOSIZE_MODE_CHILD:"child",AUTOSIZE_MARGIN:2};Utils.Augment(PanelAdvancedCtrl,MatrixEventProperties);Utils.Augment(PanelAdvancedCtrl,DragProperties);Utils.Augment(PanelAdvancedCtrl,DropProperties);Utils.Augment(PanelAdvancedCtrl,EffectProperties);Utils.Augment(PanelAdvancedCtrl,SelectionProperties);Utils.Augment(PanelAdvancedCtrl,ReorderProperties);Utils.Augment(PanelAdvancedCtrl,LoadingProperties);Utils.Augment(PanelAdvancedCtrl,TooltipProperties);Utils.Augment(PanelAdvancedCtrl,FoldProperties);Utils.Augment(PanelAdvancedCtrl,LoadingPostBackProperties);Utils.Augment(PanelAdvancedCtrl,LoadingAjaxProperties);Utils.Augment(PanelAdvancedCtrl,ResizeProperties);Utils.Augment(PanelAdvancedCtrl,CustomScrollbarProperties);Utils.Augment(PanelAdvancedCtrl,ClassProperties);Utils.Augment(PanelAdvancedCtrl,MountProperties);Utils.Augment(PanelAdvancedCtrl,RulerProperties);Utils.Augment(PanelAdvancedCtrl,DeactivateBackProperties);Utils.Augment(PanelAdvancedCtrl,ClipboardProperties);Utils.Augment(PanelAdvancedCtrl,FixedProperties);Utils.Augment(PanelAdvancedCtrl,DefaultActionProperties);Utils.Augment(PanelAdvancedCtrl,SlideShowProperties);Utils.Augment(PanelAdvancedCtrl,RelativeProperties);Utils.Augment(PanelAdvancedCtrl,SelectAllProperties);Utils.Augment(PanelAdvancedCtrl,PositionGroupProperties);Utils.Augment(PanelAdvancedCtrl,ResizableProperties);Utils.Augment(PanelAdvancedCtrl,ScrollProperties);Utils.Augment(PanelAdvancedCtrl,RefreshMgrAction);Utils.Augment(PanelAdvancedCtrl,OverEvent);Utils.Augment(PanelAdvancedCtrl,OutEvent);Utils.Augment(PanelAdvancedCtrl,MouseDownEvent);Utils.Augment(PanelAdvancedCtrl,ClickEvent);Utils.Augment(PanelAdvancedCtrl,ClickDeferredEvent);Utils.Augment(PanelAdvancedCtrl,ShowEvent);Utils.Augment(PanelAdvancedCtrl,WindowResizeEvent);Utils.Augment(PanelAdvancedCtrl,WindowExitEvent);function PanelColCtrl(a){this.msID=a}PanelColCtrl.Const={CONTROL_NAME:"PanelCol"};Utils.Augment(PanelColCtrl,DropProperties);Utils.Augment(PanelColCtrl,ResizableProperties);function PanelPopupCtrl(){}PanelPopupCtrl.Const={CONTROL_NAME:"Popup"};function PanelTableCtrl(a){this.msID=a}PanelTableCtrl.Const={CONTROL_NAME:"PanelTable",CLASS_OVER_LINE:"OverLine"};PanelTableCtrl.prototype={ActiveFlyOverTable:function(){var d=$Elt(this.msID).getElementsByTagName("tr");for(var a=0,b=d.length;a<b;a++){var c=$Elt(d[a]);Utils.AddEvent(c,"mouseover",function(){$AddClass(this,PanelTableCtrl.Const.CLASS_OVER_LINE)},c);Utils.AddEvent(c,"mouseout",function(){$RemoveClass(this,PanelTableCtrl.Const.CLASS_OVER_LINE)},c)}}};function ParamControl(a){this.moControl=a;var b=this;if(this.moControl.msCtrlType=="ParameterStr"){this.msInitialValue=this.moControl.moTextarea.value;Utils.AddEvent(this.moControl.moTextarea,"cut",this.delayedResize,this);Utils.AddEvent(this.moControl.moTextarea,"paste",this.delayedResize,this);Utils.AddEvent(this.moControl.moTextarea,"drop",this.delayedResize,this);Utils.AddEvent(this.moControl.moTextarea,"keydown",this.keydownControl,this);if($(this.moControl).hasClass("Parameter_NotEditable")){$(this.moControl.moTextarea).click(function(c){c.preventDefault();b.DetailsHandler()})}}else{if(this.moControl.msCtrlType=="ParameterEnum"){this.msInitialValue=$(this.moControl).find("input[name$=_Value]")[0].value;$E(this.moControl.msId).bind("autocomp_select",function(c,d,f){b.ChangeHandler()})}else{if(this.moControl.msCtrlType=="ParameterBool"){this.msInitialValue=$(this.moControl).find("input")[0].checked;$(this.moControl).find("input").click(function(){b.ChangeHandler()})}}}$(this.moControl).find(".Details, .Head").click(function(c){c.preventDefault();b.DetailsHandler()});$(this.moControl).find(".Reset").click(function(c){c.preventDefault();b.ResetHandler()});$(this.moControl).find(".HelpBtn").click(function(c){var d=$(this).attr("data-url");if(Matrix3.moCMS){Matrix3.moCMS.OpenHelpPopup(d)}c.preventDefault()});ParamMgr.moTable[a.GetId()]=this;Matrix3.RegisterInCache(a.GetId(),ParamMgr)}function ParamMgr(){this.moTable=new Object();this.moSaveBtns=new Object();this.moCancelbtns=new Object();this.mbHasUnsavedChanges=false}ParamMgr=new ParamMgr();ParamMgr.Const={MGR_NAME:"Param"};ParamMgr.SaveAll=function(){this.SaveParameters()};ParamMgr.AddSaveBtn=function(a){_oControl=$PI(a);this.moSaveBtns[_oControl.GetId()]=_oControl;Matrix3.RegisterInCache(_oControl.GetId(),ParamMgr);$(_oControl).click(this.SaveParameters)};ParamMgr.SaveParameters=function(){var g=new Array();var f=new Array();$.each(ParamMgr.moTable,function(i,k){if(k.HasValueChanged()){g.push(k)}if(k.mbToReset){f.push(k)}});ParamMgr.HideSaveButtons();var c=g.length+f.length;for(var b=0,d=g.length;b<d;b++){c--;var h=g[b];var j=(c>0)?Matrix3.Const.DELAY_BUFFERED:Matrix3.Const.DELAY_IMMEDIAT;var a=h.moControl.msId.split(Matrix3.Const.SEPARATOR_CONTROL);Matrix3.AddEvent(a[0],"SAVE_PARAMETER",Matrix3.Const.RETURNTYPE_FULL,j,a[1])}for(var b=0,d=f.length;b<d;b++){c--;var h=f[b];var j=(c>0)?Matrix3.Const.DELAY_BUFFERED:Matrix3.Const.DELAY_IMMEDIAT;var a=h.moControl.msId.split(Matrix3.Const.SEPARATOR_CONTROL);Matrix3.AddEvent(a[0],"RESET_PARAMETER",Matrix3.Const.RETURNTYPE_VIEWSTATE,j,a[1])}};ParamMgr.QueueSaveEvents=function(){var f=new Array();var d=new Array();$.each(ParamMgr.moTable,function(h,i){if(i.HasValueChanged()){f.push(i)}if(i.mbToReset){d.push(i)}});ParamMgr.HideSaveButtons();for(var b=0,c=f.length;b<c;b++){var g=f[b];var a=g.moControl.msId.split(Matrix3.Const.SEPARATOR_CONTROL);Matrix3.AddEvent(a[0],"SAVE_PARAMETER",Matrix3.Const.RETURNTYPE_FULL,Matrix3.Const.DELAY_BUFFERED,a[1])}for(var b=0,c=d.length;b<c;b++){var g=d[b];var a=g.moControl.msId.split(Matrix3.Const.SEPARATOR_CONTROL);Matrix3.AddEvent(a[0],"RESET_PARAMETER",Matrix3.Const.RETURNTYPE_VIEWSTATE,Matrix3.Const.DELAY_BUFFERED,a[1])}};ParamMgr.AddCancelBtn=function(a){_oControl=$PI(a);this.moCancelbtns[_oControl.GetId()]=_oControl;Matrix3.RegisterInCache(_oControl.GetId(),ParamMgr);$(_oControl).click(function(){$.each(ParamMgr.moTable,function(b,c){c.RevertChanges()});ParamMgr.HideSaveButtons()})};ParamMgr.ShowSaveButtons=function(){if(!this.mbHasUnsavedChanges){$.each(this.moSaveBtns,function(a,b){Effect.Appear(b,0)});$.each(this.moCancelbtns,function(a,b){Effect.Appear(b,0)})}this.mbHasUnsavedChanges=true};ParamMgr.HideSaveButtons=function(){if(this.mbHasUnsavedChanges){$.each(this.moSaveBtns,function(a,b){$(b).addClass("InvisibleC")});$.each(this.moCancelbtns,function(a,b){$(b).addClass("InvisibleC")})}this.mbHasUnsavedChanges=false};ParamMgr.ShakeSaveButtons=function(){jQuery.fn.shake=function(c,a,b){this.each(function(){$(this).css("position","absolute");for(var f=1;f<=c;f++){var d=parseInt($(this).css("left"));$(this).animate({left:d+(a*-1)},(((b/c)/4))).animate({left:d+a},((b/c)/2)).animate({left:d},(((b/c)/4)))}});return this};$.each(this.moSaveBtns,function(a,b){$(b).shake(2,15,400)});$.each(this.moCancelbtns,function(a,b){$(b).shake(2,15,400)})};ParamMgr.RefreshNode=function(a){if(a){if(this.moTable.hasOwnProperty(a)){this.moTable[a].Recycle();delete this.moTable[a]}if(this.moSaveBtns.hasOwnProperty(a)){$(this.moSaveBtns[a]).off("click");delete this.moSaveBtns[a]}if(this.moCancelbtns.hasOwnProperty(a)){$(this.moCancelbtns[a]).off("click");delete this.moCancelbtns[a]}}};ParamControl.prototype={resize:function(){this.ChangeHandler();var a=false;var b=parseInt(this.moControl.moTextarea.style.height);this.moControl.moTextarea.style.height="auto";if(this.moControl.moTextarea.scrollHeight!=b){a=true}this.moControl.moTextarea.style.height=this.moControl.moTextarea.scrollHeight+"px";if(a){PositionMgr.GetInstance().AddToDirtyYList(this.moControl);PositionMgr.GetInstance().CalculatePosition()}},keydownControl:function(a){var b;if(a.keyCode){b=a.keyCode}else{if(a.which){b=a.which}}if(b==83&&a.ctrlKey){return false}else{this.delayedResize()}},delayedResize:function(){var a=this;window.setTimeout(function(){a.resize()},0)},DetailsHandler:function(){var a=this.moControl.msId.split(Matrix3.Const.SEPARATOR_CONTROL);Matrix3.AddEvent(a[0],"EDIT_PARAMETER",Matrix3.Const.RETURNTYPE_VIEWSTATE,Matrix3.Const.DELAY_IMMEDIAT,a[1])},ResetHandler:function(){if(!this.mbToReset){$(this.moControl).addClass("ParamReset");this.mbToReset=true;ParamMgr.ShowSaveButtons()}else{$(this.moControl).removeClass("ParamReset");this.mbToReset=false}},ChangeHandler:function(){var a;if(this.moControl.msCtrlType=="ParameterStr"){a=this.moControl.moTextarea.value}else{if(this.moControl.msCtrlType=="ParameterEnum"){a=$(this.moControl).find("input[name$=_Value]")[0].value}else{if(this.moControl.msCtrlType=="ParameterBool"){a=$(this.moControl).find("input")[0].checked}}}if(this.msInitialValue!=a){$(this.moControl).addClass("ParamChanged");ParamMgr.ShowSaveButtons()}else{$(this.moControl).removeClass("ParamChanged")}},HasValueChanged:function(){return $(this.moControl).hasClass("ParamChanged")},RevertChanges:function(){if(this.moControl.msCtrlType=="ParameterStr"){if(this.moControl.moTextarea.value!=this.msInitialValue){this.moControl.moTextarea.value=this.msInitialValue;this.delayedResize()}}else{if(this.moControl.msCtrlType=="ParameterEnum"){$(this.moControl).find("input[name$=_Value]")[0].value=this.msInitialValue}else{if(this.moControl.msCtrlType=="ParameterBool"){$(this.moControl).find("input")[0].checked=this.msInitialValue}}}$(this.moControl).removeClass("ParamChanged")},Recycle:function(){if(this.moControl.msCtrlType=="ParameterStr"){Utils.DetachEvent(this.moControl.moTextarea,"cut",this.delayedResize,this);Utils.DetachEvent(this.moControl.moTextarea,"paste",this.delayedResize,this);Utils.DetachEvent(this.moControl.moTextarea,"drop",this.delayedResize,this);Utils.DetachEvent(this.moControl.moTextarea,"keydown",this.keydownControl,this);if($(this.moControl).hasClass("Parameter_NotEditable")){$(this.moControl.moTextarea).find(".Details").off("click")}}else{if(this.moControl.msCtrlType=="ParameterEnum"){$E(this.moControl.msId).off("autocomp_select")}else{if(this.moControl.msCtrlType=="ParameterBool"){$(this.moControl).find("input").off("click")}}}$(this.moControl).find(".Details").off("click");$(this.moControl).find(".Reset").off("click")}};function Popup(a,b){this.msID=a.id;this.moGlobalContainer=null;this.moJGlobalContainer=null;this.moNode=a;this.moNodePI=null;this.moJNode=null;this.moInnerNode=null;this.msSkinFamilyAlias=b;this.moHeader=null;this.moCloseButton=null;this.moMask=null;this.mbIsForceCenteringEnabled=false;this.mbIsPopupShifting=false;this.msPopupPosition=Popup.Const.POSITION_CENTER;this.moPopupLayer=null;this._init()}Popup.prototype={Show:function(){TooltipProperties.HideOpenedTooltips();this.moMask.Show();$SetCss(this.moNode,{top:"0px",left:"0px",visibility:"visible",display:"block"});Popup.Counter++},Remove:function(a){var b=false;if(typeof CMS!=="undefined"){if(ParamMgr.mbHasUnsavedChanges){ParamMgr.ShakeSaveButtons();return}if(ControlMgr.GetInstance().GetReference(CMS.Const.FID_VFORM_EDIT_TOOLBAR)&&ControlMgr.GetInstance().GetReference(CMS.Const.FID_VFORM_EDIT_TOOLBAR).msId==this.msID){Matrix3.AddEvent(this.msID,CMS.Const.EVENT_EXIT_EDIT_MODE,Matrix3.Const.RETURNTYPE_VIEWSTATE,Matrix3.Const.DELAY_IMMEDIAT);return}b=true}Utils.DetachEvent(this.moClose,"click",this.Remove,this);delete (Matrix3.moPopupTable[this.msID]);var c=Utils.IndexOf(Matrix3.maPopupStack,this.msID);if(c!=-1){Matrix3.maPopupStack.splice(c,1)}var f=this.msID+Matrix3.Const.SEPARATOR_CONTROL+Popup.Const.POPUP_COMMAND;var d=document.getElementById(f);if(d){$Control(f,ButtonCtrl.Const.CONTROL_NAME).Action_SendEvent()}if(a===true){Matrix3.NewRefreshCaches(this.moNode.id);this.moNodePI.RecursiveRemove()}else{Matrix3.NewRefreshCaches(this.msID);$PI(this.msID).RecursiveRemove()}this.moJGlobalContainer.remove();this.moMask.Destroy();Popup.counter--;if(b){Matrix3.moCMS.ClosePopup()}},CenterIfNeeded:function(){if(!this.mbCentered){this.mbCentered=true;this.Center()}},Center:function(){var f=Utils.GetViewportWidth();var d=Utils.GetViewportHeight();var j=this.moJNode;var c=this.moJNode.width();var b=this.moJNode.height();var l={};switch(this.msPopupPosition){case Popup.Const.POSITION_CENTER:default:l=this.CalculateCoordinateCenter(f,d,c,b);break;case Popup.Const.POSITION_TOP_LEFT:l=this.CalculateCoordinateTopLeft(f,d,c,b);break;case Popup.Const.POSITION_TOP_RIGHT:l=this.CalculateCoordinateTopRight(f,d,c,b);break;case Popup.Const.POSITION_BOTTOM_LEFT:l=this.CalculateCoordinateBottomLeft(f,d,c,b);break;case Popup.Const.POSITION_BOTTOM_RIGHT:l=this.CalculateCoordinateBottomRight(f,d,c,b);break}var g=l.x;var h=l.y;var a=false;if(h<=Popup.Const.WINDOW_OFFSET){h=Popup.Const.WINDOW_OFFSET}if(this.mbIsPopupShifting===true){g+=(Popup.Counter-1)*Popup.Const.GAP_SIZE;h+=(Popup.Counter-1)*Popup.Const.GAP_SIZE}var k=this._GetMargins();if(k.top&&k.top>0){if(h<(k.top/2)){h+=(k.top/2)}}if(k.left&&k.left>0){if(g<(k.left/2)){g+=(k.left/2)}}var i={left:g+"px",top:h+"px"};$SetCss(this.moNode.id,i);this.moJNode.draggable("option","containment",this._GetDraggableContainment())},CalculateCoordinateCenter:function(d,c,b,a){var h={x:0,y:0};var f=(d/2)-(b/2);var g=(c/2)-(a/2);if(f<0){f=0}if(g<0){g=0}h.x=f;h.y=g;return h},CalculateCoordinateTopLeft:function(d,c,b,a){var h={x:0,y:0};var f=Popup.Const.GAP_SIZE;var g=Popup.Const.GAP_SIZE;if(f<0){f=0}if(g<0){g=0}h.x=f;h.y=g;return h},CalculateCoordinateTopRight:function(d,c,b,a){var h={x:0,y:0};var f=Popup.Const.GAP_SIZE;var g=d-Popup.Const.GAP_SIZE;if(f<0){f=0}if(g<0){g=0}h.x=f;h.y=g;return h},CalculateCoordinateBottomLeft:function(d,c,b,a){var h={x:0,y:0};var f=Popup.Const.GAP_SIZE;var g=c-Popup.Const.GAP_SIZE;if(f<0){f=0}if(g<0){g=0}h.x=f;h.y=g;return h},CalculateCoordinateBottomRight:function(d,c,b,a){var h={x:0,y:0};var f=d-Popup.Const.GAP_SIZE-b;var g=c-Popup.Const.GAP_SIZE-a;if(f<0){f=0}if(g<0){g=0}h.x=f;h.y=g;return h},RefreshPositionOnScreen:function(){var f=this.moJNode.offset().top+this.moJNode.outerHeight();var a=$(window).outerHeight()+Utils.GetDocument().scrollTop;var d=this.moJNode.offset().top;if(f>(a-Popup.Const.GAP_SIZE)&&d>Popup.Const.GAP_SIZE){var c=this.moJNode.offset().top;var b=f-(a-Popup.Const.GAP_SIZE);c-=b;if(c>=Popup.Const.GAP_SIZE){this.moJNode.animate({top:c+"px"},300)}}},_init:function(){this.moPopupLayer=document.getElementById(Matrix3.Const.POPUP_LAYER_ID);this._BuildMask();this._PreBuildPopup();var a=$PI(this.msID+Popup.Const.CONTAINER_SUFFIX);var b=$PI(this.msID);if(typeof this.msSkinFamilyAlias=="string"&&this.msSkinFamilyAlias!=""){$RemoveClass(this.msID,Popup.Const.CONTAINER_CLASS);$AddClass(this.msID,this.msSkinFamilyAlias+Popup.Const.CONTAINER_CLASS)}PositionMgr.GetInstance().moXDirtyHeap.Remove(a);PositionMgr.GetInstance().moXDirtyHeap.Remove(b);PositionMgr.GetInstance().moYDirtyHeap.Remove(a);PositionMgr.GetInstance().moYDirtyHeap.Remove(b);ControlMgr.GetInstance().RemovePositionItem(a);ControlMgr.GetInstance().RemovePositionItem(b);a.GetNode().id=this.msID;b.GetNode().id=this.msID+Popup.Const.CONTAINER_SUFFIX;a.msId=a.GetNode().id;b.msId=b.GetNode().id;PositionMgr.GetInstance().moXDirtyHeap.Add(a);PositionMgr.GetInstance().moXDirtyHeap.Add(b);PositionMgr.GetInstance().moYDirtyHeap.Add(a);PositionMgr.GetInstance().moYDirtyHeap.Add(b);ControlMgr.GetInstance().AddPositionItem(a);ControlMgr.GetInstance().AddPositionItem(b);this.moInnerNode=a;this.moJNode=$(this.moNode);this.moNodePI=$PI(this.msID);if(typeof this.msSkinFamilyAlias=="string"&&this.msSkinFamilyAlias!=""){$AddClass(this.msID,this.msSkinFamilyAlias)}if(this.moNodePI.GetProperty(Popup.Const.PROP_POPUP_SHIFTING)){this.mbIsPopupShifting=true}if(this.moNodePI.GetProperty(Popup.Const.PROP_POPUP_POSITION)){this.msPopupPosition=this.moNodePI.GetProperty(Popup.Const.PROP_POPUP_POSITION)}if(this.moNodePI.GetProperty(Popup.Const.PROP_POPUP_CENTERING)){this.mbIsForceCenteringEnabled=true}this._BuildPopup()},_GetDraggableContainment:function(){return false},_BuildHeader:function(){this.moHeader=document.getElementById(this.msID+Popup.Const.HEADER_SUFFIX);this.moClose=document.getElementById(this.msID+Popup.Const.CLOSE_SUFFIX);Utils.AddEvent(this.moClose,"click",this.Remove,this)},_BuildMask:function(){this.moMask=Utils.BuildMask(this.msID+Popup.Const.MASK_SUFFIX,Popup.Const.MASK_CLASS,this.moPopupLayer)},_PreBuildPopup:function(){this.moGlobalContainer=document.createElement("div");this.moJGlobalContainer=$(this.moGlobalContainer);this.moJGlobalContainer.addClass(Popup.Const.SCROLLABLE_CONTAINER_CLASS).css("z-index",StackMgr.GetInstance().GetIndex()).append(this.moNode);this.moPopupLayer.appendChild(this.moGlobalContainer)},_BuildPopup:function(){$SetCss(this.moNode,{"z-index":StackMgr.GetInstance().GetIndex()});this._BuildHeader();var a=this;this.moJNode.draggable({handle:a.moHeader,scroll:false,containment:a._GetDraggableContainment()})},_GetMargins:function(){return{top:this.moJNode.css("margin-top").replace("px",""),right:this.moJNode.css("margin-right").replace("px",""),bottom:this.moJNode.css("margin-bottom").replace("px",""),left:this.moJNode.css("margin-left").replace("px","")}}};Popup.Counter=0;Popup.Const={CONTROL_NAME:"Popup",CONTAINER_CLASS:"PopupC",SCROLLABLE_CONTAINER_CLASS:"PopupScrollContainer",CONTAINER_SUFFIX:":_Popup",TITLE_SUFFIX:":_Title",CONTENT_CLASS:"DefaultPopupClass",SCROLLABLE_PNL:"PopupScrollablePnl",MASK_CLASS:"MaskC",MASK_SUFFIX:":_Mask",HEADER_CLASS:"PopupHeaderC",HEADER_SUFFIX:":_Header",CLOSE_CLASS:"PopupCloseC",CLOSE_SUFFIX:":_Close",BORDER_SIZE:2,BORDER_SHADOW:18,POPUP_TITLE:"VFormTitle",POPUP_COMMAND:"PopupCommand",TITLE_CLASS:"PopupTitleC",SHADOW_SUFFIX:":_Shadow",CLASS_SHADOW:"ShadowC",CLASS_INNER_PNL:"PopupInnerPnlC",INNER_PNL_SUFFIX:":_PopupInnerPnl",PROP_POPUP_SHIFTING:"PopupShifting",PROP_POPUP_CENTERING:"PopupCentering",PROP_POPUP_POSITION:"PopupPosition",GAP_SIZE:30,CONTENT_PADDING:20,DRAGGABLE_OFFSET:100,WINDOW_OFFSET:15,POSITION_CENTER:"center",POSITION_TOP_LEFT:"topleft",POSITION_TOP_RIGHT:"topright",POSITION_BOTTOM_LEFT:"bottomleft",POSITION_BOTTOM_RIGHT:"bottomright"};HTMLElement.prototype.CalculateXPositionFloatPnl=function(a,b){if(this.mbHorizontalFlow){var d=this.miWidth;var c=this.CalculateXPositionContainer();if(d!=this.miWidth){PositionMgr.GetInstance().AddToDirtyYList(this)}return c}else{var c=this.CalculateOrthogonalDirection();c=this.CalculateXPositionContainer()||c;return c}};HTMLElement.prototype.CalculateYPositionFloatPnl=function(a,b){if(this.mbHorizontalFlow){var c=this.CalculateOrthogonalDirection();c=this.CalculateYPositionContainer()||c;return c}else{var d=this.miHeight;var c=this.CalculateYPositionContainer();if(d!=this.miHeight){PositionMgr.GetInstance().AddToDirtyXList(this)}return c}};HTMLElement.prototype.CalculateOrthogonalDirection=function(a,b){var g=false;var t=0;if(this.mbHorizontalFlow){q=this.GetPaddingLeft();miNextLineOrthogonalCoords=k=this.GetPaddingTop()}else{q=this.GetPaddingTop();miNextLineOrthogonalCoords=k=this.GetPaddingLeft()}var x=this.GetContainerForChildren();var f;if(this.mbHorizontalFlow){f=this.GetOriginalWidth()==-1}else{f=this.GetOriginalHeight()==-1}var d=true;var c=true;var u=this.GetOwnFlowSize();var n;if(this.mbHorizontalFlow){n=u-this.GetPaddingRight()}else{n=u-this.GetPaddingBottom()}var p=x.length;var h;for(h=0;h<p;h++){var y=x[h];y.SetXType("");y.SetYType("");var l;var r;var q;var k;l=this.miForcedFlowSpacing;r=this.miForcedOrthgonalSpacing;var i=this.GetControlFlowSize(y);if(!f){if(q+i+l>n&&!c){if(this.mbHorizontalFlow){q=this.GetPaddingLeft()}else{q=this.GetPaddingTop()}k=miNextLineOrthogonalCoords;c=true;d=false}}if(c){this.SetControlFlowOffset(y,q)}else{this.SetControlFlowOffset(y,q+l)}if(d){this.SetControlOrthogonalOffset(y,k)}else{this.SetControlOrthogonalOffset(y,k+r)}q=i+this.GetControlFlowOffset(y);miNextLineOrthogonalCoords=Math.max(miNextLineOrthogonalCoords,this.GetControlOrthogonalOffset(y)+this.GetControlOrthogonalSize(y));y.CalculateXPosition();y.CalculateYPosition();var j;if(this.mbHorizontalFlow){j=y.y}else{j=y.x}if(this.GetOwnOriginalOrthogonalSize()==-1){t=Math.max(t,j+Math.max(0,this.GetControlOrthogonalSize(y)))}c=false}if(this.GetOwnOriginalOrthogonalSize()==-1&&t!=this.GetOwnOrthogonalSize()){if(this.mbHorizontalFlow){this.SetHeight(t)}else{this.SetWidth(t)}this.SetUpdateStyle(true);g=true}if(f&&q!=u){if(this.mbHorizontalFlow){PositionMgr.GetInstance().AddToDirtyXList(this)}else{PositionMgr.GetInstance().AddToDirtyYList(this)}}if(!f&&this.GetProperty(ConstProperties.Const.PROPERTY_FLOAT_AUTO_SPACING)&&p>0){h=0;var y=x[0];var r=this.GetControlOrthogonalOffset(y);while(h<p&&r==this.GetControlOrthogonalOffset(x[h])){h++}if(h<p){var o=h;var z=x[o-1];var v=this.GetOwnFlowSize()-(this.GetControlFlowOffset(z)+this.GetControlFlowSize(z));var w=v/(o-1);for(h=0;h<p;h++){var m=h%o;var y=x[h];this.SetControlFlowOffset(y,this.GetControlFlowOffset(y)+(w*m));y.CalculateXPosition();y.CalculateYPosition()}}}return g};HTMLElement.prototype.GetOwnFlowSize=function(){if(this.mbHorizontalFlow){return this.miWidth}else{return this.miHeight}};HTMLElement.prototype.GetOwnOrthogonalSize=function(){if(this.mbHorizontalFlow){return this.miHeight}else{return this.miWidth}};HTMLElement.prototype.GetOwnOriginalOrthogonalSize=function(){if(this.mbHorizontalFlow){return this.GetOriginalHeight()}else{return this.GetOriginalWidth()}};HTMLElement.prototype.GetControlFlowOffset=function(a){if(this.mbHorizontalFlow){return a.miXOff}else{return a.miYOff}};HTMLElement.prototype.GetControlFlowSize=function(a){if(this.mbHorizontalFlow){return a.miWidth}else{return a.miHeight}};HTMLElement.prototype.GetControlOrthogonalOffset=function(a){if(this.mbHorizontalFlow){return a.miYOff}else{return a.miXOff}};HTMLElement.prototype.GetControlOrthogonalSize=function(a){if(this.mbHorizontalFlow){return a.miHeight}else{return a.miWidth}};HTMLElement.prototype.GetControlOriginalFlowOffset=function(a){if(this.mbHorizontalFlow){return a.GetOriginalXOff()}else{return a.GetOriginalYOff()}};HTMLElement.prototype.GetControlOriginalOrthogonalOffset=function(a){if(this.mbHorizontalFlow){return a.GetOriginalYOff()}else{return a.GetOriginalXOff()}};HTMLElement.prototype.SetControlFlowOffset=function(b,a){if(this.mbHorizontalFlow){return b.miXOff=a}else{return b.miYOff=a}};HTMLElement.prototype.SetControlOrthogonalOffset=function(b,a){if(this.mbHorizontalFlow){return b.miYOff=a}else{return b.miXOff=a}};function RadioButtonListCtrl(a){this.msID=a;this.msControlID=a}RadioButtonListCtrl.Const={CONTROL_NAME:"RadioButtonList"};RadioButtonListCtrl.prototype={Event_Change_Setup:function(a){this.Event_Change=new CtrlEvent(this,function(){var b=1;while($Elt(this.msControlID+"_"+b)){if(!a||a==$Elt(this.msControlID+"_"+b).value){Utils.AddEvent(this.msControlID+"_"+b,"click",this.Event_Change.Fire,this.Event_Change)}b++}})},Action_SetValue:function(a){var b=1;while($Elt(this.msControlID+"_"+b)){if(a==$Elt(this.msControlID+"_"+b).value){$Elt(this.msControlID+"_"+b).checked=true}b++}}};Utils.Augment(RadioButtonListCtrl,MatrixEventProperties);Utils.Augment(RadioButtonListCtrl,DragProperties);Utils.Augment(RadioButtonListCtrl,DropProperties);Utils.Augment(RadioButtonListCtrl,SelectionProperties);function SlideshowCtrl(a){this.msID=a;this.moPosItem;this.maImages;this.maAnimations;this.miCurrentIndex=-1;this.mbPlaying=true;this.miIntervalId}SlideshowCtrl.Const={CONTROL_NAME:"Slideshow",PROPERTY_SLIDESHOW_ID:"SlideshowID",PROPERTY_AUTO_PLAY:"AutoPlay",PROPERTY_DELAY:"Delay",PROPERTY_TRANSITION_DURATION:"TransitionDuration"};SlideshowCtrl.prototype={Configure:function(f){this.moPosItem=f;this.miDelay=f.GetProperty(SlideshowCtrl.Const.PROPERTY_DELAY,5000);this.mbPlaying=f.GetProperty(SlideshowCtrl.Const.PROPERTY_AUTO_PLAY,true);this.miTransitionDuration=f.GetProperty(SlideshowCtrl.Const.PROPERTY_TRANSITION_DURATION,500);if(Utils.IsIPad()){this.miTransitionDuration=0}if(this.miDelay<=0){this.mbPlaying=false}var a;if(f.GetChildNodes().length>0&&f.GetChildNodes()[0].tagName.toUpperCase()=="A"){a=f.GetChildNodes()[0].childNodes}else{a=f.GetChildNodes()}this.maImages=new Array();for(var b=0,c=a.length;b<c;b++){var d=a[b];if(d.nodeType==1&&d.tagName.toUpperCase()=="IMG"){this.maImages.push(d)}}if(this.maImages.length>0){var g=this;if(Utils.IsIE8()){for(var b=0,c=this.maImages.length;b<c;b++){$(this.maImages[b]).hide()}}setTimeout(function(){g.ShowItem(0);if(g.mbPlaying){g.StartPlaying()}},1)}},ShowItem:function(_iIndex){var iDesiredIndex=(_iIndex+this.maImages.length)%this.maImages.length;if(iDesiredIndex!=this.miCurrentIndex){if(this.miCurrentIndex!=-1){var oNodeToHide=this.maImages[this.miCurrentIndex];$(oNodeToHide).stop().fadeTo(this.miTransitionDuration,0)}var oNodeToShow=this.maImages[iDesiredIndex];$SetStyle(oNodeToShow,"position","absolute");if(!this.moPosItem.moLinkedImage){this.moPosItem.moLinkedImage=oNodeToShow;this.moPosItem.SetProperty("DocumentWidth",$(oNodeToShow).attr("width"));this.moPosItem.SetProperty("DocumentHeight",$(oNodeToShow).attr("height"));$SetStyle(this.moPosItem.moLinkedImage,"visibility","hidden")}this.moPosItem.moLinkedImage=oNodeToShow;if(!oNodeToShow.complete){if($(oNodeToShow).attr("src")==undefined){$(oNodeToShow).attr("src",$(oNodeToShow).attr("data-src"))}var self=this;$(oNodeToShow).load(function(){AutoScaleProperties.Apply(self.moPosItem);DOMChangesQueue.GetInstance().ApplyQueue()})}else{AutoScaleProperties.Apply(this.moPosItem);DOMChangesQueue.GetInstance().ApplyQueue()}this.moPosItem.TransferPositioningToDOM();$(oNodeToShow).stop().fadeTo(this.miTransitionDuration,1);this.miCurrentIndex=iDesiredIndex;var oMetaTextTable=new Object();if(oNodeToShow.attributes["data-info"]){oMetaTextTable=eval("("+oNodeToShow.attributes["data-info"].value+")")}SlideshowMgr.GetInstance().UpdateSlaves(this.moPosItem.GetProperty(SlideshowCtrl.Const.PROPERTY_SLIDESHOW_ID),oMetaTextTable);var iNextIndex=(_iIndex+1)%this.maImages.length;var oNextItem=$(this.maImages[iNextIndex]);if(oNextItem.attr("src")==undefined){oNextItem.attr("src",oNextItem.attr("data-src"))}}},StartPlaying:function(){var a=this;this.miIntervalId=setInterval(function(){a.ShowNextItem()},this.miDelay)},PausePlaying:function(){clearInterval(this.miIntervalId)},ShowNextItem:function(){this.ShowItem(this.miCurrentIndex+1)},Action_SetValue:function(a){var b=parseInt(a);this.ShowItem(b)},Action_ShowNext:function(a){this.PausePlaying();this.ShowItem(this.miCurrentIndex+1)},Action_ShowPrevious:function(a){this.PausePlaying();this.ShowItem(this.miCurrentIndex-1)},Action_PlaySlideshow:function(a){this.StartPlaying()},Action_PauseSlideshow:function(a){this.PausePlaying()}};Utils.Augment(SlideshowCtrl,HyperlinkProperties);function SlideshowMgr(){this.moRegisteredControls=new Object()}SlideshowMgr.moSingleton=null;SlideshowMgr.GetInstance=function(){if(!SlideshowMgr.moSingleton){SlideshowMgr.moSingleton=new SlideshowMgr()}return SlideshowMgr.moSingleton};SlideshowMgr.prototype={RegisterNode:function(a){var h=new Array();h.push(a);var c=new Array();var b=new Array();while(h.length>0){var f=h.pop();if(Utils.IsIE8()==true){f=new HTMLElement(f)}if(f.nodeType==3){if(this.PropertyNeedContextualization(f.nodeValue)){c.push(f);f.msBaseValue=f.nodeValue;bResult=true}}else{if(f.nodeType==1){if(f.attributes&&f.attributes.href&&this.PropertyNeedContextualization(f.attributes.href.value)){f.msBaseLink=f.attributes.href.value;b.push(f);bResult=true}}}var d=f.childNodes;if(d){for(var g in d){h.push(d[g])}}}if(c.length>0){a.SetProperty("SlideshowTemplatedTextNodes",c)}if(b.length>0){a.SetProperty("SlideshowTemplatedLinkNodes",b)}if(c.length>0||b.length>0){var i=a.GetProperty(SlideshowCtrl.Const.PROPERTY_SLIDESHOW_ID);if(i){if(!this.moRegisteredControls.hasOwnProperty(i)){this.moRegisteredControls[i]=new Object()}this.moRegisteredControls[i][a.msId]=a}}},UpdateSlaves:function(b,a){if(this.moRegisteredControls.hasOwnProperty(b)){var f=false;var k=this.moRegisteredControls[b];for(var l in k){var j=k[l];var d=j.GetProperty("SlideshowTemplatedTextNodes");var g;var h;var i;if(d!=null){for(g=0,h=d.length;g<h;g++){i=d[g];i.nodeValue=this.ReplaceMetaText(i.msBaseValue,a);if(Utils.IsIE8()){$(i.moDOMNode)[0].nodeValue=i.nodeValue}f=true;PositionMgr.GetInstance().AddToDirtyXList(j);PositionMgr.GetInstance().AddToDirtyYList(j)}}var c=j.GetProperty("SlideshowTemplatedLinkNodes");if(c!=null){for(g=0,h=c.length;g<h;g++){i=c[g];i.attributes.href.value=this.ReplaceMetaText(i.msBaseLink,a)}}}if(f&&!Matrix3.mbEvent){PositionMgr.GetInstance().CalculatePosition()}}},PropertyNeedContextualization:function(a){var b=false;if(a!=null&&a!=""){if(a.indexOf(TooltipProperties.Const.LEFTMARKUP)!=-1&&a.indexOf(TooltipProperties.Const.RIGHTMARKUP)!=-1){b=true}}return b},ReplaceMetaText:function(b,a){var c=new Array();if(b!=null&&b!=""){var g=b.split(TooltipProperties.Const.LEFTMARKUP);c.push(g[0]);var d;var h;for(d=0,lenICpt=g.length;d<lenICpt;d++){h=g[d];if(h.indexOf(TooltipProperties.Const.RIGHTMARKUP)!=-1){var f=h.indexOf(TooltipProperties.Const.RIGHTMARKUP);var i=h.substring(0,f);if(a.hasOwnProperty(i)){c.push(a[i])}c.push(h.substr(f+1))}}}return c.join("")}};function TextAreaCtrl(a){this.msID=a;this.msControlID=a;this.mbTextArea=true}TextAreaCtrl.Const={CONTROL_NAME:"TextArea"};Utils.Augment(TextAreaCtrl,MatrixEventProperties);Utils.Augment(TextAreaCtrl,DragProperties);Utils.Augment(TextAreaCtrl,DropProperties);Utils.Augment(TextAreaCtrl,SelectionProperties);Utils.Augment(TextAreaCtrl,ClipboardProperties);Utils.Augment(TextAreaCtrl,InPlaceEditorProperties);Utils.Augment(TextAreaCtrl,FocusProperties);Utils.Augment(TextAreaCtrl,ChangeEvent);Utils.Augment(TextAreaCtrl,ClearAction);function TextBoxCtrl(a){this.msID=a;this.msControlID=a}TextBoxCtrl.Const={CONTROL_NAME:"TextBox"};TextBoxCtrl.prototype={Action_SetValue:function(a){$E(this.msControlID).val(a)}};Utils.Augment(TextBoxCtrl,MatrixEventProperties);Utils.Augment(TextBoxCtrl,DragProperties);Utils.Augment(TextBoxCtrl,DropProperties);Utils.Augment(TextBoxCtrl,SelectionProperties);Utils.Augment(TextBoxCtrl,ClipboardProperties);Utils.Augment(TextBoxCtrl,InPlaceEditorProperties);Utils.Augment(TextBoxCtrl,ClassProperties);Utils.Augment(TextBoxCtrl,FocusProperties);Utils.Augment(TextBoxCtrl,CommandProperties);Utils.Augment(TextBoxCtrl,ChangeEvent);Utils.Augment(TextBoxCtrl,ClickEvent);Utils.Augment(TextBoxCtrl,BlurEvent);Utils.Augment(TextBoxCtrl,ClearAction);function TextBoxPasswordCtrl(a){this.msID=a;this.msControlID=a}TextBoxPasswordCtrl.Const={CONTROL_NAME:"TextBoxPassword"};Utils.Augment(TextBoxPasswordCtrl,MatrixEventProperties);Utils.Augment(TextBoxPasswordCtrl,ChangeEvent);Utils.Augment(TextBoxPasswordCtrl,FocusProperties);function TimeCtrl(a){this.msID=a}TimeCtrl.Const={CONTROL_NAME:"Time",MODE_ASCENDANT:"ascendant",MODE_DESCENDANT:"descendant",DISPLAY_PROGRESS_BAR:"progressbar",SUFFIX_PROGRESS_BAR:"_ProgressBar",SUFFIX_INNER_PROGRESS_BAR:"_InnerProgressBar",SUFFIX_TIME:"_Time"};TimeCtrl.prototype={Setup:function(a,c,b,d){this.miTime=parseInt(a);this.msTimeMode=c;this.msTimeDisplay=b;this.miTotalTime=parseInt(d);var f=60000;if(this.miTotalTime!=0){var g=this;window.setInterval(function(){g.ChangeTime()},f)}},ChangeTime:function(){if(this.msTimeDisplay==TimeCtrl.Const.DISPLAY_PROGRESS_BAR){var c=this.miTime*100/this.miTotalTime;var b=Math.abs(Math.floor(this.miTime/this.miTotalTime));this.miTime++;var a=Math.abs(Math.floor(this.miTime/this.miTotalTime));if(c>100){if(a>3){c=100}else{c=c%100}}if(c==0){c=100}if(c==100&&a<=3){$RemoveClass(this.msID+TimeCtrl.Const.SUFFIX_PROGRESS_BAR,"x"+b+"Class");$AddClass(this.msID+TimeCtrl.Const.SUFFIX_PROGRESS_BAR,"x"+a+"Class");c=0}$SetStyle(this.msID+TimeCtrl.Const.SUFFIX_INNER_PROGRESS_BAR,"width",c+"%")}else{if(this.msTimeMode==TimeCtrl.Const.MODE_ASCENDANT){this.miTime+=1;this.FormatTime()}else{this.miTime-=1;this.FormatTime()}}},FormatTime:function(){$Elt(this.msID+TimeCtrl.Const.SUFFIX_TIME).innerHTML=Math.floor(this.miTime/60)+"h"+Math.abs(this.miTime%60)+"m"}};function UploadCtrl(a){this.msID=a;this.Event_UploadCompleted=new CtrlEvent();this.Event_UploadStarted=new CtrlEvent()}UploadCtrl.Const={CONTROL_NAME:"Upload",SUFFIX_IFRAME:"_Iframe",SUFFIX_UPLOAD_FILE:"_UploadFile",SUFFIX_NAME:"_Name",SUFFIX_PATH:"_Path",SUFFIX_FORM:"_Form",SUFFIX_CANCEL:"_Cancel",CLASS_IFRAME_CLOSED:"IframeClosedClass",STATE_NOFILE:"0",STATE_INPROGRESS:"1",STATE_COMPLETED:"2",UPLOAD_URL:"C.aspx?VP3=Upload",URL_FILE:"File",URL_PARENT_CONTROL_ID:"ParentControlID",URL_ALLOWED_EXTENSIONS:"ae",PARAM_PARENT_CONTROL_ID:"ParentControlID",PARAM_PATH:"Path"};UploadCtrl.miUploadInProgress=0;UploadCtrl.prototype={Setup:function(b,a){this.msAllowedExtensions=b;this.mbIsFrontEnd=a;Utils.AddEvent($Elt(this.msID+UploadCtrl.Const.SUFFIX_CANCEL),"click",this.Cancel,this)},Cancel:function(){$Elt(this.msID+UploadCtrl.Const.SUFFIX_IFRAME).src=UploadCtrl.Const.UPLOAD_URL+"&"+UploadCtrl.Const.URL_PARENT_CONTROL_ID+"="+this.msID+"&r="+Math.random()+"&"+UploadCtrl.Const.URL_ALLOWED_EXTENSIONS+"="+this.msAllowedExtensions+"&fe="+this.mbIsFrontEnd}};function UploadFieldCtrl(a){this.msID=a}UploadFieldCtrl.Const={CONTROL_NAME:"UploadField",SUFFIX_LOADING:"_Loading",SUFFIX_ALLOWED_EXTENSIONS:"_AllowedExtensions"};UploadFieldCtrl.prototype={Setup:function(b,a){Utils.AddEvent(this.msID,"change",this.UploadFile,this);this.msParentControlID=b;this.msAllowedExtensions=a},UploadFile:function(){var f=Utils.Trim($Elt(this.msID).value);if(f!=""){if(Utils.Trim(this.msAllowedExtensions)!=""){var c=this.msAllowedExtensions.replace(/,/g,"|\\.");c=c.replace(/ /g,"");var a=$Elt(this.msID+UploadFieldCtrl.Const.SUFFIX_ALLOWED_EXTENSIONS);var b=new RegExp("^.*(\\."+c+")$");if(!b.test(f.toLowerCase())){$Elt(this.msID).value="";if(!Utils.IsIE()){$AddClass(a,StyleMgr.Const.CLASS_WARNING);Effect.Pulse(a,0.3,false)}else{alert("This type of file is not accepted. Allowed extensions: "+this.msAllowedExtensions)}return}$AddClass(a.id,StyleMgr.Const.CLASS_INVISIBLE)}parent.UploadCtrl.miUploadInProgress++;$AddClass(this.msID,StyleMgr.Const.CLASS_INVISIBLE);parent.$AddClass(this.msParentControlID+UploadCtrl.Const.SUFFIX_IFRAME,UploadCtrl.Const.CLASS_IFRAME_CLOSED);parent.$RemoveClass(this.msParentControlID+UploadFieldCtrl.Const.SUFFIX_LOADING,StyleMgr.Const.CLASS_INVISIBLE);parent.$RemoveClass(this.msParentControlID+UploadCtrl.Const.SUFFIX_CANCEL,StyleMgr.Const.CLASS_INVISIBLE);var d=this.msID.split(Matrix3.Const.SEPARATOR_CONTROL)[0];parent.$Control(this.msParentControlID,UploadCtrl.Const.CONTROL_NAME).Event_UploadStarted.Fire();Matrix3.DoPostBack(d,"UPLOAD")}}};function VideoCtrl(a){this.msID=a}VideoCtrl.Const={CONTROL_NAME:"Video",SUFFIX_MOVIE:"_Video"};VideoCtrl.prototype={Setup:function(g,h,f,d,a,c,b){if(h==""){h="100%"}if(f==""){f="100%"}this.mdStartPoint=c;this.mdEndPoint=b;this.sWidth=h;this.sHeight=f;this.sSource=g;this.flashvars={width:"100%",height:"100%"};var m=this.sSource.indexOf("?");if(m!=-1){var p=this.sSource.substring(m+1);this.sSource=this.sSource.substring(0,m);var j=p.split("&");for(var k=0,n=j.length;k<n;k++){var l=j[k].indexOf("=");if(l!=-1){this.flashvars[j[k].substring(0,l)]=j[k].substring(l+1)}else{this.flashvars[j[k]]=""}}}var q=this.msID+FlashCtrl.Const.SUFFIX_MOVIE;this.params={allowfullscreen:"true",allowscriptaccess:"always"};if(!a){this.params.wmode="transparent"}this.attributes={id:q,name:q};var o=document.createElement("div");o.setAttribute("id",q);$Elt(this.msID).appendChild(o)},AddVariable:function(a,b){this.flashvars[a]=b},Start:function(){jwplayer(this.msID+FlashCtrl.Const.SUFFIX_MOVIE).setup(this.flashvars)},Action_PlayVideo:function(){this.flashvars.autostart="true";jwplayer(this.msID+FlashCtrl.Const.SUFFIX_MOVIE).setup(this.flashvars)},Action_PauseVideo:function(){this.flashvars.autostart="false";jwplayer(this.msID+FlashCtrl.Const.SUFFIX_MOVIE).setup(this.flashvars)},};